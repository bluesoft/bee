create sequence log_sequencia;
create sequence seq_acordo_baixa_custo;
create sequence seq_acordo_baixa_custo_item;
create sequence seq_administradora;
create sequence seq_agendamento_transferencia;
create sequence seq_ajuste_estoque;
create sequence seq_ajuste_trocas;
create sequence seq_apuracao_competencia;
create sequence seq_arquivo_edi;
create sequence seq_arquivo_edi_linha;
create sequence seq_arquivo_nfe;
create sequence seq_arquivo_nfe_receb;
create sequence seq_baixa_cartao;
create sequence seq_banco_bloqueto;
create sequence seq_banco_cobranca;
create sequence seq_banco_extrato;
create sequence seq_banco_extrato_historico;
create sequence seq_banco_extrato_saldo;
create sequence seq_banco_pagamento;
create sequence seq_banco_pagamento_titulos;
create sequence seq_bandeira;
create sequence seq_bandeira_desconhecida;
create sequence seq_bin_cartao;
create sequence seq_boleto_bancario;
create sequence seq_bordero_caixa;
create sequence seq_bordero_caixa_item;
create sequence seq_cadastro_caixa;
create sequence seq_cadastro_caixa_ocorrencia;
create sequence seq_card_ajuste_rv;
create sequence seq_card_comprovante_venda;
create sequence seq_card_cv_parcela;
create sequence seq_card_cv_request;
create sequence seq_card_ordem_credito;
create sequence seq_card_resumo_venda;
create sequence seq_cartorio_detalhe;
create sequence seq_cheque_emitido;
create sequence seq_classificacao_fiscal;
create sequence seq_classificacao_fiscal_uf;
create sequence seq_cld_tributos;
create sequence seq_cobranca;
create sequence seq_cofins;
create sequence seq_competencia_contabil;
create sequence seq_competencia_contabil_loja;
create sequence seq_composicao_compra;
create sequence seq_conc_fininvest_key;
create sequence seq_consulta_credito;
create sequence seq_consulta_credito_diaria;
create sequence seq_consulta_credito_periodo;
create sequence seq_consulta_nfe;
create sequence seq_consulta_st_servico_nfe;
create sequence seq_conta_bancaria_dependente;
create sequence seq_conta_bancaria_parms;
create sequence seq_contador_nota;
create sequence seq_conta_fornecedor_credito;
create sequence seq_conta_fornecedor_debito;
create sequence seq_contas_contabeis;
create sequence seq_contrato_carro_forte;
create sequence seq_contrato_servico_rateio;
create sequence seq_convenio_bancario;
create sequence seq_convenio_bancario_loja;
create sequence seq_cupom_devolvido;
create sequence seq_cupom_manual;
create sequence seq_desconto;
create sequence seq_dias_pagamento;
create sequence seq_dias_recebimento;
create sequence seq_distribuicao_demanda;
create sequence seq_distribuicao_logistica;
create sequence seq_distribuicao_logist_item;
create sequence seq_divergencia_impor_log_item;
create sequence seq_divergencia_importacao_log;
create sequence seq_edi_cartao_item;
create sequence seq_edi_cartao_linha;
create sequence seq_edi_cartao_lote;
create sequence seq_endereco_logistico;
create sequence seq_endereco_logistico_area;
create sequence seq_escrita_apuracao;
create sequence seq_escrita_apuracao_uf;
create sequence seq_escrita_fiscal;
create sequence seq_escrita_fiscal_item;
create sequence seq_estabelecimento_filial;
create sequence seq_estabelecimento_matriz;
create sequence seq_estoque_comprometido;
create sequence seq_exercicio_contabil;
create sequence seq_exportacao_redf;
create sequence seq_fatura;
create sequence seq_folha_pagamento;
create sequence seq_folha_pagamento_detalhe;
create sequence seq_folha_pagamento_func;
create sequence seq_fornecedor_divisao;
create sequence seq_fornecedor_produto;
create sequence seq_func_afastamento;
create sequence seq_func_dependente;
create sequence seq_func_ferias;
create sequence seq_func_funcao;
create sequence seq_func_grau_parentesco;
create sequence seq_func_historico;
create sequence seq_func_horario_trabalho;
create sequence seq_func_motivo_afastamento;
create sequence seq_func_motivo_ajuste_salario;
create sequence seq_func_salario;
create sequence seq_grade_produto;
create sequence seq_grupo_caixa;
create sequence seq_grupo_lancamento_contabil;
create sequence seq_guia_carro_forte;
create sequence seq_guia_diferenca;
create sequence seq_guia_diferenca_motivo;
create sequence seq_icm_venda;
create sequence seq_imovel_despesa;
create sequence seq_importacao_conta_bancaria;
create sequence seq_importacao_estabelecimento;
create sequence seq_importacao_pessoa;
create sequence seq_inventario_geral;
create sequence seq_inventario_mov_ajuste;
create sequence seq_inventario_troca;
create sequence seq_inventario_troca_item;
create sequence seq_ip_acesso;
create sequence seq_item;
create sequence seq_item_pedido;
create sequence seq_lancamentos_contabeis;
create sequence seq_lcto_contabil_oc;
create sequence seq_linha_cd;
create sequence seq_log_baixa_venda;
create sequence seq_log_grupo;
create sequence seq_logistica_carga;
create sequence seq_logistica_lote;
create sequence seq_logistica_lote_item;
create sequence seq_log_parametro;
create sequence seq_log_permissao;
create sequence seq_log_prorrogacao_ofertas;
create sequence seq_log_server;
create sequence seq_log_sessao;
create sequence seq_loja_cartao_baixa;
create sequence seq_mapa_pdv_icms;
create sequence seq_mapa_recebimento_loja;
create sequence seq_mapa_resumo;
create sequence seq_mapa_resumo_item;
create sequence seq_mapa_subfinalizadora_tef;
create sequence seq_margem_loja;
create sequence seq_menu_usuario_favoritos;
create sequence seq_modelo_contrato_forn;
create sequence seq_motivo_transf_valores;
create sequence seq_motivo_troca;
create sequence seq_mov_caixa;
create sequence seq_mov_caixa_detalhe;
create sequence seq_mov_caixa_status;
create sequence seq_mov_cob_cheque_dev;
create sequence seq_movimento_contabil;
create sequence seq_movimento_conta_fornecedor;
create sequence seq_movimento_estoque_terceiro;
create sequence seq_multa;
create sequence seq_negociacao_item;
create sequence seq_nf_frete;
create sequence seq_nf_item;
create sequence seq_nf_item_divergencia;
create sequence seq_nf_item_nao_pedido;
create sequence seq_nf_mensagem;
create sequence seq_nf_pagamento;
create sequence seq_nf_pedido;
create sequence seq_nf_tipo;
create sequence seq_nf_total;
create sequence seq_ocorrencia;
create sequence seq_ocorrencia_agendamento;
create sequence seq_ocorrencia_bordero;
create sequence seq_ocorrencia_cobranca;
create sequence seq_ocorrencia_pendencia;
create sequence seq_ocorrencias_mb;
create sequence seq_ocorrencia_taxa;
create sequence seq_ocorrencia_tesouraria;
create sequence seq_operador;
create sequence seq_pack_virtual;
create sequence seq_pack_virtual_loja;
create sequence seq_pack_virtual_preco;
create sequence seq_pack_virtual_produto;
create sequence seq_pack_virtual_grupo_produto;
create sequence seq_pagamento_direto_bordero;
create sequence seq_palete;
create sequence seq_parametros_livro_fiscal;
create sequence seq_partida_dobrada;
create sequence seq_patrimonio_categoria;
create sequence seq_patrimonio_grupo;
create sequence seq_patrimonio_sub_grupo;
create sequence seq_pauta_fiscal;
create sequence seq_pauta_fiscal_estado;
create sequence seq_pedido_item_estatistica;
create sequence seq_pedido_venda;
create sequence seq_pedido_venda_entrega;
create sequence seq_pedido_venda_item;
create sequence seq_pelt;
create sequence seq_pesquisa_jornal_geral;
create sequence seq_pessoa_conta_bancaria;
create sequence seq_pis;
create sequence seq_prazo_recebimento;
create sequence seq_preco_transferencia;
create sequence seq_preco_venda_oferta;
create sequence seq_previa_transferencia_item;
create sequence seq_previa_transferencia_ped;
create sequence seq_produto_concorrente;
create sequence seq_produto_validade;
create sequence seq_quebra_tesouraria;
create sequence seq_movimentacao_carga;
create sequence seq_recebimento_palete_item;
create sequence seq_registro_fiscal;
create sequence seq_registro_fiscal_numeracao;
create sequence seq_reserva_estoque;
create sequence seq_reserva_estoque_item;
create sequence seq_resumo_apuracao_impostos;
create sequence seq_resumo_cupom_fiscal;
create sequence seq_romaneio;
create sequence seq_romaneio_item;
create sequence seq_sangria_lancamento_tipo;
create sequence seq_status_funcionario;
create sequence seq_status_pedido;
create sequence seq_sub_conta_bancaria;
create sequence seq_sub_grupo_custo_logistico;
create sequence seq_sub_grupo_margem_logistica;
create sequence seq_sugestao_compra_externa;
create sequence seq_taxa_cartao_conta;
create sequence seq_taxa_cartao_loja;
create sequence seq_teste_edi;
create sequence seq_tipo_caixa_prazo;
create sequence seq_tipo_carteira_cobranca;
create sequence seq_tipo_entrada_tesouraria;
create sequence seq_tipo_folha_cobranca;
create sequence seq_tipo_folha_pagamento;
create sequence seq_tipo_folha_pagamento_mapa;
create sequence seq_tipo_imovel_despesa;
create sequence seq_tipo_mov_caixa;
create sequence seq_tipo_movimento_financeiro;
create sequence seq_tipo_pesquisa_jornal;
create sequence seq_tipo_quebra_tesouraria;
create sequence seq_transferencia_eletronica;
create sequence seq_transferencia_troca;
create sequence seq_transferencia_troca_prod;
create sequence seq_transferencia_valores;
create sequence seq_transmissao_nfe;
create sequence seq_troca_produto_loja;
create sequence sequencia_acordo_produto;
create sequence sequencia_agencia;
create sequence sequencia_agenda;
create sequence sequencia_ap;
create sequence sequencia_arquivo;
create sequence sequencia_bordero;
create sequence sequencia_carta_correcao;
create sequence sequencia_carta_motivo;
create sequence sequencia_categoria;
create sequence sequencia_cheque_cliente;
create sequence sequencia_cheque_resolucao;
create sequence sequencia_cheque_situacao;
create sequence sequencia_clau_acordo_prom;
create sequence sequencia_clausula_contrato;
create sequence sequencia_compromisso;
create sequence sequencia_conta_bancaria;
create sequence sequencia_conta_cobranca;
create sequence sequencia_conta_fornecedor;
create sequence sequencia_contato;
create sequence sequencia_contrato_fornec;
create sequence sequencia_contrato_servico;
create sequence sequencia_controle_estoque;
create sequence sequencia_conveniado;
create sequence sequencia_convenio;
create sequence sequencia_custo_falta;
create sequence sequencia_dados_cr;
create sequence sequencia_desm_cartao;
create sequence sequencia_desm_ticket;
create sequence sequencia_dev_dif_prec;
create sequence sequencia_documento;
create sequence sequencia_endereco;
create sequence sequencia_fechamento_caixa;
create sequence sequencia_fechamento_operador;
create sequence sequencia_finalizadora;
create sequence sequencia_fornecimento;
create sequence sequencia_funcao;
create sequence sequencia_geral;
create sequence sequencia_historico_pdv;
create sequence sequencia_informativo;
create sequence sequencia_inventario;
create sequence sequencia_item_cupom_devolvido;
create sequence sequencia_item_falta;
create sequence sequencia_item_nao_pedido;
create sequence sequencia_item_pedido_falta;
create sequence sequencia_jornal;
create sequence sequencia_lancamento_convenio;
create sequence sequencia_lancamento_loja;
create sequence sequencia_lancamento_pdv;
create sequence sequencia_leitura_z;
create sequence sequencia_lista_falta;
create sequence sequencia_lista_falta_geral;
create sequence sequencia_lista_falta_geral_id;
create sequence sequencia_lista_falta_id;
create sequence sequencia_lista_produto;
create sequence sequencia_lista_produto_forn;
create sequence sequencia_lista_produto_item;
create sequence sequencia_lista_sugestao;
create sequence sequencia_livro_fiscal;
create sequence sequencia_ll_saldo;
create sequence sequencia_log_sistema;
create sequence sequencia_loja;
create sequence sequencia_loja_pdv;
create sequence sequencia_lote_troca;
create sequence sequencia_lote_troca_item;
create sequence sequencia_mensagem_popup;
create sequence sequencia_modelo_acordo_prom;
create sequence sequencia_modelo_clau_acordo;
create sequence sequencia_motivo_suporte;
create sequence sequencia_mov_banc_conciliacao;
create sequence sequencia_movimento_bancario;
create sequence sequencia_negociacao;
create sequence sequencia_nota_fiscal;
create sequence seq_nota_fiscal_mensagem_sefaz;
create sequence sequencia_ocorrencia_diaria;
create sequence sequencia_ocorrencia_pdv;
create sequence sequencia_pb_detalhe;
create sequence sequencia_pedido;
create sequence sequencia_pedido_saida;
create sequence sequencia_permissao;
create sequence sequencia_pesquisa_jornal;
create sequence sequencia_pesquisa_jornal_prod;
create sequence sequencia_pessoa;
create sequence sequencia_preco_venda;
create sequence sequencia_preco_venda_caixa;
create sequence sequencia_previa_transferencia;
create sequence sequencia_previsao_loja;
create sequence sequencia_previsao_rede;
create sequence sequencia_previsao_setor;
create sequence sequencia_previsao_venda;
create sequence sequencia_processo_suporte;
create sequence sequencia_prod_bal_det;
create sequence sequencia_produto;
create sequence sequencia_produto_item;
create sequence sequencia_produto_loja;
create sequence sequencia_recibo_liq_cheque;
create sequence sequencia_rede;
create sequence sequencia_relatorio;
create sequence sequencia_relatorio_operador;
create sequence sequencia_requisicao_suporte;
create sequence sequencia_separacao;
create sequence sequencia_setor_balanca_padrao;
create sequence sequencia_setor_compra;
create sequence sequencia_status_funcionario;
create sequence sequencia_status_recebimento;
create sequence sequencia_sub_finalizadora;
create sequence sequencia_sugestao;
create sequence sequencia_sugestao_id;
create sequence sequencia_teste;
create sequence sequencia_tipo_clau_acordo;
create sequence sequencia_tipo_clausula;
create sequence sequencia_tipo_lancamento;
create sequence sequencia_tipo_mov_bancario;
create sequence sequencia_tipo_pessoa;
create sequence sequencia_tipo_requisicao;
create sequence sequencia_tranferencia_troca;
create sequence sequencia_vale_compra;
create sequence sequencia_van_edi;
create sequence sequencia_vd_cupom_fiscal;
create sequence sequencia_vd_cupom_item;
create sequence sequencia_vd_cupom_leitura;
create sequence sequencia_vd_cupom_recebimento;
create sequence seq_usuario_limite_financeiro;
create sequence seq_venda_online_log;
create sequence seq_pack_virtual_grupo;
create sequence seq_solicitacao_compra_produto;
create sequence seq_centro_custo;
create sequence seq_solicitacao_compra_prod_lj;
create sequence seq_cupom_total_pis_cofins;
create sequence seq_solicitacao_compra;
create sequence seq_log_arquivo_nfe_receb;
create sequence seq_estado_patrimonio_item;
create sequence seq_patrimonio_item;
create sequence seq_nf_item_patromonio;
create sequence seq_modelo_mensagem_fiscal;
create sequence seq_nota_fiscal_msg_fiscal;
create sequence seq_tributacao_referencia_lote;
create sequence seq_processo_fiscal;
create sequence seq_tributacao_ref_produto;
create sequence seq_tributacao_ref_produto_log;
create sequence seq_patrimonio_item_baixa;
create sequence seq_nota_fiscal_item_xml;
create sequence seq_modelo_observacao_fiscal;
create sequence seq_escrita_fiscal_observacao;
create sequence seq_escrita_fiscal_ajuste;
create sequence seq_inventario_movimento_det;
create sequence seq_escrita_fiscal_ocorrencia;
create sequence seq_baixa_venda;
create sequence seq_depreciacao;
create sequence seq_funcionario_pensionista;
create sequence seq_modelo_ocorrencia_escrita;
create sequence seq_livro_fiscal_inventario;
create sequence seq_escrita_ap_fed_cred_det;
create sequence seq_escrita_apuracao_fed_cred;
create sequence seq_escrita_apuracao_fed_deb;
create sequence seq_escrita_apuracao_federal;
create sequence seq_escrita_apuracao_icms;
create sequence seq_escrita_apuracao_icms_item;
create sequence seq_escrita_documento;
create sequence seq_ocorrencia_venda_online;
create sequence seq_declaracao_importacao_item;
create sequence seq_declaracao_importacao;
create sequence seq_guia_recolhimento;
create sequence sequencia_grupo_financeiro;
create sequence seq_escrita_apuracao_fed_rc_nt;
create sequence seq_esquema_contabil;
create sequence seq_saldo_contabil_inicial;
create sequence seq_precatorio;
create sequence seq_escrita_apura_fed_deb_det;
create sequence seq_bin_cartao_sub_finali;
create sequence seq_escrita_apuracao_advert;

create table abatimento (
    ap_key number(9) not null,
    ar_key number(9) not null
);

create table acordo_baixa_custo (
    acordo_baixa_custo_key number(6) not null,
    numero_acordo_comercial number(6) not null,
    usuario_key number(6) not null,
    data_emissao date not null,
    loja_key number(6) not null,
    fornecedor_key number(6) not null,
    divisao_key number(6) not null,
    valor_total_acordo number(12, 2)
);

create table acordo_baixa_custo_item (
    acordo_baixa_custo_item_key number(6) not null,
    acordo_baixa_custo_key number(6) not null,
    produto_key number(6) not null,
    custo_anterior_unitario number(12, 2) not null,
    custo_novo_unitario number(12, 2) not null,
    quantidade_estoque number(12, 2) not null,
    valor_acordo number(12, 2) not null
);

create table acordo_produto (
    acordo_produto_key number(6) not null,
    fornecedor_key number(6) not null,
    divisao_key number(6) not null,
    setor_compra_key number(6) not null,
    data_emissao date not null,
    data_inicial date not null,
    data_final date not null,
    forma_pagamento_key number(3) not null,
    gerado_por number(6) not null
);

create table acordo_produto_item (
    acordo_produto_key number(6) not null,
    produto_key number(6) not null,
    valor number(9, 2) not null,
    acordo_produto_item_key number(6) not null
);

create table acordo_produto_loja (
    acordo_produto_key number(6) not null,
    loja_key number(6) not null
);

create table administradora (
    pessoa_key number(6) not null
);

create table administradora_credito (
    pessoa_key number(6) not null
);

create table agencia (
    agencia_key number(6) not null,
    banco_key number(4) not null,
    nome varchar(40),
    agencia_numero number(5),
    agencia_digito number(1)
);

create table agendamento_transferencia (
    agendamento_transferencia_key number(9) not null,
    transferencia_eletronica_key number(8),
    tipo_agendamento_key number(6),
    usuario_agendamento_key number(6),
    usuario_autorizacao_key number(6),
    retorno number(1) default 0 not null,
    enviado number(1) default 0 not null,
    rejeitado number(1) default 0 not null,
    data_agendamento date,
    data_autorizacao date,
    data_pagamento date,
    motivo_rejeicao varchar(255)
);

create table ajuste_estoque (
    ajuste_estoque_key number(6) not null,
    loja_key number(6),
    produto_key number(6),
    data_ajuste date,
    ocorrencia varchar(100),
    quantidade_ajustada number(13, 3),
    saldo_apos_ajuste number(13, 3),
    usuario_key number(6),
    movimento_estoque_key number(15)
);

create table ajuste_trocas (
    ajuste_troca_key number(6) not null,
    produto_key number(6) not null,
    loja_key number(6) not null,
    saldo_estoque number(10, 3),
    data_ajuste date,
    quantidade_encontrada number(10, 3),
    valor_total number(10, 3),
    saldo_troca number(10, 3),
    fornecedor_divisao_key number(6),
    usuario_key number(6),
    movimento_estoque_key number(15)
);

create table alinea_cheque_devolvido (
    alinea_cheque_devolvido_key number(3) not null,
    descricao varchar(50),
    descricao_completa varchar(240)
);

create table aliquota_icm (
    valor number(5, 2) not null
);

create table aliquota_interestadual (
    estado_origem varchar(2),
    estado_destino varchar(2),
    aliquota number(5, 2)
);

create table ano (
    mes number(2) not null
);

create table apuracao_competencia (
    apuracao_competencia_key number(8) not null,
    loja_key number(6),
    competencia_key varchar(7),
    icms_apurado number(1),
    registro_apuracao_icms_criado number(1) default 0,
    registro_entradas_criado number(1) default 0,
    registro_saidas_criado number(1) default 0,
    escrita_apuracao_key number(6)
);

create table arquivo (
    arquivo_key number(10) not null,
    remetente number(6) not null,
    destinatario number(6) not null,
    nome varchar(50),
    tamanho number(10) not null,
    data date,
    dados blob,
    compactado number(1) default 1 not null,
    tipo_arquivo_key number(3) default 1,
    usuario_key number(6) not null,
    tempo_geracao_em_segundos number(9)
);

create table arquivo_edi (
    arquivo_edi_key number(9) not null,
    van_edi_key number(6),
    nome varchar(100),
    data_carga date,
    tipo_arquivo_edi_key number(3),
    tipo_status_arquivo_key number(3)
);

create table arquivo_edi_linha (
    arquivo_edi_linha_key number(15) not null,
    arquivo_edi_key number(9),
    numero_linha number(6),
    linha varchar(1024)
);

create table arquivo_escrita_fiscal (
    arquivo_key number(10) not null,
    escrita_fiscal_key number(15) not null
);

create table arquivo_nfe (
    arquivo_nfe_key number(9) not null,
    tipo_servico_nfe_key number(2) not null,
    nome varchar(120) not null,
    loja_key number(6),
    arquivo blob not null,
    nf_key number(9),
    chave varchar(44),
    calendario_key number(8) not null,
    remessa number(1) default 0 not null
);

create table arquivo_nfe_recebido (
    arquivo_nfe_recebido_key number(6) not null,
    chave varchar(44),
    cpf_cnpj_remetente number(15) not null,
    cpf_cnpj_destinatario number(15) not null,
    loja_key number(6),
    fornecedor_key number(6),
    arquivo blob,
    data_processamento date default sysdate,
    numero_nota_fiscal number(9),
    tipo_status_arquivo_key number(1) default 1,
    nf_key number(9),
    serie_nota_fiscal varchar(3),
    versao varchar(10),
    nome_remetente varchar(60),
    valor number(15, 2) default 0,
    numero_dos_pedidos varchar(30),
    natureza_da_operacao varchar(100),
    tipo_operacao_nota_fiscal_key number(1) not null,
    data_importacao date default sysdate not null,
    tipo_arquivo_nfe_key number(6) default 1 not null,
    processamento_calendario_key number(8),
    data_emissao_nf date
);

create table autorizacao_pagamento (
    ap_key number(9) not null,
    pagar_receber varchar(1) default 'P' not null,
    prioridade number(1) default 1 not null,
    loja_key number(6) not null,
    favorecido number(6) not null,
    descritivo varchar(500) not null,
    tipo varchar(1),
    data_vencimento date not null,
    data_emissao date default SYSDATE not null,
    data_quitacao date,
    data_prorrogacao date,
    data_aceite date,
    data_desconto_financeiro date,
    valor_fatura number(11, 2) not null,
    valor_total number(11, 2) not null,
    juro_diario number(11, 2) default 0 not null,
    bordero_key number(9),
    tipo_cobranca_key number(2) not null,
    codigo_barra varchar(44),
    valor_pago number(11, 2),
    numero_documento number(14),
    multa number(9, 2),
    abatimento number(9, 2) default 0,
    nosso_numero varchar(50),
    desconto_financeiro number(9, 2) default 0,
    parcela number(2) default 1 not null,
    portador varchar(50),
    contrato_servico_key number(9),
    acrescimos_bordero number(9, 2) default 0,
    data_vencimento_nota date,
    data_vencimento_contrato date,
    data_prorrogacao_confirmada date,
    conferido_por number(6),
    data_conferencia date,
    loja_pagadora number(6),
    factoring_key number(6),
    competencia_key varchar(7) default TO_CHAR(SYSDATE, 'MM-YYYY') not null,
    cartorio_detalhe_key number(6),
    tipo_agendamento_key number(6),
    folha_pgto_funcionario_key number(6),
    cancelada number(1) default 0 not null,
    ocorrencia_agendamento_key number(9),
    data_pagamento date,
    tipo_status_pagamento_key number(2),
    conta_contabil_key number(9) not null,
    total_parcelas number(2) default 1 not null,
    comprovante_recebido number(1) default 0,
    tipo_autorizacao_pagamento_key number(3),
    tipo_forma_pagamento_key number(3) not null,
    conta_bancaria_key number(9),
    tipo_lancamento_key number(3),
    acordo_comercial_numero number(6),
    modelo_acordo_prom_key number(6),
    fatura_key number(12),
    status_duplicata_key number(2),
    juros_total number(12, 2) default 0 not null,
    multa_key number(9),
    prazo_protesto number(3),
    tipo_protesto_key number(2),
    valor_juros number(9, 2),
    tipo_juros_key number(2),
    dias_baixa number(9),
    ult_ocorrencia_cobranca_key number(9),
    restringir_valor_nominal number(1) default 0,
    conta_contabil_destino_key number(9),
    data_emissao_nf date,
    tipo_receita_tributaria_key number(6),
    uf_favorecida varchar(2),
    cedente_original_key number(6),
    valor_inss number(11, 2),
    valor_outras_entidades number(11, 2),
    duplicata_agrup_originada_key number(9),
    duplicata_de_agrupamento number(1) default 0 not null
);

create table baixa_cartao (
    baixa_cartao_key number(6) not null,
    loja_key number(6) not null,
    conta_bancaria_key number(6),
    tipo_caixa_key number(3)
);

create table baixa_venda (
    baixa_venda_key number(9) not null,
    loja_key number(6) not null,
    ecf number(4) not null,
    data_venda date not null,
    data_baixa_venda date not null,
    usuario_key number(6) not null
);

create table balanca (
    balanca_key number(3) not null,
    descricao varchar(30),
    modelo varchar(30),
    numero_linhas number(3) default 1,
    numero_caracteres number(3) default 1,
    max_caracteres number(3)
);

create table balanco_mensal (
    periodo date,
    loja_key number(6) not null,
    produto_key number(6) not null,
    ranking_vendas number(6) default 0,
    ranking_lucro number(6) default 0,
    venda_quant number(17, 3) default 0,
    venda_valor number(17, 2) default 0,
    compra_quant number(17, 3) default 0,
    compra_valor number(17, 2) default 0,
    transferencia_quant number(17, 3) default 0,
    transferencia_valor number(17, 2) default 0,
    troca_entrada_quant number(17, 3) default 0,
    troca_entrada_valor number(17, 2) default 0,
    troca_saida_quant number(17, 3) default 0,
    troca_saida_valor number(17, 2) default 0,
    ajuste_quant number(17, 3) default 0,
    ajuste_valor number(17, 6) default 0,
    est_inic_quant number(17, 3) default 0,
    est_inic_valor_compra number(17, 2) default 0,
    est_final_quant number(17, 3) default 0,
    est_final_valor_compra number(17, 2) default 0,
    troca_estoque_inicial number(17, 3) default 0,
    subgrupo number(6),
    ano number(4) not null,
    mes number(2) not null,
    icms_venda number(17, 6) default 0,
    custo_venda number(17, 6) default 0,
    setor_compra_key number(3),
    compra_desconto_financeiro number(12, 4) default 0,
    primeira_venda date
);

create table banco (
    banco_key number(3) not null,
    nome varchar(60) not null,
    class_banco varchar(30),
    img_banco varchar(40)
);

create table banco_agendamento (
    banco_key number(3) not null,
    tipo_agendamento_key number(6) not null
);

create table banco_bloqueto (
    banco_bloqueto_key number(9) not null,
    loja_key number(6),
    fornecedor_key number(6),
    codigo_barras varchar(55),
    documento_cobranca_numero varchar(35),
    valor_nominal number(8, 2),
    valor_descontos number(8, 2),
    valor_abatimento number(8, 2),
    valor_multa number(8, 2),
    data_vencimento date,
    ap_key number(9),
    data_importacao date,
    tipo_status_bloqueto_key number(3)
);

create table banco_cobranca (
    banco_cobranca_key number(6) not null,
    codigo_moeda number(1),
    conta_cendente_key number(6),
    data_ocorrencia date,
    doc_banco_numero varchar(20),
    doc_cobranca_numero varchar(15),
    doc_pessoa_numero varchar(25),
    sacado_key number(6),
    tipo_carteira_cobranca_key number(1),
    valor_abatimento number(13, 2),
    valor_acrescimo number(13, 2),
    valor_custas number(13, 2),
    valor_desconto_concedido number(13, 2),
    valor_iof number(13, 2),
    valor_liquido number(13, 2),
    valor_nominal number(13, 2),
    valor_outras_despesas number(13, 2),
    valor_outros_creditos number(13, 2),
    valor_pago number(13, 2),
    tipo_ocorrencia_cobranca_key varchar(3),
    ocorrencia_data date,
    ocorrencia_valor number(13, 2),
    ocorrencia_complemento varchar(30),
    ap_key number(9),
    conta_cedente_key number(6),
    status_conciliacao_key number(3),
    data_credito date,
    data_vencimento date
);

create table banco_cobranca_ocorrencia_tipo (
    banco_cobranca_key number(6) not null,
    tipo_ocorrencia_banco_cob_key varchar(3) not null
);

create table banco_custodia (
    banco_custodia_key number(9) not null,
    conta_bancaria_key number(6),
    sequencial_registro number(5),
    tipo_movimento number(2),
    codigo_finalidade number(2),
    forma_entrada number(1),
    cmc7 varchar(34),
    tipo_inscricao_emitente number(1),
    numero_inscricao_emitente number(14),
    valor_cheque number(13, 2),
    data_captura date,
    data_para_deposito date,
    data_prevista_credito date,
    seu_numero varchar(20),
    agencia_devolucao number(5),
    conta_devolucao number(12),
    desconto_juros number(9, 2),
    desconto_iof number(9, 2),
    desconto_outros_encargos number(9, 2),
    desconto_numero_contrato number(17),
    desconto_taxa_juros number(7, 4),
    ocorrencias varchar(10)
);

create table banco_ext_hist_tip_cx (
    banco_extrato_historico_key number(5) not null,
    tipo_caixa_key number(3) not null
);

create table banco_extrato (
    banco_extrato_key number(9) not null,
    conta_bancaria_key number(6),
    forma_lancamento number(2),
    natureza_lancamento varchar(3),
    tipo_complemento number(2),
    complemento varchar(20),
    data_contabil date,
    lancamento_data date,
    lancamento_valor number(16, 2),
    lancamento_tipo varchar(1),
    lancamento_categoria number(3),
    lancamento_cod_historico varchar(4),
    lancamento_historico varchar(25),
    lancamento_numero_documento varchar(39),
    banco_extrato_saldo_key number(9),
    status_conciliacao_key number(22),
    sub_conta_bancaria_key number(6)
);

create table banco_extrato_historico (
    banco_extrato_historico_key number(5) not null,
    banco_key number(3),
    tipo_movimento_bancario_key number(6),
    historico_codigo number(5),
    historico_descricao varchar(50),
    conciliacao_automatica number(1) default 0
);

create table banco_extrato_saldo (
    banco_extrato_saldo_key number(9) not null,
    conta_bancaria_key number(6),
    saldo_inicial_data date,
    saldo_inicial_valor number(16, 2),
    saldo_inicial_deb_cred varchar(1),
    saldo_inicial_status varchar(1),
    sequencia_extrato number(5),
    saldo_acima24h number(16, 2),
    limite_conta number(16, 2),
    saldo_ate24h number(16, 2),
    saldo_final_data date,
    saldo_final_valor number(16, 2),
    saldo_final_deb_cred varchar(1),
    saldo_final_status varchar(1),
    credito_total number(9, 2),
    debito_total number(9, 2),
    sub_conta_bancaria_key number(6)
);

create table banco_ocorrencia (
    banco_ocorrencia_key varchar(2) not null,
    descricao varchar(255)
);

create table banco_pagamento (
    banco_pagamento_key number(9) not null,
    origem_conta_bancaria_key number(6),
    forma_lancamento number(2),
    destino_conta_bancaria_key number(6),
    credito_seu_numero varchar(20),
    credito_data_pagamento date,
    credito_tipo_moeda varchar(3),
    credito_quantidade_moeda number(15, 5),
    credito_valor_pagamento number(13, 2),
    credito_nosso_numero varchar(20),
    credito_data_real date,
    credito_valor_real number(13, 2),
    credito_informacao2 varchar(40),
    codigo_doc varchar(5),
    codigo_ted varchar(5),
    codigo_aviso_favorecido number(1),
    ocorrencias varchar(10),
    pagamento_data_vencimento date,
    pagamento_valor_documento number(13, 2),
    pagamento_valor_abatimento number(13, 2),
    pagamento_valor_desconto number(13, 2),
    pagamento_valor_mora number(13, 2),
    pagamento_valor_multa number(13, 2),
    pagamento_documento_favorecido varchar(15),
    valor_ir number(13, 2),
    valor_iss number(13, 2),
    valor_iof number(13, 2),
    outras_deducoes number(13, 2),
    outros_acrescimos number(13, 2),
    valor_inss number(13, 2),
    retorno number(1) default 0 not null,
    status_conciliacao_key number(22),
    tipo_movimento number(1),
    codigo_instrucao_movimento number(2),
    data_envio date
);

create table banco_pagamento_titulos (
    banco_pagamento_titulos_key number(9) not null,
    conta_bancaria_key number(6),
    forma_lancamento number(2),
    tipo_movimento number(1),
    codigo_instrucao_movimento number(2),
    codigo_barras varchar(44),
    nome_cedente varchar(30),
    pagamento_data_vencimento date,
    pagamento_valor_titulo number(13, 2),
    pagamento_valor_abatimento number(13, 2),
    pagamento_valor_desconto number(13, 2),
    pagamento_valor_acrescimo number(13, 2),
    pagamento_data date,
    pagamento_valor number(13, 2),
    pagamento_quantidade_moeda number(15, 5),
    pagamento_referencia_sacado varchar(20),
    pagamento_nosso_numero varchar(20),
    codigo_moeda number(2),
    ocorrencias varchar(10),
    status_conciliacao_key number(22),
    retorno number(1) default 0 not null,
    data_envio date,
    ap_key number(9)
);

create table bandeira (
    bandeira_key number(6) not null,
    nome varchar(50),
    diretor_financeiro_key number(6)
);

create table bandeira_desconhecida (
    bandeira_desconhecida_key number(7) not null,
    lancamento_loja_key number(9) not null,
    recebimento_key number(3) not null,
    bin number(6) not null,
    administradora number(3),
    nome_arquivo varchar(40),
    numero_de_parcelas number(2)
);

create table bin_cartao (
    bin_cartao_key number(6) not null,
    numero_bin number(6)
);

create table bin_cartao_sub_finalizadora (
    bin_cartao_sub_finali_key number(9) not null,
    bin_cartao_key number(6),
    sub_finalizadora_key number(9)
);

create table bloqueio_credito (
    bloqueio_credito_key number(3) not null,
    descricao varchar(60),
    bloquear number(1) default 1
);

create table boleto_bancario (
    boleto_key number(6) not null,
    conta_cobranca_key number(6) not null,
    favorecido_key number(6),
    data_documento date not null,
    vencimento date not null,
    valor number(9, 2) not null,
    nosso_numero number(11) not null,
    especie_documento varchar(20) not null,
    numero_documento varchar(20),
    aceite number(1) not null
);

create table bordero (
    bordero_key number(9) not null,
    portador varchar(50),
    data_baixa date,
    data_emissao date default sysdate,
    data_pagamento date,
    usuario_key number(6) not null,
    conta_bancaria_key number(6),
    tipo_cobranca_key number(2),
    tipo_bordero_key number(3) default 0,
    data_aprovacao date,
    usuario_aprovacao number(6),
    loja_pagadora_key number(6),
    arquivo_eletronico_gerado number(1),
    arquivado number(1) default 0 not null
);

create table bordero_caixa (
    bordero_caixa_key number(6) not null,
    data_emissao date,
    portador_key number(6),
    movimento_bancario_key number(6),
    usuario_gerado_por number(6),
    juros_diario_perc_padrao number(5, 3),
    tipo_bordero_caixa_key number(3),
    status_bordero_key number(6)
);

create table bordero_caixa_item (
    bordero_caixa_item_key number(6) not null,
    bordero_caixa_key number(6),
    cadastro_caixa_key number(15),
    flag_baixado number(1) default 0 not null,
    duplicata_cobranca_key number(9),
    duplicata_pagamento_key number(9)
);

create table cadastro_caixa (
    cadastro_caixa_key number(15) not null,
    loja_key number(6),
    pessoa_autorizacao_key number(6),
    portador_key number(6),
    tipo_mov_caixa_key number(6),
    tipo_caixa_key number(3),
    administradora_key number(6),
    empresa_autorizacao_key number(6),
    data date,
    valor number(11, 2),
    descricao varchar(250),
    numero_pdv number(6),
    camara_compensacao number(3),
    banco number(4),
    agencia number(7),
    conta number(13),
    numero number(19),
    qde_parcelas number(2),
    numero_parcela number(2),
    valor_parcela number(13, 2),
    valor_taxa number(10, 2),
    valor_taxa_operacao number(10, 2),
    valor_juros number(9, 2),
    data_para_deposito date,
    data_entrega date,
    data_previsao_credito date,
    meio_transacao varchar(12),
    tipo_debito_credito varchar(1),
    codigo_autorizacao varchar(10),
    nsu varchar(20),
    status_transacao varchar(1),
    motivo_devolucao varchar(20),
    alinea_cheque_devolvido_key number(3),
    cheque_dev_data_devolucao date,
    cheque_dev_percentual_juro_dia number(5, 3) default 1,
    cheque_dev_taxa_devolucao number(9, 2),
    cheque_dev_valor_multa number(9, 2),
    cheque_dev_recibo_data date,
    cheque_dev_recibo_numero number(6),
    cheque_dev_recibo_valor number(9, 2),
    usuario_cheque_dev_recibo number(6),
    cheque_dev_valor_desconto number(9, 2),
    conta_bancaria_key number(6),
    custas_cartorio number(9, 2),
    cpf number(15),
    valor_juros_administradora number(6, 2),
    movimento_bancario_baixa_key number(9)
);

create table cadastro_caixa_ocorrencia (
    cadastro_caixa_ocorrencia_key number(9) not null,
    usuario_key number(6),
    cadastro_caixa_key number(15) not null,
    assunto_contato varchar(200),
    contato_data date,
    contato_nome varchar(60),
    contato_numero_telefone varchar(40),
    contato_email varchar(60),
    proximo_contato_data date,
    proximo_contato_nome varchar(60),
    proximo_contato_numero_tel varchar(40),
    assunto_resultado varchar(200)
);

create table caixa_troca (
    fornecedor_key number(6) not null,
    caixa_numero number(6) not null,
    divisao_key number(6) not null
);

create table calendario (
    data date not null,
    util varchar(1),
    dia_semana number(1) not null,
    calendario_key number(8) not null,
    dia number(2) not null,
    mes number(2) not null,
    ano number(4) not null,
    semana number(2) not null,
    ano_mes number(6) not null
);

create table calendario_compras (
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    data_atendimento date not null,
    observacao varchar(60),
    horario varchar(4) not null,
    comprador_key number(6) not null
);

create table calendario_pesquisa (
    roteiro_key number(6) not null,
    calendario_key number(6) not null,
    pesquisador_key number(6) not null,
    data date,
    publicar number(1)
);

create table calendario_visita (
    calendario_key number(6) not null,
    concorrente_key number(6) not null,
    ordem_visita number(3) not null,
    hora_inicial date,
    hora_final date
);

create table card_ajuste_rv (
    card_ajuste_rv_key number(6) not null,
    card_resumo_venda_key number(9),
    tipo_ajuste_rv_key number(6) not null,
    tipo_motivo_ajuste_rv_key number(6) not null,
    data_ajuste date,
    valor_ajuste number(15, 2),
    numero_cartao varchar(20),
    numero_autorizacao varchar(20),
    data_cv_original date,
    numero_rv_original number(22),
    valor_transacao_original number(15, 2),
    numero_referencia varchar(15),
    data_referencia date,
    mes_referencia varchar(6),
    numero_processo number(15),
    valor_cancelamento number(15, 2),
    data_importacao date,
    estabelecimento_filial_key number(6),
    numero_rv number(22),
    conta_bancaria_key number(6),
    status_conciliacao_key number(22)
);

create table card_comprovante_venda (
    card_comprovante_venda_key number(9) not null,
    card_resumo_venda_key number(9) not null,
    tipo_captura_key number(6) not null,
    tipo_status_cv_key number(6) not null,
    numero_cv number(12),
    numero_cartao varchar(19),
    numero_autorizacao varchar(6),
    numero_referencia varchar(13),
    data_transacao date,
    hora_transacao date,
    numero_parcelas number(3),
    valor_bruto number(15, 2) default 0,
    valor_gorjeta number(15, 2) default 0,
    valor_desconto number(15, 2) default 0,
    valor_liquido number(15, 2) default 0,
    status_conciliacao_key number(22)
);

create table card_cv_parcela (
    card_cv_parcela_key number(9) not null,
    card_comprovante_venda_key number(9) not null,
    card_ordem_credito_key number(9),
    data_previsao_credito date,
    numero_parcela number(2),
    valor_bruto number(15, 2) default 0.00,
    valor_desconto number(15, 2) default 0.00,
    valor_liquido number(15, 2) default 0.00,
    cadastro_caixa_key number(15),
    status_conciliacao_key number(22)
);

create table card_cv_request (
    card_cv_request_key number(6) not null,
    card_comprovante_venda_key number(9),
    tipo_motivo_request_key number(6) not null,
    numero_processo number(15),
    data_limite_envio_documentos date,
    data_importacao date,
    numero_rv number(22),
    numero_cv number(22),
    numero_autorizacao varchar(20),
    numero_cartao varchar(20),
    numero_referencia varchar(20),
    data_transacao date,
    valor_transacao number(11, 2),
    estabelecimento_filial_key number(6),
    status_conciliacao_key number(22)
);

create table card_ordem_credito (
    card_ordem_credito_key number(9) not null,
    estabelecimento_key_creditado number(6) not null,
    estabelecimento_key_original number(6),
    tipo_transacao_key number(6),
    tipo_status_credito_key number(6) not null,
    tipo_ordem_credito_key number(6) not null,
    conta_bancaria_key number(9) not null,
    data_emissao date,
    numero_documento number(12),
    numero_parcela number(2),
    total_parcelas number(2),
    data_credito date not null,
    valor_credito number(15, 2),
    valor_bruto number(15, 2),
    valor_desconto number(15, 2),
    valor_credito_original number(15, 2),
    data_credito_original date,
    data_importacao date,
    movimento_bancario_key number(9),
    baixada number(1) default 0 not null,
    tipo_status_ordem_credito_key number(2),
    tipo_cartao_key number(2)
);

create table card_ordem_credito_rv (
    card_ordem_credito_key number(9) not null,
    card_resumo_venda_key number(9) not null
);

create table card_resumo_venda (
    card_resumo_venda_key number(9) not null,
    estabelecimento_filial_key number(6) not null,
    tipo_bandeira_key number(6),
    tipo_transacao_key number(6) not null,
    numero_rv number(9) not null,
    data_emissao date,
    data_previsao_credito date,
    quantidade_comprovantes_venda number(6),
    valor_bruto number(15, 2) default 0,
    valor_gorjeta number(15, 2) default 0,
    valor_rejeitado number(15, 2) default 0,
    valor_desconto number(15, 2) default 0,
    valor_liquido number(15, 2) default 0,
    data_importacao date,
    conta_bancaria_key number(9),
    tipo_cartao_key number(6),
    conciliado number(1) default 0 not null
);

create table carta_correcao (
    carta_correcao_key number(9) not null,
    nf_key number(9) not null
);

create table carta_correcao_motivo (
    carta_correcao_motivo_key number(9) not null,
    carta_correcao_key number(9) not null,
    motivo_key number(3) not null,
    descricao varchar(200) not null
);

create table carteira_cobranca (
    carteira_cobranca_key number(6) not null,
    carteira_numero varchar(2),
    banco_key number(3),
    descricao varchar(30),
    tipo_carteira_cobranca_key number(3)
);

create table cartorio (
    pessoa_key number(6) not null
);

create table cartorio_detalhe (
    cartorio_detalhe_key number(6) not null,
    cartorio_key number(6),
    valor_custas number(11, 2),
    valor_cartorio number(11, 2),
    justificativa varchar(400),
    data_protesto date,
    protestado number(1)
);

create table categoria_lancamento (
    codigo_febraban number(4) not null,
    dominio varchar(1) not null,
    descricao varchar(100) not null
);

create table centro_custo (
    centro_custo_key number(11) not null,
    descricao varchar(40),
    ativo number(1) default 1 not null,
    data_ultima_alteracao date default sysdate
);

create table cheque_cliente (
    cheque_key number(10) not null,
    pessoa_key number(6),
    cpf varchar(15),
    banco number(4),
    agencia number(6),
    conta number(8),
    numero_cheque number(6),
    data date,
    valor number(12, 2) not null,
    situacao_key number(4) not null,
    resolucao_key number(4),
    data_resolucao date,
    acrescimo_financeiro number(12, 2),
    lancamento_loja_key number(6)
);

create table cheque_emitido (
    cheque_emitido_key number(6) not null,
    movimento_bancario_key number(9) not null,
    conta_bancaria_key number(6) not null,
    data_emissao date not null,
    data_impressao date,
    data_para_deposito date,
    cheque_numero number(8),
    favorecido number(6) not null,
    valor number(9, 2) not null,
    emitido_por number(6) not null,
    impresso_por number(6),
    impresso number(1) not null
);

create table cheque_resolucao (
    resolucao_key number(4) not null,
    descricao varchar(30),
    compoe_limite number(1) not null
);

create table cheque_situacao (
    situacao_key number(4) not null,
    descricao varchar(60),
    pendente number(1) not null,
    suspende number(1) not null
);

create table classificacao_fiscal (
    classificacao_fiscal_key number(6) not null,
    ncm number(8),
    descricao varchar(250),
    pis_saida_key number(6),
    cofins_saida_key number(6),
    pis_entrada_key number(6),
    cofins_entrada_key number(6),
    ex number(3),
    alcoolicos number(1) default 0 not null
);

create table classificacao_fiscal_uf (
    classificacao_fiscal_uf_key number(9) not null,
    classificacao_fiscal_key number(6),
    uf varchar(2),
    iva_st number(6, 3) default 0,
    aliquota_interna number(6, 3) default 0,
    icm_key number(6)
);

create table clau_acordo_prom (
    clau_acordo_prom_key number(6) not null,
    tipo_clau_acordo_prom_key number(6),
    descricao varchar(400)
);

create table clausula_contrato (
    clausula_contrato_key number(6) not null,
    tipo_clausula_key number(6),
    descricao varchar(1000)
);

create table cld_tributos (
    cld_tributos_key number(3) not null,
    descricao varchar(30),
    valor number(8, 4) not null
);

create table cliente (
    pessoa_key number(6) not null,
    credito_limite number(11, 2),
    credito_usado number(11, 2),
    status varchar(2),
    nome_mae varchar(60),
    nome_pai varchar(60),
    banco_nome varchar(80),
    agencia varchar(7),
    numero_conta varchar(20),
    conta_desde date,
    empresa_empregadora varchar(40),
    salario number(9, 2),
    consulta_serasa_data date,
    consulta_serasa_numero varchar(20),
    consulta_serasa_obs varchar(300),
    consulta_spc date,
    spc_exclusao date,
    spc_inclusao date,
    vendedor_key number(6),
    loja_cadastro number(6),
    regiao_entrega_key number(3),
    entrega_dia_inicial number(1),
    entrega_dia_final number(1),
    entrega_hora_inicial number(2),
    entrega_hora_final number(2),
    mala_direta number(1),
    status_credito number(3),
    ramo_atividade_key number(3),
    credito_obs varchar(700),
    telefone_principal number(20),
    loja_atendimento number(6),
    orgao_publico number(1),
    tipo_cliente_key number(2),
    codigo_pdv number(20)
);

create table cnae (
    cnae_key number(3) not null,
    codigo varchar(17) not null,
    descricao varchar(150) not null
);

create table cobranca (
    cobranca_key number(9) not null,
    ap_key number(9),
    tipo_carteira_cobranca_key number(3),
    documento_banco_numero varchar(50),
    documento_empresa_numero varchar(50),
    contrato_numero varchar(50),
    data_credito date,
    valor_iof number(9, 2),
    valor_abatimento number(9, 2),
    tipo_cadastramento_cob_key number(2),
    tipo_emissao_bloqueto_key number(2),
    tipo_distribuicao_bloqueto_key number(2),
    prazo_baixa_devolucao number(3),
    informacao1 varchar(120),
    informacao2 varchar(120),
    informacao_sacado varchar(120),
    valor_acrescimo_retorno number(9, 2),
    valor_desconto_retorno number(9, 2),
    valor_abatimento_retorno number(9, 2),
    valor_pago_retorno number(9, 2),
    valor_liquido_retorno number(9, 2),
    valor_outras_despesas_retorno number(9, 2),
    valor_outros_creditos_retorno number(9, 2),
    valor_custas number(9, 2)
);

create table cof (
    codigo_operacao_fiscal number(6) not null,
    descricao varchar(140),
    tipo char(1),
    tipo_movimento_key number(3),
    cof_nf varchar(10),
    codigo_complementar number(6),
    grupo varchar(1),
    basico number(1),
    status number(1) not null,
    cof_nf_str varchar(4),
    substituicao_tributaria number(1) default 0,
    fora_estado number(1) default 0 not null,
    tributar number(1) default 1 not null,
    descricao_abreviada varchar(50),
    apurar_imposto number(1),
    tipo_base_credito_pis_key number(2),
    gera_receita_pis_cofins number(1) default 0 not null,
    incluir_ipi_na_base_do_icms number(1) default 0
);

create table cof_tipo_pedido (
    cof number(4) not null,
    tipo_pedido_key number(3) not null
);

create table cofins (
    cofins_key number(6) not null,
    descricao varchar(50) not null,
    aliquota number(8, 4) not null,
    cst_pis_cofins_key number(3),
    pis_key_relacionado number(6),
    usa_saida number(1) default 0,
    usa_entrada number(1) default 1,
    zona_franca number(1) default 0
);

create table competencia (
    competencia_key varchar(7) default TO_CHAR(SYSDATE,'MM-YYYY') not null,
    status number(1) default 0 not null,
    ano_mes number(6),
    status_apuracao_icms number(1) default 0
);

create table competencia_contabil (
    competencia_contabil_key number(6) not null,
    exercicio_contabil_key number(4),
    descricao varchar(40),
    mes number(2)
);

create table competencia_contabil_loja (
    competencia_contabil_loja_key number(7) not null,
    competencia_contabil_key number(6) not null,
    loja_key number(6) not null,
    status_competencia_key number(2) not null,
    partida_apuracao_key number(12)
);

create table composicao (
    produto_final number(6) not null,
    produto_parte number(6) not null,
    quantidade number(10, 3),
    percentual_custo number(6, 3),
    composicao_key number(6) not null
);

create table compra_90dias (
    data_movimento date,
    produto_key number(6),
    loja_key number(6) not null,
    quantidade number(22),
    valor number(22),
    custo_estoque_sem_icm number(22),
    custo_estoque_com_icm number(22),
    fornecedor_key number(6),
    divisao_key number(3)
);

create table comprador (
    pessoa_key number(6) not null,
    codigo_sez number(6),
    percentual_tolerancia number(9, 3) default 0
);

create table conciliacao_extrato (
    movimento_bancario_key number(9) not null,
    banco_extrato_key number(9) not null
);

create table conciliacao_fininvest (
    conciliacao_fininvest_key number(9) not null,
    codigo_fb varchar(6),
    codigo_pv varchar(8),
    protocolo varchar(7),
    data_entrega date,
    nome_do_cliente varchar(30) not null,
    contrato varchar(16),
    cpf varchar(11),
    valor_financiado number(9, 2) not null,
    status varchar(1),
    motivo_devolucao varchar(20),
    data_compra date,
    numero_de_parcelas number(2),
    tabela number(3),
    valor_previsto_credito number(9, 2),
    data_prevista_credito date,
    loja_key number(6) not null
);

create table concorrente (
    pessoa_key number(6) not null
);

create table condicao_pagamento (
    condicao_pagamento_key varchar(2) not null,
    descricao varchar(50)
);

create table condicao_recebimento (
    condicao_recebimento_key char(2) not null,
    descricao varchar(50)
);

create table consulta_credito_diaria (
    consulta_credito_diaria_key number(6) not null,
    estabelecimento_filial_key number(6) not null,
    tipo_consulta_credito_key number(6) not null,
    data_consulta date,
    quantidade_consultas number(5),
    data_importacao date
);

create table consulta_credito_periodo (
    consulta_credito_periodo_key number(6) not null,
    estabelecimento_filial_key number(6) not null,
    tipo_consulta_credito_key number(6) not null,
    quantidade_consultas number(5),
    valor_total_consultas number(15, 2),
    inicio_periodo date,
    fim_periodo date,
    valor_por_consulta number(15, 2),
    data_importacao date
);

create table consulta_nfe (
    consulta_nfe_key number(9) not null,
    chave varchar(48) not null,
    tipo_ambiente_nfe_key number(2) not null,
    tipo_resposta_nfe_key number(4) not null,
    data_processamento date,
    protocolo number(15),
    usuario_key number(6) not null,
    arquivo_remessa number(9),
    arquivo_retorno number(9)
);

create table consulta_status_servico_nfe (
    consulta_st_servico_nfe_key number(9) not null,
    uf varchar(2) not null,
    data_consulta date not null,
    tipo_ambiente_nfe_key number(2) not null,
    tipo_resposta_nfe_key number(4) not null,
    observacao varchar(255),
    usuario_key number(6) not null,
    arquivo_remessa number(9),
    arquivo_retorno number(9)
);

create table conta_analitica (
    conta_analitica_key number(9) not null,
    conta_reduzida number(5) not null,
    codigo_descritivo varchar(30) not null,
    descricao varchar(80) not null,
    conta_sintetica_key number(9) not null
);

create table conta_bancaria (
    conta_bancaria_key number(6) not null,
    agencia_key number(6) not null,
    titular varchar(120) not null,
    situacao_conta_key number(3),
    pessoa_key number(6) not null,
    limite number(9, 2) default 0,
    conta_bancaria_numero number(11),
    conta_bancaria_digito number(1),
    conta_padrao number(1) default 0 not null,
    rateio number(5, 2) default 100 not null,
    conta_contabil_key number(9),
    tipo_conta_bancaria_key number(3) not null
);

create table conta_bancaria_cad_parms (
    banco_key number(6) not null,
    nome varchar(15) not null,
    descricao varchar(30) not null,
    tipo_dado char(1) not null,
    obrigatorio number(1) not null,
    cadastro number(1) not null,
    valor_default varchar(15)
);

create table conta_bancaria_dependente (
    conta_bancaria_dependente_key number(8) not null,
    conta_bancaria_key number(6) not null,
    pessoa_key number(6) not null,
    rateio number(5, 2) not null
);

create table conta_bancaria_parms (
    conta_bancaria_key number(6) not null,
    nome varchar(15) not null,
    valor varchar(50),
    conta_bancaria_parms_key number(6)
);

create table conta_cobranca (
    conta_cobranca_key number(6) not null,
    conta_bancaria_key number(6) not null,
    conta_cobranca_numero number(12) not null,
    nosso_numero_atual number(11) not null,
    nosso_numero_maximo number(11) not null,
    conta_cobranca_digito number(1),
    carteira_cobranca_key number(6),
    conta_padrao number(1) default 0
);

create table conta_contabil (
    plano_conta_key number(3),
    conta_reduzida number(15) not null,
    codigo_descritivo varchar(30) not null,
    descricao varchar(80) not null,
    conta_superior number(9),
    tipo_conta varchar(1),
    conta_contabil_key number(9) not null,
    status number(1) default 1,
    grau number(2) not null,
    conta_de_primeiro_grau_key number(9),
    data_ultima_alteracao date default sysdate not null
);

create table conta_fornecedor (
    lancamento_key number(9) not null,
    data_emissao date,
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    tipo_lancamento_key number(3) not null,
    setor_compra_key number(3) not null,
    loja_key number(6),
    valor number(13, 6) not null,
    forma_pagamento number(3),
    limite_pagamento date,
    periodo_inicio date,
    periodo_fim date,
    movimento_estoque_key number(15),
    gerado_por number(6),
    cheque_banco varchar(6),
    cheque_agencia varchar(20),
    cheque_conta varchar(20),
    cheque_numero varchar(20),
    observacao varchar(1000),
    nf_numero number(9),
    nf_serie number(3),
    codigo_operacao_fiscal number(6),
    fidelidade_percent number(9, 6),
    valor_nota_fiscal number(19, 6),
    modelo_acordo_prom_key number(6),
    sequencia_debito number(9),
    sequencia_credito number(9),
    representante_key number(6)
);

create table conta_fornecedor_mov_estoque (
    movimento_conta_fornecedor_key number(9) not null,
    movimento_estoque_key number(15) not null
);

create table conta_sintetica (
    plano_conta_key number(3) not null,
    conta_sintetica_key number(9) not null,
    conta_reduzida number(5) not null,
    codigo_descritivo varchar(30) not null,
    descricao varchar(80) not null,
    conta_superior number(5)
);

create table conta_tipo_produto_bancario (
    conta_bancaria_key number(6) not null,
    tipo_produto_bancario_key number(3) not null
);

create table contador (
    pessoa_key number(6) not null,
    uf varchar(2),
    empresa_contabilidade_key number(6),
    crc varchar(15)
);

create table contador_generico (
    nome varchar(40) not null,
    descricao varchar(40),
    valor number(9) not null,
    minimo number(9),
    maximo number(9)
);

create table contador_lote_nfe (
    loja_key number(6) not null,
    numero number(10)
);

create table contador_nota (
    loja_key number(6) not null,
    serie number(3) not null,
    numero number(6) not null,
    limite number(6) not null,
    contador_nota_key number(3) not null,
    nfe number(1) default 0
);

create table contato (
    contato_key number(6) not null,
    pessoa_key number(6) not null,
    tipo_contato_key number(6) not null,
    nome_numero varchar(100)
);

create table contrato_carro_forte (
    contrato_carro_forte_key number(6) not null,
    transportadora number(6) not null,
    conta_bancaria_key number(6) not null,
    numero_contrato number(6) not null,
    ativo_inativo varchar(1) not null,
    data_emissao date default SYSDATE,
    data_inicial date,
    data_final date
);

create table contrato_fornecimento (
    contrato_fornecimento_key number(6) not null,
    fornecedor_key number(6),
    divisao_key number(3),
    tipo_pagamento_key number(3),
    referencia_prazo_key number(1),
    condicao_pagamento_key varchar(2),
    resolucao_troca_key number(3),
    tipo_fornecimento_key number(3),
    vigencia_inicial date,
    vigencia_final date,
    desconto_financeiro number(6, 3),
    data_vencimento date,
    faturamento_minimo number(4),
    dias_entrega number(4) not null,
    data_emissao date,
    dias_tolerancia number(2) not null,
    usuario_key number(6) not null,
    status varchar(1),
    descricao_prazo varchar(40),
    enxoval number(11, 2) default 0,
    assume_trocas_concorrente number(1) default 0,
    quantidade_promotores number(3) default 0,
    fidelidade_percent number(6, 3) default 0,
    fidelidade_pagamento number(6),
    intervalo_visita number(3) default 0,
    troca_armazenar number(1) default 0,
    troca_conta_fornecedor number(1) default 0,
    troca_percentual number(5, 2) default 0,
    troca_central number(1) default 0,
    troca_autorizacao number(1) default 0,
    troca_retira_na_entrega number(1) default 0,
    aniversario_percent number(6, 3) default 0,
    aniversario_pagamento number(6),
    recebe_saldo_pedido number(1) default 0,
    resolucao_devolucao_compra number(6),
    resolucao_devolucao_troca number(6),
    representante_key number(6),
    data_assinatura date,
    observacao varchar(200),
    descricao_prazo_recebimento varchar(40) default 0,
    patrimonio number(1) default 0,
    modelo_contrato_forn_key number(4),
    tipo_forma_pagamento_key number(4),
    tipo_recebimento_key number(3),
    tipo_base_calculo_desconto_key number(6) default 1 not null,
    data_fixa_cobranca date,
    tipo_frete_key number(2)
);

create table contrato_fornecimento_clausula (
    contrato_fornecimento_key number(6),
    clausula_contrato_key number(6)
);

create table contrato_servico (
    contrato_servico_key number(9) not null,
    valor_fixo number(12, 2),
    dias_deslocamento number(3),
    periodicidade varchar(50),
    pessoa_key number(6) not null,
    loja_key number(6) not null,
    centro_custo_key number(11) not null,
    descricao varchar(40),
    status varchar(1),
    ir_fonte number(11, 2),
    vigencia_inicial date,
    vigencia_final date,
    data_emissao date,
    usuario_key number(6) not null,
    altera_valor number(1),
    rateia number(1) default 0 not null,
    valor_maximo_despesa number(12, 2) default 0 not null,
    loja_pode_criar varchar(1) default 'N' not null,
    imovel_despesa_key number(6),
    tipo_imovel_despesa_key number(6),
    tipo_imovel_despesa_detalhe varchar(100),
    pagar_receber varchar(1) default 'P' not null,
    valor_maximo_periodo number(12, 2) default 0,
    rateio_key number(9),
    tipo_contrato char(1),
    tipo_periodicidade_key number(1),
    conta_contabil_destino_key number(9) not null,
    exige_nota_fiscal number(1) default 0 not null,
    nf_tipo_key number(2),
    estado_sigla varchar(2),
    municipio_key number(6),
    tipo_contrato_financeiro_key number(3),
    numero_laudo varchar(40),
    percentual_aproveitamen_cred number(5, 2),
    bloquear_alte_conta_contabil number(1) default 0 not null
);

create table conveniado (
    conveniado_key number(4) not null,
    pessoa_key number(6) not null,
    convenio_key number(6) not null,
    limite_credito number(10, 3) default 0 not null,
    status varchar(1) default 'A' not null
);

create table convenio (
    pessoa_key number(6) not null,
    dia_base number(2) not null,
    data_pagamento date,
    limite_credito number(9, 2) not null,
    ativo varchar(1) not null,
    saldo_convenio number(9, 3) default 0
);

create table convenio_bancario (
    convenio_bancario_key number(6) not null,
    banco_key number(3),
    convenio varchar(25),
    tipo_produto_bancario_key number(3)
);

create table convenio_bancario_loja (
    convenio_bancario_loja_key number(6) not null,
    convenio_bancario_key number(6),
    loja_key number(6)
);

create table convenio_conta_bancaria (
    convenio_bancario_key number(6) not null,
    conta_bancaria_key number(6) not null
);

create table correntista (
    conta_bancaria_key number(6),
    pessoa_key number(6)
);

create table cron_data (
    job_name varchar(50) not null,
    group_name varchar(50) not null,
    fired_time number(15) not null,
    state varchar(20) not null
);

create table csosn (
    csosn_key number(3) not null,
    descricao varchar(300) not null
);

create table cst_ipi (
    cst_ipi_key number(3) not null,
    descricao varchar(300) not null
);

create table cst_iss (
    cst_iss_key varchar(1) not null,
    descricao varchar(20)
);

create table cst_origem (
    codigo number(1) not null,
    descricao varchar(40)
);

create table cst_pis_cofins (
    cst_pis_cofins_key number(3) not null,
    descricao varchar(300) not null,
    sinal number(1) default 0 not null,
    credito_presumido number(1) default 0 not null,
    cst_complementar_padrao number(3)
);

create table cst_tributacao (
    codigo number(2) not null,
    descricao varchar(40)
);

create table cupom_devolvido (
    cupom_devolvido_key number(8) not null,
    tipo_cupom_devolvido_key number(1),
    operador_devolucao_key number(6),
    data date,
    loja_key number(6),
    numero_cupom number(9),
    numero_ecf number(6),
    valor_total number(13, 2),
    usuario_key number(6),
    hora_lancamento date default sysdate,
    numero_ecf_devolucao number(6) not null,
    data_devolucao date not null,
    nf_key number(9),
    usuario_estorno_key number(6),
    data_estorno date
);

create table cupom_fiscal (
    cupom_fiscal_key number(15) not null,
    cupom_numero number(9) not null,
    loja_key number(6) not null,
    ecf number(4) not null,
    tipo number(1) not null,
    hora date,
    cliente_key number(6),
    quantidade_bonus number(4),
    calendario_key number(8) not null,
    coo number(9),
    valor_total number(9, 2),
    nf_key number(9),
    cancelado number(1) default 0
);

create table cupom_item (
    cupom_item_key number(15) not null,
    cupom_fiscal_key number(15) not null,
    hora date,
    barra_key number(14) not null,
    quantidade number(9, 3) not null,
    valor number(11, 2) not null,
    icm_key number(6),
    calendario_key number(8) not null,
    loja_key number(6),
    ordem number(6),
    produto_key number(6),
    pis_key number(6),
    cofins_key number(6)
);

create table cupom_item_90d (
    cupom_item_key number(15),
    cupom_fiscal_key number(15),
    cupom_numero number(9),
    loja_key number(6),
    calendario_key number(8),
    ecf number(4),
    produto_key number(6),
    valor_item number(11, 2),
    quantidade number(9, 3),
    icm_key number(6),
    pis_key number(6),
    cofins_key number(6),
    cancelado number(1),
    cfop_key number(6)
);

create table cupom_item_nota_fiscal_item (
    cupom_item_key number(15) not null,
    nota_fiscal_item_key number(15) not null
);

create table cupom_leitura (
    cupom_fiscal_key number(15) not null,
    hora date,
    tipo_leitura number(2) not null,
    tipo_transacao number(2) not null,
    valor number(12, 2) not null,
    calendario_key number(8) not null,
    cupom_leitura_key number(15) not null
);

create table cupom_recebimento (
    cupom_recebimento_key number(15) not null,
    cupom_fiscal_key number(15) not null,
    recebimento_key number(3) not null,
    hora date,
    valor_recebido number(9, 2) not null,
    troco_fornecido number(9, 2),
    cpf_cgc varchar(19),
    numero_documento varchar(20),
    numero_banco number(4),
    numero_agencia number(7),
    numero_conta varchar(30),
    numero_cheque varchar(30),
    nsu number(12),
    bom_para date,
    cartao_credito_tipo number(4),
    cartao_credito_numero varchar(30),
    cartao_credito_parcelas number(2),
    percentual_recebimento number(7, 4),
    calendario_key number(8) not null
);

create table cupom_total_pis_cofins (
    cupom_total_pis_cofins_key number(9) not null,
    data date not null,
    loja_key number(3) not null,
    ecf number(4) not null,
    total_pis number(9, 2) not null,
    total_cofins number(9, 2) not null
);

create table curva_abc (
    curva varchar(2) not null,
    despreza_dias_sem_venda number(1),
    bloqueia_digitacao_compra number(1),
    desvio_padrao_x number(5, 2),
    desvio_padrao_y number(5, 2),
    arredondamento_compra number(3, 2)
);

create table custo_falta (
    custo_falta_key number(9) not null,
    lista_falta_key number(6),
    contrato number(6),
    produto_key number(6),
    custo number(11, 4),
    posicao number(3),
    icm_key number(6),
    fator_estoque number(5)
);

create table custo_teorico (
    produto_key number(6) not null,
    valor number(9, 4) not null,
    valor_sem_icm number(9, 4)
);

create table dados_contas_receber (
    dados_contas_receber_key number(6) not null,
    responsavel1 number(6),
    responsavel2 number(6),
    telefone1 varchar(30),
    telefone2 varchar(30),
    email varchar(30) not null,
    fax varchar(30)
);

create table dbchanges (
    arquivo_timestamp number(14) not null,
    arquivo_nome varchar(200) not null,
    data_execucao date
);

create table declaracao_importacao (
    declaracao_importacao_key number(9) not null,
    numero_documento number(10) not null,
    data_registro date not null,
    local_desembaraco varchar(50) not null,
    data_desembaraco date not null,
    uf varchar(2),
    codigo_exportador number(6) not null,
    nf_key number(9) not null
);

create table declaracao_importacao_item (
    declaracao_importacao_item_key number(9) not null,
    declaracao_importacao_key number(9) not null,
    numero_adicao number(10) not null,
    sequencia_item number(10) not null,
    codigo_fabricante number(6) not null,
    valor_desconto number(10, 2) not null
);

create table departamento (
    departamento_key number(6) not null,
    nome varchar(30)
);

create table depreciacao (
    depreciacao_key number(9) not null,
    patrimonio_item_key number(6) not null,
    competencia_key varchar(7) not null,
    taxa number(5, 2) not null,
    taxa_acumulada number(5, 2) not null,
    valor number(17, 4) not null,
    valor_acumulado number(17, 4) not null,
    pis_key number(6),
    valor_pis number(17, 4),
    cofins_key number(6),
    loja_key number(6),
    estornado number(1) default 0 not null,
    valor_cofins number(17, 4),
    percentual_residuo number(5, 2),
    conferente_key number(6),
    data_conferencia date,
    auditor_key number(6),
    data_auditoria date,
    escrita_apuracao_key number(9),
    status_escrita_fiscal_key number(2) default 1 not null,
    data_geracao date default sysdate not null
);

create table desconto (
    desconto_key number(22) not null,
    data date,
    tipo_desconto_key number(2),
    valor number(9, 2)
);

create table desconto_ap (
    desconto_key number(9) not null,
    ap_key number(9) not null
);

create table desconto_cobranca (
    cobranca_key number(22) not null,
    desconto_key number(22) not null
);

create table destinacao_produto (
    destinacao_produto_key number(3) not null,
    descricao varchar(30) not null
);

create table dia_semana (
    dia_semana varchar(20),
    numero number(1) not null
);

create table dias_pagamento (
    contrato_fornecimento_key number(6) not null,
    quantidade_dias number(3) not null,
    porcentagem_fatura number(7, 4),
    dias_pagamento_key number(15) not null
);

create table dias_recebimento (
    pessoa_key number(6) not null,
    quantidade_dias number(3) not null,
    porcentagem_fatura number(7, 4) not null,
    dias_recebimento_key number(9) not null
);

create table distribuicao_demanda (
    distribuicao_demanda_key number(9) not null,
    distribuicao_logist_item_key number(9),
    quantidade_sugerida number(12, 3),
    estoque_cd number(12, 3),
    estoque_loja number(12, 3),
    tipo_estatistica_venda_key number(3),
    dias_proxima_entrega number(3),
    venda_media_diaria number(12, 3),
    quantidade_exposicao number(6)
);

create table distribuicao_logistica (
    distribuicao_logistica_key number(9) not null,
    loja_key number(6) not null,
    produto_key number(6) not null,
    data_geracao date,
    usuario_digitacao_key number(6),
    item_pedido_cd_key number(9),
    tipo_distribuicao_logist_key number(2)
);

create table distribuicao_logistica_item (
    distribuicao_logist_item_key number(9) not null,
    distribuicao_logistica_key number(9) not null,
    destinatario_key number(6) not null,
    data_previsao_faturamento date,
    quantidade_digitada number(12, 3),
    usuario_cancelamento_key number(6),
    item_pedido_destinatario_key number(9),
    data_cancelamento date
);

create global temporary table distribuicao_logistica_tmp (
    distribuicao_logistica_key number(6),
    loja_key number(6),
    produto_key number(6),
    estoque_disponivel number(12, 3),
    multiplo_compra number(8, 4),
    curva varchar(2)
);

create table divergencia_impor_log_item (
    divergencia_impor_log_item_key number(5) not null,
    divergencia_importacao_log_key number(6) not null,
    produto_key number(6) not null,
    loja_key number(6) not null,
    cd_key number(6) not null,
    quantidade number(12, 3) not null
);

create table divergencia_importacao_log (
    divergencia_importacao_log_key number(5) not null,
    usuario_key number(6) not null,
    data date not null,
    arquivo_nome varchar(25)
);

create table divisao_representante (
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    representante_key number(6) not null
);

create table edi_cartao_item (
    edi_cartao_item_key number(15) not null,
    edi_cartao_lote_key number(15) not null,
    administradora_key number(6) not null,
    codigo_autorizacao number(15),
    conta_bancaria_key number(6),
    data_compra date,
    data_deposito date,
    nsu number(15),
    valor number(12, 2),
    valor_desconto number(12, 2),
    data_conciliacao date,
    mov_caixa_key number(15)
);

create table edi_cartao_linha (
    edi_cartao_linha_key number(15) not null,
    edi_cartao_lote_key number(15) not null,
    linha varchar(3000) not null
);

create table edi_cartao_lote (
    edi_cartao_lote_key number(15) not null,
    arq_nome varchar(200) not null,
    data_processado date not null
);

create table embalagem (
    embalagem_key varchar(10) not null,
    nome varchar(20),
    peso_unidade varchar(1)
);

create table empresa (
    pessoa_key number(6) not null
);

create table empresa_contabilidade (
    pessoa_key number(6) not null
);

create table endereco (
    pessoa_key number(6) not null,
    tipo_endereco_key number(3) not null,
    endereco_rua varchar(60),
    endereco_numero varchar(10),
    endereco_complemento varchar(20),
    bairro varchar(50),
    cidade varchar(40),
    estado_sigla varchar(2),
    cep number(8),
    ean number(13),
    endereco_key number(6) not null,
    municipio_key number(6),
    pais_key number(6) not null
);

create table endereco_logistico (
    endereco_logistico_key number(6) not null,
    loja_key number(6),
    endereco_logistico_area_key number(3),
    rua varchar(2),
    coluna number(3),
    nivel number(3),
    sequencia number(3),
    tipo_endereco_logistico_key number(3),
    produto_key number(6),
    capacidade number(6),
    palete_key number(10),
    produto_origem_key number(6)
);

create table endereco_logistico_area (
    endereco_logistico_area_key number(3) not null,
    descricao varchar(50)
);

create table escrita_apuracao (
    escrita_apuracao_key number(6) not null,
    mes_ano number(6) not null,
    loja_key number(6) not null,
    data_apuracao date not null,
    usuario_key number(6) not null
);

create table escrita_apuracao_advertencia (
    escrita_apuracao_advert_key number(9) not null,
    escrita_apuracao_key number(6) not null,
    tipo_escrita_apuracao_adv_key number(3) not null,
    mensagem varchar(300) not null,
    origem_key number(9)
);

create table escrita_apuracao_fed_cred (
    escrita_apuracao_fed_cred_key number(5) not null,
    escrita_apuracao_federal_key number(5) not null,
    base_de_calculo number(12, 2) default 0 not null,
    aliquota number(6, 3) default 0 not null,
    credito number(12, 2) default 0 not null,
    ajustes_de_acrescimo number(12, 2) default 0 not null,
    ajustes_de_reducao number(12, 2) default 0 not null,
    credito_diferido number(12, 2) default 0 not null,
    credito_disponivel number(12, 2) default 0 not null,
    credito_utilizado number(12, 2) default 0 not null,
    credito_futuro number(12, 2) default 0 not null,
    tipo_credito_pis_cofins_key number(3),
    valor_bruto number(12, 2) default 0 not null,
    credito_periodo_anterior number(12, 2) default 0 not null,
    credito_anterior_utilizado number(12, 2) default 0 not null
);

create table escrita_apuracao_fed_cred_det (
    escrita_ap_fed_cred_det_key number(5) not null,
    escrita_apuracao_fed_cred_key number(5) not null,
    tipo_base_credito_pis_key number(2) not null,
    cst_pis_cofins_key number(3) not null,
    base_de_calculo number(12, 2) default 0 not null,
    valor_bruto number(12, 2) default 0 not null
);

create table escrita_apuracao_fed_deb (
    escrita_apuracao_fed_deb_key number(5) not null,
    escrita_apuracao_federal_key number(5) not null,
    receita_bruta number(12, 2) default 0 not null,
    base_de_calculo number(12, 2) default 0 not null,
    ajustes_de_acrescimo number(12, 2) default 0 not null,
    ajustes_de_reducao number(12, 2) default 0 not null,
    diferimento_atual number(12, 2) default 0 not null,
    diferimento_anterior number(12, 2) default 0 not null,
    contribuicao_total number(12, 2) default 0 not null,
    tipo_contr_apurada_pis_key number(2) not null,
    aliquota number(6, 3) default 0 not null
);

create table escrita_apuracao_fed_deb_det (
    escrita_apura_fed_deb_det_key number(5) not null,
    escrita_apuracao_fed_deb_key number(5) not null,
    tipo_detalhe_deb_federal_key number(3) not null,
    cst_pis_cofins_key number(3) not null,
    receita_bruta number(12, 2) not null,
    base_de_calculo number(12, 2) not null,
    contribuicao number(12, 2) not null
);

create table escrita_apuracao_fed_rc_nt (
    escrita_apuracao_fed_rc_nt_key number(5) not null,
    escrita_apuracao_federal_key number(5) not null,
    cst_pis_cofins_key number(3) not null,
    receita_bruta number(12, 2) default 0 not null
);

create table escrita_apuracao_federal (
    escrita_apuracao_federal_key number(5) not null,
    escrita_apuracao_key number(6) not null,
    tipo_imposto_federal_key number(2) not null,
    total_da_contribuicao number(12, 2) default 0 not null,
    credito_do_periodo_atual number(12, 2) default 0 not null,
    credito_do_periodo_anterior number(12, 2) default 0 not null,
    total_a_pagar number(12, 2) default 0 not null,
    credito_transferir_proximo_prd number(12, 2) default 0 not null,
    ap_key number(9),
    total_receitas_nao_tributadas number(12, 2) default 0 not null,
    total_entr_sem_base_de_credito number(12, 2) default 0 not null,
    total_saidas_nao_comerciais number(12, 2) default 0 not null
);

create table escrita_apuracao_icms (
    escrita_apuracao_icms_key number(9) not null,
    debito number(13, 2) default 0 not null,
    credito number(13, 2) default 0 not null,
    saldo_devedor number(13, 2) default 0 not null,
    saldo_credor number(13, 2) default 0 not null,
    imposto_a_recolher number(13, 2) default 0 not null,
    ajuste_a_credito number(13, 2) default 0 not null,
    ajuste_a_debito number(13, 2) default 0 not null,
    saldo_credor_apuracao_anterior number(13, 2) default 0 not null,
    saldo_credor_a_transportar number(13, 2) default 0 not null,
    ap_key number(9),
    escrita_apuracao_key number(6) not null
);

create table escrita_apuracao_icms_item (
    escrita_apuracao_icms_item_key number(9) not null,
    cof number(6),
    aliquota number(2),
    base_calculo number(13, 2),
    valor_contabil number(13, 2),
    valor_icms number(13, 2) default 0 not null,
    valor_isento number(13, 2) default 0 not null,
    valor_outras number(13, 2) default 0 not null,
    sinal number(1),
    escrita_apuracao_icms_key number(9),
    uf varchar(2),
    valor_icms_st number(13, 2) default 0 not null,
    valor_ipi number(13, 2) default 0 not null
);

create table escrita_apuracao_uf (
    escrita_apuracao_uf_key number(9) not null,
    escrita_apuracao_icms_key number(9) not null,
    uf varchar(2) not null,
    valor_icms_st_devolucoes number(13, 2) default 0 not null,
    valor_icms_st_recolhido number(13, 2) default 0 not null,
    valor_retencao_st number(13, 2) default 0 not null,
    valor_outros_creditos_st number(13, 2) default 0 not null,
    saldo_credor_icms_st number(13, 2) default 0 not null,
    saldo_devedor_antes_deducoes number(13, 2) default 0 not null,
    valor_outros_debitos_st number(13, 2) default 0 not null,
    debitos_especiais_st number(13, 2) default 0 not null,
    valor_deducoes_st number(13, 2) default 0 not null
);

create table escrita_documento (
    escrita_documento_key number(15) not null,
    loja_key number(6) not null,
    participante_key number(6) not null,
    descricao varchar(60),
    data_operacao date,
    valor_operacao number(13, 2),
    sinal number(1),
    pis_key number(6),
    valor_pis number(13, 2),
    base_de_calculo_pis_cofins number(13, 2),
    cofins_key number(6),
    valor_cofins number(13, 2),
    tipo_base_credito_pis_key number(2),
    conferente_key number(6),
    data_conferencia date,
    auditor_key number(6),
    data_auditoria date,
    escrita_apuracao_key number(6),
    status_escrita_fiscal_key number(2),
    duplicata_key number(9),
    usuario_cancelamento_key number(6),
    data_cancelamento date,
    numero_documento number(14)
);

create table escrita_fiscal (
    escrita_fiscal_key number(15) not null,
    nf_key number(9),
    tipo_modelo_nf_key number(2),
    nf_serie varchar(3),
    nf_numero number(9),
    flag_emitente varchar(1) default 'P',
    flag_situacao varchar(1) default 'N',
    apuracao_icms_key number(6),
    total_valor number(13, 2),
    total_base_calculo number(13, 2),
    total_valor_icms number(17, 4) default 0 not null,
    total_valor_isento number(13, 2),
    total_valor_outras number(13, 2),
    total_valor_ipi number(13, 2),
    total_valor_cofins number(17, 4) not null,
    total_valor_pis number(17, 4) not null,
    remetente_key number(6),
    destinatario_key number(6),
    ecf number(6),
    data_conferencia date,
    conferente_key number(6),
    data_entrada_saida date,
    data_documento date,
    sinal number(1),
    total_funrural number(17, 2),
    data_auditoria date,
    auditor_key number(6),
    tipo_registro_sintegra_key varchar(3),
    usuario_cancelamento_key number(6),
    data_cancelamento date,
    total_despesa_acessoria number(13, 2) default 0 not null,
    total_base_substituicao number(13, 2) default 0 not null,
    total_valor_icms_substituicao number(13, 2) default 0 not null,
    total_desconto number(13, 2) default 0 not null,
    total_seguro number(13, 2) default 0 not null,
    total_frete number(13, 2) default 0 not null,
    total_mercadorias number(13, 2) default 0 not null,
    consolidado number(1),
    total_base_calculo_icms number(13, 2),
    escrita_fiscal_frete_key number(15),
    emitente_key number(6) not null,
    total_valor_contabil number(13, 2),
    base_pis number(17, 6),
    base_cofins number(17, 6),
    status_escrita_fiscal_key number(2) default 1 not null,
    escrita_apuracao_key number(6),
    uf_remetente varchar(2) not null,
    uf_destinatario varchar(2) not null,
    total_pis_retido number(17, 6),
    total_cofins_retido number(17, 6),
    total_csll_retido number(17, 6),
    total_inss_retido number(17, 6),
    total_irrf_retido number(17, 6),
    total_base_inss_retido number(17, 6),
    total_base_iss number(17, 6),
    total_iss number(17, 6),
    tipo_documento_fiscal_key number(2) not null
);

create table escrita_fiscal_ajuste (
    escrita_fiscal_ajuste_key number(9) not null,
    loja_key number(6) not null,
    data_fato date not null,
    tipo_escrita_fiscal_ajuste_key varchar(60),
    origem_esc_fiscal_ajuste_key number(3) not null,
    valor number(13, 2) not null,
    descricao varchar(255),
    numero_documento varchar(28),
    codigo_origem_ajuste number(15),
    processo_fiscal_key number(6),
    data_conferencia date,
    data_auditoria date,
    conferente_key number(6),
    auditor_key number(6),
    escrita_fiscal_key number(15),
    status_escrita_fiscal_key number(2) default 1 not null,
    escrita_apuracao_key number(6),
    data_cancelamento date,
    usuario_cancelamento_key number(6),
    aliquota number(8, 4) default 0 not null
);

create table escrita_fiscal_detalhe (
    escrita_fiscal_key number(15) not null,
    operacao_inicial number(12),
    operacao_final number(12),
    contador_reducao number(12),
    gt_inicial number(12, 2),
    gt_final number(12, 2),
    total_operacoes_nao_fiscais number(17, 4) default 0,
    desconto_icms number(17, 4) default 0,
    desconto_operacoes_nao_fiscais number(17, 4) default 0,
    acrescimo_icms number(17, 4) default 0,
    acrescimo_oper_nao_fiscais number(17, 4) default 0,
    cancelamento_icms number(17, 4) default 0,
    cancelamento_oper_nao_fiscais number(17, 4) default 0,
    imposto_operacoes_financeiras number(17, 4) default 0,
    venda_liquida number(17, 4),
    venda_bruta number(17, 4),
    origem_reducao_z number(1)
);

create table escrita_fiscal_item (
    escrita_fiscal_item_key number(15) not null,
    escrita_fiscal_key number(15) not null,
    cof number(6),
    valor number(13, 2),
    base_calculo number(13, 2),
    valor_icms number(17, 6) default 0 not null,
    valor_isento number(13, 2) default 0 not null,
    valor_outras number(13, 2) default 0 not null,
    aliquota number(5, 2),
    valor_ipi number(17, 6) default 0 not null,
    valor_cofins number(17, 6) default 0 not null,
    valor_pis number(17, 6) default 0 not null,
    observacao varchar(100),
    funrural number(17, 6) default 0 not null,
    nota_fiscal_item_key number(15),
    produto_key number(6),
    icm_key number(6),
    valor_desconto number(13, 2) default 0 not null,
    valor_despesa_acessoria number(13, 2) default 0 not null,
    valor_unitario number(17, 6) default 0 not null,
    valor_contabil number(13, 2),
    quantidade number(12, 3) default 0 not null,
    base_calculo_icms number(13, 2) default 0 not null,
    valor_mercadorias number(13, 2) default 0 not null,
    valor_icms_substituicao number(13, 2),
    base_calculo_substituicao number(13, 2),
    valor_pauta_fiscal number(13, 2),
    pis_key number(6),
    cofins_key number(6),
    ipi_key number(3),
    indice number(6) not null,
    embalagem_key varchar(10),
    base_pis number(17, 6),
    base_cofins number(17, 6),
    valor_pis_retido number(17, 6),
    valor_cofins_retido number(17, 6),
    valor_csll_retido number(17, 6),
    valor_inss_retido number(17, 6),
    valor_irrf_retido number(17, 6),
    base_inss_retido number(17, 6),
    base_iss number(17, 6),
    valor_iss number(17, 6),
    descricao varchar(120),
    codigo_servico varchar(60)
);

create table escrita_fiscal_observacao (
    escrita_fiscal_observacao_key number(6) not null,
    escrita_fiscal_key number(15) not null,
    modelo_observacao_fiscal_key number(6) not null,
    complemento varchar(255)
);

create table escrita_fiscal_ocorrencia (
    escrita_fiscal_ocorrencia_key number(9) not null,
    escrita_fiscal_key number(15) not null,
    data date not null,
    usuario_key number(6) not null,
    descricao varchar(200) not null
);

create table esquema_contabil (
    esquema_contabil_key number(12) not null,
    processo_contabil_key number(5) not null
);

create table estabelecimento_filial (
    estabelecimento_filial_key number(6) not null,
    codigo_estabelecimento_filial number(15) not null,
    estabelecimento_matriz_key number(6) not null,
    loja_key number(6),
    tipo_captura_key number(6)
);

create table estabelecimento_matriz (
    estabelecimento_matriz_key number(6) not null,
    codigo_estabelecimento_matriz number(15) not null,
    descricao varchar(50),
    administradora_key number(6) not null
);

create table estado (
    estado_sigla varchar(2) not null,
    nome varchar(30),
    pais varchar(20),
    codigo_ibge number(2) not null,
    junta_comercial number(6)
);

create table estado_civil (
    estado_civil_key number(2) not null,
    descricao varchar(30)
);

create table estado_patrimonio_item (
    estado_patrimonio_item_key number(6) not null,
    estado_sigla varchar(2) not null,
    numero_parcelas number(6) default 1 not null
);

create table estoque_diario (
    data date not null,
    loja_key number(6) not null,
    produto_key number(6) not null,
    quantidade number(17, 3) not null,
    custo_unitario number(19, 6) not null,
    custo_unitario_com_icm number(19, 6) not null
);

create table estoque_diario_detalhe (
    data date not null,
    loja_key number(6) not null,
    indicador_de_propriedade_key number(2) not null,
    terceiro_key number(6),
    produto_key number(6) not null,
    quantidade number(17, 3) default 0 not null,
    custo_unitario number(19, 6) default 0 not null,
    custo_unitario_com_imposto number(19, 6) default 0 not null
);

create table exercicio_contabil (
    exercicio_contabil_key number(4) not null,
    descricao varchar(40),
    ano number(6)
);

create table exportacao_redf (
    exportacao_redf_key number(8) not null,
    escrita_fiscal_key number(15),
    data date,
    usuario_key number(6),
    loja_key number(6)
);

create table factoring (
    pessoa_key number(6) not null
);

create table fatura (
    fatura_key number(12) not null,
    data_emissao date,
    quantidade_parcelas number(3) not null,
    valor number(12, 2) not null
);

create table fechamento_caixa_operador (
    fechamento_caixa_operador_key number(9) not null,
    data date default sysdate not null,
    loja_key number(6) not null,
    operador_key number(6) not null,
    sangrias number(11, 2) not null,
    troco_final number(11, 2) not null,
    cartoes number(11, 2) not null,
    ticket number(11, 2) not null,
    total number(11, 2) not null,
    devolucoes number(11, 2) not null,
    total_liquido number(11, 2) not null,
    fita number(11, 2) not null,
    troco_inicial number(11, 2) not null,
    quebra number(11, 2) not null,
    numero_ecf number(6) not null,
    contra_vale number(11, 2),
    total_sangrias number(11, 2),
    total_bruto number(11, 2),
    sangrias_fundo number(6, 2),
    devolucoes_valor number(6, 2) default 0 not null,
    pode_ser_alterado varchar(1) default 'S' not null,
    cheque number(11, 2) default 0 not null,
    usuario_key number(6)
);

create table ficha_estoque (
    produto_key number(6) not null,
    loja_key number(6) not null,
    data date,
    quantidade number(17, 3) not null,
    custo_unitario number(19, 6) not null,
    custo_unitario_com_icm number(19, 6) not null,
    quantidade_em_terceiros number(17, 3) default 0 not null,
    quantidade_de_terceiros number(17, 3) default 0 not null,
    quantidade_pendente_em_pedidos number(17, 3) default 0 not null,
    quantidade_reservada number(17, 3) default 0 not null,
    quantidade_futura number(17, 3) default 0 not null
);

create table ficha_estoque_terceiros (
    loja_key number(6) not null,
    indicador_de_propriedade_key number(2) not null,
    terceiro_key number(6) not null,
    produto_key number(6) not null,
    quantidade number(17, 3) default 0 not null
);

create table ficha_estoque_troca (
    produto_key number(6) not null,
    loja_key number(6) not null,
    quantidade number(17, 3) not null,
    custo_medio_sem_imposto_unit number(17, 4) not null,
    custo_medio_com_imposto_unit number(17, 4) not null
);

create table finalizadora (
    finalizadora_key number(9) not null,
    descricao varchar(200) not null,
    classe varchar(2)
);

create table folha_pagamento (
    folha_pagamento_key number(6) not null,
    loja_key number(6),
    competencia_key varchar(7)
);

create table folha_pagamento_detalhe (
    folha_pagamento_detalhe_key number(6) not null,
    folha_pgto_funcionario_key number(6),
    tipo_folha_pagamento_key number(6),
    valor_base number(9, 2),
    referencia number(9, 3),
    valor_total number(9, 2)
);

create table folha_pagamento_formato (
    folha_pagamento_formato_key number(6) not null,
    descricao varchar(100),
    classe varchar(100)
);

create table folha_pagamento_funcionario (
    folha_pgto_funcionario_key number(6) not null,
    folha_pagamento_key number(6),
    funcionario_key number(6)
);

create table forma_pagamento (
    forma_pagamento_key number(3) not null,
    descricao varchar(40),
    legenda varchar(1)
);

create table formato_nota_fiscal (
    formato_key number(6) not null,
    descricao varchar(40),
    classe varchar(40)
);

create table fornecedor (
    pessoa_key number(6) not null,
    van_edi_key number(6) default 0 not null,
    fornecedor_matriz_key number(6),
    produtor_rural number(1) not null,
    permitir_lancamento_nf_manual number(1) default 1,
    destinatario_devolucao_key number(6),
    tipo_layout_edi_comercial_key number(3)
);

create table fornecedor_divisao (
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    descricao varchar(40),
    fornecedor_superior number(6),
    linha_superior number(3),
    fornecedor_divisao_key number(9) not null,
    status_pauta_fiscal number(1) default 0,
    linha_indefinida number(1) default 0,
    comentario varchar(200)
);

create table fornecedor_produto (
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    produto_key number(6) not null,
    codigo_referencia varchar(60),
    descricao_nf varchar(70),
    fornecedor_produto_key number(15) not null,
    comentario varchar(200),
    fator_faturamento_fornecedor number(14, 6) default 1 not null,
    tipo_embalagem_faturamento_key number(2) not null
);

create table func_afastamento (
    func_afastamento_key number(6) not null,
    funcionario_key number(6),
    func_motivo_afastamento_key number(6),
    data_inicio date,
    data_previsao_retorno date,
    data_retorno date,
    observacao varchar(400)
);

create table func_dependente (
    func_dependente_key number(6) not null,
    funcionario_key number(6),
    func_grau_parentesco_key number(3),
    nome varchar(100),
    data_nascimento date,
    convenio_medico number(1)
);

create table func_ferias (
    func_ferias_key number(6) not null,
    funcionario_key number(6),
    data_aquisicao_inicial date,
    data_aquisicao_final date,
    data_gozo_inicial date,
    data_gozo_final date,
    observacao varchar(400)
);

create table func_funcao (
    func_funcao_key number(6) not null,
    funcionario_key number(6),
    data_reajuste date,
    funcao_anterior_registro_key number(3),
    funcao_anterior_efetiva_key number(3),
    funcao_reajustada_registro_key number(3),
    funcao_reajustada_efetiva_key number(3),
    observacao varchar(400)
);

create table func_grau_parentesco (
    func_grau_parentesco_key number(3) not null,
    descricao varchar(100)
);

create table func_historico (
    func_historico_key number(6) not null,
    funcionario_key number(6),
    assunto varchar(100),
    descricao varchar(400)
);

create table func_horario_trabalho (
    func_horario_trabalho_key number(3) not null,
    descricao varchar(100),
    hora_entrada number(4),
    hora_saida_intervalo number(4),
    hora_retorno number(4),
    hora_saida number(4)
);

create table func_motivo_afastamento (
    func_motivo_afastamento_key number(3) not null,
    descricao varchar(100)
);

create table func_motivo_ajuste_salario (
    func_motivo_ajuste_salario_key number(3) not null,
    descricao varchar(100)
);

create table func_salario (
    func_salario_key number(6) not null,
    funcionario_key number(6),
    data_reajuste date,
    valor_anterior_salario number(9, 2),
    valor_reajustado_salario number(9, 2),
    valor_anterior_bonus number(9, 2),
    valor_reajustado_bonus number(9, 2),
    func_motivo_ajuste_salario_key number(3),
    observacao varchar(400)
);

create table funcao (
    funcao_key number(6) not null,
    descricao varchar(30) not null,
    secao_key number(6),
    salario_base_mensalista number(9, 2),
    salario_base_horista number(9, 2)
);

create table funcionario (
    pessoa_key number(6) not null,
    loja_registro number(6) not null,
    loja_efetiva number(6) not null,
    funcao_registro number(6) not null,
    funcao_efetiva number(6) not null,
    salario_registro number(9, 2) not null,
    salario_adicional number(9, 2) not null,
    status_funcionario_key number(6) not null,
    codigo_dp number(6) default 0,
    data_admissao date,
    nome_pai varchar(60),
    nome_mae varchar(60),
    pis_numero varchar(20),
    carteira_profissional_numero number(10),
    carteira_profissional_serie number(8),
    carteira_profissional_estado varchar(2),
    titulo_eleitor_numero varchar(20),
    titulo_eleitor_zona varchar(8),
    titulo_eleitor_secao varchar(8),
    carteira_reservista_numero varchar(20),
    naturalidade varchar(40),
    nacionalidade varchar(40),
    conjuge varchar(100),
    tipo_sanguineo_key number(1),
    tipo_grau_de_instrucao_key number(6),
    motivo_demissao_anterior varchar(400),
    motivo_demissao varchar(400),
    data_demissao_anterior date,
    data_demissao date,
    data_admissao_anterior date,
    func_horario_trabalho_key number(3),
    convenio_medico number(1),
    vale_transporte number(1) default 0,
    departamento varchar(50),
    carteira_profissional_emissao date,
    banco_conta_salario_key number(3),
    agencia_conta_salario varchar(10),
    numero_conta_salario varchar(20),
    sindicato_key number(6),
    raca varchar(20),
    naturalidade_estado char(2),
    titulo_eleitor_data_emissao date,
    titulo_eleitor_estado char(2),
    tipo_vale_transporte varchar(20)
);

create table funcionario_pensionista (
    funcionario_pensionista_key number(6) not null,
    funcionario_key number(6) not null,
    pensionista_key number(6) not null,
    ativo number(1) default 1 not null
);

create table funcionario_vale_compra (
    pessoa_key number(6) not null,
    valor_limite number(6, 2),
    habilita_compra number(1) not null
);

create table governo_estadual (
    pessoa_key number(6) not null,
    uf varchar(2)
);

create table grade_produto (
    grade_produto_key number(6) not null,
    descricao varchar(40)
);

create table grupo (
    grupo_key number(6) not null,
    nome varchar(40),
    valor_maximo_diario_financeiro number(11, 2),
    altera_preco_venda number(1) default 0,
    altera_preco_venda_rede number(1) default 0,
    altera_preco_venda_regiao number(1) default 0,
    altera_preco_venda_secao number(1) default 0,
    altera_preco_venda_loja number(1) default 0,
    ativo number(1) default 1 not null
);

create table grupo_acesso_conta_contabil (
    grupo_acesso_key number(6) not null,
    conta_contabil_key number(9) not null
);

create table grupo_acesso_regiao_preco (
    grupo_acesso_key number(6) not null,
    regiao_preco_key number(3) not null
);

create table grupo_acesso_secao_preco (
    grupo_acesso_key number(6) not null,
    secao_key number(6) not null
);

create table grupo_caixa (
    grupo_caixa_key number(6) not null,
    descricao varchar(30) not null
);

create table grupo_financeiro (
    grupo_financeiro_key number(3) not null,
    descricao varchar(100) not null
);

create table grupo_patrimonio (
    grupo_patrimonio_key number(3) not null,
    descricao varchar(100) not null
);

create table grupo_produto (
    grupo_produto_key number(6) not null,
    secao_key number(6) not null,
    nome varchar(40),
    ultima_alteracao date
);

create table grupo_usuario (
    usuario_key number(6) not null,
    grupo_key number(6) not null
);

create table guia_carro_forte (
    guia_carro_forte_key number(6) not null,
    contrato_carro_forte_key number(6) not null,
    guia_numero number(9) not null,
    guia_serie number(1) not null,
    guia_digito number(1) not null,
    data_coleta date default SYSDATE,
    carro_numero number(6) not null,
    rota_sequencia varchar(20),
    hora_entrada varchar(5),
    hora_saida varchar(5),
    rotineiro_extra varchar(1) default 'R',
    valor_dinheiro number(12, 2),
    valor_cheque number(12, 2),
    valor_moeda number(12, 2),
    lacre_numero varchar(100),
    quantidade_malotes number(3) not null,
    responsavel_transportadora varchar(40),
    usuario_key number(6) not null,
    data_emissao date default SYSDATE,
    valor_dinheiro_dia_atual number(12, 2),
    tipo_guia number(1)
);

create table guia_carro_forte_mov_caixa (
    mov_caixa_key number(15) not null,
    guia_carro_forte_key number(6) not null
);

create table guia_diferenca (
    guia_diferenca_key number(6) not null,
    guia_carro_forte_key number(6) not null,
    guia_motivo_diferenca_key number(3) not null,
    data_lancamento date not null,
    valor number(12, 2) not null,
    usuario_key number(6)
);

create table guia_motivo_diferenca (
    guia_motivo_diferenca_key number(3) not null,
    descricao varchar(100),
    sinal number(1)
);

create table guia_recolhimento (
    guia_recolhimento_key number(6) not null,
    loja_key number(6) not null,
    tipo_imposto_key number(2) not null,
    data_emissao date not null,
    data_vencimento date not null,
    data_apuracao_inicial date not null,
    data_apuracao_final date not null,
    tipo_receita_tributaria_key number(6) not null,
    quota number(2),
    valor number(12, 2) not null,
    usuario_key number(6) not null,
    ap_key number(9) not null,
    status_guia_recolhimento_key number(2) not null,
    gerada_manualmente number(1) default 0 not null,
    tipo_guia_recolhi_detalhe_key number(3)
);

create table guia_recolhimento_escrita (
    guia_recolhimento_key number(6) not null,
    escrita_fiscal_key number(15) not null
);

create table historico_pdv (
    loja_pdv_key number(6) not null,
    operador_key number(6) not null,
    data date not null,
    total_informado number(10, 2) not null,
    historico_key number(6) not null,
    tipo_lancamento_caixa_key number(6) not null
);

create table icm (
    icm_key number(6) not null,
    codigo_tributacao number(2) not null,
    codigo_origem number(1) not null,
    descricao varchar(40),
    sigla varchar(10),
    aliquota number(5, 2),
    reducao number(5, 2),
    codigo_zanthus number(2),
    codigo_gdr number(2),
    uso_entrada number(1) default 1,
    uso_saida number(1) default 1,
    codigo_hipcom varchar(3),
    codigo_gz number(6),
    descricao_abreviada varchar(25),
    csosn_key number(3)
);

create table icm_sub_grupo (
    icm_key number(6) not null,
    subgrupo_produto_key number(6) not null
);

create table icm_venda (
    produto_key number(6) not null,
    estado_sigla varchar(2) default 'SP',
    icm_key number(6) default 3 not null,
    icm_venda_key number(9) not null,
    iva_st number(13, 4) default 0,
    aliquota_interna number(6, 3) default 0,
    base_icmr number(13, 4) default 0,
    pauta_fiscal number(11, 2) default 0,
    icms_atacado_key number(9),
    item_com_reducao_na_base_st number(1) default 0 not null
);

create table imovel_despesa (
    imovel_despesa_key number(6) not null,
    loja_key number(6),
    descricao varchar(160),
    endereco_rua varchar(200),
    endereco_numero varchar(20),
    cidade varchar(100),
    estado varchar(2),
    cep varchar(9)
);

create table importacao_conta_bancaria (
    importacao_conta_bancaria_key number(9) not null,
    conta_numero varchar(12),
    conta_digito varchar(1),
    agencia_numero varchar(8),
    agencia_digito varchar(1),
    banco_numero number(3),
    inscricao_numero varchar(15),
    tipo_inscricao_key number(2),
    titular varchar(70),
    ignorar number(1) default 0 not null
);

create table importacao_estabelecimento (
    importacao_estabelecimento_key number(6) not null,
    administradora_key number(6),
    codigo_estabelecimento_filial number(18),
    codigo_estabelecimento_matriz number(18),
    descricao varchar(50)
);

create table importacao_pessoa (
    importacao_pessoa_key number(6) not null,
    nome varchar(70),
    inscricao_numero varchar(15),
    tipo_inscricao_key number(2),
    tipo_pessoa_descricao_key number(3),
    ignorar number(1) default 0 not null,
    informacao varchar(120)
);

create table indicador_de_propriedade (
    indicador_de_propriedade_key number(2) not null,
    descricao varchar(50) not null
);

create table indicador_do_uso_do_ativo (
    indicador_uso_ativo_key number(3) not null,
    descricao varchar(100) not null
);

create table indicador_pagamento (
    indicador_pagamento_key number(3) not null,
    descricao varchar(30)
);

create table informacao_nutricional (
    produto_key number(6) not null,
    qtde_porcao number(3) not null,
    unidade_porcao_key number(1) not null,
    medida_caseira_inteira number(2) not null,
    medida_caseira_decimal_key number(1) not null,
    medida_caseira_descricao_key number(2) not null,
    q_calorias number(4) not null,
    p_calorias number(2) not null,
    q_carboidratos number(4, 1) not null,
    p_carboidratos number(2) not null,
    q_proteinas number(4, 1) not null,
    p_proteinas number(2) not null,
    q_gorduras_totais number(3, 1) not null,
    p_gorduras_totais number(2) not null,
    q_gorduras_saturadas number(3, 1) not null,
    p_gorduras_saturadas number(2) not null,
    q_colesterol number(3) not null,
    p_colesterol number(2) not null,
    q_fibra number(4, 1) not null,
    p_fibra number(2) not null,
    q_calcio number(4, 1) not null,
    p_calcio number(2) not null,
    q_ferro number(4, 2) not null,
    p_ferro number(2) not null,
    q_sodio number(4) not null,
    p_sodio number(3) not null,
    q_gorduras_trans number(3, 1) default 0 not null,
    p_gorduras_trans number(2) default 0 not null
);

create table inventario (
    inventario_key number(6) not null,
    loja_key number(6) not null,
    data_abertura date,
    data_fechamento date,
    inventario_geral number(6),
    competencia_final date,
    inventario_key_anterior number(6),
    descricao varchar(50),
    parcial number(1) default 0 not null,
    valor_total_inventario_contado number(15, 3) default 0 not null,
    valor_total_inventario_sistema number(15, 3) default 0 not null
);

create table inventario_area (
    inventario_area_key varchar(1) not null,
    descricao varchar(20)
);

create table inventario_geral (
    inventario_geral number(6) not null,
    competencia_inicial date,
    competencia_final date
);

create table inventario_geral_item (
    inventario_geral number(6) not null,
    produto_key number(6) not null
);

create table inventario_item (
    inventario_key number(6) not null,
    lote number(7) not null,
    sequencia number(5) not null,
    barra number(14) not null,
    quantidade number(12, 3) not null
);

create table inventario_lote (
    inventario_key number(6) not null,
    lote number(7) not null,
    area varchar(1) not null,
    terceiro_key number(6)
);

create table inventario_movimento (
    inventario_key number(6) not null,
    produto_key number(6) not null,
    quantidade_contada number(15, 3) default 0 not null,
    quantidade_sistema number(15, 3) default 0 not null,
    custo_sem_icm number(12, 4) default 0 not null,
    custo_com_icm number(12, 4) default 0 not null,
    ultimo_inv_mov_ajuste_key number(6)
);

create table inventario_movimento_ajuste (
    inventario_mov_ajuste_key number(6),
    data date,
    produto_key number(6),
    quantidade_anterior number(10, 3),
    quantidade_nova number(10, 3),
    usuario_key number(6),
    movimento_estoque_key number(15),
    inventario_key number(6)
);

create table inventario_movimento_detalhe (
    inventario_movimento_det_key number(8) not null,
    inventario_key number(6) not null,
    produto_key number(6) not null,
    indicador_de_propriedade_key number(2) not null,
    terceiro_key number(6),
    quantidade_contada number(15, 3) not null
);

create table inventario_saldo (
    inventario_key number(6) not null,
    produto_key number(6) not null,
    saldo number(10, 3),
    custo_com_icm number(10, 4),
    custo_sem_icm number(10, 4)
);

create table inventario_troca (
    inventario_troca_key number(9) not null,
    loja_key number(6),
    data date,
    usuario_key number(6),
    quantidade_total number(12, 3)
);

create table inventario_troca_item (
    inventario_troca_item_key number(9) not null,
    inventario_troca_key number(9),
    item_key number(15),
    quantidade_sistema number(12, 3),
    quantidade_encontrada number(12, 3),
    movimento_estoque_key number(15)
);

create table ip_acesso (
    ip varchar(15),
    local varchar(30),
    mask varchar(15),
    ip_acesso_key number(3)
);

create table ipi (
    ipi_key number(3) not null,
    cst_ipi_key number(3),
    aliquota number(6, 2) not null,
    descricao varchar(50) not null,
    usa_entrada number(1),
    usa_saida number(1)
);

create table item (
    produto_key number(6) not null,
    tipo_codigo varchar(4),
    barra_key number(14) not null,
    referencia varchar(20),
    item_key number(15) not null
);

create table item_cupom_devolvido (
    item_cupom_devolvido_key number(9) not null,
    barra_key number(14) not null,
    qtd_lancada number(13, 3) not null,
    valor_devolvido number(10, 3),
    lancado_por number(6),
    produto_key number(6) not null,
    cupom_devolvido_key number(8),
    cupom_item_key number(15)
);

create table item_falta (
    item_falta_key number(9) not null,
    produto_key number(6),
    loja_key number(6),
    lista_falta_key number(6)
);

create table item_pedido (
    item_pedido_key number(9) not null,
    pelt_key number(9),
    negociacao_item_key number(14),
    produto_key number(6) not null,
    quantidade number(12, 3) not null,
    fator_estoque number(10, 4) not null,
    desconto number(13, 4),
    produto_venda_key number(6),
    sugestao number(12, 3),
    pendencia number(1) default 1,
    pendencia_qtd number(12, 3) default 0,
    cd_key number(6),
    venda_media_diaria number(12, 3),
    usuario_aprovacao number(6),
    status_aprovacao varchar(1) default 'P',
    quantidade_aprovada number(9, 3),
    data_validade_esperada date
);

create table item_pedido_falta (
    item_pedido_falta_key number(9) not null,
    item_falta_key number(9),
    custo_falta_key number(9),
    quantidade number(9) not null,
    icm_key number(6)
);

create table junta_comercial (
    junta_comercial_key number(6) not null,
    descricao varchar(80) not null,
    descricao_abreviada varchar(30) not null
);

create global temporary table keys (
    keyi1 number(22),
    keyi2 number(22),
    keyi3 number(22),
    keys1 varchar(400),
    keys2 varchar(400),
    keys3 varchar(400),
    keyi4 number(22),
    keyi5 number(22),
    keyi6 number(22),
    keyd1 date,
    keyi7 number(22),
    keyd2 date,
    keyd3 date
);

create table lancamento_loja (
    lancamento_loja_key number(9) not null,
    data date not null,
    hora date not null,
    fiscal_key number(6),
    tipo_lancamento_caixa_key number(9),
    valor number(12, 2) default 0 not null,
    acrescimo_financeiro number(12, 2),
    operador_key number(6),
    conveniado_key number(6),
    numero_ecf number(6),
    loja_key number(6),
    observacao varchar(200),
    cupom_numero number(15),
    caixa_central number(1) not null,
    pessoa_key number(6),
    cpf_cnpj varchar(19),
    numero_parcelas number(2),
    sequencia_parcela number(2),
    valor_parcela number(13, 2),
    data_parcela date,
    valor_taxa_servico number(10, 2),
    camara_compensacao number(3),
    numero_banco number(4),
    numero_agencia number(7),
    numero_conta_corrente number(13),
    numero_documento number(19),
    data_deposito date,
    nsu number(20),
    numero_autorizacao_rede number(6),
    numero_controle_autorizadora number(9),
    valor_juros number(9, 2),
    valor_juros_administradora number(9, 2),
    cupom_fiscal_key number(15),
    tipo_cupom_key number(3) default 1
);

create table lancamento_loja_log (
    lancamento_loja_key number(9),
    data date not null,
    hora date not null,
    fiscal_key number(6),
    tipo_lancamento_caixa_key number(9),
    valor number(12, 2) not null,
    acrescimo_financeiro number(12, 2),
    operador_key number(6),
    conveniado_key number(6),
    numero_ecf number(6),
    loja_key number(6),
    observacao varchar(50),
    cupom_numero number(15),
    caixa_central number(1) not null,
    pessoa_key number(6),
    cpf_cnpj varchar(19),
    numero_parcelas number(2),
    sequencia_parcela number(2),
    valor_parcela number(13, 2),
    data_parcela date,
    valor_taxa_servico number(10, 2),
    camara_compensacao number(3),
    numero_banco number(4),
    numero_agencia number(7),
    numero_conta_corrente number(13),
    numero_documento number(19),
    data_deposito date,
    nsu number(20),
    numero_autorizacao_rede number(6),
    numero_controle_autorizadora number(9),
    valor_juros number(9, 2),
    valor_juros_administradora number(9, 2),
    cupom_fiscal_key number(15),
    tipo_cupom_key number(3) default 1
);

create table lancamento_loja_saldo (
    lancamento_loja_saldo_key number(6) not null,
    loja_key number(6) not null,
    valor number(12, 2) not null,
    data date,
    conta_analitica_key number(6) not null
);

create table last_keys (
    loja_key number(6) not null,
    produto_key number(6),
    movimento_estoque_key number(22)
);

create table leitura_z (
    cupom_fiscal_key number(15) not null,
    tipo_transacao number(2) not null,
    tipo_leitura number(2) not null,
    data_venda date not null,
    loja_key number(6) not null,
    valor number(12, 2) not null,
    ecf number(6) not null,
    leitura_z_key number(17) not null,
    cupom_numero number(9),
    vd_tipo_transacao_key number(6)
);

create table linha (
    linha number(2)
);

create table linha_cd (
    linha_cd_key number(9) not null,
    fornecedor_key number(6),
    divisao_key number(3),
    produto_key number(6),
    loja_key number(6),
    cd_key number(6)
);

create table linha_compra (
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    loja_key number(6) not null,
    produto_key number(6) not null,
    data_emissao date,
    comprador_key number(6) not null,
    observacao varchar(50),
    data_inicial date,
    data_final date
);

create table linha_loja (
    produto_key number(6) not null,
    loja_key number(6) not null,
    quantidade_exposicao number(6),
    quantidade_ponto_extra number(6)
);

create table lista_falta (
    lista_falta_key number(6) not null,
    data_emissao date,
    status varchar(1)
);

create table lista_falta_geral (
    id number(6) not null,
    lista_geral_key number(6) not null,
    lista_falta_key number(6) not null,
    status varchar(1) default 'A' not null,
    data date not null
);

create table lista_falta_pedido_master (
    lista_falta_geral_key number(6) not null,
    pedido_key number(9) not null
);

create table lista_produto (
    lista_produto_key number(6) not null,
    nome varchar(100),
    status number(1),
    data_inicial date,
    data_final date
);

create table lista_produto_fornecedor (
    lista_produto_fornecedor_key number(6) not null,
    lista_produto_key number(6),
    fornecedor_key number(6)
);

create table lista_produto_item (
    lista_produto_key number(6) not null,
    produto_key number(6) not null
);

create table livro_fiscal_inventario (
    livro_fiscal_inventario_key number(6) not null,
    loja_key number(6) not null,
    ano number(22),
    produto_key number(6) not null,
    descricao varchar(50),
    saldo_estoque number(12, 3),
    emb varchar(20),
    custo_estoque_com_impostos number(10, 4),
    custo_estoque_sem_impostos number(10, 4),
    aliq number(22),
    classificacao_fiscal varchar(10)
);

create table log_arquivo (
    log_arquivo_key number(6) not null,
    arquivo_key number(6) not null,
    nome varchar(50),
    usuario number(6) not null,
    data date,
    operacao number(1) not null
);

create table log_arquivo_nfe_recebido (
    log_arquivo_nfe_recebido_key number(7) not null,
    arquivo_nfe_recebido_key number(6),
    ocorrencia varchar(400),
    tipo_gravidade_log_key number(2) default 1 not null,
    tipo_log_arquivo_nfe_receb_key number(3) default 1 not null,
    codigo_de_referencia number(10)
);

create table log_baixa_venda (
    log_baixa_venda_key number(6) not null,
    usuario_key number(6),
    data_operacao date,
    data_venda date,
    loja_key number(6),
    tipo_movimento_key number(3),
    ecf number(4) not null
);

create table log_grupo (
    log_grupo_key number(9) not null,
    usuario_key number(6),
    data date,
    grupo_key number(6),
    permissao_key number(6),
    operacao number(1)
);

create table log_parametro (
    log_parametro_key number(9) not null,
    tipo_parametro_key number(1),
    parametro_key varchar(100),
    data date,
    usuario_key number(6),
    valor_antigo varchar(1000),
    valor_novo varchar(1000)
);

create table log_permissao (
    log_permissao_key number(9) not null,
    usuario_alteracao_key number(6),
    operacao number(1),
    usuario_key number(6),
    data date,
    grupo_key number(6)
);

create table log_processado (
    log_processado_key number(10) not null,
    usuario_key number(6) not null,
    arquivo_key number(10) not null,
    data date,
    operacao number(2) not null
);

create table log_prorrogacao_ofertas (
    log_key number(9) not null,
    preco_venda_key number(9) not null,
    preco number(9, 2) not null,
    alteracao number(3) not null,
    alterado_em date default sysdate not null,
    alterado_por number(6) not null,
    data_final_anterior date not null
);

create table log_server (
    log_server_key number(6),
    server_name varchar(40),
    data date,
    versao_antiga varchar(40),
    versao_atual varchar(40)
);

create table log_sessao (
    log_sessao_key number(22) not null,
    usuario_key number(6) not null,
    login date,
    logout date,
    ip varchar(15),
    expirado char(1)
);

create table log_sistema (
    log_sistema_key number(9) not null,
    ocorrencia varchar(700) not null,
    data_ocorrencia date not null,
    usuario_key number(6) not null,
    tipo_log_key number(6) not null,
    item_key number(15) not null
);

create table logistica_carga (
    logistica_carga_key number(9) not null,
    cd_key number(6) not null
);

create table logistica_lote (
    logistica_lote_key number(9) not null,
    logistica_carga_key number(9) not null,
    tipo_separacao_key number(3),
    destinatario_key number(6) not null,
    numero number(5),
    data_geracao date,
    data_separacao date,
    usuario_separacao_key number(6),
    usuario_geracao_key number(6),
    data_faturamento date,
    indicador_de_propriedade_key number(2) not null,
    data_conferencia date,
    usuario_conferencia_key number(6)
);

create table logistica_lote_item (
    logistica_lote_item_key number(9) not null,
    logistica_lote_key number(9) not null,
    produto_key number(6) not null,
    quantidade_pedida number(12, 3),
    quantidade_separada number(12, 3),
    quantidade_conferida number(12, 3),
    quantidade_faturada number(12, 3),
    preco_faturado number(9, 2),
    fator_estoque number(6),
    icm_faturado_key number(6),
    nf_key number(9),
    reserva_estoque_item_key number(9)
);

create table loja (
    numero number(6) not null,
    classificacao char(1),
    pessoa_key number(6) not null,
    area_total number(6),
    area_venda number(6),
    funcionarios number(5),
    check_outs number(5),
    vagas_carros number(5),
    cd_key number(6) not null,
    regiao_preco_key number(3),
    inclui_calculo number(1) not null,
    teste number(1) default 0 not null,
    loja_troca_key number(6),
    rede_key number(3),
    nome_rede varchar(10),
    dados_contas_receber_key number(6),
    rateio_despesa number(6, 3),
    controla_estoque number(1) default 1 not null,
    cd number(1) default 0,
    despreza_margem_quebra number(1) default 0,
    usa_tabela_preco_transferencia number(1) default 0,
    bandeira_key number(6),
    loja_padrao_custo number(1) default 0,
    empresa_key number(6),
    codigo_contabilidade varchar(15),
    contador_key number(6),
    tipo_ambiente_nfe_key number(2) default -1 not null,
    loja_ramo_atividade_key number(6),
    status number(1) default 1,
    cnae_key number(3) not null,
    loja_matriz_key number(6),
    tipo_regime_tributario_key number(6) not null
);

create table loja_balanca (
    loja_key number(6) not null,
    balanca_key number(3) not null
);

create table loja_cartao_baixa (
    loja_cartao_baixa_key number(9) not null,
    loja_key number(6),
    conta_debito number(9) not null,
    conta_credito number(9) not null,
    tipo_lancamento_caixa_key number(9) not null
);

create table loja_pdv (
    tipo_pdv_key number(6),
    loja_key number(6) not null,
    numero_ecf number(6),
    loja_pdv_key number(6) not null,
    ativo number(1) default 0,
    numero_serie_ecf varchar(21),
    manutencao number(1)
);

create table loja_ramo_atividade (
    loja_ramo_atividade_key number(6) not null,
    descricao varchar(60)
);

create table loja_tipo_balanca (
    loja_key number(6) not null,
    tipo_balanca_key number(6) not null
);

create table loja_tipo_etiqueta (
    loja_key number(6) not null,
    tipo_etiqueta_key number(6) not null
);

create table loja_tipo_pdv (
    loja_key number(6) not null,
    tipo_pdv_key number(6) not null
);

create table loja_tipo_terminal_consulta (
    loja_key number(4) not null,
    tipo_terminal_consulta_key number(6) not null
);

create table lote_troca (
    lote_troca_key number(6) not null,
    data_criacao date not null,
    pessoa_key number(6) not null,
    loja_key number(6) not null,
    tipo_lote_troca_key number(6),
    status_lote number(1)
);

create table lote_troca_item (
    lote_troca_item_key number(12) not null,
    produto_key number(6) not null,
    quantidade number(8, 3) not null,
    lote_troca_key number(6),
    motivo_troca_key number(6),
    movimento_estoque_key number(15)
);

create table mapa_contabil (
    mapa_contabil_key number(6) not null,
    descricao varchar(60) not null,
    permite_mapeamento number(1),
    mapa_contabil_superior number(6),
    conta_contabil_key number(9)
);

create table mapa_pdv_icms (
    mapa_pdv_icms_key number(6) not null,
    loja_key number(6) not null,
    icm_key number(6) not null,
    codigo_pdv varchar(6)
);

create table mapa_recebimento_loja (
    mapa_recebimento_loja_key number(6) not null,
    recebimento_key number(6) not null,
    loja_key number(6) not null,
    codigo_pdv varchar(6) not null
);

create table mapa_resumo (
    mapa_resumo_key number(8) not null,
    numero number(5),
    data date,
    loja_key number(6),
    data_cancelamento date,
    usuario_cancelamento_key number(6),
    data_emissao date,
    usuario_emissor_key number(6)
);

create table mapa_resumo_item (
    mapa_resumo_item_key number(9) not null,
    mapa_resumo_key number(8),
    ecf number(3),
    operacao_inicial number(12),
    operacao_final number(12),
    contador_reducoes number(12),
    movimento_diario number(13, 2),
    valor_cancelamentos number(13, 2),
    valor_contabil number(13, 2),
    valor_icms_total number(13, 2),
    valor_icms7 number(13, 2),
    valor_icms12 number(13, 2),
    valor_icms18 number(13, 2),
    valor_icms25 number(13, 2),
    valor_isento number(13, 2),
    valor_substituicao number(13, 2),
    valor_icms84 number(13, 2),
    gt_inicial number(15, 2),
    gt_final number(15, 2)
);

create table mapa_subfinalizadora_tef (
    mapa_subfinalizadora_tef_key number(4) not null,
    tipo_tef_key number(2) not null,
    codigo_administradora number(3) not null,
    codigo_bandeira number(3) not null,
    tipo_cartao number(1) not null,
    sub_finalizadora_key number(6) not null
);

create table mapa_tipo_lancamento_tipo_mov (
    tipo_lancamento_key number(3) not null,
    tipo_movimento_key number(3) not null
);

create table margem (
    margem_key number(6) not null,
    subgrupo_produto_key number(6) not null,
    valor number(8, 4) not null,
    quebra number(8, 4)
);

create table margem_loja (
    margem_loja_key number(7) not null,
    produto_key number(6),
    loja_key number(6),
    margem number(8, 4) default 0
);

create table medida_caseira_decimal (
    medida_caseira_decimal_key number(1) not null,
    descricao varchar(3) not null
);

create table medida_caseira_descricao (
    medida_caseira_descricao_key number(2) not null,
    descricao varchar(20) not null
);

create table mensagem_popup (
    mensagem_popup_key number(9) not null,
    mensagem varchar(500) not null,
    data_envio date not null,
    data_recebimento date,
    enviado_por number(6) not null,
    requisicao_suporte_key number(9)
);

create table mensagem_usuario (
    mensagem_popup_key number(9) not null,
    usuario_key number(6) not null
);

create table menu (
    menu_key number(6) not null,
    label varchar(120) not null,
    link varchar(200),
    pai number(6),
    ordem number(2) default 0 not null,
    icone varchar(30),
    permissao_key number(6),
    exibir number(1) default 1 not null,
    help number(1) default 0 not null
);

create table menu_acesso (
    menu_key number(6),
    usuario_key number(6) not null,
    data date not null
);

create table menu_usuario_favoritos (
    menu_usuario_fav_key number(6) not null,
    usuario_key number(6),
    menu_key number(6),
    ordem number(3)
);

create table mes (
    dia number(2) not null
);

create table mes31 (
    dia number(2) not null
);

create table mg_contecnica_produtos (
    grupo varchar(100),
    subgrupo varchar(100),
    portaria_cat varchar(40),
    portaria_cat_item varchar(30),
    codigo_ean number(14),
    descricao_do_produto varchar(100),
    ncm number(10),
    ipi number(9, 3),
    iva number(9, 3),
    compra_aliquota number(9, 3),
    compra_reducao number(9, 3),
    compra_icms_final number(9, 3),
    nf_aliquota number(9, 3),
    nf_reducao number(9, 3),
    nf_icms_final number(9, 3),
    ecf varchar(30),
    pis number(9, 3),
    cofins number(9, 3),
    modalidade_pis_cofins varchar(30)
);

create table modalidade_icms (
    modalidade_icms_key number(3) not null,
    descricao varchar(60)
);

create table modalidade_icms_st (
    modalidade_icms_st_key number(3) not null,
    descricao varchar(60)
);

create table modelo_acordo_prom (
    modelo_acordo_prom_key number(6) not null,
    descricao varchar(60),
    status number(1)
);

create table modelo_clau_acordo_prom (
    modelo_acordo_prom_key number(6) not null,
    clau_acordo_prom_key number(6) not null
);

create table modelo_contrato_fornecimento (
    modelo_contrato_forn_key number(4) not null,
    nome varchar(22),
    descricao varchar(132),
    modelo clob,
    usuario_criacao_key number(6),
    usuario_modificacao_key number(6),
    data_criacao date,
    data_modificacao date
);

create table modelo_mensagem_fiscal (
    modelo_mensagem_fiscal_key number(6) not null,
    mensagem varchar(255) not null,
    possui_complemento number(1) default 0 not null,
    possui_processo number(1) default 0 not null,
    possui_nf_referenciada number(1) default 0 not null,
    possui_guia_de_arrecadacao number(1) default 0 not null
);

create table modelo_observacao_fiscal (
    modelo_observacao_fiscal_key number(6) not null,
    mensagem varchar(255),
    complemento_obrigatorio number(1)
);

create table modelo_ocorrencia_escrita (
    modelo_ocorrencia_escrita_key number(4) not null,
    descricao varchar(100)
);

create table motivo_correcao (
    motivo_key number(3) not null,
    descricao varchar(40) not null
);

create table motivo_transferencia (
    motivo_transferencia_key number(2) not null,
    descricao varchar(80)
);

create table motivo_transferencia_valores (
    motivo_transferencia_key number(6) not null,
    descricao varchar(100) not null
);

create table motivo_troca (
    motivo_troca_key number(6) not null,
    nome varchar(20),
    observacao varchar(200),
    status number(1) default 1
);

create table mov_caixa (
    mov_caixa_key number(15) not null,
    cadastro_caixa_key number(9) not null,
    tipo_caixa_key number(3),
    tipo_mov_caixa_key number(3),
    movimento_bancario_key number(9),
    loja_key number(6),
    data date,
    valor number(11, 2),
    descricao varchar(250),
    bordero_key number(9),
    estornado number(1) default 0,
    usuario_key number(6),
    tipo_entrada_tesouraria_key number(6)
);

create table mov_cob_cheque_dev (
    mov_cob_cheque_dev_key number(15) not null,
    cadastro_caixa_key number(15) not null,
    mov_caixa_key number(15),
    movimento_bancario_key number(15)
);

create table movimentacao_carga (
    movimentacao_carga_key number(6) not null,
    loja_key number(6),
    data_inicio_recebimento date,
    data_fim_recebimento date,
    conferente number(6),
    gerado_por number(6),
    data_geracao date,
    validade_obrigatoria number(1),
    local_entrega_key number(6),
    tipo_operacao_nota_fiscal_key number(1)
);

create table movimento_baixa_cartao (
    movimento_bancario_key number(9) not null,
    cadastro_caixa_key number(15) not null
);

create table movimento_bancario (
    movimento_bancario_key number(9) not null,
    conta_bancaria_key number(6) not null,
    numero_documento varchar(50),
    tipo_movimento_bancario_key number(6) not null,
    data_emissao date default sysdate not null,
    data_pagamento date not null,
    valor number(12, 2) not null,
    observacao varchar(200),
    saldo_conciliacao number(11, 2),
    data_conciliacao date,
    sequencia_conciliacao number(9),
    bordero_key number(9),
    data_lancamento date default SYSDATE not null,
    estorno number(1) default 0,
    estornado number(1) default 0,
    pessoa_key number(6),
    competencia_key varchar(7) default TO_CHAR(SYSDATE, 'MM-YYYY'),
    banco_extrato_key number(9),
    sub_conta_bancaria_key number(6),
    desmembrado number(1) default 0,
    movimento_original_key number(9),
    manual number(1) default 0
);

create table movimento_compra (
    movimento_estoque_key number(15) not null,
    produto_comprado_key number(6),
    pedido_key number(9),
    entrega number(2),
    tipo_pedido_key number(3),
    ean_produto number(14),
    codigo_produto_fornecedor varchar(60),
    quantidade_faturada number(10, 3),
    unidade_medida_faturada varchar(10),
    quantidade_entregue number(10, 3),
    unidade_medida_entregue varchar(10),
    peso_total_item_entregue number(8, 3),
    valor_bruto number(19, 6),
    fator_estoque number(10, 4),
    ipi_valor number(17, 6),
    ipi_devolucao_valor number(17, 6),
    desconto_total number(17, 6),
    despesa_tributada number(17, 6),
    despesa_nao_tributada number(17, 6),
    icm_fonte_valor number(17, 6),
    frete_valor number(17, 6),
    seguro_valor number(17, 6),
    base_icms_substituicao number(17, 6),
    base_icms number(17, 6),
    icm_aliquota number(5, 2),
    icm_aliquota_reducao number(5, 2),
    icm_valor number(17, 6),
    codigo_origem number(1),
    codigo_tributacao number(2),
    custo_embalagem_final number(17, 6),
    custo_embalagem_sem_icm_final number(17, 6),
    desconto_financeiro number(17, 6),
    icm_key number(6),
    tipo number(1) default 0 not null,
    quantidade_fisica number(10, 3),
    data_pagamento date,
    data_entrada date,
    nf_key number(9),
    loja_key number(6),
    tipo_movimento_key number(3),
    valor_pauta_fiscal number(13, 2) default 0,
    cfop_key number(6),
    nf_origem_key number(9),
    nota_fiscal_item_key number(15),
    patrimonio_item_key number(6)
);

create table movimento_conta_fornecedor (
    movimento_conta_fornecedor_key number(9) not null,
    loja_key number(6) not null,
    fornecedor_divisao_key number(6) not null,
    data_emissao date not null,
    representante_key number(6),
    tipo_lancamento_key number(3) not null,
    setor_compra_key number(3) not null,
    sinal number(1) not null,
    valor number(16, 4) not null,
    usuario_key number(6) not null,
    modelo_acordo_prom_key number(6),
    nf_key number(9),
    percentual_fidelidade number(5, 2),
    numero_acordo number(9),
    observacao varchar(400),
    movimento_estorno_key number(9)
);

create table movimento_contabil (
    movimento_contabil_key number(12) not null,
    partida_dobrada_key number(6) not null,
    valor number(13, 2) not null,
    sinal number(1) not null,
    conta_contabil_key number(9) not null,
    tipo_origem_contabil_key number(3),
    origem_key number(10),
    centro_custo_key number(11),
    loja_key number(6) not null
);

create table movimento_estoque (
    movimento_estoque_key number(15) not null,
    tipo_movimento_key number(3) not null,
    loja_key number(6) not null,
    produto_key number(6),
    data_movimento date,
    quantidade number(17, 3),
    valor number(17, 6),
    produto_origem number(6),
    produto_origem_qtd number(17, 3),
    produto_origem_ean number(14),
    custo_venda number(19, 6),
    icms_venda number(19, 6) default 0,
    setor_compra_key number(3),
    fornecedor_key number(6),
    divisao_key number(3),
    saldo_estoque number(12, 3),
    custo_estoque number(19, 6),
    custo_estoque_com_icm number(19, 6),
    icm_key number(6),
    pis_key number(6),
    pis_valor number(19, 6),
    cofins_key number(6),
    cofins_valor number(19, 6),
    produto_promocao number(1),
    movimento_estorno_key number(15),
    usuario_key number(6),
    valor_contabil number(17, 6),
    data_lancamento date default sysdate not null,
    movimento_origem_key number(15),
    fornecedor_divisao_key number(9)
);

create table movimento_estoque_composicao (
    movimento_estoque_pai_key number(15) not null,
    movimento_estoque_filho_key number(15) not null
);

create table movimento_estoque_terceiro (
    movimento_estoque_terceiro_key number(15) not null,
    data_movimento date not null,
    loja_movimento_key number(6) not null,
    proprietario_key number(6) not null,
    portador_key number(6) not null,
    produto_key number(6) not null,
    quantidade number(12, 3) not null,
    tipo_movimento_terceiro_key number(2) not null,
    sinal number(1) not null,
    numero_nf_origem number(9),
    nota_fiscal_item_key number(15),
    usuario_key number(6) not null,
    nota_fiscal_origem_key number(9) not null,
    produto_origem_key number(6) not null,
    serie_nf_origem varchar(3)
);

create table movimento_troca (
    movimento_estoque_key number(15) not null,
    motivo_troca_key number(6) not null
);

create table multa (
    multa_key number(9) not null,
    data date,
    valor number(11, 2),
    tipo_multa_key number(2)
);

create table municipio (
    municipio_key number(6) not null,
    uf varchar(2),
    descricao varchar(200),
    codigo_ibge number(10)
);

create table negociacao (
    negociacao_key number(14) not null,
    contrato_fornecimento_key number(6) not null,
    tabela_precos varchar(20),
    data_emissao date,
    data_vigorar_inicial date,
    data_vigorar_final date,
    aprovada number(1),
    usuario_key number(6)
);

create table negociacao_item (
    negociacao_key number(14) not null,
    produto_key number(6) not null,
    valor_bruto number(17, 6) not null,
    fator_estoque number(10, 4) default 1 not null,
    desconto1 number(17, 6),
    desconto2 number(17, 6),
    ipi_valor number(17, 6),
    desconto3 number(17, 6),
    desconto_total number(17, 6),
    despesa_tributada number(17, 6),
    despesa_nao_tributada number(17, 6),
    icm_fonte_valor number(17, 6),
    frete_valor number(17, 6),
    icm_key number(6) default 3,
    controle_estoque number(6) not null,
    pis_key number(6),
    pis_valor number(17, 6) default 0 not null,
    cofins_key number(6),
    cofins_valor number(17, 6) default 0 not null,
    icm_valor number(17, 6) default 0 not null,
    negociacao_item_key number(20) not null,
    iva_st number(17, 6) default 0,
    aliquota_interna number(6, 3),
    base_icmr number(17, 6),
    icm_key_venda number(9),
    fator_preco number(10, 4),
    tipo_item_compra_key number(3) default 1 not null,
    alterar_pis_cofins_cadastro number(1) default 0 not null
);

create table nota_fiscal (
    nf_numero number(9) not null,
    fornecedor_key number(6) not null,
    codigo_operacao_fiscal number(6) not null,
    data_emissao date,
    data_saida date,
    data_entrega_previsao date,
    data_recebimento date,
    local_entrega number(6),
    local_cobranca number(6),
    fornecedor_banco varchar(4),
    fornecedor_agencia varchar(5),
    fornecedor_conta varchar(11),
    loja_key number(6) not null,
    formulario number(6),
    folhas number(3),
    status varchar(1),
    nf_tipo_key number(2) default 0 not null,
    inicio_lancamento date default sysdate,
    fim_lancamento date,
    nf_key number(9) not null,
    data_recebimento_edi date,
    movimentacao_carga_key number(6),
    inicio_romaneio date,
    usuario_cancelamento_key number(6),
    data_cancelamento date,
    justificativa varchar(255),
    ultimo_status_recebimento_key number(9),
    emitente_key number(6),
    chave varchar(44),
    protocolo_autorizacao number(15),
    protocolo_cancelamento number(15),
    protocolo_denegacao number(15),
    data_processamento_nfe date,
    tipo_status_nfe_key number(2),
    numero_documento_origem varchar(30),
    tipo_divergencia_nf_key number(3),
    tipo_guia_recolhimento_key number(1),
    tipo_modelo_nf_key number(3),
    tipo_emissao_nfe_key number(3),
    data_recusa date,
    sub_serie varchar(3),
    nf_serie varchar(3) not null,
    recebido_por_xml number(1) default 0 not null,
    tipo_operacao_nota_fiscal_key number(1) not null,
    indicador_pagamento_key number(3) not null,
    contrato_servico_key number(9),
    codigo_verificacao varchar(30),
    cancelado_pelo_emitente number(1),
    lancamento_conjugado number(1) default 0,
    protocolo_inutilizacao number(15)
);

create table nota_fiscal_email (
    nf_key number(9) not null,
    usuario_envio_emissao number(6) not null,
    data_envio_emissao date not null,
    data_envio_cancelamento date,
    usuario_envio_cancelamento number(6)
);

create table nota_fiscal_fatura (
    nf_key number(9) not null,
    fatura_key number(12) not null
);

create table nota_fiscal_frete (
    transportadora_key number(6),
    tipo_veiculo varchar(4),
    ean_cgc_transportadora varchar(20),
    ean_ou_cgc number(3),
    nome_transportadora varchar(60),
    placa_veiculo varchar(12),
    encargos_financeiros number(13, 2),
    aliquota_icm_frete number(5, 2),
    aliquota_icm_seguro number(5, 2),
    endereco varchar(70),
    cidade varchar(40),
    uf varchar(2),
    ie varchar(20),
    especie varchar(20),
    marca varchar(20),
    numero number(12),
    uf_placa varchar(2),
    nf_key number(9) not null,
    nf_frete_key number(15) not null,
    tipo_frete_key number(2),
    tipo_modelo_nf_key number(2),
    sub_serie varchar(3),
    base_calculo number(17, 6),
    valor_icms number(17, 6),
    icm_key number(6),
    valor_nao_tributado number(17, 6),
    cfop_key number(6),
    chave varchar(44),
    descricao_produto_principal varchar(60),
    pis_key number(6),
    cofins_key number(6),
    serie varchar(3),
    local_entrega number(6)
);

create table nota_fiscal_item (
    pedido_key number(9),
    entrega number(2),
    tipo_pedido_key number(3),
    produto_key number(6),
    valor_bruto number(17, 6),
    desconto1 number(17, 6),
    desconto2 number(17, 6),
    desconto3 number(17, 6),
    desconto_final number(17, 6),
    ipi_valor number(17, 6),
    despesa_tributada number(17, 6),
    despesa_nao_tributada number(17, 6),
    icm_fonte_valor number(17, 6),
    frete_valor number(17, 6),
    icm_key number(6) not null,
    controle_estoque number(6),
    quantidade number(9, 3),
    fator_estoque number(10, 4) not null,
    desconto number(17, 6),
    quantidade_recebida number(9, 3),
    nf_key number(9) not null,
    nota_fiscal_item_key number(15) not null,
    valor_pauta_fiscal number(17, 6),
    cfop_key number(6),
    iva_st number(17, 6),
    aliquota_interna number(6, 3),
    base_icmr number(17, 6),
    icm_key_venda number(9),
    codigo_produto_fornecedor varchar(60),
    descricao varchar(120),
    unidade_medida varchar(3) not null,
    ncm varchar(8),
    indice number(6),
    item_pedido_key number(9),
    tipo_instrucao_nota_fiscal_key number(3),
    seguro number(17, 6),
    funrural number(17, 6),
    valor_icms number(17, 6),
    base_calculo_icms number(17, 6),
    base_calculo_icms_st number(17, 6),
    ipi_key number(3),
    valor_pis number(17, 6),
    valor_cofins number(17, 6),
    pis_key number(6),
    cofins_key number(6),
    ean_produto_fornecedor number(14),
    unidade_medida_fornecedor varchar(10),
    quantidade_devolvida number(9, 3),
    icms_interestadual_key number(6),
    fornecedor_divisao_key number(9),
    base_calculo_iss number(17, 6),
    aliquota_iss number(6, 3),
    nota_fiscal_item_origem_key number(15),
    item_com_reducao_na_base_st number(1) default 0 not null,
    base_pis number(17, 6),
    base_cofins number(17, 6),
    base_calculo_inss_retido number(17, 6),
    declaracao_importacao_key number(9),
    base_pis_total number(17, 6) default 0 not null,
    base_calculo_icms_total number(17, 6) default 0 not null,
    base_calculo_icms_st_total number(17, 6) default 0 not null,
    base_cofins_total number(17, 6) default 0 not null,
    desconto1_total number(17, 6) default 0 not null,
    desconto2_total number(17, 6) default 0 not null,
    desconto3_total number(17, 6) default 0 not null,
    desconto_final_total number(17, 6) default 0 not null,
    despesa_tributada_total number(17, 6) default 0 not null,
    despesa_nao_tributada_total number(17, 6) default 0 not null,
    ipi_valor_total number(17, 6) default 0 not null,
    icm_fonte_valor_total number(17, 6) default 0 not null,
    frete_valor_total number(17, 6) default 0 not null,
    funrural_total number(17, 6) default 0 not null,
    seguro_total number(17, 6) default 0 not null,
    valor_pauta_fiscal_total number(17, 6) default 0 not null,
    valor_icms_total number(17, 6) default 0 not null,
    valor_pis_total number(17, 6) default 0 not null,
    valor_bruto_total number(17, 6) default 0 not null,
    valor_cofins_total number(17, 6) default 0 not null,
    desconto_total number(17, 6) default 0 not null,
    valor_iss number(17, 6),
    cst_iss varchar(1),
    municipio_iss_key number(6),
    servico number(1)
);

create table nota_fiscal_item_divergencia (
    valor_bruto number(17, 6),
    desconto1 number(17, 6),
    desconto2 number(17, 6),
    desconto3 number(17, 6),
    desconto_final number(17, 6),
    ipi_valor number(17, 6),
    despesa_tributada number(17, 6),
    despesa_nao_tributada number(17, 6),
    icm_fonte_valor number(17, 6),
    frete_valor number(17, 6),
    icm_key number(6) not null,
    quantidade number(9, 3),
    fator_estoque number(10, 4),
    desconto number(17, 6),
    quantidade_adicional number(9, 3),
    usuario_aprovacao_key number(6),
    custo_embalagem_sem_icm_final number(17, 6),
    custo_embalagem_final number(17, 6),
    icm_valor_credito number(17, 6),
    data_inclusao date,
    data_solucao date,
    nf_item_divergencia_key number(15) not null,
    descricao_divergencia varchar(300),
    status_divergencia_nf_key number(2),
    requisicao_suporte_key number(9),
    nota_fiscal_item_key number(15)
);

create table nota_fiscal_item_patrimonio (
    nf_item_patrimonio_key number(15) not null,
    nota_fiscal_item_key number(15) not null,
    chapa_key number(14),
    numero_serie varchar(25),
    patrimonio_item_key number(6),
    indicador_uso_ativo_key number(3),
    grupo_patrimonio_key number(3)
);

create table nota_fiscal_item_xml (
    nota_fiscal_item_xml_key number(9) not null,
    cfop_key number(6),
    ean number(14),
    unidade_comercial varchar(30),
    quantidade_comercial number(9, 3),
    cst_origem_icms number(1),
    cst_tributacao_icms number(2),
    aliquota_icms number(5, 2),
    reducao_base_icms number(6, 2),
    base_calculo_icms number(17, 6),
    valor_icms number(17, 6),
    base_calculo_icms_st number(17, 6),
    valor_icms_st number(17, 6),
    cst_pis number(3),
    aliquota_pis number(6, 2),
    valor_pis number(17, 6),
    cst_cofins number(3),
    aliquota_cofins number(6, 2),
    valor_cofins number(17, 6),
    valor_frete number(17, 6),
    valor_ipi number(17, 6),
    valor_seguro number(17, 6),
    valor_desconto number(17, 6),
    nf_item_key number(15) not null,
    nf_key number(9),
    quantidade_tributada number(9, 3) default 0 not null,
    unidade_tributada varchar(30),
    valor_unidade_tributada number(17, 6) not null,
    valor_unidade_comercial number(17, 6) not null,
    descricao varchar(120),
    ncm varchar(8),
    modalidade_icms_key number(3),
    modalidade_icms_st_key number(3),
    valor_iss number(17, 6),
    aliquota_iss number(6, 3),
    base_calculo_iss number(17, 6),
    cst_iss varchar(1)
);

create table nota_fiscal_mensagem (
    item number(3) not null,
    gerado number(1) not null,
    texto varchar(300),
    nf_key number(9) not null,
    nf_mensagem_key number(15) not null
);

create table nota_fiscal_mensagem_sefaz (
    nota_fiscal_mensagem_sefaz_key number(8) not null,
    nf_key number(8),
    codigo_da_mensagem number(4),
    mensagem varchar(200)
);

create table nota_fiscal_msg_fiscal (
    nota_fiscal_msg_fiscal_key number(10) not null,
    nf_key number(9) not null,
    modelo_mensagem_fiscal_key number(6) not null,
    complemento varchar(150),
    nf_referencia_key number(9),
    ap_key number(9),
    processo_fiscal_key number(6),
    ordem number(2) default 0 not null,
    gerado_pelo_sistema number(1) default 0 not null
);

create table nota_fiscal_origem (
    nf_key number(9) not null,
    origem_nf_key number(9) not null
);

create table nota_fiscal_pagamento (
    tipo_pagamento varchar(3),
    referencia_prazo varchar(1),
    condicao_pagamento varchar(2),
    dias_pagamento number(3),
    data_vencimento date,
    desconto_financeiro number(11, 2),
    pagar_fatura number(5, 2),
    data_pagamento_fixo date,
    data_vencimento_informado date,
    valor_fatura number(11, 2),
    valor_nota number(11, 2),
    parcela number(3) not null,
    ap_key number(9),
    dias_tolerancia number(2),
    contrato_fornecimento_key number(6),
    nf_key number(9) not null,
    nf_pagamento_key number(15) not null
);

create table nota_fiscal_pedido (
    nf_key number(9) not null,
    pelt_key number(9) not null
);

create table nota_fiscal_pedido_venda (
    nf_key number(9) not null,
    pedido_venda_key number(9) not null
);

create table nota_fiscal_tipo (
    nf_tipo_key number(2) not null,
    descricao varchar(70),
    nf_servico_estadual number(1) default 0 not null,
    nf_servico_municipal number(1) default 0 not null,
    entrada_saida number(1) not null
);

create table nota_fiscal_total (
    total_itens_nota number(6),
    total_embalagens number(10, 3),
    total_pallets number(15, 2),
    total_peso_bruto number(9, 3),
    total_peso_liquido number(9, 3),
    valor_base_icm number(16, 2),
    valor_total_icm number(15, 2),
    valor_base_substituicao number(16, 2),
    valor_total_substituicao number(15, 2),
    valor_total_mercadorias number(15, 2),
    valor_total_frete number(13, 2),
    valor_total_seguro number(13, 2),
    valor_total_despesa_trib number(13, 2),
    valor_base_ipi number(16, 2),
    valor_total_ipi number(15, 2),
    valor_total_descontos number(15, 2),
    valor_total_nota number(15, 2),
    valor_total_despesa_nao_trib number(13, 2),
    base0 number(11, 2),
    valor0 number(11, 2),
    base7 number(11, 2),
    valor7 number(11, 2),
    base12 number(11, 2),
    valor12 number(11, 2),
    base18 number(11, 2),
    valor18 number(11, 2),
    base25 number(11, 2),
    valor25 number(11, 2),
    valor_funrural number(17, 2),
    nf_key number(9) not null,
    nf_total_key number(15) not null,
    valor_gnre number(15, 2),
    valor_total_frete_fob number(13, 2),
    valor_total_armazenado_pis number(17, 4),
    valor_total_armazenado_cofins number(17, 4),
    qtde_itens_pedidos number(6),
    qtde_itens_nao_pedidos number(6),
    qtde_pedidos_vinculados number(3),
    ap_impostos_a_recolher number(9),
    valor_iss number(17, 6),
    valor_pis_retido number(17, 6),
    valor_cofins_retido number(17, 6),
    base_calculo_iss number(17, 6),
    valor_irrf_retido number(17, 6),
    valor_inss_retido number(17, 6),
    valor_csll_retido number(17, 6),
    base_pis number(17, 6),
    base_cofins number(17, 6),
    base_calculo_inss_retido number(17, 6),
    valor_total_servicos number(15, 2)
);

create table observacao (
    pessoa_key number(6) not null,
    data date not null,
    usuario_key number(6),
    texto varchar(400)
);

create table ocorrencia (
    ap_key number(9) not null,
    data_emissao date default SYSDATE not null,
    descricao varchar(500) not null,
    usuario_key number(6) not null,
    ocorrencia_key number(9) not null
);

create table ocorrencia_agendamento (
    ocorrencia_agendamento_key number(9) not null,
    ap_key number(9),
    tipo_agendamento_key number(6),
    usuario_agendamento_key number(6),
    usuario_autorizacao_key number(6),
    retorno number(1) default 0 not null,
    enviado number(1) default 0 not null,
    rejeitado number(1) default 0 not null,
    data_agendamento date,
    data_autorizacao date,
    data_pagamento date,
    motivo_rejeicao varchar(1024)
);

create table ocorrencia_bordero (
    ocorrencia_bordero_key number(8) not null,
    bordero_key number(9),
    data_emissao date default sysdate,
    descricao varchar(400),
    usuario_key number(6)
);

create table ocorrencia_cobranca (
    ocorrencia_cobranca_key number(9) not null,
    ap_key number(9),
    remessa number(1),
    usuario_key number(6),
    data date,
    observacao varchar(200),
    tipo_status_cobranca_key number(3)
);

create table ocorrencia_diaria (
    lancamento_loja_key number(9) not null,
    data date default sysdate not null,
    descricao varchar(200) not null,
    usuario_key number(6) not null
);

create table ocorrencia_pagamento_direto (
    banco_pagamento_key number(9) not null,
    banco_ocorrencia_key varchar(2) not null
);

create table ocorrencia_pagamento_titulos (
    banco_pagamento_titulos_key number(9) not null,
    banco_ocorrencia_key varchar(2) not null
);

create table ocorrencia_pdv (
    ocorrencia_pdv_key number(9) not null,
    loja_pdv_key number(6),
    operador_key number(6),
    data date not null,
    entrada_hora date,
    saida_hora date,
    historico_key number(6)
);

create table ocorrencia_pendencia (
    ocorrencia_pendencia_key number(9) not null,
    item_pedido_key number(9),
    usuario_key number(6),
    data date
);

create table ocorrencia_taxa (
    ocorrencia_taxa_key number(8) not null,
    taxa_key number(8) not null,
    data date,
    descricao varchar(400),
    usuario_key number(6),
    loja_key number(6)
);

create table ocorrencia_tesouraria (
    ocorrencia_tesouraria_key number(9) not null,
    cadastro_caixa_key number(9) not null,
    data date default sysdate not null,
    descricao varchar(200) not null,
    usuario_key number(6) not null,
    mov_caixa_key number(9)
);

create table ocorrencia_venda_online (
    ocorrencia_venda_online_key number(9) not null,
    loja_key number(6) not null,
    data_da_venda date not null,
    data_ocorrencia date not null,
    usuario_key number(6) not null,
    ocorrencia varchar(200) not null
);

create table ocorrencias_mb (
    ocorrencias_mb_key number(8) not null,
    data_emissao date default sysdate,
    descricao varchar(500),
    usuario_key number(6),
    movimento_bancario_key number(15)
);

create table operacao (
    operacao_key number(6) not null,
    nome varchar(30)
);

create table operador (
    operador_key number(6) not null,
    pessoa_key number(6) not null,
    loja_key number(6) not null,
    habilitado number(1),
    fiscal varchar(1) default 'N' not null,
    numero_operador number(6)
);

create table operador_logistico (
    pessoa_key number(6) not null
);

create table origem_escrita_fiscal_ajuste (
    origem_esc_fiscal_ajuste_key number(3) not null,
    descricao varchar(255)
);

create table origem_processo_fiscal (
    origem_processo_fiscal_key number(2) not null,
    descricao varchar(50) not null
);

create table pack_virtual (
    pack_virtual_key number(6) not null,
    descricao varchar(100) not null,
    pack_virtual_modelo_key number(3) not null,
    ativo number(1) default 1 not null,
    data_emissao date default sysdate not null,
    usuario_key number(6) not null,
    data_inicial date not null,
    data_final date not null,
    grupo_gatilho_key number(9) not null,
    quantidade_gatilho number(6) not null,
    grupo_desconto_key number(9),
    quantidade_desconto number(6),
    valor_final_unitario number(9, 2),
    desconto_percentual number(5, 2),
    desconto_valor_unitario number(9, 2)
);

create table pack_virtual_grupo (
    pack_virtual_grupo_key number(6) not null
);

create table pack_virtual_grupo_produto (
    pack_virtual_grupo_key number(9) not null,
    produto_key number(6) not null
);

create table pack_virtual_loja (
    pack_virtual_key number(6) not null,
    loja_key number(6) not null
);

create table pack_virtual_modelo (
    pack_virtual_modelo_key number(3) not null,
    descricao varchar(100) not null
);

create table pagamento_bancario (
    movimento_bancario_key number(9) not null,
    ap_key number(9) not null
);

create table pagamento_caixa (
    mov_caixa_key number(15) not null,
    ap_key number(9) not null
);

create table pagamento_direto_bordero (
    pagamento_direto_bordero_key number(9) not null,
    transferencia_eletronica_key number(8),
    bordero_key number(9)
);

create table pais (
    pais_key number(6) not null,
    descricao varchar(50)
);

create table palete (
    palete_key number(10) not null
);

create table parametro (
    parametro_key varchar(100) not null,
    tipo_parametro_key number(22),
    value varchar(1000),
    descricao varchar(100)
);

create table parametros_loja (
    parametros_loja_key number(6) not null,
    loja_key number(6),
    quebra_maxima_diaria_operador number(9, 2),
    formato_key number(6),
    usa_fechamento_caixa number(1) default 0 not null,
    email_tvo varchar(60),
    certificado_nfe blob,
    certificado_original blob,
    email_contabilidade varchar(60),
    permite_receb_base_st_dif number(1) default 1 not null,
    tol_a_maior_no_valor_icms_st number(4, 2) default 0,
    tol_a_menor_no_valor_icms_st number(4, 2) default 0,
    numero_ordem_entrada number(5) default 0,
    numero_ordem_saida number(5) default 0,
    numero_ordem_inventario number(5) default 0,
    numero_ordem_icms number(5) default 0
);

create table parametros_tec (
    nome varchar(100) not null,
    valor varchar(100) not null
);

create table partida_dobrada (
    partida_dobrada_key number(12) not null,
    loja_key number(6) not null,
    historico varchar(250),
    usuario_lancamento_key number(6) not null,
    data_lancamento date not null,
    data_fato date not null,
    manual number(1) default 0 not null,
    partida_de_origem_key number(12),
    esquema_contabil_key number(12) not null,
    competencia_contabil_key number(6) not null
);

create table patrimonio_categoria (
    patrimonio_categoria_key number(9) not null,
    descricao varchar(100)
);

create table patrimonio_grupo (
    patrimonio_grupo_key number(9) not null,
    descricao varchar(100),
    patrimonio_categoria_key number(9)
);

create table patrimonio_item (
    patrimonio_item_key number(6) not null,
    produto_key number(6) not null,
    chapa_key number(14),
    loja_key number(6) not null,
    numero_serie varchar(30),
    centro_custo_key number(11),
    descritivo_funcao_item varchar(60),
    meses_de_vida_util number(6),
    nf_key_aquisicao number(9),
    tem_direito_credito_ciap number(1) default 0,
    estado_patrimonio_item_key number(6) not null,
    status_patrimonio_item_key number(6) not null,
    conta_contabil_key number(9) not null,
    valor_atual number(17, 4) default 0 not null,
    data_aquisicao date,
    tipo_baixa_patrimonio_key number(3),
    data_instalacao date,
    valor_aquisicao number(17, 4),
    competencia_key varchar(7),
    valor_depreciacao_inicial number(17, 4),
    percentual_residuo number(5, 2),
    competencia_depreciacao_final varchar(7),
    tipo_patrimonio_item_key number(2) default 1 not null,
    indicador_uso_ativo_key number(3) not null,
    grupo_patrimonio_key number(3) not null,
    depreciavel number(1) default 1
);

create table patrimonio_item_baixa (
    patrimonio_item_baixa_key number(6) not null,
    patrimonio_item_key number(6),
    usuario_baixa_key number(6),
    data_baixa date,
    usuario_estorno_key number(6),
    data_estorno date,
    tipo_baixa_patrimonio_key number(3)
);

create table patrimonio_sub_grupo (
    patrimonio_sub_grupo_key number(9) not null,
    descricao varchar(100),
    patrimonio_grupo_key number(9),
    percentual_depreciacao number(11, 2)
);

create table pauta_fiscal (
    pauta_fiscal_key number(6) not null,
    descricao varchar(100),
    ativo number(1) default 1
);

create table pauta_fiscal_estado (
    pauta_fiscal_estado_key number(6) not null,
    pauta_fiscal_key number(6),
    estado_sigla varchar(2),
    valor number(13, 2)
);

create table pedido (
    pedido_key number(9) not null,
    entrega number(2) not null,
    loja_key number(6) not null,
    tipo_pedido_key number(3) not null,
    data_entrega_inicial date,
    data_entrega_final date,
    local_entrega number(6),
    pelt_key number(9) not null
);

create table pedido_compra_bonificacao (
    pedido_compra_key number(9) not null,
    pedido_bonificado_key number(9) not null
);

create table pedido_item_estatistica (
    pedido_item_estatistica_key number(9) not null,
    item_pedido_key number(9),
    loja_key number(6),
    estoque number(12, 3),
    tipo_estatistica_venda_key number(3),
    data_base_sugestao_inicial date,
    data_base_sugestao_final date,
    dias_base_sugestao number(9),
    dias_base_venda number(9),
    quantidade_vendida number(9, 3),
    primeira_venda date,
    ultima_venda date,
    melhor_dia_venda date,
    pior_dia_venda date,
    media_dia_venda number(9, 3),
    venda_media_diaria number(9, 3),
    venda_media_semanal number(9, 3),
    cobertura_estoque_atual number(9),
    dias_reposicao number(9),
    sugestao number(12, 3),
    despreza_dias_promocao number(1),
    sugestao_compra_externa_key number(9)
);

create table pedido_master (
    pedido_key number(9) not null,
    status_pedido_key number(2),
    data_emissao date,
    negociacao_key number(14),
    usuario_key number(6) not null,
    vendedor_key number(6),
    download number(1),
    sugestao_semanas number(6),
    data_sugestao_inicial date,
    data_sugestao_final date,
    data_envio_edi date,
    tipo_distribuicao_key number(6) default 1,
    fornecedor_divisao_key number(9),
    despreza_dias_em_promocao number(1),
    grava_sugestao_quantidade number(1),
    tipo_estatistica_venda_key number(3)
);

create table pedido_saida (
    pedido_saida_key number(6) not null,
    origem_key number(6) not null,
    destino_key number(6) not null,
    data date,
    nf_numero number(6),
    nf_serie number(3),
    cof number(4),
    usuario_key number(6)
);

create table pedido_saida_item (
    pedido_saida_key number(6) not null,
    produto_key number(6) not null,
    quantidade number(9, 3) not null,
    preco number(13, 4) not null,
    icm_key number(6) not null,
    setor_compra_key number(3)
);

create table pedido_venda (
    pedido_venda_key number(9) not null,
    loja_key number(6) not null,
    vendedor_key number(6),
    data_inicio_venda date,
    data_termino_venda date,
    separador_key number(6),
    data_inicio_separacao date,
    data_termino_separacao date,
    faturador_key number(6),
    data_inicio_faturamento date,
    data_termino_faturamento date,
    entregador_key number(6),
    data_inicio_entrega date,
    data_termino_entrega date,
    observacao varchar(120),
    data_emissao date,
    desconto_pedido number(9, 3),
    total_sem_oferta number(9, 3),
    total_com_oferta number(9, 3),
    quantidade_total number(9, 3),
    pedido_venda_forma_pagto_key number(3),
    cliente_key number(6),
    convenio_key number(6),
    pedido_venda_entrega_key number(4),
    ar_key number(9),
    valor_pago number(9, 3) default 0,
    entrega_manual number(1) default 0,
    pedido_venda_status_key number(3) default 1,
    pedido_venda_externa_key varchar(6)
);

create table pedido_venda_entrega (
    pedido_venda_entrega_key number(4) not null,
    descricao varchar(30) not null,
    valor_compra_minimo number(10, 3) default 0,
    valor_compra_maximo number(10, 3) default 0,
    valor_entrega number(10, 3)
);

create table pedido_venda_forma_pagto (
    pedido_venda_forma_pagto_key number(2) not null,
    descricao varchar(30) not null,
    ativo number(1) default 1 not null
);

create table pedido_venda_item (
    pedido_venda_item_key number(9) not null,
    pedido_venda_key number(9) not null,
    produto_key number(6),
    preco_venda number(9, 3) default 0,
    preco_venda_oferta number(9, 3),
    custo_ci number(9, 3),
    quantidade_pedida number(9, 3),
    observacao varchar(120),
    desconto number(9, 3),
    estoque number(9, 3),
    preco_venda_unitario number(9, 3),
    custo_si number(9, 3),
    icm_venda number(9, 3),
    pis_key number(6),
    cofins_key number(6),
    fator_estoque number(12, 3),
    quantidade_separada number(9, 3),
    quantidade_faturada number(9, 3),
    quantidade_entregue number(9, 3)
);

create table pedido_venda_status (
    pedido_venda_status_key number(3) not null,
    descricao varchar(20)
);

create table permissao (
    nome varchar(60),
    sistema_key number(6) not null,
    operacao_key number(6) not null,
    permissao_key number(6) not null
);

create table permissao_grupo (
    sistema_key number(6),
    grupo_key number(6) not null,
    operacao_key number(6),
    permissao_key number(6) not null
);

create table permissao_menu (
    permissao_key number(6) not null,
    menu_key number(6) not null
);

create table pesquisa (
    pesquisa_key number(6) not null,
    nome varchar(20)
);

create table pesquisa_itens (
    produto_key number(6) not null,
    pesquisa_key number(6) not null
);

create table pesquisa_jornal (
    pesquisa_jornal_key number(6) not null,
    concorrente_key number(6),
    data_inicial date not null,
    data_final date,
    tipo_pesquisa_key number(3) not null,
    pesquisa_jornal_geral_key number(6)
);

create table pesquisa_jornal_geral (
    pesquisa_jornal_geral_key number(6) not null,
    descricao varchar(50),
    data date,
    status number(1) default 0,
    tipo_pesquisa_key number(3)
);

create table pesquisa_jornal_produto (
    pesquisa_jornal_produto_key number(9) not null,
    pesquisa_jornal_key number(6),
    produto_key number(6),
    preco number(7, 2),
    observacao varchar(60),
    oferta number(1) default 0
);

create table pessoa (
    pessoa_key number(6) not null,
    data_cadastro date,
    cpf_cnpj number(15),
    sexo char(1),
    nome_razao varchar(50),
    rg varchar(20),
    cargo varchar(30),
    data_nascimento date,
    insc varchar(15),
    nome_abreviado varchar(20),
    insc_municipal varchar(20),
    registro_na_junta_comercial varchar(20),
    fundacao date,
    ean number(13),
    fisica varchar(1) default 0 not null,
    orgao_expedidor_rg varchar(20),
    data_expedicao_rg date,
    estado_civil_key number(2),
    cpf_cnpj_numero number(15),
    conta_contabil_key number(9),
    conjuge varchar(20),
    ultima_alteracao date,
    nome_fantasia varchar(50),
    tipo_regime_simples_key number(2) default 3 not null,
    status number(1),
    tipo_domicilio_key number(1) default 1 not null,
    insc_suframa varchar(15),
    junta_comercial_key number(6)
);

create table pessoa_recebimento (
    pessoa_key number(6) not null,
    referencia_prazo_key number(1),
    condicao_recebimento_key char(2)
);

create table pis (
    pis_key number(6) not null,
    descricao varchar(50) not null,
    aliquota number(8, 4) not null,
    cst_pis_cofins_key number(3),
    cofins_key_relacionado number(6),
    usa_saida number(1) default 0,
    usa_entrada number(1) default 1,
    zona_franca number(1) default 0
);

create table plano_conta (
    plano_conta_key number(3) not null,
    descricao varchar(30)
);

create table prazo_recebimento (
    contrato_fornecimento_key number(6) not null,
    quantidade_dias number(3) not null,
    porcentagem_fatura number(7, 4),
    prazo_recebimento_key number(15) not null
);

create table precatorio (
    precatorio_key number(6) not null,
    numero_precatorio varchar(30) not null,
    credor_original_key number(6) not null,
    loja_credora_key number(6) not null,
    valor_precatorio number(10, 2) not null,
    valor_compra number(10, 2) not null,
    observacoes varchar(255),
    duplicata_key number(9) not null,
    usuario_key number(6) not null,
    usuario_cancelamento_key number(6),
    data_cancelamento date,
    escrita_fiscal_ajuste_key number(9)
);

create table preco_atual (
    preco_atual_key number(9) not null,
    loja_key number(6) not null,
    produto_key number(6) not null,
    preco_regiao_key number(9),
    preco_regiao number(10, 3),
    preco_regiao_data date,
    preco_loja_key number(9),
    preco_loja number(10, 3),
    preco_loja_data date,
    preco_oferta_key number(9),
    preco_oferta number(10, 3),
    preco_oferta_inicial date,
    preco_oferta_final date,
    preco_oferta2_key number(9),
    preco_oferta2 number(10, 3),
    preco_oferta2_inicial date,
    preco_oferta2_final date,
    usuario_key number(6),
    preco_fidelidade_loja number(10, 3),
    preco_fidelidade_regiao number(10, 3),
    usuario_oferta_key number(6),
    data_reprovacao_oferta date
);

create global temporary table preco_atual_tmp (
    produto_key number(6) not null,
    preco_regiao_key number(9),
    preco_regiao number(10, 3),
    preco_regiao_data date,
    preco_loja_key number(9),
    preco_loja number(10, 3),
    preco_loja_data date,
    preco_oferta_key number(9),
    preco_oferta number(10, 3),
    preco_oferta_inicial date,
    preco_oferta_final date,
    preco_oferta2_key number(9),
    preco_oferta2 number(10, 3),
    preco_oferta2_inicial date,
    preco_oferta2_final date,
    usuario_key number(6),
    preco_loja_fidelidade number(10, 3),
    preco_regiao_fidelidade number(10, 3),
    usuario_oferta_key number(6),
    data_reprovacao_oferta date
);

create table preco_concorrente (
    preco_concorrente_key number(9) not null,
    pessoa_key number(6),
    arquivo_nome varchar(20),
    codigo_interno number(10),
    ean number(14),
    descricao_produto varchar(100),
    preco number(10, 3),
    data_preco_emissao date,
    data_preco_inicial date,
    data_preco_final date,
    descricao_promocao varchar(40)
);

create table preco_transferencia (
    preco_transferencia_key number(9) not null,
    loja_key number(6),
    produto_key number(6),
    data_alteracao date,
    usuario_key number(6),
    preco_calculado number(10, 3),
    preco_digitado number(10, 3),
    preco_venda_externa number(10, 3),
    data_final_preco_digitado date,
    data_final_preco_venda_externa date
);

create table preco_transferencia_log (
    preco_transferencia_log_key number(9) not null,
    loja_key number(6),
    produto_key number(6),
    data_alteracao date,
    usuario_key number(6),
    preco_calculado number(10, 3),
    preco_digitado number(10, 3),
    preco_venda_externa number(10, 3),
    data_final_preco_digitado date,
    data_final_preco_venda_externa date
);

create global temporary table preco_transferencia_tmp (
    loja_key number(6),
    produto_key number(6),
    data_alteracao date,
    usuario_key number(6),
    preco_calculado number(9, 2),
    preco_digitado number(9, 2),
    preco_venda_externa number(9, 2),
    data_final_preco_digitado date,
    data_final_preco_venda_externa date
);

create table preco_venda (
    preco_venda_key number(9) not null,
    produto_key number(6) not null,
    loja_key number(6),
    preco number(10, 3) not null,
    tipo varchar(1),
    insumos number(9, 2),
    data_emissao date,
    arredondamento number(10, 3),
    data_inicial date,
    data_final date,
    usuario_key number(6),
    promocao_key number(6),
    regiao_preco_key number(3) default 1,
    status number(1) default 1 not null,
    tipo_status_preco_venda_key number(3),
    preco_fidelidade number(10, 3)
);

create table preco_venda_caixa (
    preco_venda_caixa_key number(9) not null,
    produto_key number(6) not null,
    loja_key number(6),
    preco number(10, 3),
    tipo varchar(1),
    insumos number(9, 2),
    data_emissao date,
    arredondamento number(10, 3),
    data_inicial date,
    data_final date,
    usuario_key number(6),
    regiao_preco_key number(3) default 1,
    promocao_key number(6),
    status number(1) default 1 not null,
    preco_fidelidade number(10, 3)
);

create table preco_venda_oferta (
    preco_venda_oferta_key number(9) not null,
    loja_key number(6) not null,
    data date not null,
    promocao_key number(6),
    produto_key number(6),
    preco number(9, 2)
);

create global temporary table preco_venda_tmp (
    produto_key number(6) not null,
    preco_normal_key number(9),
    preco_normal number(10, 3),
    data_alteracao date,
    preco_oferta_key number(9),
    preco_oferta number(10, 3),
    data_inicial date,
    data_final date
);

create table prestador_servico (
    pessoa_key number(6) not null
);

create table previa_transferencia (
    previa_transferencia_key number(6) not null,
    loja_origem_key number(6) not null,
    loja_destino_key number(6) not null,
    data_emissao date not null,
    transferencia_gerada number(6),
    usuario_key number(6)
);

create table previa_transferencia_item (
    previa_transferencia_key number(6) not null,
    previa_transferencia_item_key number(6) not null,
    valor number(6, 2),
    qtd number(9, 2) not null,
    produto_key number(6) not null
);

create table previa_transferencia_pedido (
    previa_transf_pedido_key number(6) not null,
    item_pedido_key number(9),
    loja_origem_key number(6),
    loja_destino_key number(6),
    data_emissao date,
    gerada number(1) default 0,
    produto_key number(6),
    quantidade number(9, 3),
    valor number(9, 3),
    fator_estoque number(10, 4) not null
);

create table previsao_loja (
    previsao_loja_key number(6) not null,
    loja_key number(6) not null,
    mes_ano date not null,
    percentual_rede number(11, 2) not null
);

create table previsao_rede (
    previsao_rede_key number(6) not null,
    data date not null,
    valor_vista number(11, 2) default 0 not null,
    valor_prazo number(11, 2) default 0 not null
);

create table previsao_setor (
    previsao_setor_key number(6) not null,
    setor_key number(3) not null,
    mes_ano date not null,
    percentual_venda number(11, 2) not null,
    percentual_margem number(11, 2) not null
);

create table processo_contabil (
    processo_contabil_key number(5) not null,
    descricao varchar(150) not null
);

create table processo_financeiro (
    processo_financeiro_key number(6) not null,
    descricao varchar(100),
    sinal number(1) not null
);

create table processo_fiscal (
    processo_fiscal_key number(6) not null,
    numero_processo varchar(15) not null,
    origem_processo_fiscal_key number(2) not null,
    descricao_resumida varchar(255),
    descricao_complementar varchar(500)
);

create table produto (
    produto_key number(6) not null,
    descricao_gondola varchar(60),
    status number(2) not null,
    centro_custo_key number(11),
    descricao varchar(60) not null,
    fator_estoque number(10, 4) default 1 not null,
    fator_preco number(10, 4) default 1 not null,
    embalagem_key varchar(10) not null,
    peso_bruto number(7, 3),
    peso_liquido number(7, 3),
    preco_equivalente number(6),
    controle_estoque number(6),
    descricao_cupom varchar(20),
    descricao_balanca varchar(20),
    multiplo_compra number(10, 4),
    dias_validade number(3),
    margem_key number(6),
    compra number(1),
    venda number(1) not null,
    pesquisa number(1),
    consumo number(1) not null,
    sub_grupo_produto_key number(6),
    setor_compra_key number(3) not null,
    pedido_minimo number(3),
    ponto_pedido number(3),
    pedido_maximo number(3),
    tolerancia_quantidade_pedido number(6, 3),
    troca_fornecedor_key number(6),
    troca_divisao_key number(3),
    troca_descarte_destino number(3) default 0 not null,
    balanca_tara number(6, 3),
    balanca_receita_padrao varchar(400),
    balanca_tabela_nutricional varchar(400),
    balanca_imprime_preco number(1),
    preco_referencia varchar(30),
    liberada_venda_externa number(1),
    comissao_vendedor number(6, 3),
    exporta_balanca number(1),
    abastecido_por_cd number(1) default 1,
    transferencia_interna number(1) default 0 not null,
    exporta_pdv number(1) default 0,
    somar_venda number(1) default 1,
    curva varchar(2) default 'C3',
    pis_key number(6),
    cofins_key number(6),
    patrimonio_sub_grupo_key number(9),
    margem_preco_percebido number(1) default 0 not null,
    margem_logistica number(9, 2),
    custo_logistico number(9, 2),
    divisor_preco number(2),
    divisor_preco_descricao varchar(30),
    pauta_fiscal_key number(6),
    conta_contabil_key number(9) not null,
    grade_produto_key number(6),
    produto_concorrente_key number(6),
    altura number(5),
    largura number(5),
    comprimento number(5),
    caixa number(1) default 0 not null,
    lastro number(4),
    camada number(4),
    data_cadastro date default sysdate not null,
    classificacao_fiscal_key number(6),
    calcular_ruptura number(1),
    peso_gramas number(6),
    multiplica_pdv number(1) default 1 not null,
    sazonal number(1) default 0 not null,
    quantidade_etiquetas number(3) default 1 not null,
    decimais number(1) default 2 not null,
    ultima_alteracao date default SYSDATE not null,
    meses_de_vida_util_padrao number(6),
    controla_estoque number(1) default 1 not null,
    serie_obrigatoria number(1),
    insumo number(1) default 0,
    embalagem number(1) default 0,
    destinacao_produto_key number(3) not null,
    pis_entrada_key number(6),
    cofins_entrada_key number(6),
    vasilhame_key number(6),
    ipi_entrada_key number(6) not null,
    ipi_saida_key number(6) not null,
    consignado number(1) default 0 not null,
    tipo_composicao_key number(3) default 1 not null,
    tipo_controle_producao_key number(1)
);

create table produto_balanca (
    setor_balanca_key number(3) not null,
    loja_key number(6) not null,
    produto_key number(6) not null,
    balanca_key number(3) not null,
    tecla_balanca number(3),
    receita varchar(400)
);

create table produto_balanca_detalhe (
    id number(9) not null,
    setor_balanca_key number(3) not null,
    loja_key number(6) not null,
    produto_key number(6) not null,
    balanca_key number(3) not null,
    linha number(3) not null,
    texto varchar(100)
);

create table produto_concorrente (
    produto_concorrente_key number(6) not null,
    descricao varchar(31)
);

create table produto_pesquisado (
    calendario_key number(6) not null,
    produto_key number(6) not null,
    concorrente_key number(6) not null,
    ordem_visita number(3) not null,
    preco number(7, 2),
    observacao varchar(200)
);

create table produto_validade (
    produto_validade_key number(15) not null,
    produto_key number(6) not null,
    loja_key number(6) not null,
    quantidade number(12, 3) not null,
    data_validade date not null,
    data_entrada date not null,
    nf_item_pedido_key number(9),
    movimento_estoque_key number(15),
    numero_do_lote varchar(30)
);

create table promocao (
    promocao_key number(6) not null,
    descricao varchar(30),
    emissao date,
    validade_inicial date,
    validade_final date,
    status varchar(1),
    fechamento_usuario_key number(6)
);

create table promocao_loja (
    promocao_key number(6) not null,
    loja_key number(6) not null
);

create table quebra_tesouraria (
    quebra_tesouraria_key number(15) not null,
    data_movimento date,
    loja_key number(6),
    usuario_key number(6),
    tipo_quebra_tesouraria_key number(3),
    valor_quebra number(11, 2),
    data_conferencia date
);

create table ramo_atividade (
    ramo_atividade_key number(3) not null,
    descricao varchar(60)
);

create table ranking_ano (
    produto_key number(6) not null,
    perc_venda number(12, 6) not null,
    acumulado number(12, 6) not null,
    ranking char(2) not null
);

create table recebimento (
    recebimento_key number(3) not null,
    descricao varchar(60),
    desconto number(7, 4),
    dias_credito number(3),
    recebimento_legenda varchar(5),
    codigo_pdv number(3)
);

create table recebimento_palete_item (
    recebimento_palete_item_key number(12) not null,
    palete_key number(10),
    movimentacao_carga_key number(6),
    item_key number(15) not null,
    quantidade number(9, 3) default 0,
    fator_estoque number(10, 4) default 1,
    data_validade date,
    item_nota number(6)
);

create table rede (
    rede_key number(3) not null,
    descricao varchar(30),
    imagem_link varchar(50)
);

create table rede_loja (
    rede_key number(3) not null,
    loja_key number(6) not null
);

create table referencia_prazo (
    referencia_prazo_key number(1) not null,
    descricao varchar(50)
);

create table regiao_entrega (
    regiao_entrega_key number(3) not null,
    descricao varchar(60)
);

create table regiao_preco (
    regiao_preco_key number(3) not null,
    nome varchar(50),
    margem_adicional number(8, 4)
);

create table registro_fiscal (
    registro_fiscal_key number(9) not null,
    tipo_modelo_reg_fiscal_key number(3),
    numero number(6),
    pdf blob,
    data_inicial date,
    data_final date,
    data_emissao date,
    loja_key number(6),
    contador_key number(6),
    usuario_key number(6),
    responsavel_key number(6)
);

create table registro_fiscal_numeracao (
    registro_fiscal_numeracao_key number(5) not null,
    loja_key number(6),
    tipo_registro_fiscal_key number(3),
    numero_atual number(6)
);

create table relatorio_movimento (
    tipo_relatorio_key number(3) not null,
    tipo_movimento_key number(3) not null
);

create table relatorio_operador (
    relatorio_operador_key number(9) not null,
    contas_correntes number(9, 2),
    troco_cheque number(9, 2),
    troco_ticket number(9, 2),
    venda_bruta number(9, 2),
    cancelamentos number(9, 2),
    descontos number(9, 2),
    venda_liquida number(9, 2),
    encargos number(9, 2),
    total number(9, 2),
    dinheiro_recebido number(9, 2),
    cheque_recebido number(9, 2),
    cheque_pre_recebido number(9, 2),
    contra_vale_recebido number(9, 2),
    cartao_recebido number(9, 2),
    ticket_recebido number(9, 2),
    tef_recebido number(9, 2),
    total_parcial_recebido number(9, 2),
    suprimentos_recebido number(9, 2),
    sangrias number(9, 2),
    total_receb number(9, 2),
    dinheiro_troco_cheque number(9, 2),
    cheque number(9, 2),
    cartao number(9, 2),
    ticket_total number(9, 2),
    tef_total number(9, 2),
    fundo number(9, 2),
    total_geral number(9, 2),
    operador_key number(6) not null,
    loja_key number(6) not null,
    numero_ecf number(6) not null,
    data date not null,
    cupom_numero number(9) not null,
    leitura number(2)
);

create table relatorio_validade (
    loja_key number(6) not null,
    produto_key number(6) not null,
    quantidade number(12, 3) not null,
    data_entrada date not null,
    data_validade date not null,
    numero_do_lote varchar(30)
);

create table representante (
    pessoa_key number(6) not null
);

create table requisicao_suporte (
    requisicao_suporte_key number(9) not null,
    tipo_requisicao_key number(6) not null,
    usuario_key number(9),
    data date,
    usuario_suporte number(6),
    hora_inicio_suporte date,
    hora_termino_suporte date,
    loja_key number(6) not null,
    hora_requisicao date,
    nf_key number(9) not null,
    primeira_mensagem_key number(9)
);

create table reserva_estoque (
    reserva_estoque_key number(9) not null,
    loja_key number(6) not null,
    produto_key number(6) not null,
    quantidade_reservada number(12, 3),
    percentual_distribuicao number(5, 2),
    movimento_compra_key number(15),
    data_reserva date,
    indicador_de_propriedade_key number(2) not null
);

create table reserva_estoque_item (
    reserva_estoque_item_key number(12) not null,
    reserva_estoque_key number(9) not null,
    destinatario_key number(6) not null,
    quantidade_reservada number(12, 3),
    quantidade_faturada number(12, 3),
    distribuicao_logist_item_key number(15),
    lotes_gerados number(1)
);

create table resolucao_troca (
    resolucao_troca_key number(3) not null,
    descricao varchar(50)
);

create table resumo_apuracao_impostos (
    resumo_apuracao_impostos_key number(8) not null,
    ano number(4) not null,
    mes number(2) not null,
    departamento_key number(6),
    secao_key number(6),
    grupo_produto_key number(6),
    sub_grupo_produto_key number(6),
    setor_compra_key number(6),
    loja_key number(6) not null,
    valor_contabil number(19, 6),
    pis_compra_valor number(19, 6),
    cofins_compra_valor number(19, 6),
    icms_compra_valor number(19, 6),
    sinal number(2) not null
);

create table resumo_cobertura (
    loja_key number(6),
    setor_compra_key number(3),
    produto_key number(6) not null,
    descricao varchar(60),
    saldo number(22),
    custo number(22),
    dias_sem_venda number(22),
    ultima_compra_data date,
    ultima_venda_data date,
    ultima_venda_quantidade number(12, 3),
    ultima_venda_valor number(11, 4),
    ultima_venda_preco_medio number(22),
    qtd number(22),
    qtd_dias number(22),
    venda_diaria number(22),
    primeira_venda date,
    ultima_compra_quantidade number(12, 3),
    ultima_compra_fornecedor_key number(6),
    ultima_compra_divisao_key number(3),
    ultima_compra_custo_bruto number(19, 6),
    ultima_compra_custo_liquido number(19, 6),
    sub_grupo_produto_key number(6),
    cobertura number(15, 2),
    custo_liquido number(19, 6),
    custo_bruto number(19, 6)
);

create table resumo_conta_comercial (
    fornecedor_divisao_key number(6) not null,
    loja_key number(6) not null,
    setor_compra_key number(3) not null,
    tipo_lancamento_key number(3) not null,
    debito number(15, 2) not null,
    credito number(15, 2) not null,
    saldo number(15, 2) not null
);

create table resumo_conta_fornecedor (
    fornecedor varchar(40),
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    setor number(22),
    movimento varchar(40),
    tipo_movimento_key number(22),
    valor number(22),
    credito number(22),
    debito number(22),
    saldo number(22)
);

create table resumo_cupom_consolidado (
    loja_key number(6),
    ano number(4),
    mes number(2),
    produto_key number(6),
    pis_key number(6),
    cofins_key number(6),
    valor_total number(11, 2),
    cfop_key number(6)
);

create table resumo_cupom_fiscal (
    resumo_cupom_fiscal_key number(9) not null,
    loja_key number(6) not null,
    calendario_key number(8) not null,
    recebimento_key number(3) not null,
    numero_ecf number(3) not null,
    numero_cupom number(9) not null,
    quantidade_itens number(6),
    quantidade_total number(12, 2),
    valor_total number(12, 2),
    valor_recebido number(12, 2),
    cupom_fiscal_key number(15),
    valor_custo number(12, 2),
    valor_preco number(12, 2)
);

create table resumo_estoque_mensal (
    ano number(4),
    mes number(2),
    loja_key number(6),
    produto_key number(6),
    inicial_quantidade number(17, 3),
    inicial_valor_com_impostos number(19, 6),
    inicial_valor_sem_impostos number(19, 6),
    final_quantidade number(17, 3),
    final_valor_com_impostos number(19, 6),
    final_valor_sem_impostos number(19, 6)
);

create table resumo_geral (
    data_movimento date,
    loja_key number(6) not null,
    setor_compra_key number(3),
    venda number(22),
    custo number(22),
    quebra number(22),
    custo_si number(22),
    icms_venda number(22),
    compras number(22),
    bonificacoes number(22),
    num_pedido_compra number(22),
    num_pedido_bonificado number(22),
    pedido_compra number(22),
    pedido_bonificado number(22),
    pis_venda number(19, 6) default 0 not null,
    cofins_venda number(19, 6) default 0 not null,
    departamento_key number(6),
    secao_key number(6),
    calendario_key number(8) not null,
    pis_compra number(19, 6) default 0 not null,
    cofins_compra number(19, 6) default 0 not null,
    icms_compra number(19, 6),
    vendas_quant number(15, 3),
    compras_quant number(15, 3),
    bonificacoes_quant number(15, 3)
);

create table resumo_inventario (
    inventario_geral number(22),
    loja_key number(6) not null,
    produto_key number(6) not null,
    departamento_key number(6) not null,
    secao_key number(6) not null,
    grupo_produto_key number(6) not null,
    sub_grupo_produto_key number(6) not null,
    setor_compra_key number(3),
    cp_qtd number(22),
    dv_qtd number(22),
    tf_qtd number(22),
    eiq number(22),
    c_qtd number(22),
    efq number(22),
    cmv_qtd number(22),
    v_qtd number(22),
    rcm_qtd number(22),
    mg_qtd number(22),
    aj_qtd number(22),
    tr_qtd number(22),
    cp number(22),
    dv number(22),
    tf number(22),
    c number(22),
    eic number(22),
    ei number(22),
    efc number(22),
    ef number(22),
    cmv number(22),
    v number(22),
    cv number(22),
    rcm number(22),
    mg number(22),
    aj number(22),
    tr number(22),
    qt number(22),
    qt_qtd number(22),
    qt_perc number(22)
);

create table resumo_margem (
    data_movimento date,
    loja_key number(6),
    setor_compra_key number(22),
    produto_key number(6),
    venda number(22),
    custo number(22),
    quebra number(22),
    venda_normal number(22),
    venda_oferta number(22),
    custo_oferta number(22),
    custo_normal number(22),
    quebra_oferta number(22),
    quebra_normal number(22)
);

create table resumo_me (
    mes number(3),
    ano number(4),
    movimento varchar(2),
    loja_key number(6),
    produto_key number(6),
    quantidade number(17, 3),
    valor number(17, 6),
    custo_venda number(19, 6),
    icms_venda number(19, 6) default 0,
    custo_estoque number(19, 6),
    custo_estoque_com_icm number(19, 6),
    pis_valor number(19, 6),
    cofins_valor number(19, 6)
);

create table resumo_menu_acesso_por_usuario (
    menu_key number(6),
    usuario_key number(6) not null,
    quantidade_de_acessos number(7)
);

create table resumo_movimento_estoque (
    calendario_key number(8) not null,
    produto_key number(6) not null,
    produto_origem_key number(6),
    loja_key number(6) not null,
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    setor_compra_key number(6) not null,
    departamento_key number(6) not null,
    secao_key number(6) not null,
    grupo_produto_key number(6) not null,
    sub_grupo_produto_key number(6) not null,
    compra_qtd number(17, 3) default 0 not null,
    compra_valor number(17, 4) default 0 not null,
    compra_custo_si number(19, 6) default 0 not null,
    compra_custo_ci number(19, 6) default 0 not null,
    compra_pis number(19, 6) default 0 not null,
    compra_cofins number(19, 6) default 0 not null,
    compra_icms number(19, 6) default 0 not null,
    bonificada_qtd number(17, 3) default 0 not null,
    bonificada_valor number(17, 4) default 0 not null,
    bonificada_custo_si number(19, 6) default 0 not null,
    bonificada_custo_ci number(19, 6) default 0 not null,
    bonificada_pis number(19, 6) default 0 not null,
    bonificada_cofins number(19, 6) default 0 not null,
    bonificada_icms number(19, 6) default 0 not null,
    troca_ent_qtd number(17, 3) default 0 not null,
    troca_ent_valor number(17, 4) default 0 not null,
    troca_ent_custo_si number(19, 6) default 0 not null,
    troca_ent_custo_ci number(19, 6) default 0 not null,
    troca_ent_pis number(19, 6) default 0 not null,
    troca_ent_cofins number(19, 6) default 0 not null,
    troca_ent_icms number(19, 6) default 0 not null,
    troca_sai_qtd number(17, 3) default 0 not null,
    troca_sai_valor number(17, 4) default 0 not null,
    troca_sai_custo_si number(19, 6) default 0 not null,
    troca_sai_custo_ci number(19, 6) default 0 not null,
    troca_sai_pis number(19, 6) default 0 not null,
    troca_sai_cofins number(19, 6) default 0 not null,
    troca_sai_icms number(19, 6) default 0 not null,
    transf_ent_qtd number(17, 3) default 0 not null,
    transf_ent_valor number(17, 4) default 0 not null,
    transf_ent_custo_si number(19, 6) default 0 not null,
    transf_ent_custo_ci number(19, 6) default 0 not null,
    transf_ent_pis number(19, 6) default 0 not null,
    transf_ent_cofins number(19, 6) default 0 not null,
    transf_ent_icms number(19, 6) default 0 not null,
    transf_sai_qtd number(17, 3) default 0 not null,
    transf_sai_valor number(17, 4) default 0 not null,
    transf_sai_custo_si number(19, 6) default 0 not null,
    transf_sai_custo_ci number(19, 6) default 0 not null,
    transf_sai_pis number(19, 6) default 0 not null,
    transf_sai_cofins number(19, 6) default 0 not null,
    transf_sai_icms number(19, 6) default 0 not null,
    ajuste_qtd number(17, 3) default 0 not null,
    ajuste_valor number(17, 4) default 0 not null,
    ajuste_custo_si number(19, 6) default 0 not null,
    ajuste_custo_ci number(19, 6) default 0 not null,
    ajuste_pis number(19, 6) default 0 not null,
    ajuste_cofins number(19, 6) default 0 not null,
    ajuste_icms number(19, 6) default 0 not null,
    quebra_qtd number(17, 3) default 0 not null,
    quebra_valor number(17, 4) default 0 not null,
    quebra_custo_si number(19, 6) default 0 not null,
    quebra_custo_ci number(19, 6) default 0 not null,
    quebra_pis number(19, 6) default 0 not null,
    quebra_cofins number(19, 6) default 0 not null,
    quebra_icms number(19, 6) default 0 not null,
    venda_qtd number(17, 3) default 0 not null,
    venda_valor number(17, 4) default 0 not null,
    venda_custo_si number(19, 6) default 0 not null,
    venda_custo_ci number(19, 6) default 0 not null,
    venda_pis number(19, 6) default 0 not null,
    venda_cofins number(19, 6) default 0 not null,
    venda_icms number(19, 6) default 0 not null,
    oferta number(1) default 0 not null,
    venda_ranking number(5)
);

create table resumo_movimento_estoque_60d (
    calendario_key number(8) not null,
    produto_key number(6) not null,
    produto_origem_key number(6),
    loja_key number(6) not null,
    fornecedor_key number(6) not null,
    divisao_key number(3) not null,
    setor_compra_key number(6) not null,
    departamento_key number(6) not null,
    secao_key number(6) not null,
    grupo_produto_key number(6) not null,
    sub_grupo_produto_key number(6) not null,
    compra_qtd number(17, 3) default 0 not null,
    compra_valor number(17, 4) default 0 not null,
    compra_custo_si number(19, 6) default 0 not null,
    compra_custo_ci number(19, 6) default 0 not null,
    compra_pis number(19, 6) default 0 not null,
    compra_cofins number(19, 6) default 0 not null,
    compra_icms number(19, 6) default 0 not null,
    bonificada_qtd number(17, 3) default 0 not null,
    bonificada_valor number(17, 4) default 0 not null,
    bonificada_custo_si number(19, 6) default 0 not null,
    bonificada_custo_ci number(19, 6) default 0 not null,
    bonificada_pis number(19, 6) default 0 not null,
    bonificada_cofins number(19, 6) default 0 not null,
    bonificada_icms number(19, 6) default 0 not null,
    troca_ent_qtd number(17, 3) default 0 not null,
    troca_ent_valor number(17, 4) default 0 not null,
    troca_ent_custo_si number(19, 6) default 0 not null,
    troca_ent_custo_ci number(19, 6) default 0 not null,
    troca_ent_pis number(19, 6) default 0 not null,
    troca_ent_cofins number(19, 6) default 0 not null,
    troca_ent_icms number(19, 6) default 0 not null,
    troca_sai_qtd number(17, 3) default 0 not null,
    troca_sai_valor number(17, 4) default 0 not null,
    troca_sai_custo_si number(19, 6) default 0 not null,
    troca_sai_custo_ci number(19, 6) default 0 not null,
    troca_sai_pis number(19, 6) default 0 not null,
    troca_sai_cofins number(19, 6) default 0 not null,
    troca_sai_icms number(19, 6) default 0 not null,
    transf_ent_qtd number(17, 3) default 0 not null,
    transf_ent_valor number(17, 4) default 0 not null,
    transf_ent_custo_si number(19, 6) default 0 not null,
    transf_ent_custo_ci number(19, 6) default 0 not null,
    transf_ent_pis number(19, 6) default 0 not null,
    transf_ent_cofins number(19, 6) default 0 not null,
    transf_ent_icms number(19, 6) default 0 not null,
    transf_sai_qtd number(17, 3) default 0 not null,
    transf_sai_valor number(17, 4) default 0 not null,
    transf_sai_custo_si number(19, 6) default 0 not null,
    transf_sai_custo_ci number(19, 6) default 0 not null,
    transf_sai_pis number(19, 6) default 0 not null,
    transf_sai_cofins number(19, 6) default 0 not null,
    transf_sai_icms number(19, 6) default 0 not null,
    ajuste_qtd number(17, 3) default 0 not null,
    ajuste_valor number(17, 4) default 0 not null,
    ajuste_custo_si number(19, 6) default 0 not null,
    ajuste_custo_ci number(19, 6) default 0 not null,
    ajuste_pis number(19, 6) default 0 not null,
    ajuste_cofins number(19, 6) default 0 not null,
    ajuste_icms number(19, 6) default 0 not null,
    quebra_qtd number(17, 3) default 0 not null,
    quebra_valor number(17, 4) default 0 not null,
    quebra_custo_si number(19, 6) default 0 not null,
    quebra_custo_ci number(19, 6) default 0 not null,
    quebra_pis number(19, 6) default 0 not null,
    quebra_cofins number(19, 6) default 0 not null,
    quebra_icms number(19, 6) default 0 not null,
    venda_qtd number(17, 3) default 0 not null,
    venda_valor number(17, 4) default 0 not null,
    venda_custo_si number(19, 6) default 0 not null,
    venda_custo_ci number(19, 6) default 0 not null,
    venda_pis number(19, 6) default 0 not null,
    venda_cofins number(19, 6) default 0 not null,
    venda_icms number(19, 6) default 0 not null,
    oferta number(1) default 0 not null
);

create table resumo_nivel_servico (
    loja_key number(6) not null,
    produto_key number(6) not null,
    setor number(3),
    quantidade number(22)
);

create table resumo_pedido (
    forn varchar(40) not null,
    emissao date,
    pedido_key number(9),
    setor_compra_key number(3),
    flag_compra varchar(1),
    fornecedor_key number(6),
    divisao_key number(3),
    ped_caixas number(22),
    ent_caixas number(22),
    ped_valor number(22),
    ent_valor number(22),
    ped_lojas number(22),
    ent_lojas number(22),
    ped_itens number(22),
    ent_itens number(22),
    devolucao number(22),
    conta_forn number(22)
);

create table resumo_pedido_venda_cliente (
    cliente_key number(6) not null,
    produto_key number(6) not null,
    quantidade_pedidos number(6),
    quantidade_menor_pedido number(13, 3),
    quantidade_maior_pedido number(13, 3),
    quantidade_media_pedido number(13, 3),
    valor_menor_pedido number(13, 2),
    valor_maior_pedido number(13, 2),
    valor_medio_pedido number(13, 2)
);

create table resumo_pedidos_pendentes (
    item_pedido_key number(9),
    fornecedor_divisao_key number(9),
    comprador_key number(6),
    data_emissao date,
    loja_key number(6),
    produto_key number(6),
    produto_venda_key number(6),
    quantidade_caixas_pedidas number(12, 3),
    quantidade_caixas_entregues number(12, 3),
    quantidade_caixas_pendentes number(12, 3),
    custo_caixa number(10, 4),
    quantidade_unidades_pendentes number(12, 3),
    custo_unitario number(10, 4),
    pelt_key number(9) not null
);

create table resumo_presenca_cupom (
    calendario_key number(8) not null,
    loja_key number(6) not null,
    secao_key number(6) not null,
    valor_venda number(9, 2),
    valor_venda_perc number(5, 2),
    qtd_venda number(9, 3),
    qtd_venda_perc number(5, 2),
    mix number(5),
    mix_perc number(5, 2)
);

create table resumo_tipo_movimento_estoque (
    ano number(4),
    mes number(2),
    loja_key number(6),
    produto_key number(6),
    tipo_movimento_key number(3),
    numero_registros number(7),
    quantidade number(17, 3),
    valor_bruto number(19, 6),
    icms number(19, 6),
    pis number(19, 6),
    cofins number(19, 6)
);

create table resumo_tkt_medio (
    loja_key number(6) not null,
    calendario_key number(8) not null,
    quantidade_cupons number(6) not null,
    valor_vendido number(13, 2) not null
);

create table resumo_tkt_medio_depto (
    loja_key number(6) not null,
    calendario_key number(8) not null,
    departamento_key number(6) not null,
    quantidade_cupons number(6) not null,
    valor_vendido number(13, 2) not null
);

create table resumo_tkt_medio_finalizadora (
    loja_key number(6) not null,
    calendario_key number(8) not null,
    finalizadora_key number(6) not null,
    quantidade_cupons number(6) not null,
    valor_vendido number(13, 2) not null
);

create table resumo_tkt_medio_hora (
    loja_key number(6) not null,
    calendario_key number(8) not null,
    hora number(2) not null,
    quantidade_cupons number(6) not null,
    valor_vendido number(13, 2) not null
);

create table resumo_tkt_medio_hora_depto (
    loja_key number(6) not null,
    calendario_key number(8) not null,
    hora number(2) not null,
    departamento_key number(6) not null,
    quantidade_cupons number(6) not null,
    valor_vendido number(13, 2) not null
);

create table resumo_tkt_medio_hora_secao (
    loja_key number(6) not null,
    calendario_key number(8) not null,
    hora number(2) not null,
    departamento_key number(6) not null,
    secao_key number(6) not null,
    quantidade_cupons number(6) not null,
    valor_vendido number(13, 2) not null
);

create table resumo_tkt_medio_secao (
    loja_key number(6) not null,
    calendario_key number(8) not null,
    departamento_key number(6) not null,
    secao_key number(6) not null,
    quantidade_cupons number(6) not null,
    valor_vendido number(13, 2) not null
);

create table resumo_venda_categoria (
    periodo varchar(7) not null,
    loja_key number(6) not null,
    departamento_key number(6) not null,
    secao_key number(6) not null,
    grupo_produto_key number(6) not null,
    sub_grupo_produto_key number(6) not null,
    venda number(22),
    custo number(22),
    custo_si number(22),
    quebra number(22),
    icms_venda number(22),
    venda_qtd number(12, 3),
    troca_valor number(12, 3),
    troca_qtd number(12, 3),
    pis_valor number(19, 6),
    cofins_valor number(19, 6)
);

create table resumo_venda_lucro_mes (
    produto_key number(6),
    calendario_key number(8),
    mes number(2),
    ano number(4),
    departamento_key number(6),
    secao_key number(6),
    grupo_produto_key number(6),
    sub_grupo_produto_key number(6),
    fornecedor_key number(6),
    divisao_key number(6),
    loja_key number(6),
    rede_key number(6),
    venda_qtd number(17, 3),
    venda_valor number(19, 6),
    entradas_qtd number(17, 3),
    entradas_valor number(19, 6),
    custo_total number(19, 6),
    troca_qtd number(17, 3),
    troca_valor number(19, 6),
    transferencia_saida_qtd number(17, 3),
    transferencia_saida_valor number(19, 6),
    custo_total_si number(19, 6),
    venda_liquida number(19, 6)
);

create table romaneio (
    romaneio_key number(9) not null,
    nf_key number(9),
    lancamento_inicio date,
    lancamento_final date,
    conferente number(6)
);

create table romaneio_item (
    romaneio_item_key number(9) not null,
    romaneio_key number(9),
    nf_item_pedido_key number(15),
    item_key number(15),
    quantidade number(9, 3),
    fator_estoque number(10, 4),
    data_validade date
);

create table roteiro (
    roteiro_key number(6) not null,
    nome varchar(20)
);

create table roteiro_item (
    concorrente_key number(6) not null,
    pesquisa_key number(6) not null,
    roteiro_key number(6) not null,
    ordem_visita number(3) not null
);

create table saldo_contabil_atual (
    loja_key number(6) not null,
    conta_contabil_key number(9) not null,
    saldo number(15, 2) default 0 not null
);

create table saldo_contabil_inicial (
    saldo_contabil_inicial_key number(6) not null,
    loja_key number(6) not null,
    conta_contabil_key number(6) not null,
    saldo number(12, 2) default 0 not null
);

create table saldo_contabil_por_competencia (
    conta_contabil_key number(9) not null,
    competencia_contabil_key number(6) not null,
    loja_key number(6) not null,
    debito number(15, 2) default 0 not null,
    credito number(15, 2) default 0 not null,
    saldo number(15, 2) default 0 not null
);

create table sangria_lancamento_tipo (
    sangria_lancamento_tipo_key number(6) not null,
    descricao varchar(80) not null,
    tipo_lancamento_caixa_key number(9)
);

create table secao (
    secao_key number(6) not null,
    departamento_key number(6) not null,
    nome varchar(40)
);

create table semana_venda (
    semana number(22),
    dia number(22)
);

create table separacao (
    separacao_key number(9) not null,
    loja_key number(6) not null,
    data date,
    aberto number(1) not null
);

create table separacao_item (
    separacao_key number(9) not null,
    produto_key number(6) not null,
    qtd_pedida number(9, 3) not null,
    descricao varchar(42),
    setor_key number(6) not null
);

create table separacao_lote (
    separacao_key number(6) not null,
    numero number(4) not null,
    sequencia number(4) not null,
    barra number(14) not null,
    quantidade number(12, 3) not null,
    descricao varchar(42),
    produto_key number(6)
);

create table separacao_mercadoria (
    separacao_key number(9) not null,
    produto_pai number(6) not null,
    produto_key number(6) not null,
    qtd number(9, 3) not null,
    fator number(8, 4) not null,
    descricao varchar(42)
);

create table setor_balanca (
    setor_balanca_key number(3) not null,
    loja_key number(6) not null,
    balanca_key number(3) not null
);

create table setor_balanca_padrao (
    setor_balanca_key number(3) not null,
    descricao varchar(12)
);

create table setor_compra (
    setor_compra_key number(3) not null,
    responsavel number(6),
    descricao varchar(50),
    status number(1)
);

create table sindicato (
    pessoa_key number(6) not null
);

create table sistema (
    sistema_key number(6) not null,
    nome varchar(50)
);

create table situacao_conta (
    situacao_conta_key number(3) not null,
    descricao varchar(60)
);

create table solicitacao_compra (
    solicitacao_compra_key number(9) not null,
    descricao varchar(50),
    data_emissao date,
    usuario_emissao number(6),
    data_fechamento date,
    usuario_fechamento number(6),
    data_compra date,
    contagem_estoque number(1) not null
);

create table solicitacao_compra_produto (
    solicitacao_compra_produto_key number(9) not null,
    solicitacao_compra_key number(6),
    produto_key number(6)
);

create table solicitacao_compra_produto_lj (
    solicitacao_compra_prod_lj_key number(9) not null,
    solicitacao_compra_produto_key number(9),
    loja_key number(6),
    quantidade number(9, 3),
    quantidade_contagem_estoque number(17, 3)
);

create table status_bordero (
    status_bordero_key number(6) not null,
    descricao varchar(100) not null
);

create table status_competencia (
    status_competencia_key number(2) not null,
    descricao varchar(12)
);

create table status_conciliacao (
    status_conciliacao_key number(22) not null,
    descricao varchar(100)
);

create table status_credito (
    status_credito_key number(3) not null,
    descricao varchar(60),
    bloqueio_credito_key number(1)
);

create table status_divergencia_nota_fiscal (
    status_divergencia_nf_key number(2) not null,
    descricao varchar(150) not null,
    divergencia_preco number(1),
    divergencia_quantidade number(1)
);

create table status_duplicata (
    status_duplicata_key number(2) not null,
    descricao varchar(50) not null
);

create table status_escrita_fiscal (
    status_escrita_fiscal_key number(2) not null,
    descricao varchar(100)
);

create table status_funcionario (
    status_funcionario_key number(6) not null,
    descricao varchar(30) not null
);

create table status_guia_recolhimento (
    status_guia_recolhimento_key number(2) not null,
    descricao varchar(70) not null
);

create table status_patrimonio_item (
    status_patrimonio_item_key number(6) not null,
    descricao varchar(20) not null
);

create table status_pedido (
    status_pedido_key number(2) not null,
    descricao varchar(50)
);

create table status_recebimento (
    status_recebimento_key number(9) not null,
    nf_key number(9),
    tipo_status_recebimento_key number(6),
    usuario_key number(6),
    data date,
    descricao varchar(400)
);

create table status_transferencia (
    status_transferencia_key number(1) not null,
    descricao varchar(80)
);

create table sub_conta_bancaria (
    sub_conta_bancaria_key number(6) not null,
    conta_bancaria_key number(6),
    tipo_conta_bancaria_key number(22),
    numero number(22),
    digito number(1),
    data_abertura date,
    data_encerramento date
);

create table sub_finalizadora (
    sub_finalizadora_key number(9) not null,
    finalizadora_key number(6),
    descricao varchar(200) not null,
    gdr_key number(6),
    fk_tipo_caixa number(6),
    recebimento_key number(6),
    tipo_bandeira_key number(2),
    parcelas number(3) default 1 not null
);

create table sub_grupo_produto (
    sub_grupo_produto_key number(6) not null,
    grupo_produto_key number(6) not null,
    nome varchar(40),
    pis_key number(6),
    cofins_key number(6)
);

create table sugestao_compra_externa (
    sugestao_compra_externa_key number(9) not null,
    data_inicial_sugestao date,
    fornecedor_key number(6),
    loja_key number(6) not null,
    produto_key number(6) not null,
    quantidade_sugerida number(12, 3),
    status number(1),
    data_emissao date default SYSDATE,
    usuario_key number(6) not null,
    fornecedor_divisao_key number(9)
);

create table taxa_cartao_conta (
    taxa_cartao_conta_key number(9) not null,
    descricao varchar(100) not null,
    perc_fixo varchar(1) not null,
    tipo_caixa_key number(6)
);

create table taxa_cartao_loja (
    taxa_cartao_loja_key number(9) not null,
    valor number(10, 3),
    loja_key number(6) not null,
    taxa_cartao_conta_key number(9) not null,
    data_inicial date not null,
    parcela number(3) default 1 not null
);

create global temporary table temp_pedido_custo (
    produto_key number(9),
    pedido_key number(9),
    loja_key number(9),
    negociacao_key number(9),
    valor_bruto number(9, 2),
    desconto_total number(9, 2),
    ipi_valor number(9, 2),
    despesa_tributada number(9, 2),
    despesa_nao_tributada number(9, 2),
    custo_pedido number(9, 2),
    descricao varchar(100),
    fornecedor_key number(9),
    usuario_key number(9),
    data_emissao date,
    data_entrega_inicial date,
    data_entrega_final date,
    nome_abreviado varchar(100),
    comprador number(9),
    custo number(9, 2),
    custo_ci number(9, 2)
);

create table terceiro (
    pessoa_key number(6) not null
);

create table teste_edi (
    teste_edi_key number(4) not null,
    conta_bancaria_key number(6),
    usuario_key number(6),
    data date,
    tipo_teste_edi_key number(2)
);

create table theme (
    theme_key number(3) not null,
    diretorio varchar(35) not null,
    descricao varchar(40) not null
);

create table tipo_acao_agendamento (
    tipo_acao_agendamento number(2) not null,
    descricao varchar(50)
);

create table tipo_agendamento (
    tipo_agendamento_key number(6) not null,
    descricao varchar(80),
    movimento number(1),
    instrucao number(2)
);

create table tipo_ajuste_resumo_venda (
    tipo_ajuste_resumo_venda_key number(6) not null,
    descricao varchar(100)
);

create table tipo_ambiente_nfe (
    tipo_ambiente_nfe_key number(2) not null,
    descricao varchar(20) not null
);

create table tipo_arquivo (
    tipo_arquivo_key number(3) not null,
    descricao varchar(80),
    permissao_key number(6)
);

create table tipo_arquivo_edi (
    tipo_arquivo_edi_key number(3) not null,
    descricao varchar(50)
);

create table tipo_arquivo_nfe (
    tipo_arquivo_nfe_key number(6) not null,
    descricao varchar(30) not null
);

create table tipo_autorizacao_pagamento (
    tipo_autorizacao_pagamento_key number(3) not null,
    descricao varchar(100),
    utilizado_contas_pagar number(1),
    utilizado_contas_receber number(1)
);

create table tipo_baixa_patrimonio (
    tipo_baixa_patrimonio_key number(3) not null,
    descricao varchar(50)
);

create table tipo_balanca (
    tipo_balanca_key number(3) not null,
    descricao varchar(30),
    modelo varchar(30),
    numero_linhas number(3) default 1,
    numero_caracteres number(3) default 1,
    max_caracteres number(3),
    classe varchar(100),
    loja_padrao number(3)
);

create table tipo_bandeira (
    tipo_bandeira_key number(6) not null,
    descricao varchar(100)
);

create table tipo_base_calculo_desconto (
    tipo_base_calculo_desconto_key number(6) not null,
    descricao varchar(80)
);

create table tipo_base_credito_pis (
    tipo_base_credito_pis_key number(2) not null,
    descricao varchar(160) not null
);

create table tipo_bordero (
    tipo_bordero_key number(22) not null,
    descricao varchar(45),
    edi number(1) default 0 not null
);

create table tipo_bordero_caixa (
    tipo_bordero_caixa_key number(3) not null,
    descricao varchar(50)
);

create table tipo_cadastramento_cob (
    tipo_cadastramento_cob_key number(2) not null,
    descricao varchar(100)
);

create table tipo_caixa (
    tipo_caixa_key number(3) not null,
    descricao varchar(60) not null,
    grupo_caixa_key number(6) not null,
    administradora_key number(6),
    qtd_dias number(3),
    dias_fechamento_semana number(1),
    conta_contabil_key number(9),
    status number(1) default 1,
    conta_contabil_despesa_key number(9),
    conta_contabil_receita_key number(9),
    tipo_caixa_periodo_corte_key number(3),
    data_referencia_fechamento date,
    considera_dia_fechamento number(1),
    tipo_movimento_bancario_key number(6)
);

create table tipo_caixa_periodo_corte (
    tipo_caixa_periodo_corte_key number(3) not null,
    descricao varchar(30)
);

create table tipo_caixa_prazo (
    tipo_caixa_prazo_key number(4) not null,
    tipo_caixa_key number(3),
    qtd_dias number(3),
    numero_parcela number(2) default 1,
    dia_inicial number(2),
    dia_final number(2),
    dia_vencimento number(2),
    indicador_mes number(1) default 0
);

create table tipo_captura (
    tipo_captura_key number(6) not null,
    descricao varchar(100)
);

create table tipo_cartao (
    tipo_cartao_key number(6) not null,
    descricao varchar(100)
);

create table tipo_carteira_cobranca (
    tipo_carteira_cobranca_key number(3) not null,
    descricao varchar(150)
);

create table tipo_classe_consumo (
    tipo_classe_consumo_key number(3) not null,
    descricao varchar(50)
);

create table tipo_classificacao_loja (
    tipo_classificacao_loja_key char(1) not null,
    descricao varchar(65)
);

create table tipo_clau_acordo_prom (
    tipo_clau_acordo_prom_key number(6) not null,
    descricao varchar(60)
);

create table tipo_clausula_contrato (
    tipo_clausula_key number(6) not null,
    descricao varchar(60)
);

create table tipo_cliente (
    tipo_cliente_key number(2) not null,
    descricao varchar(80)
);

create table tipo_cobranca (
    tipo_cobranca_key number(6) not null,
    descricao varchar(50)
);

create table tipo_cobranca_contrato (
    tipo_cobranca_contrato_key number(6) not null,
    descricao varchar(200) not null
);

create table tipo_codigo_produto (
    tipo_codigo_produto_key number(2) not null,
    descricao varchar(10)
);

create table tipo_composicao (
    tipo_composicao_key number(3) not null,
    descricao varchar(30) not null
);

create table tipo_consulta_credito (
    tipo_consulta_credito_key number(6) not null,
    descricao varchar(100)
);

create table tipo_conta_bancaria (
    tipo_conta_bancaria_key number(22) not null,
    descricao varchar(65),
    descricao_resumida varchar(2),
    sub_tipo_conta_bancaria number(1)
);

create table tipo_contato (
    tipo_contato_key number(6) not null,
    nome varchar(20)
);

create table tipo_contr_apurada_pis (
    tipo_contr_apurada_pis_key number(2) not null,
    descricao varchar(100) not null
);

create table tipo_contrato_financeiro (
    tipo_contrato_financeiro_key number(3) not null,
    descricao varchar(100),
    sinal number(1),
    vincular_imovel number(1)
);

create table tipo_controle_producao (
    tipo_controle_producao_key number(1) not null,
    descricao varchar(20) not null
);

create table tipo_credito_pis_cofins (
    tipo_credito_pis_cofins_key number(3) not null,
    descricao varchar(110) not null
);

create table tipo_cupom_devolvido (
    tipo_cupom_devolvido_key number(1) not null,
    descricao varchar(50)
);

create table tipo_desconto (
    tipo_desconto_key number(2) not null,
    descricao varchar(80)
);

create table tipo_detalhe_deb_federal (
    tipo_detalhe_deb_federal_key number(3) not null,
    descricao varchar(60) not null
);

create table tipo_distribuicao (
    tipo_distribuicao_key number(6) not null,
    descricao varchar(100)
);

create table tipo_distribuicao_bloqueto (
    tipo_distribuicao_bloqueto_key number(2) not null,
    descricao varchar(80)
);

create table tipo_distribuicao_logistica (
    tipo_distribuicao_logist_key number(2) not null,
    descricao varchar(60),
    indicador_de_propriedade_key number(2) not null
);

create table tipo_divergencia_nota_fiscal (
    tipo_divergencia_nf_key number(3) not null,
    descricao varchar(60)
);

create table tipo_documento_fiscal (
    tipo_documento_fiscal_key number(2) not null,
    descricao varchar(100)
);

create table tipo_domicilio (
    tipo_domicilio_key number(1) not null,
    descricao varchar(20) not null
);

create table tipo_embalagem_faturamento (
    tipo_embalagem_faturamento_key number(2) not null,
    descricao varchar(30)
);

create table tipo_emissao_bloqueto (
    tipo_emissao_bloqueto_key number(2) not null,
    descricao varchar(80)
);

create table tipo_emissao_nfe (
    tipo_emissao_nfe_key number(3) not null,
    descricao varchar(80)
);

create table tipo_endereco (
    tipo_endereco_key number(3) not null,
    descricao varchar(20)
);

create table tipo_endereco_logistico (
    tipo_endereco_logistico_key number(3) not null,
    descricao varchar(50)
);

create table tipo_entrada_tesouraria (
    tipo_entrada_tesouraria_key number(6) not null,
    descricao varchar(60) not null,
    conta_contabil_key number(6)
);

create table tipo_escrita_apuracao_advert (
    tipo_escrita_apuracao_adv_key number(3) not null,
    descricao varchar(60) not null
);

create table tipo_escrita_fiscal_ajuste (
    tipo_escrita_fiscal_ajuste_key varchar(60) not null,
    uf varchar(2),
    sinal number(1) not null,
    descricao varchar(255) not null,
    codigo varchar(60) not null,
    tipo_imposto_key number(2)
);

create table tipo_estatistica_venda (
    tipo_estatistica_venda_key number(3) not null,
    descricao varchar(200)
);

create table tipo_etiqueta (
    tipo_etiqueta_key number(6) not null,
    descricao varchar(50),
    classe varchar(100)
);

create table tipo_folha_cobranca (
    tipo_folha_cobranca_key number(3) not null,
    descricao varchar(100)
);

create table tipo_folha_pagamento (
    tipo_folha_pagamento_key number(6) not null,
    descricao varchar(100),
    sinal number(1),
    calcula_salario number(1)
);

create table tipo_folha_pagamento_mapa (
    tipo_folha_pagamento_mapa_key number(6) not null,
    tipo_folha_pagamento_key number(6),
    codigo number(6),
    descricao varchar(100),
    descricao_abreviada varchar(20),
    referencia_padrao number(9, 3),
    status number(1),
    tipo_folha_cobranca_key number(3)
);

create table tipo_forma_pagamento (
    tipo_forma_pagamento_key number(3) not null,
    descricao varchar(20)
);

create table tipo_fornecimento (
    tipo_fornecimento_key number(3) not null,
    descricao varchar(50)
);

create table tipo_frete (
    tipo_frete varchar(3) not null,
    descricao varchar(50),
    tipo_frete_key number(2) not null
);

create table tipo_grau_de_instrucao (
    tipo_grau_de_instrucao_key number(6) not null,
    descricao varchar(40)
);

create table tipo_gravidade_log (
    tipo_gravidade_log_key number(2) not null,
    descricao varchar(50) not null
);

create table tipo_guia_recolhimento (
    tipo_guia_recolhimento_key number(2) not null,
    descricao varchar(20)
);

create table tipo_guia_recolhimento_detalhe (
    tipo_guia_recolhi_detalhe_key number(3) not null,
    tipo_guia_recolhimento_key number(1),
    descricao varchar(20)
);

create table tipo_imovel_despesa (
    tipo_imovel_despesa_key number(6) not null,
    descricao varchar(80)
);

create table tipo_imposto (
    tipo_imposto_key number(2) not null,
    descricao varchar(25) not null,
    tipo_guia_recolhimento_key number(2) not null
);

create table tipo_imposto_federal (
    tipo_imposto_federal_key number(2) not null,
    descricao varchar(50)
);

create table tipo_inscricao (
    tipo_inscricao_key number(2) not null,
    descricao varchar(50)
);

create table tipo_instrucao_nota_fiscal (
    tipo_instrucao_nota_fiscal_key number(3) not null,
    descricao varchar(150) not null,
    sigla varchar(4) not null
);

create table tipo_item_compra (
    tipo_item_compra_key number(3) not null,
    descricao varchar(50)
);

create table tipo_juros (
    tipo_juros_key number(2) not null,
    descricao varchar(80)
);

create table tipo_lancamento (
    tipo_lancamento_key number(3) not null,
    descricao varchar(40),
    sinal number(1) not null,
    quem_gera varchar(1),
    status number(1),
    core number(1) default 0,
    conta_contabil_resultado_key number(9),
    conta_contabil_patrimonio_key number(9)
);

create table tipo_lancamento_caixa (
    tipo_lancamento_caixa_key number(9) not null,
    descricao varchar(200) not null,
    sinal number(1) not null,
    sub_finalizadora_key number(6),
    finalizadora_key number(6),
    venda_sangria varchar(1) default 'V'
);

create table tipo_layout_edi_comercial (
    tipo_layout_edi_comercial_key number(3) not null,
    descricao varchar(50) not null
);

create table tipo_log (
    tipo_log_key number(6) not null,
    descricao varchar(30) not null
);

create table tipo_log_arquivo_nfe_receb (
    tipo_log_arquivo_nfe_receb_key number(3) not null,
    descricao varchar(60) not null
);

create table tipo_lote_troca (
    tipo_lote_troca_key number(6) not null,
    descricao varchar(50)
);

create table tipo_mapa_resumo (
    tipo_mapa_resumo_key number(6) not null,
    descricao varchar(40) not null
);

create table tipo_modelo_nf (
    tipo_modelo_nf_key number(2) not null,
    descricao varchar(100),
    sigla varchar(8)
);

create table tipo_modelo_registro_fiscal (
    tipo_modelo_reg_fiscal_key number(3) not null,
    tipo_registro_fiscal_key number(3),
    descricao varchar(55)
);

create table tipo_motivo_ajuste_rv (
    tipo_motivo_ajuste_rv_key number(6) not null,
    descricao varchar(100)
);

create table tipo_motivo_oc_cobranca (
    tipo_motivo_oc_cobranca_key varchar(3) not null,
    descricao varchar(255)
);

create table tipo_motivo_request (
    tipo_motivo_request_key number(6) not null,
    descricao varchar(100),
    documentos_solicitados varchar(500)
);

create table tipo_mov_caixa (
    tipo_mov_caixa_key number(3) not null,
    descricao varchar(50) not null,
    sinal number(1) not null,
    estorno number(1) default 0 not null,
    tipo_mov_caixa_estorno_key number(3)
);

create table tipo_movimento (
    tipo_movimento_key number(3) not null,
    descricao varchar(75),
    sinal_estoque number(1),
    sinal_troca number(1),
    sinal_transferencia number(1),
    flag_custo number(1),
    movimento varchar(1),
    debito_credito varchar(1),
    sinal_conta_fornecedor number(1),
    codigo_complementar number(3),
    busca_custo number(1) default 0,
    tipo_movimento_estorno_key number(3),
    resumo_movimento_estoque varchar(2),
    sinal_em_terceiros number(1) not null,
    sinal_de_terceiros number(1) not null,
    tributar number(1) default 1,
    estorno number(1) default 0,
    sinal_estoque_futuro number(1) default 0 not null
);

create table tipo_movimento_bancario (
    tipo_movimento_bancario_key number(6) not null,
    descricao varchar(200) not null,
    sinal number(1) not null,
    tipo_movimento_estorno_key number(6),
    fk_administradora number(6),
    processo_financeiro_key number(6),
    conta_contabil_key number(9),
    grupo_financeiro_key number(3) not null,
    status number(1)
);

create table tipo_movimento_financeiro (
    tipo_movimento_financeiro_key number(6) not null,
    descricao varchar(100)
);

create table tipo_movimento_terceiro (
    tipo_movimento_terceiro_key number(2) not null,
    descricao varchar(55)
);

create table tipo_multa (
    tipo_multa_key number(2) not null,
    descricao varchar(80)
);

create table tipo_ocorrencia_banco_cobranca (
    tipo_ocorrencia_banco_cob_key varchar(3) not null,
    descricao varchar(255)
);

create table tipo_ocorrencia_cobranca (
    tipo_motivo_oc_cobranca_key varchar(3) not null,
    codigo number(3),
    remessa number(1),
    descricao varchar(255)
);

create table tipo_operacao_nota_fiscal (
    tipo_operacao_nota_fiscal_key number(1) not null,
    descricao varchar(50),
    sinal number(1)
);

create table tipo_ordem_credito (
    tipo_ordem_credito_key number(6) not null,
    descricao varchar(100)
);

create table tipo_origem_contabil (
    tipo_origem_contabil_key number(3) not null,
    descricao varchar(80)
);

create table tipo_pagamento (
    tipo_pagamento_key number(3) not null,
    descricao varchar(50)
);

create table tipo_parametro (
    tipo_parametro_key number(22) not null,
    descricao varchar(40)
);

create table tipo_patrimonio_item (
    tipo_patrimonio_item_key number(2) not null,
    descricao varchar(50)
);

create table tipo_pdv (
    tipo_pdv_key number(6) not null,
    descricao varchar(30),
    modelo varchar(30),
    classe varchar(100),
    pattern_arquivo varchar(40),
    pattern_diretorio varchar(20),
    parser_name varchar(20),
    tipo_tef_key number(2) not null
);

create table tipo_pedido (
    tipo_pedido_key number(3) not null,
    descricao varchar(50),
    flag_compra varchar(1),
    flag_zera_custo number(1) default 0,
    bonificado number(1) default 0
);

create table tipo_pedido_venda (
    tipo_pedido_venda_key number(3) not null,
    descricao varchar(30) not null
);

create table tipo_periodicidade (
    tipo_periodicidade_key number(1) not null,
    descricao varchar(50) not null
);

create table tipo_pesquisa_jornal (
    tipo_pesquisa_jornal_key number(3) not null,
    descricao varchar(60) not null
);

create table tipo_pessoa (
    pessoa_key number(6) not null,
    tipo_pessoa_descricao_key number(3) not null,
    tipo_pessoa_key number(6) not null
);

create table tipo_pessoa_descricao (
    tipo_pessoa_descricao_key number(3) not null,
    descricao varchar(30)
);

create table tipo_produto_bancario (
    tipo_produto_bancario_key number(3) not null,
    descricao varchar(55)
);

create table tipo_protesto (
    tipo_protesto_key number(2) not null,
    descricao varchar(80)
);

create table tipo_quebra_tesouraria (
    tipo_quebra_tesouraria_key number(3) not null,
    descricao varchar(100)
);

create table tipo_receita_tributaria (
    tipo_receita_tributaria_key number(6) not null,
    codigo_da_receita varchar(20) not null,
    descricao varchar(200) not null,
    estado_sigla varchar(2),
    tipo_imposto_key number(2)
);

create table tipo_regime_simples (
    tipo_regime_simples_key number(2) not null,
    descricao varchar(60) not null
);

create table tipo_regime_tributario (
    tipo_regime_tributario_key number(6) not null,
    descricao varchar(25) not null
);

create table tipo_registro_fiscal (
    tipo_registro_fiscal_key number(3) not null,
    descricao varchar(50),
    sigla varchar(6)
);

create table tipo_registro_sintegra (
    tipo_registro_sintegra_key varchar(3) not null,
    descricao varchar(50)
);

create table tipo_relatorio (
    tipo_relatorio_key number(3) not null,
    nome varchar(50)
);

create table tipo_requisicao_suporte (
    tipo_requisicao_key number(6) not null,
    descricao varchar(50)
);

create table tipo_resposta_nfe (
    tipo_resposta_nfe_key number(4) not null,
    descricao varchar(255) not null
);

create table tipo_sanguineo (
    tipo_sanguineo_key number(1) not null,
    descricao varchar(3)
);

create table tipo_separacao (
    tipo_separacao_key number(3) not null,
    descricao varchar(50)
);

create table tipo_servico_nfe (
    tipo_servico_nfe_key number(2) not null,
    descricao varchar(60) not null
);

create table tipo_status_arquivo (
    tipo_status_arquivo_key number(3) not null,
    descricao varchar(100)
);

create table tipo_status_bloqueto (
    tipo_status_bloqueto_key number(3) not null,
    descricao varchar(50)
);

create table tipo_status_cobranca (
    tipo_status_cobranca_key number(3) not null,
    descricao varchar(80)
);

create table tipo_status_credito (
    tipo_status_credito_key number(6) not null,
    descricao varchar(100)
);

create table tipo_status_cv (
    tipo_status_cv_key number(6) not null,
    descricao varchar(100)
);

create table tipo_status_distribuicao (
    tipo_status_distribuicao_key number(3) not null,
    descricao varchar(100)
);

create table tipo_status_nfe (
    tipo_status_nfe_key number(2) not null,
    descricao varchar(100)
);

create table tipo_status_ordem_credito (
    tipo_status_ordem_credito_key number(2) not null,
    descricao varchar(50)
);

create table tipo_status_pagamento (
    tipo_status_pagamento_key number(2) not null,
    descricao varchar(80)
);

create table tipo_status_preco_venda (
    tipo_status_preco_venda_key number(3) not null,
    descricao varchar(20)
);

create table tipo_status_produto (
    tipo_status_produto_key number(2) not null,
    descricao varchar(70)
);

create table tipo_status_recebimento (
    tipo_status_recebimento_key number(6) not null,
    descricao varchar(40)
);

create table tipo_tef (
    tipo_tef_key number(2) not null,
    descricao varchar(5)
);

create table tipo_terminal_consulta (
    tipo_terminal_consulta_key number(6) not null,
    descricao varchar(50),
    classe varchar(100)
);

create table tipo_teste_edi (
    tipo_teste_edi_key number(2) not null,
    descricao varchar(60)
);

create table tipo_transacao (
    tipo_transacao_key number(6) not null,
    descricao varchar(100)
);

create table tipo_transferencia (
    tipo_transferencia_key number(2) not null,
    descricao varchar(80)
);

create table tipo_troca (
    tipo_troca_key number(6) not null,
    descricao varchar(30),
    destino varchar(30)
);

create table tipo_uniao (
    tipo_uniao_key number(6) not null,
    descricao varchar(40)
);

create table transferencia_90dias (
    data_movimento date,
    produto_key number(6),
    loja_origem_key number(6) not null,
    loja_destino_key number(6),
    entrada_saida varchar(1),
    quantidade number(22),
    valor number(22),
    custo_estoque_sem_icm number(22),
    custo_estoque_com_icm number(22)
);

create table transferencia_eletronica (
    transferencia_eletronica_key number(8) not null,
    conta_bancaria_debito_key number(6),
    conta_bancaria_credito_key number(6),
    data_compensacao date,
    data_pagamento date,
    valor number(9, 2),
    tipo_transferencia_key number(2),
    motivo_transferencia_key number(2),
    agendamento_transferencia_key number(9),
    tipo_status_pagamento_key number(2)
);

create table transferencia_valores (
    transferencia_valores_key number(6) not null,
    tipo_caixa_key number(6) not null,
    loja_key_origem number(6) not null,
    loja_key_destino number(6) not null,
    observacao varchar(150) not null,
    motivo_transferencia_key number(6) not null,
    valor number(9, 2),
    data_saida date,
    data_entrada date,
    usuario_entrada_key number(6),
    usuario_saida_key number(6)
);

create table transmissao_nfe (
    transmissao_nfe_key number(10) not null,
    nf_key number(9) not null,
    tipo_ambiente_nfe_key number(2) not null,
    tipo_servico_nfe_key number(2) not null,
    lote number(9),
    recibo number(15),
    data_transmissao date,
    tipo_resposta_nfe_key number(4) not null,
    usuario_key number(6) not null,
    arquivo_remessa number(9),
    arquivo_retorno number(9)
);

create table transportadora (
    pessoa_key number(6) not null
);

create table transportadora_cargas (
    pessoa_key number(6) not null
);

create table transportadora_valores (
    pessoa_key number(6) not null
);

create table tributacao_ref_produto_de_para (
    produto_key number(6) not null,
    tributacao_ref_produto_ean number(14)
);

create table tributacao_ref_produto_log (
    tributacao_ref_produto_log_key number(12) not null,
    tributacao_ref_produto_key number(9),
    data_alteracao date,
    usuario_alteracao_key number(6),
    anterior_classif_fiscal_key number(8),
    anterior_pis_key number(3),
    anterior_cofins_key number(3),
    anterior_icms_key number(3)
);

create table tributacao_referencia_lote (
    tributacao_referencia_lote_key number(6) not null,
    empresa varchar(60),
    data_importacao_arquivo date,
    usuario_importacao_key number(6)
);

create table tributacao_referencia_produto (
    tributacao_ref_produto_key number(9) not null,
    tributacao_referencia_lote_key number(6),
    produto_key number(6),
    grupo varchar(100),
    subgrupo varchar(100),
    portaria_cat varchar(40),
    portaria_cat_item varchar(30),
    codigo_ean number(14),
    descricao_do_produto varchar(100),
    ncm number(10),
    ipi number(9, 3),
    iva number(9, 3),
    compra_aliquota number(9, 3),
    compra_reducao number(9, 3),
    compra_icms_final number(9, 3),
    nf_aliquota number(9, 3),
    nf_reducao number(9, 3),
    nf_icms_final number(9, 3),
    ecf varchar(30),
    pis number(9, 3),
    cofins number(9, 3),
    modalidade_pis_cofins varchar(30),
    icms_key number(2),
    pis_key number(2),
    cofins_key number(2),
    classificacao_fiscal_key number(6)
);

create table troca (
    produto_key number(6) not null,
    loja_key number(6) not null,
    fornecedor_key number(6),
    tipo_troca_key number(6)
);

create table troca_descarte_destino (
    key number(3) not null,
    descricao varchar(30)
);

create table troca_produto_loja (
    troca_produto_loja_key number(9) not null,
    produto_key number(6),
    loja_key number(6),
    fornecedor_key number(6),
    divisao_key number(3)
);

create table troca_transferencia (
    numero_transacao number(6) not null,
    loja_origem_key number(6) not null,
    produto_key number(6) not null,
    quantidade number(10, 3),
    valor number(10, 4),
    fornecedor_key number(6),
    divisao_key number(3),
    setor_compra_key number(3),
    data date,
    baixado date,
    loja_destino_key number(6)
);

create table ultima_pesquisa (
    concorrente_key number(6) not null,
    usuario_key number(6) not null,
    data_pesquisa date,
    visita_key number(10) not null,
    data_visita date
);

create table ultima_pesquisa_item (
    usuario_key number(6) not null,
    produto_key number(6) not null,
    data_visita number(1) not null
);

create table ultimo_movimento (
    produto_key number(6) not null,
    loja_key number(6) not null,
    venda number(15),
    compra number(15),
    transferencia number(15),
    troca_entrada number(15),
    troca_saida number(15),
    ajuste_credito number(15),
    ajuste_debito number(15),
    devolucao_compra number(15),
    transferencia_saida number(15),
    armazenagem_entrada number(15),
    armazenagem_saida number(15)
);

create table ultimo_pedido_venda_cliente (
    pedido_venda_key number(9) not null,
    cliente_key number(6) not null
);

create table uniao (
    chave_pai number(6) not null,
    chave_filho number(6) not null,
    tipo_uniao_key number(6) not null
);

create table unidade_porcao (
    unidade_porcao_key number(1) not null,
    descricao varchar(2) not null
);

create table usuario (
    usuario_key number(6) not null,
    user_name varchar(20),
    senha varchar(32),
    status char(1),
    senha_status char(1),
    senha_validade number(3),
    ultima_troca date,
    recebe_popup number(1) default 0,
    bg_color varchar(10),
    theme_key number(3) default 1,
    google_token varchar(50),
    google_user varchar(70),
    google_domain varchar(70)
);

create table usuario_limite_financeiro (
    usuario_limite_financeiro_key number(6) not null,
    usuario_key number(6) not null,
    data_movimento date not null,
    valor number(11, 2),
    tipo_movimento_financeiro_key number(6),
    observacao varchar(100)
);

create table usuario_loja (
    usuario_key number(6) not null,
    loja_key number(6) not null
);

create table usuario_preferencias (
    usuario_key number(6) not null,
    bg_color varchar(10),
    tema_menu varchar(10),
    tipo_menu number(1) default 1
);

create table van_edi (
    van_edi_key number(6) not null,
    descricao varchar(60),
    classe_web_service varchar(140),
    prefixo_arquivo varchar(50)
);

create table vd_cupom_devolvido (
    vd_cupom_devolvido_key number(8) not null,
    tipo_cupom_devolvido_key number(1),
    operador_devolucao_key number(6) not null,
    data date,
    data_devolucao date not null,
    loja_key number(6),
    numero_cupom number(6),
    numero_ecf number(6),
    numero_ecf_devolucao number(6) not null,
    valor_total number(13, 2),
    usuario_key number(6),
    hora_lancamento date default (sysdate),
    nf_key number(9),
    data_estorno date,
    usuario_estorno_key number(6)
);

create table vd_cupom_fiscal (
    cupom_numero number(9) not null,
    cupom_fiscal_key number(15) not null,
    hora date,
    loja_key number(6) not null,
    ecf number(4) not null,
    cliente_key number(6),
    quantidade_bonus number(4),
    tipo number(1) not null,
    calendario_key number(8) not null,
    coo number(6),
    valor_total number(9, 2),
    nf_key number(9),
    cancelado number(1) default 0
);

create table vd_cupom_item (
    barra_key number(14) not null,
    cupom_fiscal_key number(15) not null,
    fator_estoque number(10, 4),
    quantidade_vendida number(9, 3),
    valor_vendido number(11, 2),
    item_key number(15) not null,
    icm_key number(6),
    ordem number(6),
    produto_key number(6),
    pis_key number(6),
    cofins_key number(6),
    loja_key number(6)
);

create table vd_cupom_item_nota_fiscal_item (
    vd_cupom_item_key number(15) not null,
    nota_fiscal_item_key number(15) not null
);

create table vd_cupom_recebimento (
    recebimento_key number(3) not null,
    cupom_fiscal_key number(15) not null,
    valor_recebido number(9, 2),
    troco_fornecido number(9, 2),
    numero_funcao number(4),
    numero_documento varchar(20),
    cpf_cgc varchar(19),
    numero_banco number(4),
    numero_agencia number(7),
    numero_conta varchar(30),
    numero_cheque varchar(30),
    nsu number(12),
    bom_para date,
    situacao_retornada varchar(2),
    funcionario_liberou varchar(40),
    cartao_credito_tipo varchar(40),
    cartao_credito_numero varchar(30),
    cartao_credito_parcelas number(2),
    percentual_recebimento number(7, 4),
    cupom_recebimento_key number(15) not null,
    sub_finalizadora_key number(6)
);

create table vd_item_cupom_devolvido (
    vd_item_cupom_devolvido_key number(8) not null,
    barra_key number(14),
    qtd_lancada number(13, 3),
    valor_devolvido number(10, 3),
    lancado_por number(6),
    produto_key number(6) not null,
    vd_cupom_devolvido_key number(8),
    loja_key number(6),
    data_cupom date,
    vd_cupom_item_key number(15)
);

create table vd_leitura (
    tipo_leitura number(2) not null,
    tipo_transacao number(2) not null,
    valor number(12, 2) not null,
    cupom_fiscal_key number(15) not null,
    cupom_leitura_key number(15) not null,
    vd_tipo_transacao_key number(6)
);

create table vd_tipo_cupom (
    tipo_key number(2) not null,
    descricao varchar(40) not null
);

create table vd_tipo_transacao (
    leitura number(2) not null,
    transacao number(2) not null,
    descricao varchar(60),
    tipo_lancamento_caixa_key number(6),
    tipo_mapa_resumo_key number(6),
    vd_tipo_transacao_key number(6) not null
);

create table vd_tt_recebimento (
    vd_tipo_transacao_key number(6) not null,
    recebimento_key number(3) not null
);

create table vencimento_medio_estoque (
    produto_key number(6) not null,
    loja_key number(6) not null,
    quantidade number(12, 3) not null,
    dias_vencimento number(6),
    tipo char(1) not null,
    custo_ci number(19, 6) not null,
    custo_si number(19, 6) not null,
    data_entrada date
);

create table venda90dias (
    data_movimento date,
    produto_key number(6),
    loja_key number(6) not null,
    quantidade number(22),
    valor number(22),
    produto_promocao number(1)
);

create table venda_irregular (
    venda_irregular_key number(15) not null,
    loja_key number(6) not null,
    ean number(14) not null,
    data_movimento date,
    quantidade number(15, 3) not null,
    valor number(10, 2) not null
);

create table venda_online_log (
    venda_online_log_key number(9) not null,
    data_cupom date,
    data_ocorrencia date not null,
    cupom_numero number(6),
    loja_key number(6) not null,
    nome_arquivo varchar(40) not null,
    arquivo blob,
    mensagem varchar(200) not null,
    calendario_key number(8) not null,
    ecf number(4)
);

create table vendedor (
    pessoa_key number(6) not null
);

alter table abatimento add constraint pk_abatimento primary key (ap_key,ar_key);
alter table acordo_baixa_custo add constraint pk_acordo_baixa_custo primary key (acordo_baixa_custo_key);
alter table acordo_baixa_custo_item add constraint pk_acordo_baixa_custo_item primary key (acordo_baixa_custo_item_key);
alter table acordo_produto add constraint pk_acordo_produto primary key (acordo_produto_key);
alter table acordo_produto_item add constraint pk_acordo_produto_item primary key (acordo_produto_item_key);
alter table acordo_produto_loja add constraint pk_acordo_produto_loja primary key (acordo_produto_key,loja_key);
alter table administradora add constraint pk_administradora primary key (pessoa_key);
alter table administradora_credito add constraint pk_administradora_credito primary key (pessoa_key);
alter table agencia add constraint pk_agencia primary key (agencia_key);
alter table agendamento_transferencia add constraint pk_agendamento_transferencia primary key (agendamento_transferencia_key);
alter table ajuste_estoque add constraint pk_ajuste_estoque primary key (ajuste_estoque_key);
alter table ajuste_trocas add constraint pk_ajuste_troca primary key (ajuste_troca_key);
alter table alinea_cheque_devolvido add constraint pk_cad_alinea_dev primary key (alinea_cheque_devolvido_key);
alter table aliquota_icm add constraint pk_aliquota_icm primary key (valor);
alter table apuracao_competencia add constraint pk_apuracao_competencia primary key (apuracao_competencia_key);
alter table arquivo add constraint pk_arquivo primary key (arquivo_key);
alter table arquivo_edi add constraint pk_arquivo_edi primary key (arquivo_edi_key);
alter table arquivo_edi_linha add constraint pk_arquivo_edi_linha primary key (arquivo_edi_linha_key);
alter table arquivo_escrita_fiscal add constraint pk_arquivo_escrita_fiscal primary key (arquivo_key,escrita_fiscal_key);
alter table arquivo_nfe add constraint pk_arquivo_nfe primary key (arquivo_nfe_key);
alter table arquivo_nfe_recebido add constraint pk_arquivo_nfe_recebido primary key (arquivo_nfe_recebido_key);
alter table autorizacao_pagamento add constraint pk_autorizacao_pagamento primary key (ap_key);
alter table baixa_cartao add constraint pk_baixa_cartao primary key (baixa_cartao_key);
alter table baixa_venda add constraint pk_baixa_venda_key primary key (baixa_venda_key);
alter table balanca add constraint pk_balanca primary key (balanca_key);
alter table balanco_mensal add constraint pk_balanco_mensal primary key (produto_key,loja_key,ano,mes);
alter table banco add constraint pk_banco primary key (banco_key);
alter table banco_agendamento add constraint pk_banco_agendamento primary key (banco_key,tipo_agendamento_key);
alter table banco_bloqueto add constraint pk_banco_bloqueto primary key (banco_bloqueto_key);
alter table banco_cobranca add constraint pk_banco_cobranca primary key (banco_cobranca_key);
alter table banco_cobranca_ocorrencia_tipo add constraint pk_banco_cobranca_ocor_tipo primary key (banco_cobranca_key,tipo_ocorrencia_banco_cob_key);
alter table banco_custodia add constraint pk_banco_custodia primary key (banco_custodia_key);
alter table banco_ext_hist_tip_cx add constraint pk_banco_ext_hist_tip_cx primary key (banco_extrato_historico_key,tipo_caixa_key);
alter table banco_extrato add constraint pk_banco_extrato primary key (banco_extrato_key);
alter table banco_extrato_historico add constraint pk_banco_extrato_historico primary key (banco_extrato_historico_key);
alter table banco_extrato_saldo add constraint pk_banco_extrato_saldo primary key (banco_extrato_saldo_key);
alter table banco_ocorrencia add constraint pk_banco_ocorrencia primary key (banco_ocorrencia_key);
alter table banco_pagamento add constraint pk_banco_pagamento primary key (banco_pagamento_key);
alter table banco_pagamento_titulos add constraint pk_banco_pgto_titulos primary key (banco_pagamento_titulos_key);
alter table bandeira add constraint pk_bandeira primary key (bandeira_key);
alter table bandeira_desconhecida add constraint pk_bandeira_desconhecida primary key (bandeira_desconhecida_key);
alter table bin_cartao add constraint pk_bin_cartao primary key (bin_cartao_key);
alter table bin_cartao_sub_finalizadora add constraint pk_bin_cartao_sub_final primary key (bin_cartao_sub_finali_key);
alter table bloqueio_credito add constraint pk_bloqueio_credito primary key (bloqueio_credito_key);
alter table boleto_bancario add constraint pk_boleto_bancario primary key (boleto_key);
alter table bordero add constraint pk_bordero primary key (bordero_key);
alter table bordero_caixa add constraint pk_bordero_caixa primary key (bordero_caixa_key);
alter table bordero_caixa_item add constraint pk_bordero_caixa_item primary key (bordero_caixa_item_key);
alter table cadastro_caixa add constraint pk_cadastro_caixa primary key (cadastro_caixa_key);
alter table cadastro_caixa_ocorrencia add constraint pk_cadcx_ocorrencia primary key (cadastro_caixa_ocorrencia_key);
alter table caixa_troca add constraint pk_caixa_troca primary key (fornecedor_key,divisao_key);
alter table calendario add constraint pk_calendario primary key (calendario_key);
alter table calendario_compras add constraint pk_calendario_compras primary key (comprador_key,data_atendimento,horario);
alter table calendario_pesquisa add constraint pk_calendario_pesquisa primary key (calendario_key);
alter table calendario_visita add constraint pk_calendario_visita primary key (calendario_key,concorrente_key,ordem_visita);
alter table card_ajuste_rv add constraint pk_card_ajuste_rv primary key (card_ajuste_rv_key);
alter table card_comprovante_venda add constraint pk_card_comprovante_venda primary key (card_comprovante_venda_key);
alter table card_cv_parcela add constraint pk_card_cv_parcela primary key (card_cv_parcela_key);
alter table card_cv_request add constraint pk_card_cv_request primary key (card_cv_request_key);
alter table card_ordem_credito add constraint pk_card_ordem_credito primary key (card_ordem_credito_key);
alter table card_ordem_credito_rv add constraint pk_ordem_credito_rv primary key (card_ordem_credito_key,card_resumo_venda_key);
alter table card_resumo_venda add constraint pk_card_resumo_venda primary key (card_resumo_venda_key);
alter table carta_correcao add constraint pk_carta_correcao primary key (carta_correcao_key);
alter table carta_correcao_motivo add constraint pk_carta_correcao_motivo primary key (carta_correcao_motivo_key);
alter table carteira_cobranca add constraint pk_carteira_cobranca primary key (carteira_cobranca_key);
alter table cartorio add constraint pk_cartorio primary key (pessoa_key);
alter table cartorio_detalhe add constraint pk_cartorio_detalhe primary key (cartorio_detalhe_key);
alter table categoria_lancamento add constraint pk_categoria_lancamento primary key (codigo_febraban);
alter table centro_custo add constraint pk_centro_custo primary key (centro_custo_key);
alter table cheque_cliente add constraint pk_cheque_cliente primary key (cheque_key);
alter table cheque_emitido add constraint pk_cheque_emitido primary key (cheque_emitido_key);
alter table cheque_resolucao add constraint pk_cheque_resolucao primary key (resolucao_key);
alter table cheque_situacao add constraint pk_cheque_situacao primary key (situacao_key);
alter table classificacao_fiscal add constraint pk_classificacao_fiscal primary key (classificacao_fiscal_key);
alter table classificacao_fiscal_uf add constraint pk_classificacao_fiscal_uf primary key (classificacao_fiscal_uf_key);
alter table clau_acordo_prom add constraint pk_clau_acordo_prom primary key (clau_acordo_prom_key);
alter table clausula_contrato add constraint pk_clausula_contrato primary key (clausula_contrato_key);
alter table cld_tributos add constraint pk_cld_tributos primary key (cld_tributos_key);
alter table cliente add constraint pk_cliente primary key (pessoa_key);
alter table cnae add constraint pk_cnae primary key (cnae_key);
alter table cobranca add constraint pk_cobranca primary key (cobranca_key);
alter table cof add constraint pk_cof primary key (codigo_operacao_fiscal);
alter table cof_tipo_pedido add constraint pk_cof_tp primary key (cof,tipo_pedido_key);
alter table cofins add constraint pk_cofins primary key (cofins_key);
alter table competencia add constraint pk_competencia primary key (competencia_key);
alter table competencia_contabil add constraint pk_competencia_contabil primary key (competencia_contabil_key);
alter table competencia_contabil_loja add constraint pk_competencia_contabil_loja primary key (competencia_contabil_loja_key);
alter table composicao add constraint pk_composicao primary key (composicao_key);
alter table comprador add constraint pk_comprador primary key (pessoa_key);
alter table conciliacao_extrato add constraint pk_conciliacao_extrato primary key (movimento_bancario_key,banco_extrato_key);
alter table conciliacao_fininvest add constraint pk_conciliacao_fininvest primary key (conciliacao_fininvest_key);
alter table concorrente add constraint pk_concorrente primary key (pessoa_key);
alter table condicao_pagamento add constraint pk_condicao_pagamento primary key (condicao_pagamento_key);
alter table condicao_recebimento add constraint pk_condicao_recebimento primary key (condicao_recebimento_key);
alter table consulta_credito_diaria add constraint pk_consulta_credito_diaria primary key (consulta_credito_diaria_key);
alter table consulta_credito_periodo add constraint pk_consulta_credito_periodo primary key (consulta_credito_periodo_key);
alter table consulta_nfe add constraint pk_consulta_nfe primary key (consulta_nfe_key);
alter table consulta_status_servico_nfe add constraint pk_consulta_st_servico_nfe_key primary key (consulta_st_servico_nfe_key);
alter table conta_bancaria add constraint pk_conta_bancaria primary key (conta_bancaria_key);
alter table conta_bancaria_cad_parms add constraint pk_conta_bancaria_cad_parms primary key (banco_key,nome);
alter table conta_bancaria_dependente add constraint pk_conta_bancaria_dependente primary key (conta_bancaria_dependente_key);
alter table conta_bancaria_parms add constraint pk_conta_bancaria_parms primary key (conta_bancaria_key,nome);
alter table conta_cobranca add constraint pk_conta_cobranca primary key (conta_cobranca_key);
alter table conta_contabil add constraint pk_conta_contabil primary key (conta_contabil_key);
alter table conta_fornecedor add constraint pk_conta_fornecedor primary key (lancamento_key);
alter table conta_fornecedor_mov_estoque add constraint pk_conta_forn_mov_est primary key (movimento_conta_fornecedor_key,movimento_estoque_key);
alter table conta_sintetica add constraint pk_conta_sintetica primary key (conta_sintetica_key);
alter table conta_tipo_produto_bancario add constraint pk_ctpb primary key (conta_bancaria_key,tipo_produto_bancario_key);
alter table contador add constraint pk_contador primary key (pessoa_key);
alter table contador_generico add constraint pk_contador_generico primary key (nome);
alter table contador_lote_nfe add constraint pk_contador_lote_nfe primary key (loja_key);
alter table contador_nota add constraint pk_contador_nota primary key (contador_nota_key);
alter table contato add constraint pk_contato primary key (contato_key);
alter table contrato_carro_forte add constraint pk_contrato_carro_forte_key primary key (contrato_carro_forte_key);
alter table contrato_fornecimento add constraint pk_contrato_fornecimento primary key (contrato_fornecimento_key);
alter table contrato_servico add constraint pk_contrato_servico primary key (contrato_servico_key);
alter table conveniado add constraint pk_conveniado primary key (conveniado_key);
alter table convenio add constraint pk_convenio primary key (pessoa_key);
alter table convenio_bancario add constraint pk_convenio_bancario primary key (convenio_bancario_key);
alter table convenio_bancario_loja add constraint pk_convenio_bancario_loja primary key (convenio_bancario_loja_key);
alter table convenio_conta_bancaria add constraint pk_convenio_conta_bancaria primary key (convenio_bancario_key,conta_bancaria_key);
alter table cron_data add constraint pk_cron_data primary key (job_name);
alter table csosn add constraint pk_csosn primary key (csosn_key);
alter table cst_ipi add constraint pk_cst_ipi_key primary key (cst_ipi_key);
alter table cst_iss add constraint pk_cst_iss_key primary key (cst_iss_key);
alter table cst_origem add constraint pk_cst_origem primary key (codigo);
alter table cst_pis_cofins add constraint pk_cst_pis_cofins primary key (cst_pis_cofins_key);
alter table cst_tributacao add constraint pk_cst_tributacao primary key (codigo);
alter table cupom_devolvido add constraint pk_cupom_devolvido primary key (cupom_devolvido_key);
alter table cupom_fiscal add constraint pk_cupom_fiscal primary key (cupom_fiscal_key);
alter table cupom_item add constraint pk_cupom_item primary key (cupom_item_key);
alter table cupom_item_nota_fiscal_item add constraint pk_cupom_item_nota_fiscal_item primary key (cupom_item_key,nota_fiscal_item_key);
alter table cupom_leitura add constraint pk_cupom_leitura primary key (cupom_leitura_key);
alter table cupom_recebimento add constraint pk_cupom_recebimento primary key (cupom_recebimento_key);
alter table cupom_total_pis_cofins add constraint pk_cupom_total_pis_cofins primary key (cupom_total_pis_cofins_key);
alter table curva_abc add constraint pk_curva_abc primary key (curva);
alter table custo_falta add constraint pk_custo_falta primary key (custo_falta_key);
alter table custo_teorico add constraint pk_custo_teorico primary key (produto_key);
alter table dados_contas_receber add constraint pk_dados_contas_receber primary key (dados_contas_receber_key);
alter table dbchanges add constraint pk_dbchanges primary key (arquivo_timestamp);
alter table declaracao_importacao add constraint pk_declaracao_importacao primary key (declaracao_importacao_key);
alter table declaracao_importacao_item add constraint pk_decl_import_item_key primary key (declaracao_importacao_item_key);
alter table departamento add constraint pk_departamento primary key (departamento_key);
alter table depreciacao add constraint pk_depreciacao primary key (depreciacao_key);
alter table desconto add constraint pk_desconto primary key (desconto_key);
alter table desconto_ap add constraint pk_desconto_ap primary key (desconto_key,ap_key);
alter table desconto_cobranca add constraint pk_desconto_cobranca primary key (cobranca_key,desconto_key);
alter table destinacao_produto add constraint pk_destinacao_produto primary key (destinacao_produto_key);
alter table dia_semana add constraint pk_dia_semana primary key (numero);
alter table dias_pagamento add constraint pk_dias_pagamento primary key (dias_pagamento_key);
alter table dias_recebimento add constraint pk_dias_recebimento primary key (dias_recebimento_key);
alter table distribuicao_demanda add constraint pk_distribuicao_demanda primary key (distribuicao_demanda_key);
alter table distribuicao_logistica add constraint pk_distribuicao_logistica primary key (distribuicao_logistica_key);
alter table distribuicao_logistica_item add constraint pk_distribuicao_logistica_item primary key (distribuicao_logist_item_key);
alter table divergencia_impor_log_item add constraint pk_divergencia_impor_log_item primary key (divergencia_impor_log_item_key);
alter table divergencia_importacao_log add constraint pk_divergencia_importacao_log primary key (divergencia_importacao_log_key);
alter table divisao_representante add constraint pk_div_rep primary key (fornecedor_key,divisao_key,representante_key);
alter table edi_cartao_item add constraint pk_edi_cartao_item primary key (edi_cartao_item_key);
alter table edi_cartao_linha add constraint pk_edi_cartao_linha primary key (edi_cartao_linha_key);
alter table edi_cartao_lote add constraint pk_edi_cartao_lote primary key (edi_cartao_lote_key);
alter table embalagem add constraint pk_embalagem primary key (embalagem_key);
alter table empresa add constraint pk_empresa primary key (pessoa_key);
alter table endereco add constraint pk_endereco primary key (endereco_key);
alter table endereco_logistico add constraint pk_endereco_logistico primary key (endereco_logistico_key);
alter table endereco_logistico_area add constraint pk_endereco_logistico_area primary key (endereco_logistico_area_key);
alter table escrita_apuracao add constraint pk_escrita_apuracao primary key (escrita_apuracao_key);
alter table escrita_apuracao_advertencia add constraint pk_escrita_apuracao_advert primary key (escrita_apuracao_advert_key);
alter table escrita_apuracao_fed_cred add constraint pk_escrita_apuracao_fed_cred primary key (escrita_apuracao_fed_cred_key);
alter table escrita_apuracao_fed_cred_det add constraint pk_escrita_ap_fed_cred_det primary key (escrita_ap_fed_cred_det_key);
alter table escrita_apuracao_fed_deb add constraint pk_escrita_apuracao_fed_deb primary key (escrita_apuracao_fed_deb_key);
alter table escrita_apuracao_fed_deb_det add constraint pk_escrita_apura_fed_deb_det primary key (escrita_apura_fed_deb_det_key);
alter table escrita_apuracao_fed_rc_nt add constraint pk_escrita_apuracao_fed_rc_nt primary key (escrita_apuracao_fed_rc_nt_key);
alter table escrita_apuracao_federal add constraint pk_escrita_apuracao_federal primary key (escrita_apuracao_federal_key);
alter table escrita_apuracao_icms add constraint pk_escrita_apuracao_icms primary key (escrita_apuracao_icms_key);
alter table escrita_apuracao_icms_item add constraint pk_escrita_apuracao_item primary key (escrita_apuracao_icms_item_key);
alter table escrita_apuracao_uf add constraint pk_escrita_apuracao_uf primary key (escrita_apuracao_uf_key);
alter table escrita_documento add constraint pk_escrita_documento primary key (escrita_documento_key);
alter table escrita_fiscal add constraint pk_escrita_fiscal primary key (escrita_fiscal_key);
alter table escrita_fiscal_ajuste add constraint pk_escrita_fiscal_ajuste primary key (escrita_fiscal_ajuste_key);
alter table escrita_fiscal_detalhe add constraint pk_escrita_fiscal_detalhe primary key (escrita_fiscal_key);
alter table escrita_fiscal_item add constraint pk_escrita_fiscal_item primary key (escrita_fiscal_item_key);
alter table escrita_fiscal_observacao add constraint pk_escrita_fiscal_observacao primary key (escrita_fiscal_observacao_key);
alter table escrita_fiscal_ocorrencia add constraint pk_esc_fiscal_oco primary key (escrita_fiscal_ocorrencia_key);
alter table esquema_contabil add constraint pk_esquema_contabil primary key (esquema_contabil_key);
alter table estabelecimento_filial add constraint pk_estabelecimento_filial primary key (estabelecimento_filial_key);
alter table estabelecimento_matriz add constraint pk_estabelecimento_matriz primary key (estabelecimento_matriz_key);
alter table estado add constraint pk_estado primary key (estado_sigla);
alter table estado_civil add constraint pk_estado_civil primary key (estado_civil_key);
alter table estado_patrimonio_item add constraint pk_estado_patrimonio_item primary key (estado_patrimonio_item_key);
alter table exercicio_contabil add constraint pk_exercicio_contabil primary key (exercicio_contabil_key);
alter table exportacao_redf add constraint pk_exportacao_redf primary key (exportacao_redf_key);
alter table factoring add constraint pk_factoring primary key (pessoa_key);
alter table fatura add constraint pk_fatura primary key (fatura_key);
alter table fechamento_caixa_operador add constraint pk_fecha_caixa_operador_01 primary key (fechamento_caixa_operador_key);
alter table ficha_estoque_terceiros add constraint pk_ficha_estoque_terceiros primary key (loja_key,indicador_de_propriedade_key,terceiro_key,produto_key);
alter table finalizadora add constraint pk_finalizadora primary key (finalizadora_key);
alter table folha_pagamento add constraint pk_folha_pagamento primary key (folha_pagamento_key);
alter table folha_pagamento_detalhe add constraint pk_folha_pagamento_detalhe primary key (folha_pagamento_detalhe_key);
alter table folha_pagamento_formato add constraint pk_folha_pagamento_formato primary key (folha_pagamento_formato_key);
alter table folha_pagamento_funcionario add constraint pk_folha_pagamento_funcionario primary key (folha_pgto_funcionario_key);
alter table forma_pagamento add constraint pk_forma_pagamento primary key (forma_pagamento_key);
alter table formato_nota_fiscal add constraint pk_formato_nota_fiscal primary key (formato_key);
alter table fornecedor add constraint pk_fornecedor primary key (pessoa_key);
alter table fornecedor_divisao add constraint pk_fornecedor_divisao primary key (fornecedor_key,divisao_key);
alter table fornecedor_produto add constraint pk_fornecedor_produto primary key (fornecedor_produto_key);
alter table func_afastamento add constraint pk_func_afastamento primary key (func_afastamento_key);
alter table func_dependente add constraint pk_func_dependente primary key (func_dependente_key);
alter table func_ferias add constraint pk_func_ferias primary key (func_ferias_key);
alter table func_funcao add constraint pk_func_funcao primary key (func_funcao_key);
alter table func_grau_parentesco add constraint pk_func_grau_parentesco primary key (func_grau_parentesco_key);
alter table func_historico add constraint pk_func_historico primary key (func_historico_key);
alter table func_horario_trabalho add constraint pk_func_horario_trabalho primary key (func_horario_trabalho_key);
alter table func_motivo_afastamento add constraint pk_func_motivo_afastamento primary key (func_motivo_afastamento_key);
alter table func_motivo_ajuste_salario add constraint pk_func_motivo_ajuste_salario primary key (func_motivo_ajuste_salario_key);
alter table func_salario add constraint pk_func_salario primary key (func_salario_key);
alter table funcao add constraint pk_funcao primary key (funcao_key);
alter table funcionario add constraint pk_funcionario primary key (pessoa_key);
alter table funcionario_pensionista add constraint pk_funcionario_pensionista primary key (funcionario_pensionista_key);
alter table funcionario_vale_compra add constraint pk_funcionario_vale_compra primary key (pessoa_key);
alter table governo_estadual add constraint pk_governo_estadual primary key (pessoa_key);
alter table grade_produto add constraint pk_grade_produto primary key (grade_produto_key);
alter table grupo add constraint pk_grupo primary key (grupo_key);
alter table grupo_acesso_conta_contabil add constraint pk_grupo_acesso_conta_contabil primary key (grupo_acesso_key,conta_contabil_key);
alter table grupo_acesso_regiao_preco add constraint pk_grupo_acesso_regiao_preco primary key (grupo_acesso_key,regiao_preco_key);
alter table grupo_acesso_secao_preco add constraint pk_grupo_acesso_secao_preco primary key (grupo_acesso_key,secao_key);
alter table grupo_caixa add constraint pk_grupo_caixa primary key (grupo_caixa_key);
alter table grupo_financeiro add constraint pk_grupo_financeiro_key primary key (grupo_financeiro_key);
alter table grupo_patrimonio add constraint pk_grupo_patrimonio primary key (grupo_patrimonio_key);
alter table grupo_produto add constraint pk_grupo_produto primary key (grupo_produto_key);
alter table grupo_usuario add constraint pk_grupo_usuario primary key (usuario_key,grupo_key);
alter table guia_carro_forte add constraint pk_guia_carro_forte_key primary key (guia_carro_forte_key);
alter table guia_carro_forte_mov_caixa add constraint pk_guia_carro_forte_mc primary key (mov_caixa_key,guia_carro_forte_key);
alter table guia_diferenca add constraint pk_guia_diferenca primary key (guia_diferenca_key);
alter table guia_motivo_diferenca add constraint pk_guia_motivo_diferenca primary key (guia_motivo_diferenca_key);
alter table guia_recolhimento add constraint pk_guia_recolhimento primary key (guia_recolhimento_key);
alter table historico_pdv add constraint pk_historico_pdv primary key (historico_key);
alter table icm add constraint pk_icm primary key (icm_key);
alter table icm_sub_grupo add constraint pk_icm_sub_grupo primary key (icm_key,subgrupo_produto_key);
alter table icm_venda add constraint pk_icm_venda primary key (icm_venda_key);
alter table imovel_despesa add constraint pk_imovel_despesa primary key (imovel_despesa_key);
alter table importacao_conta_bancaria add constraint pk_importacao_conta_bancaria primary key (importacao_conta_bancaria_key);
alter table importacao_estabelecimento add constraint pk_importacao_estabelecimento primary key (importacao_estabelecimento_key);
alter table importacao_pessoa add constraint pk_importacao_pessoa primary key (importacao_pessoa_key);
alter table indicador_de_propriedade add constraint pk_indicador_de_propriedade primary key (indicador_de_propriedade_key);
alter table indicador_do_uso_do_ativo add constraint pk_indicador_uso_ativo primary key (indicador_uso_ativo_key);
alter table indicador_pagamento add constraint pk_indicador_pagamento primary key (indicador_pagamento_key);
alter table informacao_nutricional add constraint pk_informacao_nutricional primary key (produto_key);
alter table inventario add constraint pk_inventario primary key (inventario_key);
alter table inventario_area add constraint pk_inventario_area primary key (inventario_area_key);
alter table inventario_geral add constraint pk_inventario_geral primary key (inventario_geral);
alter table inventario_geral_item add constraint pk_inventario_geral_item primary key (inventario_geral,produto_key);
alter table inventario_item add constraint pk_inventario_item primary key (inventario_key,lote,sequencia);
alter table inventario_lote add constraint pk_inventario_lote primary key (inventario_key,lote);
alter table inventario_movimento add constraint pk_inventario_movimento primary key (inventario_key,produto_key);
alter table inventario_movimento_detalhe add constraint pk_inventario_mov_det_key primary key (inventario_movimento_det_key);
alter table inventario_saldo add constraint pk_inventario_saldo primary key (inventario_key,produto_key);
alter table inventario_troca add constraint pk_inventario_troca primary key (inventario_troca_key);
alter table inventario_troca_item add constraint pk_inventario_troca_item primary key (inventario_troca_item_key);
alter table ipi add constraint pk_ipi_key primary key (ipi_key);
alter table item add constraint pk_item primary key (item_key);
alter table item_cupom_devolvido add constraint pk_item_cupom_devolvido primary key (item_cupom_devolvido_key);
alter table item_falta add constraint pk_item_falta primary key (item_falta_key);
alter table item_pedido add constraint pk_item_pedido primary key (item_pedido_key);
alter table item_pedido_falta add constraint pk_item_pedido_falta primary key (item_pedido_falta_key);
alter table junta_comercial add constraint pk_junta_comercial primary key (junta_comercial_key);
alter table lancamento_loja add constraint pk_lancamento_loja primary key (lancamento_loja_key);
alter table lancamento_loja_saldo add constraint pk_lancamento_loja_saldo primary key (lancamento_loja_saldo_key);
alter table leitura_z add constraint pk_leitura_z primary key (leitura_z_key);
alter table linha_cd add constraint pk_linha_cd primary key (linha_cd_key);
alter table linha_compra add constraint pk_linha_compra primary key (comprador_key,fornecedor_key,divisao_key,loja_key,produto_key);
alter table linha_loja add constraint pk_linha_loja primary key (loja_key,produto_key);
alter table lista_falta add constraint pk_lista_falta primary key (lista_falta_key);
alter table lista_falta_geral add constraint pk_lista_falta_geral primary key (id);
alter table lista_falta_pedido_master add constraint pk_lista_falta_pedido_master primary key (lista_falta_geral_key,pedido_key);
alter table lista_produto add constraint pk_lista_produto primary key (lista_produto_key);
alter table lista_produto_fornecedor add constraint pk_lista_produto_fornecedor primary key (lista_produto_fornecedor_key);
alter table lista_produto_item add constraint pk_lista_produto_item primary key (produto_key,lista_produto_key);
alter table livro_fiscal_inventario add constraint pk_livro_fiscal_inventario primary key (livro_fiscal_inventario_key);
alter table log_arquivo add constraint pk_log_arquivo primary key (log_arquivo_key);
alter table log_arquivo_nfe_recebido add constraint pk_log_arquivo_nfe_recebido primary key (log_arquivo_nfe_recebido_key);
alter table log_baixa_venda add constraint pk_log_baixa_venda primary key (log_baixa_venda_key);
alter table log_grupo add constraint pk_log_grupo primary key (log_grupo_key);
alter table log_parametro add constraint pk_log_parametro primary key (log_parametro_key);
alter table log_permissao add constraint pk_log_permissao primary key (log_permissao_key);
alter table log_processado add constraint pk_log_processado primary key (log_processado_key);
alter table log_prorrogacao_ofertas add constraint pk_log_prorrogacao_ofertas primary key (log_key);
alter table log_sessao add constraint pk_log_sessao primary key (log_sessao_key);
alter table log_sistema add constraint pk_log_sistema primary key (log_sistema_key);
alter table logistica_carga add constraint pk_logistica_carga primary key (logistica_carga_key);
alter table logistica_lote add constraint pk_logistica_lote primary key (logistica_lote_key);
alter table logistica_lote_item add constraint pk_logistica_lote_item primary key (logistica_lote_item_key);
alter table loja add constraint pk_loja primary key (pessoa_key);
alter table loja_balanca add constraint pk_loja_balanca primary key (loja_key,balanca_key);
alter table loja_cartao_baixa add constraint pk_loja_cartao_baixa primary key (loja_cartao_baixa_key);
alter table loja_pdv add constraint pk_loja_pdv primary key (loja_pdv_key);
alter table loja_ramo_atividade add constraint pk_loja_ramo_atividade primary key (loja_ramo_atividade_key);
alter table loja_tipo_balanca add constraint pk_loja_tipo_balanca primary key (loja_key,tipo_balanca_key);
alter table loja_tipo_etiqueta add constraint pk_loja_tipo_etiqueta primary key (loja_key,tipo_etiqueta_key);
alter table loja_tipo_pdv add constraint pk_loja_tipo_pdv primary key (loja_key,tipo_pdv_key);
alter table loja_tipo_terminal_consulta add constraint pk_loja_tipo_terminal_consulta primary key (loja_key,tipo_terminal_consulta_key);
alter table lote_troca add constraint pk_lote_troca primary key (lote_troca_key);
alter table lote_troca_item add constraint pk_lote_troca_item primary key (lote_troca_item_key);
alter table mapa_contabil add constraint pk_mapa_contabil_key primary key (mapa_contabil_key);
alter table mapa_pdv_icms add constraint pk_mapa_pdv_icms primary key (mapa_pdv_icms_key);
alter table mapa_recebimento_loja add constraint pk_mapa_recebimento_loja primary key (mapa_recebimento_loja_key);
alter table mapa_resumo add constraint pk_mapa_resumo primary key (mapa_resumo_key);
alter table mapa_resumo_item add constraint pk_mapa_resumo_item primary key (mapa_resumo_item_key);
alter table mapa_subfinalizadora_tef add constraint pk_mapa_subfinalizadora_tef primary key (mapa_subfinalizadora_tef_key);
alter table mapa_tipo_lancamento_tipo_mov add constraint pk_mapa_tltm primary key (tipo_lancamento_key,tipo_movimento_key);
alter table margem add constraint pk_margem primary key (margem_key);
alter table margem_loja add constraint pk_margem_loja primary key (margem_loja_key);
alter table medida_caseira_decimal add constraint pk_medida_caseira_decimal primary key (medida_caseira_decimal_key);
alter table medida_caseira_descricao add constraint pk_medida_caseira_descricao primary key (medida_caseira_descricao_key);
alter table mensagem_popup add constraint pk_mensagem_popup primary key (mensagem_popup_key);
alter table mensagem_usuario add constraint pk_mensagem_usuario primary key (mensagem_popup_key,usuario_key);
alter table menu add constraint pk_menu primary key (menu_key);
alter table menu_usuario_favoritos add constraint pk_menu_usuario_favoritos primary key (menu_usuario_fav_key);
alter table modalidade_icms add constraint pk_modalidade_icms primary key (modalidade_icms_key);
alter table modalidade_icms_st add constraint pk_modalidade_icms_st primary key (modalidade_icms_st_key);
alter table modelo_acordo_prom add constraint pk_modelo_acordo_prom primary key (modelo_acordo_prom_key);
alter table modelo_clau_acordo_prom add constraint pk_mod_cl_acd_pro primary key (modelo_acordo_prom_key,clau_acordo_prom_key);
alter table modelo_contrato_fornecimento add constraint pk_modelo_contrato_forn primary key (modelo_contrato_forn_key);
alter table modelo_mensagem_fiscal add constraint pk_modelo_mensagem_fiscal primary key (modelo_mensagem_fiscal_key);
alter table modelo_observacao_fiscal add constraint pk_modelo_observacao_fiscal primary key (modelo_observacao_fiscal_key);
alter table modelo_ocorrencia_escrita add constraint pk_modelo_ocorrencia_escrita primary key (modelo_ocorrencia_escrita_key);
alter table motivo_correcao add constraint pk_motivo_correcao primary key (motivo_key);
alter table motivo_transferencia add constraint pk_motivo_transferencia primary key (motivo_transferencia_key);
alter table motivo_transferencia_valores add constraint pk_motivo_transf_valores primary key (motivo_transferencia_key);
alter table motivo_troca add constraint pk_motivo_troca primary key (motivo_troca_key);
alter table mov_caixa add constraint pk_mov_caixa primary key (mov_caixa_key);
alter table mov_cob_cheque_dev add constraint pk_mov_cob_cheque_dev primary key (mov_cob_cheque_dev_key);
alter table movimentacao_carga add constraint pk_movimentacao_carga primary key (movimentacao_carga_key);
alter table movimento_baixa_cartao add constraint pk_movimento_baixa_cartao primary key (movimento_bancario_key,cadastro_caixa_key);
alter table movimento_bancario add constraint pk_movimento_bancario primary key (movimento_bancario_key);
alter table movimento_compra add constraint pk_movimento_compra primary key (movimento_estoque_key);
alter table movimento_conta_fornecedor add constraint pk_movimento_conta_fornecedor primary key (movimento_conta_fornecedor_key);
alter table movimento_contabil add constraint pk_movimento_contabil primary key (movimento_contabil_key);
alter table movimento_estoque add constraint pk_movimento_estoque primary key (movimento_estoque_key);
alter table movimento_estoque_composicao add constraint pk_movimento_estoque_comp primary key (movimento_estoque_pai_key,movimento_estoque_filho_key);
alter table movimento_estoque_terceiro add constraint pk_movimento_estoque_terceiro primary key (movimento_estoque_terceiro_key);
alter table movimento_troca add constraint pk_movimento_troca primary key (movimento_estoque_key,motivo_troca_key);
alter table multa add constraint pk_multa primary key (multa_key);
alter table municipio add constraint pk_municipio primary key (municipio_key);
alter table negociacao add constraint pk_negociacao primary key (negociacao_key);
alter table negociacao_item add constraint pk_negociacao_item primary key (negociacao_item_key);
alter table nota_fiscal add constraint pk_nota_fiscal primary key (nf_key);
alter table nota_fiscal_email add constraint pk_nota_fiscal_email primary key (nf_key);
alter table nota_fiscal_fatura add constraint pk_nota_fiscal_fatura primary key (nf_key,fatura_key);
alter table nota_fiscal_frete add constraint pk_nf_frete primary key (nf_frete_key);
alter table nota_fiscal_item add constraint pk_nf_item primary key (nota_fiscal_item_key);
alter table nota_fiscal_item_divergencia add constraint pk_nf_item_divergencia primary key (nf_item_divergencia_key);
alter table nota_fiscal_item_patrimonio add constraint pk_nota_fiscal_item_patrimonio primary key (nf_item_patrimonio_key);
alter table nota_fiscal_item_xml add constraint pk_nf_item_xml primary key (nota_fiscal_item_xml_key);
alter table nota_fiscal_mensagem add constraint pk_nf_mensagem primary key (nf_mensagem_key);
alter table nota_fiscal_mensagem_sefaz add constraint pk_nota_fiscal_mensagem_sefaz primary key (nota_fiscal_mensagem_sefaz_key);
alter table nota_fiscal_msg_fiscal add constraint pk_nota_fiscal_msg_fiscal primary key (nota_fiscal_msg_fiscal_key);
alter table nota_fiscal_origem add constraint pk_nf_origem_nota_fiscal primary key (nf_key,origem_nf_key);
alter table nota_fiscal_pagamento add constraint pk_nf_pagamento primary key (nf_pagamento_key);
alter table nota_fiscal_pedido add constraint pk_nf_pedido primary key (nf_key,pelt_key);
alter table nota_fiscal_pedido_venda add constraint pk_nf_pedido_venda primary key (nf_key,pedido_venda_key);
alter table nota_fiscal_tipo add constraint pk_nota_fiscal_tipo primary key (nf_tipo_key);
alter table nota_fiscal_total add constraint pk_nf_total primary key (nf_total_key);
alter table observacao add constraint pk_observacao primary key (pessoa_key,data);
alter table ocorrencia add constraint pk_ocorrencia primary key (ocorrencia_key);
alter table ocorrencia_agendamento add constraint pk_ocorrencia_agendamento primary key (ocorrencia_agendamento_key);
alter table ocorrencia_bordero add constraint pk_ocorrencia_bordero primary key (ocorrencia_bordero_key);
alter table ocorrencia_cobranca add constraint pk_ocorrencia_cobranca primary key (ocorrencia_cobranca_key);
alter table ocorrencia_pagamento_direto add constraint pk_ocorrencia_pagamento_direto primary key (banco_pagamento_key,banco_ocorrencia_key);
alter table ocorrencia_pagamento_titulos add constraint pk_ocorrencia_pagamento_tit primary key (banco_pagamento_titulos_key,banco_ocorrencia_key);
alter table ocorrencia_pdv add constraint pk_ocorrencia_pdv primary key (ocorrencia_pdv_key);
alter table ocorrencia_pendencia add constraint pk_ocorrencia_pendencia primary key (ocorrencia_pendencia_key);
alter table ocorrencia_taxa add constraint pk_ocorrencia_taxa primary key (ocorrencia_taxa_key);
alter table ocorrencia_tesouraria add constraint pk_ocorrencia_tesouraria primary key (ocorrencia_tesouraria_key);
alter table ocorrencia_venda_online add constraint pk_oco_ven_onl primary key (ocorrencia_venda_online_key);
alter table ocorrencias_mb add constraint pk_ocorrencias_mb primary key (ocorrencias_mb_key);
alter table operacao add constraint pk_operacao primary key (operacao_key);
alter table operador add constraint pk_operador primary key (operador_key);
alter table operador_logistico add constraint pk_operador_logistico primary key (pessoa_key);
alter table origem_escrita_fiscal_ajuste add constraint pk_origem_esc_fiscal_ajuste primary key (origem_esc_fiscal_ajuste_key);
alter table origem_processo_fiscal add constraint pk_origem_processo_fiscal primary key (origem_processo_fiscal_key);
alter table pack_virtual add constraint pk_pack_virtual primary key (pack_virtual_key);
alter table pack_virtual_grupo add constraint pk_pack_virtual_grupo primary key (pack_virtual_grupo_key);
alter table pack_virtual_grupo_produto add constraint pk_pack_virtual_gp primary key (pack_virtual_grupo_key,produto_key);
alter table pack_virtual_loja add constraint pk_pack_virtual_loja primary key (pack_virtual_key,loja_key);
alter table pack_virtual_modelo add constraint pk_pack_virtual_modelo primary key (pack_virtual_modelo_key);
alter table pagamento_bancario add constraint pk_pagamento_consolidado primary key (movimento_bancario_key,ap_key);
alter table pagamento_caixa add constraint pk_pagamento_caixa primary key (mov_caixa_key,ap_key);
alter table pagamento_direto_bordero add constraint pk_pagamento_direto_bordero primary key (pagamento_direto_bordero_key);
alter table pais add constraint pk_pais primary key (pais_key);
alter table palete add constraint pk_palete primary key (palete_key);
alter table parametro add constraint pk_parametro primary key (parametro_key);
alter table parametros_loja add constraint pk_parametros_loja primary key (parametros_loja_key);
alter table parametros_tec add constraint pk_parametros_tec primary key (nome);
alter table partida_dobrada add constraint pk_partida_dobrada primary key (partida_dobrada_key);
alter table patrimonio_categoria add constraint pk_patrimonio_categoria primary key (patrimonio_categoria_key);
alter table patrimonio_grupo add constraint pk_patrimonio_grupo primary key (patrimonio_grupo_key);
alter table patrimonio_item add constraint pk_patrimonio_item primary key (patrimonio_item_key);
alter table patrimonio_item_baixa add constraint pk_patrimonio_item_baixa primary key (patrimonio_item_baixa_key);
alter table patrimonio_sub_grupo add constraint pk_patrimonio_sub_grupo primary key (patrimonio_sub_grupo_key);
alter table pauta_fiscal add constraint pk_pauta_fiscal primary key (pauta_fiscal_key);
alter table pauta_fiscal_estado add constraint pk_pauta_fiscal_estado primary key (pauta_fiscal_estado_key);
alter table pedido add constraint pk_pedido primary key (pelt_key);
alter table pedido_compra_bonificacao add constraint pk_ped_com_bon primary key (pedido_compra_key,pedido_bonificado_key);
alter table pedido_item_estatistica add constraint pk_ped_item_estatistica primary key (pedido_item_estatistica_key);
alter table pedido_master add constraint pk_pedido_master primary key (pedido_key);
alter table pedido_saida add constraint pk_pedido_saida primary key (pedido_saida_key);
alter table pedido_saida_item add constraint pk_pedido_saida_item primary key (pedido_saida_key,produto_key);
alter table pedido_venda add constraint pk_pedido_venda primary key (pedido_venda_key);
alter table pedido_venda_entrega add constraint pk_pedido_venda_entrega primary key (pedido_venda_entrega_key);
alter table pedido_venda_forma_pagto add constraint pk_pedido_venda_forma_pagto primary key (pedido_venda_forma_pagto_key);
alter table pedido_venda_item add constraint pk_pedido_venda_item primary key (pedido_venda_item_key);
alter table pedido_venda_status add constraint pk_pedido_venda_status primary key (pedido_venda_status_key);
alter table permissao add constraint pk_permissao primary key (permissao_key);
alter table permissao_grupo add constraint pk_permissao_grupo primary key (permissao_key,grupo_key);
alter table permissao_menu add constraint pk_permissao_menu primary key (permissao_key,menu_key);
alter table pesquisa add constraint pk_pesquisa primary key (pesquisa_key);
alter table pesquisa_itens add constraint pk_pesquisa_itens primary key (pesquisa_key,produto_key);
alter table pesquisa_jornal add constraint pk_pesquisa_jornal primary key (pesquisa_jornal_key);
alter table pesquisa_jornal_geral add constraint pk_pesquisa_jornal_geral primary key (pesquisa_jornal_geral_key);
alter table pesquisa_jornal_produto add constraint pk_pesquisa_jornal_produto primary key (pesquisa_jornal_produto_key);
alter table pessoa add constraint pk_pessoa primary key (pessoa_key);
alter table pessoa_recebimento add constraint pk_pessoa_recebimento primary key (pessoa_key);
alter table pis add constraint pk_pis primary key (pis_key);
alter table plano_conta add constraint pk_plano_conta primary key (plano_conta_key);
alter table prazo_recebimento add constraint pk_prazo_recebimento primary key (prazo_recebimento_key);
alter table precatorio add constraint pk_precatorio primary key (precatorio_key);
alter table preco_atual add constraint pk_preco_atual primary key (preco_atual_key);
alter table preco_concorrente add constraint pk_preco_concorrente primary key (preco_concorrente_key);
alter table preco_transferencia add constraint pk_preco_transferencia primary key (preco_transferencia_key);
alter table preco_transferencia_log add constraint pk_preco_transferencia_hist primary key (preco_transferencia_log_key);
alter table preco_venda add constraint pk_preco_venda primary key (preco_venda_key);
alter table preco_venda_caixa add constraint pk_preco_venda_caixa primary key (preco_venda_caixa_key);
alter table preco_venda_oferta add constraint pk_preco_venda_oferta primary key (preco_venda_oferta_key);
alter table preco_venda_tmp add constraint pk_preco_venda_tmp primary key (produto_key);
alter table prestador_servico add constraint pk_prestador_servico primary key (pessoa_key);
alter table previa_transferencia add constraint pk_previa_transferencia primary key (previa_transferencia_key);
alter table previa_transferencia_item add constraint pk_previa_transferencia_item primary key (previa_transferencia_item_key);
alter table previa_transferencia_pedido add constraint pk_previa_transferencia_pedido primary key (previa_transf_pedido_key);
alter table previsao_loja add constraint pk_previsao_loja primary key (previsao_loja_key);
alter table previsao_rede add constraint pk_previsao_rede primary key (previsao_rede_key);
alter table previsao_setor add constraint pk_previsao_setor primary key (previsao_setor_key);
alter table processo_contabil add constraint pk_processo_contabil primary key (processo_contabil_key);
alter table processo_financeiro add constraint pk_processo_financeiro primary key (processo_financeiro_key);
alter table processo_fiscal add constraint pk_processo_fiscal primary key (processo_fiscal_key);
alter table produto add constraint pk_produto primary key (produto_key);
alter table produto_balanca add constraint pk_produto_balanca primary key (setor_balanca_key,loja_key,produto_key,balanca_key);
alter table produto_balanca_detalhe add constraint pk_produto_balanca_detalhe primary key (id);
alter table produto_concorrente add constraint pk_produto_concorrente primary key (produto_concorrente_key);
alter table produto_pesquisado add constraint pk_produto_pesquisado primary key (calendario_key,concorrente_key,ordem_visita,produto_key);
alter table produto_validade add constraint pk_produto_validade primary key (produto_validade_key);
alter table promocao add constraint pk_promocao primary key (promocao_key);
alter table promocao_loja add constraint pk_promocao_loja primary key (loja_key,promocao_key);
alter table quebra_tesouraria add constraint pk_quebra_tesouraria primary key (quebra_tesouraria_key);
alter table ramo_atividade add constraint pk_ramo_atividade primary key (ramo_atividade_key);
alter table ranking_ano add constraint pk_ranking_ano primary key (produto_key);
alter table recebimento add constraint pk_recebimento primary key (recebimento_key);
alter table recebimento_palete_item add constraint pk_recebimento_palete_item primary key (recebimento_palete_item_key);
alter table rede add constraint pk_rede primary key (rede_key);
alter table rede_loja add constraint pk_rede_loja primary key (rede_key,loja_key);
alter table referencia_prazo add constraint pk_referencia_prazo primary key (referencia_prazo_key);
alter table regiao_entrega add constraint pk_regiao_entrega primary key (regiao_entrega_key);
alter table regiao_preco add constraint pk_regiao_preco primary key (regiao_preco_key);
alter table registro_fiscal add constraint pk_registro_fiscal primary key (registro_fiscal_key);
alter table registro_fiscal_numeracao add constraint pk_registro_fiscal_numeracao primary key (registro_fiscal_numeracao_key);
alter table relatorio_movimento add constraint pk_relatorio_movimento primary key (tipo_relatorio_key,tipo_movimento_key);
alter table relatorio_operador add constraint pk_relatorio_operador primary key (relatorio_operador_key);
alter table representante add constraint pk_representante primary key (pessoa_key);
alter table requisicao_suporte add constraint pk_requisicao_suporte primary key (requisicao_suporte_key);
alter table reserva_estoque add constraint pk_reserva_estoque primary key (reserva_estoque_key);
alter table reserva_estoque_item add constraint pk_reserva_estoque_item primary key (reserva_estoque_item_key);
alter table resolucao_troca add constraint pk_resolucao_troca primary key (resolucao_troca_key);
alter table resumo_apuracao_impostos add constraint pk_resumo_apuracao_impostos primary key (resumo_apuracao_impostos_key);
alter table resumo_cupom_fiscal add constraint pk_resumo_cupom_fiscal primary key (resumo_cupom_fiscal_key);
alter table resumo_venda_categoria add constraint pk_res_venda_cat primary key (periodo,loja_key,departamento_key,secao_key,grupo_produto_key,sub_grupo_produto_key);
alter table romaneio add constraint pk_romaneio primary key (romaneio_key);
alter table romaneio_item add constraint pk_romaneio_item primary key (romaneio_item_key);
alter table roteiro add constraint pk_roteiro primary key (roteiro_key);
alter table roteiro_item add constraint pk_roteiro_item primary key (roteiro_key,concorrente_key,pesquisa_key);
alter table saldo_contabil_atual add constraint pk_saldo_contabil_atual primary key (loja_key,conta_contabil_key);
alter table saldo_contabil_inicial add constraint pk_saldo_contabil_inicial primary key (saldo_contabil_inicial_key);
alter table saldo_contabil_por_competencia add constraint pk_saldo_contabil_competencia primary key (conta_contabil_key,competencia_contabil_key,loja_key);
alter table sangria_lancamento_tipo add constraint pk_sangria_lancamento_tipo primary key (sangria_lancamento_tipo_key);
alter table secao add constraint pk_secao primary key (secao_key);
alter table separacao add constraint pk_separacao primary key (separacao_key);
alter table separacao_item add constraint pk_separacao_item primary key (separacao_key,produto_key);
alter table separacao_lote add constraint pk_separacao_lote primary key (separacao_key,numero,sequencia);
alter table separacao_mercadoria add constraint pk_separacao_mercadoria primary key (separacao_key,produto_pai,produto_key);
alter table setor_balanca add constraint pk_setor_balanca primary key (setor_balanca_key,loja_key,balanca_key);
alter table setor_balanca_padrao add constraint pk_setor_balanca_padrao primary key (setor_balanca_key);
alter table setor_compra add constraint pk_setor_compra primary key (setor_compra_key);
alter table sindicato add constraint pk_sindicato primary key (pessoa_key);
alter table sistema add constraint pk_sistema primary key (sistema_key);
alter table situacao_conta add constraint pk_situacao_conta primary key (situacao_conta_key);
alter table solicitacao_compra add constraint pk_solicitacao_compra primary key (solicitacao_compra_key);
alter table solicitacao_compra_produto add constraint pk_solicitacao_compra_produto primary key (solicitacao_compra_produto_key);
alter table solicitacao_compra_produto_lj add constraint pk_solicitacao_compra_prod_lj primary key (solicitacao_compra_prod_lj_key);
alter table status_bordero add constraint pk_status_bordero primary key (status_bordero_key);
alter table status_competencia add constraint pk_status_competencia primary key (status_competencia_key);
alter table status_conciliacao add constraint pk_status_conciliacao primary key (status_conciliacao_key);
alter table status_credito add constraint pk_status_credito primary key (status_credito_key);
alter table status_divergencia_nota_fiscal add constraint pk_status_divergencia_nf primary key (status_divergencia_nf_key);
alter table status_duplicata add constraint pk_status_duplicata primary key (status_duplicata_key);
alter table status_escrita_fiscal add constraint pk_status_escrita_fiscal primary key (status_escrita_fiscal_key);
alter table status_funcionario add constraint pk_status_funcionario primary key (status_funcionario_key);
alter table status_guia_recolhimento add constraint pk_status_guia_recolhimento primary key (status_guia_recolhimento_key);
alter table status_patrimonio_item add constraint pk_status_patrimonio_item primary key (status_patrimonio_item_key);
alter table status_pedido add constraint pk_status_pedido primary key (status_pedido_key);
alter table status_recebimento add constraint pk_status_recebimento primary key (status_recebimento_key);
alter table status_transferencia add constraint pk_status_transferencia primary key (status_transferencia_key);
alter table sub_conta_bancaria add constraint pk_sub_conta_bancaria primary key (sub_conta_bancaria_key);
alter table sub_finalizadora add constraint pk_sub_finalizadora primary key (sub_finalizadora_key);
alter table sub_grupo_produto add constraint pk_sub_grupo_produto primary key (sub_grupo_produto_key);
alter table sugestao_compra_externa add constraint pk_sugestao_compra_externa primary key (sugestao_compra_externa_key);
alter table taxa_cartao_conta add constraint pk_taxa_cartao_conta primary key (taxa_cartao_conta_key);
alter table terceiro add constraint pk_terceiro primary key (pessoa_key);
alter table teste_edi add constraint pk_teste_edi primary key (teste_edi_key);
alter table theme add constraint pk_theme primary key (theme_key);
alter table tipo_acao_agendamento add constraint pk_tipo_acao_agendamento primary key (tipo_acao_agendamento);
alter table tipo_agendamento add constraint pk_tipo_agendamento primary key (tipo_agendamento_key);
alter table tipo_ajuste_resumo_venda add constraint pk_tipo_ajuste_resumo_venda primary key (tipo_ajuste_resumo_venda_key);
alter table tipo_ambiente_nfe add constraint pk_tipo_ambiente_nfe primary key (tipo_ambiente_nfe_key);
alter table tipo_arquivo add constraint pk_tipo_arquivo primary key (tipo_arquivo_key);
alter table tipo_arquivo_edi add constraint pk_tipo_arquivo_edi primary key (tipo_arquivo_edi_key);
alter table tipo_arquivo_nfe add constraint pk_tipo_arquivo_nfe primary key (tipo_arquivo_nfe_key);
alter table tipo_autorizacao_pagamento add constraint pk_tipo_autorizacao_pagamento primary key (tipo_autorizacao_pagamento_key);
alter table tipo_baixa_patrimonio add constraint pk_tipo_baixa_patrimonio primary key (tipo_baixa_patrimonio_key);
alter table tipo_balanca add constraint pk_tipo_balanca primary key (tipo_balanca_key);
alter table tipo_bandeira add constraint pk_tipo_bandeira primary key (tipo_bandeira_key);
alter table tipo_base_calculo_desconto add constraint pk_tipo_base_calculo_desconto primary key (tipo_base_calculo_desconto_key);
alter table tipo_base_credito_pis add constraint pk_tipo_base_credito_pis primary key (tipo_base_credito_pis_key);
alter table tipo_bordero add constraint pk_tipo_bordero primary key (tipo_bordero_key);
alter table tipo_bordero_caixa add constraint pk_tipo_bordero_caixa_key primary key (tipo_bordero_caixa_key);
alter table tipo_cadastramento_cob add constraint pk_tipo_cadastramento_cob primary key (tipo_cadastramento_cob_key);
alter table tipo_caixa add constraint pk_tipo_caixa primary key (tipo_caixa_key);
alter table tipo_caixa_periodo_corte add constraint pk_tipo_caixa_periodo_corte primary key (tipo_caixa_periodo_corte_key);
alter table tipo_caixa_prazo add constraint pk_tipo_caixa_prazo primary key (tipo_caixa_prazo_key);
alter table tipo_captura add constraint pk_tipo_captura primary key (tipo_captura_key);
alter table tipo_cartao add constraint pk_tipo_cartao primary key (tipo_cartao_key);
alter table tipo_carteira_cobranca add constraint pk_tipo_carteira_cobranca primary key (tipo_carteira_cobranca_key);
alter table tipo_classe_consumo add constraint pk_tipo_classe_consumo primary key (tipo_classe_consumo_key);
alter table tipo_classificacao_loja add constraint pk_tipo_classificacao_loja primary key (tipo_classificacao_loja_key);
alter table tipo_clau_acordo_prom add constraint pk_tipo_clau_acordo_prom primary key (tipo_clau_acordo_prom_key);
alter table tipo_clausula_contrato add constraint pk_tipo_clausula_contrato primary key (tipo_clausula_key);
alter table tipo_cliente add constraint pk_tipo_cliente primary key (tipo_cliente_key);
alter table tipo_cobranca add constraint pk_tipo_cobranca primary key (tipo_cobranca_key);
alter table tipo_cobranca_contrato add constraint pk_tipo_cobranca_contrato primary key (tipo_cobranca_contrato_key);
alter table tipo_codigo_produto add constraint pk_tipo_codigo_produto primary key (tipo_codigo_produto_key);
alter table tipo_composicao add constraint pk_tipo_composicao primary key (tipo_composicao_key);
alter table tipo_consulta_credito add constraint pk_tipo_consulta_credito primary key (tipo_consulta_credito_key);
alter table tipo_conta_bancaria add constraint pk_tipo_conta_bancaria primary key (tipo_conta_bancaria_key);
alter table tipo_contato add constraint pk_tipo_contato primary key (tipo_contato_key);
alter table tipo_contr_apurada_pis add constraint pk_tipo_contr_apurada_pis primary key (tipo_contr_apurada_pis_key);
alter table tipo_contrato_financeiro add constraint pk_tipo_contrato_financeiro primary key (tipo_contrato_financeiro_key);
alter table tipo_controle_producao add constraint pk_tipo_controle_producao primary key (tipo_controle_producao_key);
alter table tipo_credito_pis_cofins add constraint pk_tipo_credito_pis_cofins primary key (tipo_credito_pis_cofins_key);
alter table tipo_cupom_devolvido add constraint pk_tipo_cupom_devolvido primary key (tipo_cupom_devolvido_key);
alter table tipo_desconto add constraint pk_tipo_desconto primary key (tipo_desconto_key);
alter table tipo_detalhe_deb_federal add constraint pk_tipo_detalhe_deb_federal primary key (tipo_detalhe_deb_federal_key);
alter table tipo_distribuicao add constraint pk_tipo_distribuicao primary key (tipo_distribuicao_key);
alter table tipo_distribuicao_bloqueto add constraint pk_tipo_distribuicao_bloqueto primary key (tipo_distribuicao_bloqueto_key);
alter table tipo_distribuicao_logistica add constraint pk_tipo_distribuicao_logistic primary key (tipo_distribuicao_logist_key);
alter table tipo_divergencia_nota_fiscal add constraint pk_tipo_diverg_nota_fiscal primary key (tipo_divergencia_nf_key);
alter table tipo_documento_fiscal add constraint pk_tipo_documento_fiscal primary key (tipo_documento_fiscal_key);
alter table tipo_domicilio add constraint pk_tipo_domicilio primary key (tipo_domicilio_key);
alter table tipo_embalagem_faturamento add constraint pk_tipo_embalagem_faturamento primary key (tipo_embalagem_faturamento_key);
alter table tipo_emissao_bloqueto add constraint pk_tipo_emissao_bloqueto primary key (tipo_emissao_bloqueto_key);
alter table tipo_emissao_nfe add constraint pk_tipo_emissao primary key (tipo_emissao_nfe_key);
alter table tipo_endereco add constraint pk_tipo_endereco primary key (tipo_endereco_key);
alter table tipo_endereco_logistico add constraint pk_tipo_endereco_logistico primary key (tipo_endereco_logistico_key);
alter table tipo_entrada_tesouraria add constraint pk_tipo_entrada_tesouraria primary key (tipo_entrada_tesouraria_key);
alter table tipo_escrita_apuracao_advert add constraint pk_tipo_escrita_apuracao_adv primary key (tipo_escrita_apuracao_adv_key);
alter table tipo_escrita_fiscal_ajuste add constraint pk_tipo_escrita_fiscal_ajuste primary key (tipo_escrita_fiscal_ajuste_key);
alter table tipo_estatistica_venda add constraint pk_tipo_estatistica_venda primary key (tipo_estatistica_venda_key);
alter table tipo_etiqueta add constraint pk_tipo_etiqueta primary key (tipo_etiqueta_key);
alter table tipo_folha_cobranca add constraint pk_tipo_folha_cobranca primary key (tipo_folha_cobranca_key);
alter table tipo_folha_pagamento add constraint pk_tipo_folha_pagamento primary key (tipo_folha_pagamento_key);
alter table tipo_folha_pagamento_mapa add constraint pk_tipo_folha_pagamento_mapa primary key (tipo_folha_pagamento_mapa_key);
alter table tipo_forma_pagamento add constraint pk_tipo_for_pag primary key (tipo_forma_pagamento_key);
alter table tipo_fornecimento add constraint pk_tipo_fornecimento primary key (tipo_fornecimento_key);
alter table tipo_frete add constraint pk_tipo_frete primary key (tipo_frete_key);
alter table tipo_grau_de_instrucao add constraint pk_tipo_grau_de_intrucao primary key (tipo_grau_de_instrucao_key);
alter table tipo_gravidade_log add constraint pk_tipo_gravidade_log primary key (tipo_gravidade_log_key);
alter table tipo_guia_recolhimento add constraint pk_tipo_guia_key primary key (tipo_guia_recolhimento_key);
alter table tipo_guia_recolhimento_detalhe add constraint pk_tipo_guia_recolhi_deta_key primary key (tipo_guia_recolhi_detalhe_key);
alter table tipo_imovel_despesa add constraint pk_tipo_imovel_despesa primary key (tipo_imovel_despesa_key);
alter table tipo_imposto add constraint pk_tipo_imposto primary key (tipo_imposto_key);
alter table tipo_imposto_federal add constraint pk_tipo_imposto_federal primary key (tipo_imposto_federal_key);
alter table tipo_inscricao add constraint pk_tipo_inscricao primary key (tipo_inscricao_key);
alter table tipo_instrucao_nota_fiscal add constraint pk_tipo_instrucao_nota_fiscal primary key (tipo_instrucao_nota_fiscal_key);
alter table tipo_item_compra add constraint pk_tipo_item_compra primary key (tipo_item_compra_key);
alter table tipo_juros add constraint pk_tipo_juros primary key (tipo_juros_key);
alter table tipo_lancamento add constraint pk_tipo_lancamento primary key (tipo_lancamento_key);
alter table tipo_lancamento_caixa add constraint pk_tipo_lancamento_caixa primary key (tipo_lancamento_caixa_key);
alter table tipo_layout_edi_comercial add constraint pk_tipo_layout_edi_com_key primary key (tipo_layout_edi_comercial_key);
alter table tipo_log add constraint pk_tipo_log primary key (tipo_log_key);
alter table tipo_log_arquivo_nfe_receb add constraint pk_tipo_log_arquivo_nfe_receb primary key (tipo_log_arquivo_nfe_receb_key);
alter table tipo_lote_troca add constraint pk_tipo_lote_troca primary key (tipo_lote_troca_key);
alter table tipo_mapa_resumo add constraint pk_tipo_mapa_resumo primary key (tipo_mapa_resumo_key);
alter table tipo_modelo_nf add constraint pk_tipo_modelo_nf primary key (tipo_modelo_nf_key);
alter table tipo_modelo_registro_fiscal add constraint pk_tipo_modelo_registro_fiscal primary key (tipo_modelo_reg_fiscal_key);
alter table tipo_motivo_ajuste_rv add constraint pk_tipo_motivo_ajuste_rv primary key (tipo_motivo_ajuste_rv_key);
alter table tipo_motivo_oc_cobranca add constraint pk_tipo_motivo_oc_cobranca primary key (tipo_motivo_oc_cobranca_key);
alter table tipo_motivo_request add constraint pk_tipo_motivo_request primary key (tipo_motivo_request_key);
alter table tipo_mov_caixa add constraint pk_tipo_mov_caixa primary key (tipo_mov_caixa_key);
alter table tipo_movimento add constraint pk_tipo_movimento primary key (tipo_movimento_key);
alter table tipo_movimento_bancario add constraint pk_tipo_movimento_bancario primary key (tipo_movimento_bancario_key);
alter table tipo_movimento_financeiro add constraint pk_tipo_movimento_financeiro primary key (tipo_movimento_financeiro_key);
alter table tipo_movimento_terceiro add constraint pk_tipo_movimento_terceiro primary key (tipo_movimento_terceiro_key);
alter table tipo_multa add constraint pk_tipo_multa primary key (tipo_multa_key);
alter table tipo_ocorrencia_banco_cobranca add constraint pk_tipo_ocorrencia_banco_cob primary key (tipo_ocorrencia_banco_cob_key);
alter table tipo_ocorrencia_cobranca add constraint pk_tipo_ocorrencia_cobranca primary key (tipo_motivo_oc_cobranca_key);
alter table tipo_operacao_nota_fiscal add constraint pk_tipo_operacao_nota primary key (tipo_operacao_nota_fiscal_key);
alter table tipo_ordem_credito add constraint pk_tipo_ordem_credito primary key (tipo_ordem_credito_key);
alter table tipo_origem_contabil add constraint pk_tipo_origem_contabil primary key (tipo_origem_contabil_key);
alter table tipo_pagamento add constraint pk_tipo_pagamento primary key (tipo_pagamento_key);
alter table tipo_parametro add constraint pk_tipo_parametro primary key (tipo_parametro_key);
alter table tipo_patrimonio_item add constraint pk_tipo_patrimonio_item primary key (tipo_patrimonio_item_key);
alter table tipo_pdv add constraint pk_tipo_pdv primary key (tipo_pdv_key);
alter table tipo_pedido add constraint pk_tipo_pedido primary key (tipo_pedido_key);
alter table tipo_pedido_venda add constraint pk_tipo_pedido_venda primary key (tipo_pedido_venda_key);
alter table tipo_periodicidade add constraint pk_tipo_periodicidade primary key (tipo_periodicidade_key);
alter table tipo_pesquisa_jornal add constraint pk_tipo_pesquisa_jornal primary key (tipo_pesquisa_jornal_key);
alter table tipo_pessoa add constraint pk_tipo_pessoa primary key (tipo_pessoa_key);
alter table tipo_pessoa_descricao add constraint pk_tipo_pessoa_descricao primary key (tipo_pessoa_descricao_key);
alter table tipo_produto_bancario add constraint pk_tipo_produto_bancario primary key (tipo_produto_bancario_key);
alter table tipo_protesto add constraint pk_tipo_protesto primary key (tipo_protesto_key);
alter table tipo_quebra_tesouraria add constraint pk_tipo_quebra_tesouraria primary key (tipo_quebra_tesouraria_key);
alter table tipo_receita_tributaria add constraint pk_tipo_receita_tributaria primary key (tipo_receita_tributaria_key);
alter table tipo_regime_simples add constraint pk_tipo_regime_simples primary key (tipo_regime_simples_key);
alter table tipo_regime_tributario add constraint pk_tipo_regime_tributario primary key (tipo_regime_tributario_key);
alter table tipo_registro_fiscal add constraint pk_tipo_registro_fiscal primary key (tipo_registro_fiscal_key);
alter table tipo_registro_sintegra add constraint pk_tipo_registro_sintegra primary key (tipo_registro_sintegra_key);
alter table tipo_relatorio add constraint pk_tipo_relatorio primary key (tipo_relatorio_key);
alter table tipo_requisicao_suporte add constraint pk_tipo_requisicao primary key (tipo_requisicao_key);
alter table tipo_resposta_nfe add constraint pk_tipo_resposta_nfe primary key (tipo_resposta_nfe_key);
alter table tipo_sanguineo add constraint pk_tipo_sanguineo primary key (tipo_sanguineo_key);
alter table tipo_separacao add constraint pk_tipo_separacao primary key (tipo_separacao_key);
alter table tipo_servico_nfe add constraint pk_tipo_servico_nfe primary key (tipo_servico_nfe_key);
alter table tipo_status_arquivo add constraint pk_tipo_status_arquivo primary key (tipo_status_arquivo_key);
alter table tipo_status_bloqueto add constraint pk_tipo_status_bloqueto primary key (tipo_status_bloqueto_key);
alter table tipo_status_cobranca add constraint pk_tipo_status_cobranca primary key (tipo_status_cobranca_key);
alter table tipo_status_credito add constraint pk_tipo_status_credito primary key (tipo_status_credito_key);
alter table tipo_status_cv add constraint pk_tipo_status_cv primary key (tipo_status_cv_key);
alter table tipo_status_distribuicao add constraint pk_tipo_status_distribuicao primary key (tipo_status_distribuicao_key);
alter table tipo_status_nfe add constraint pk_tipo_status_nfe primary key (tipo_status_nfe_key);
alter table tipo_status_ordem_credito add constraint pk_tipo_status_ordem_credito primary key (tipo_status_ordem_credito_key);
alter table tipo_status_pagamento add constraint pk_tipo_status_pagamento primary key (tipo_status_pagamento_key);
alter table tipo_status_preco_venda add constraint pk_tipo_status_preco_venda primary key (tipo_status_preco_venda_key);
alter table tipo_status_produto add constraint pk_tipo_status_produto primary key (tipo_status_produto_key);
alter table tipo_status_recebimento add constraint pk_tipo_status_recebimento primary key (tipo_status_recebimento_key);
alter table tipo_tef add constraint pk_tipo_tef primary key (tipo_tef_key);
alter table tipo_terminal_consulta add constraint pk_tipo_terminal_consulta primary key (tipo_terminal_consulta_key);
alter table tipo_teste_edi add constraint pk_tipo_teste_edi primary key (tipo_teste_edi_key);
alter table tipo_transacao add constraint pk_tipo_transacao primary key (tipo_transacao_key);
alter table tipo_transferencia add constraint pk_tipo_transferencia primary key (tipo_transferencia_key);
alter table tipo_troca add constraint pk_tipo_troca primary key (tipo_troca_key);
alter table tipo_uniao add constraint pk_tipo_uniao primary key (tipo_uniao_key);
alter table transferencia_eletronica add constraint pk_transferencia_eletronica primary key (transferencia_eletronica_key);
alter table transferencia_valores add constraint pk_transferencia_valores primary key (transferencia_valores_key);
alter table transmissao_nfe add constraint pk_transmissao_nfe primary key (transmissao_nfe_key);
alter table transportadora add constraint pk_transportadora primary key (pessoa_key);
alter table transportadora_cargas add constraint pk_transportadora_cargas primary key (pessoa_key);
alter table transportadora_valores add constraint pk_transportadora_valores primary key (pessoa_key);
alter table tributacao_ref_produto_de_para add constraint pk_trib_ref_prod_de_para primary key (produto_key);
alter table tributacao_ref_produto_log add constraint pk_tributacao_ref_produto_log primary key (tributacao_ref_produto_log_key);
alter table tributacao_referencia_lote add constraint pk_tributacao_referencia_lote primary key (tributacao_referencia_lote_key);
alter table tributacao_referencia_produto add constraint pk_tributacao_ref_produto primary key (tributacao_ref_produto_key);
alter table troca add constraint pk_troca primary key (produto_key,loja_key);
alter table troca_descarte_destino add constraint pk_troca_descarte_destino primary key (key);
alter table troca_produto_loja add constraint pk_troca_produto_loja primary key (troca_produto_loja_key);
alter table troca_transferencia add constraint pk_troca_transferencia primary key (numero_transacao,loja_origem_key,produto_key);
alter table ultima_pesquisa add constraint pk_ultima_pesquisa primary key (usuario_key,concorrente_key,visita_key);
alter table ultima_pesquisa_item add constraint pk_ultima_pesquisa_item primary key (usuario_key,produto_key,data_visita);
alter table ultimo_movimento add constraint pk_ult_mov primary key (produto_key,loja_key);
alter table ultimo_pedido_venda_cliente add constraint pk_ultimo_pedido_venda_cliente primary key (pedido_venda_key,cliente_key);
alter table uniao add constraint pk_uniao primary key (chave_pai,chave_filho,tipo_uniao_key);
alter table unidade_porcao add constraint pk_unidade_porcao primary key (unidade_porcao_key);
alter table usuario add constraint pk_usuario primary key (usuario_key);
alter table usuario_limite_financeiro add constraint pk_usuario_limite_financeiro primary key (usuario_limite_financeiro_key);
alter table usuario_loja add constraint pk_usuario_loja primary key (usuario_key,loja_key);
alter table usuario_preferencias add constraint pk_usuario_prefer primary key (usuario_key);
alter table van_edi add constraint pk_van_edi primary key (van_edi_key);
alter table vd_cupom_devolvido add constraint pk_vd_cupom_devolvido primary key (vd_cupom_devolvido_key);
alter table vd_cupom_fiscal add constraint pk_vd_cupom_fiscal primary key (cupom_fiscal_key);
alter table vd_cupom_item add constraint pk_vd_cupom_item primary key (item_key);
alter table vd_cupom_item_nota_fiscal_item add constraint pk_vd_cupom_item_nf_item primary key (vd_cupom_item_key,nota_fiscal_item_key);
alter table vd_cupom_recebimento add constraint pk_vd_cupom_recebimento primary key (cupom_recebimento_key);
alter table vd_item_cupom_devolvido add constraint pk_vd_item_cupom_devolvido primary key (vd_item_cupom_devolvido_key);
alter table vd_leitura add constraint pk_vd_leitura primary key (cupom_leitura_key);
alter table vd_tipo_cupom add constraint pk_vd_tipo_cupom primary key (tipo_key);
alter table vd_tipo_transacao add constraint pk_vd_tipo_transacao primary key (vd_tipo_transacao_key);
alter table vd_tt_recebimento add constraint pk_vd_tt_recebimento primary key (vd_tipo_transacao_key,recebimento_key);
alter table venda_irregular add constraint pk_venda_irregular primary key (venda_irregular_key);
alter table venda_online_log add constraint pk_venda_online_log primary key (venda_online_log_key);
alter table vendedor add constraint pk_vendedor primary key (pessoa_key);

alter table agencia add constraint uk_agencia_banco unique(banco_key,agencia_key);
alter table apuracao_competencia add constraint uk_apuracao_competencia unique(loja_key,competencia_key);
alter table autorizacao_pagamento add constraint uk_ap_codigo_barra unique(codigo_barra);
alter table baixa_cartao add constraint uk_bc_loja_tcx unique(tipo_caixa_key,loja_key);
alter table baixa_venda add constraint uk_baixa_venda unique(loja_key,ecf,data_venda);
alter table balanco_mensal add constraint uk_balanco_mensal_periodo unique(periodo,loja_key,produto_key);
alter table bin_cartao add constraint uk_bin_car_numero unique(numero_bin);
alter table bordero_caixa_item add constraint uk_bcx_cadastro_cx unique(bordero_caixa_key,cadastro_caixa_key);
alter table caixa_troca add constraint uk_caixa_troca_caixa_numero unique(caixa_numero);
alter table calendario add constraint uk_calendario unique(data);
alter table carta_correcao add constraint uk_carta_correcao_nf unique(nf_key);
alter table carta_correcao_motivo add constraint uk_carta_correcao_motivo_carta unique(carta_correcao_key,motivo_key);
alter table classificacao_fiscal add constraint uk_classificacao_fiscal unique(ncm,ex);
alter table cnae add constraint uk_cnae unique(codigo);
alter table competencia_contabil add constraint uk_competencia_contabil unique(exercicio_contabil_key,mes);
alter table competencia_contabil_loja add constraint uk_competencia_contabil_loja unique(competencia_contabil_key,loja_key);
alter table composicao add constraint uk_composicao_prod_final_parte unique(produto_final,produto_parte);
alter table conta_bancaria add constraint uk_conta_bancaria unique(agencia_key,conta_bancaria_numero);
alter table conta_bancaria_dependente add constraint uk_conta_denpendente unique(conta_bancaria_key,pessoa_key);
alter table conta_contabil add constraint uk_conta_contabil_codigo unique(codigo_descritivo);
alter table conta_contabil add constraint uk_conta_contabil_reduzida unique(conta_reduzida);
alter table conta_sintetica add constraint uk_conta_sint_plano_cod_desc unique(plano_conta_key,codigo_descritivo);
alter table conta_sintetica add constraint uk_conta_sint_plano_conta_red unique(plano_conta_key,conta_reduzida);
alter table contador_nota add constraint uk_contador_nota_loja_serie unique(loja_key,serie);
alter table cupom_total_pis_cofins add constraint uk_cupom_total_pis_cofins unique(data,loja_key,ecf);
alter table custo_falta add constraint uk_custo_falta_lista_cont_prod unique(lista_falta_key,contrato,produto_key);
alter table dias_pagamento add constraint uk_dias_pagamento unique(contrato_fornecimento_key,quantidade_dias);
alter table dias_recebimento add constraint uk_dias_recimento unique(pessoa_key,quantidade_dias);
alter table distribuicao_logistica add constraint uk_dist_log_item_pedido unique(item_pedido_cd_key);
alter table distribuicao_logistica_tmp add constraint uk_dist_forcada_tmp_prod_loja unique(loja_key,produto_key);
alter table endereco add constraint uk_endereco unique(pessoa_key,tipo_endereco_key);
alter table escrita_apuracao add constraint uk_escrita_apuracao unique(mes_ano,loja_key);
alter table escrita_apuracao_uf add constraint uk_escrita_apuracao_uf unique(escrita_apuracao_icms_key,uf);
alter table estado add constraint uk_estado_codigo_ibge unique(codigo_ibge);
alter table exercicio_contabil add constraint uk_exercicio_contabil_ano unique(ano);
alter table exportacao_redf add constraint uk_exp_redf_escrita unique(escrita_fiscal_key);
alter table fechamento_caixa_operador add constraint uk_fechamento_caixa_operador unique(operador_key,loja_key,data,numero_ecf);
alter table ficha_estoque add constraint uk_ficha_estoque unique(produto_key,loja_key);
alter table ficha_estoque_troca add constraint uk_ficha_estoque_troca unique(produto_key,loja_key);
alter table fornecedor_divisao add constraint uk_fornecedor_divisao unique(fornecedor_divisao_key);
alter table fornecedor_produto add constraint uk_fornecedor_produto unique(fornecedor_key,divisao_key,produto_key);
alter table funcionario_pensionista add constraint uk_funcionario_pensionista unique(funcionario_key,pensionista_key);
alter table governo_estadual add constraint uk_governo_estadual unique(uf);
alter table guia_carro_forte add constraint uk_guia_carro_forte unique(contrato_carro_forte_key,guia_numero,guia_serie,guia_digito);
alter table icm_venda add constraint uk_icm_venda unique(produto_key,estado_sigla);
alter table inventario_movimento_detalhe add constraint uk_inventario_mov_det unique(inventario_key,produto_key,indicador_de_propriedade_key,terceiro_key);
alter table item add constraint uk_item unique(barra_key);
alter table item_falta add constraint uk_item_falta unique(produto_key,lista_falta_key,loja_key);
alter table item_pedido add constraint uk_item_pedido unique(pelt_key,produto_key);
alter table item_pedido_falta add constraint uk_item_pedido_falta unique(item_falta_key,custo_falta_key);
alter table leitura_z add constraint uk_leitura_z unique(loja_key,cupom_fiscal_key,ecf,tipo_leitura,tipo_transacao,data_venda);
alter table linha_cd add constraint uk_linha_cd unique(fornecedor_key,divisao_key,produto_key,loja_key,cd_key);
alter table lista_falta_geral add constraint uk_lista_falta_geral unique(lista_geral_key,lista_falta_key);
alter table loja_cartao_baixa add constraint uk_loja_cartao_baixa unique(loja_key,tipo_lancamento_caixa_key);
alter table loja_pdv add constraint uk_loja_pdv unique(loja_key,numero_ecf);
alter table mapa_resumo_item add constraint uk_mapa_resumo_item_ecf unique(mapa_resumo_key,ecf);
alter table margem_loja add constraint uk_margem_loja unique(produto_key,loja_key);
alter table movimento_baixa_cartao add constraint uk_movimento_baixa_cad_caixa unique(cadastro_caixa_key);
alter table movimento_compra add constraint uk_movimento_compra unique(nf_key,pedido_key,entrega,tipo_pedido_key,produto_comprado_key,custo_embalagem_final,nf_origem_key,tipo_movimento_key,patrimonio_item_key);
alter table negociacao_item add constraint uk_negociacao_item unique(negociacao_key,produto_key);
alter table nota_fiscal_frete add constraint uk_nf_frete unique(nf_key);
alter table nota_fiscal_item_divergencia add constraint uk_nf_item_divergencia unique(nota_fiscal_item_key);
alter table nota_fiscal_mensagem add constraint uk_nf_mensagem unique(nf_key,item);
alter table nota_fiscal_pagamento add constraint uk_nf_pagamento unique(nf_key,parcela);
alter table nota_fiscal_total add constraint uk_nf_total unique(nf_key);
alter table operador add constraint uk_numero_operador unique(numero_operador);
alter table parametros_loja add constraint uk_parametros_loja unique(loja_key);
alter table pauta_fiscal_estado add constraint uk_pauta_fiscal_estado unique(pauta_fiscal_key,estado_sigla);
alter table pedido add constraint uk_pedido unique(pedido_key,entrega,loja_key,tipo_pedido_key);
alter table pedido_compra_bonificacao add constraint uk_pedido_compra_bon_pb unique(pedido_bonificado_key);
alter table pedido_compra_bonificacao add constraint uk_pedido_compra_bon_pc unique(pedido_compra_key);
alter table pesquisa_jornal_produto add constraint uk_pesquisa_jornal_produto unique(pesquisa_jornal_key,produto_key);
alter table prazo_recebimento add constraint uk_prazo_recebimento unique(contrato_fornecimento_key,quantidade_dias);
alter table preco_transferencia add constraint uk_preco_transferencia unique(loja_key,produto_key);
alter table previsao_loja add constraint uk_previsao_loja unique(loja_key,mes_ano);
alter table previsao_rede add constraint uk_previsao_rede unique(data);
alter table previsao_setor add constraint uk_previsao_setor unique(setor_key,mes_ano);
alter table produto_balanca_detalhe add constraint uk_prod_bal_set_prod_loja unique(setor_balanca_key,loja_key,produto_key,balanca_key,linha);
alter table quebra_tesouraria add constraint uk_quebra_tesouraria unique(data_movimento,loja_key,tipo_quebra_tesouraria_key);
alter table relatorio_operador add constraint uk_rel_op_lj_ecf_data_cupom unique(operador_key,loja_key,numero_ecf,data);
alter table resumo_conta_comercial add constraint uk_resumo_conta_comercial unique(fornecedor_divisao_key,loja_key,setor_compra_key,tipo_lancamento_key);
alter table resumo_pedido_venda_cliente add constraint uk_resumo_pedido_venda_cliente unique(produto_key,cliente_key);
alter table resumo_presenca_cupom add constraint uk_resumo_presenca_cupom unique(calendario_key,loja_key,secao_key);
alter table resumo_tkt_medio add constraint uk_resumo_tkt_medio unique(loja_key,calendario_key);
alter table resumo_tkt_medio_finalizadora add constraint uk_resumo_tkt_med_finalizadora unique(loja_key,calendario_key,finalizadora_key);
alter table resumo_tkt_medio_hora add constraint uk_resumo_tkt_medio_hora unique(loja_key,calendario_key,hora);
alter table resumo_tkt_medio_hora_depto add constraint uk_resumo_tkt_medio_hora_depto unique(loja_key,calendario_key,hora,departamento_key);
alter table resumo_tkt_medio_hora_secao add constraint uk_resumo_tkt_medio_hora_secao unique(loja_key,calendario_key,hora,secao_key);
alter table resumo_tkt_medio_secao add constraint uk_resumo_tkt_medio_secao unique(loja_key,calendario_key,secao_key);
alter table taxa_cartao_loja add constraint uk_taxa_cartao_loja unique(taxa_cartao_loja_key);
alter table tipo_folha_pagamento_mapa add constraint uk_tipo_folha_pagamento_mapa unique(tipo_folha_pagamento_key);
alter table tipo_pessoa add constraint uk_tipo_pessoa unique(pessoa_key,tipo_pessoa_descricao_key);
alter table troca_produto_loja add constraint uk_troca_produto_loja_forn_div unique(produto_key,loja_key,fornecedor_key,divisao_key);
alter table usuario add constraint uk_usuario unique(user_name);
alter table vd_cupom_fiscal add constraint uk_vd_cupom_fiscal unique(cupom_numero,loja_key,ecf,tipo,hora);
alter table vd_tipo_transacao add constraint uk_vd_tipo_transacao unique(leitura,transacao);

alter table abatimento add constraint fk_abatimento_ap foreign key (ap_key) references autorizacao_pagamento on delete cascade;
alter table abatimento add constraint fk_abatimento_ar foreign key (ar_key) references autorizacao_pagamento on delete cascade;
alter table acordo_baixa_custo add constraint fk_acordo_baixa_custo_forn foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table acordo_baixa_custo add constraint fk_acordo_baixa_custo_loja foreign key (loja_key) references loja;
alter table acordo_baixa_custo add constraint fk_acordo_baixa_custo_usuario foreign key (usuario_key) references usuario;
alter table acordo_baixa_custo_item add constraint fk_acordo_baixa_custo_it_pai foreign key (acordo_baixa_custo_key) references acordo_baixa_custo;
alter table acordo_baixa_custo_item add constraint fk_acordo_baixa_custo_it_prod foreign key (produto_key) references produto;
alter table acordo_produto add constraint fk_acord_prod_forma_pag foreign key (forma_pagamento_key) references forma_pagamento;
alter table acordo_produto add constraint fk_acord_prod_pessoa foreign key (fornecedor_key) references pessoa;
alter table acordo_produto add constraint fk_acord_prod_set_compra foreign key (setor_compra_key) references setor_compra;
alter table acordo_produto add constraint fk_acord_prod_usr foreign key (gerado_por) references usuario;
alter table acordo_produto_item add constraint fk_acord_prod_item_acord_prod foreign key (acordo_produto_key) references acordo_produto;
alter table acordo_produto_item add constraint fk_acord_prod_item_prod foreign key (produto_key) references produto;
alter table acordo_produto_loja add constraint fk_acord_prod_lj_acord_prod foreign key (acordo_produto_key) references acordo_produto on delete cascade;
alter table acordo_produto_loja add constraint fk_acord_prod_lj_pessoa foreign key (loja_key) references pessoa on delete cascade;
alter table administradora_credito add constraint fk_administradora_credito foreign key (pessoa_key) references pessoa;
alter table agencia add constraint fk_agencia_bco foreign key (banco_key) references banco;
alter table agendamento_transferencia add constraint fk_agendamento_transf_usuario foreign key (usuario_autorizacao_key) references usuario;
alter table agendamento_transferencia add constraint fk_ag_transf_tipo_ag foreign key (tipo_agendamento_key) references tipo_agendamento;
alter table agendamento_transferencia add constraint fk_ag_transf_transf_elet foreign key (transferencia_eletronica_key) references transferencia_eletronica;
alter table agendamento_transferencia add constraint fk_ag_transf_usr foreign key (usuario_agendamento_key) references usuario;
alter table ajuste_estoque add constraint fk_ajuste_estoque_movimento foreign key (movimento_estoque_key) references movimento_estoque;
alter table ajuste_estoque add constraint fk_log_ajuste_lj foreign key (loja_key) references loja;
alter table ajuste_estoque add constraint fk_log_ajuste_prod foreign key (produto_key) references produto on delete cascade;
alter table ajuste_estoque add constraint fk_log_ajuste_usr foreign key (usuario_key) references usuario;
alter table ajuste_trocas add constraint fk_ajuste_troca_usuario foreign key (usuario_key) references usuario;
alter table ajuste_trocas add constraint fk_movimento_estoque_key foreign key (movimento_estoque_key) references movimento_estoque;
alter table aliquota_interestadual add constraint fk_aliq_inter_destino_estado foreign key (estado_destino) references estado;
alter table aliquota_interestadual add constraint fk_aliq_inter_origem_estado foreign key (estado_origem) references estado;
alter table apuracao_competencia add constraint fk_apuracao_competencia_ea foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table apuracao_competencia add constraint fk_apur_comp_comp foreign key (competencia_key) references competencia;
alter table apuracao_competencia add constraint fk_apur_comp_lj foreign key (loja_key) references loja;
alter table arquivo add constraint fk_arq_lj foreign key (remetente) references loja;
alter table arquivo add constraint fk_arquivo_destinatario foreign key (destinatario) references loja;
alter table arquivo add constraint fk_arquivo_tipo_arquivo foreign key (tipo_arquivo_key) references tipo_arquivo;
alter table arquivo_edi add constraint fk_arq_edi_tipo_arq_edi foreign key (tipo_arquivo_edi_key) references tipo_arquivo_edi;
alter table arquivo_edi add constraint fk_arq_edi_tipo_status_arq foreign key (tipo_status_arquivo_key) references tipo_status_arquivo;
alter table arquivo_edi add constraint fk_arq_edi_van_edi foreign key (van_edi_key) references van_edi;
alter table arquivo_edi_linha add constraint fk_arq_edi_linha_arq_edi foreign key (arquivo_edi_key) references arquivo_edi;
alter table arquivo_escrita_fiscal add constraint fk_arquivo_escrita_fiscal_arqu foreign key (arquivo_key) references arquivo on delete cascade;
alter table arquivo_escrita_fiscal add constraint fk_arquivo_escrita_fiscal_escr foreign key (escrita_fiscal_key) references escrita_fiscal on delete cascade;
alter table arquivo_nfe add constraint fk_arquivo_nfe_calendario foreign key (calendario_key) references calendario;
alter table arquivo_nfe add constraint fk_arquivo_nfe_loja foreign key (loja_key) references loja;
alter table arquivo_nfe add constraint fk_arquivo_nfe_nota_fiscal foreign key (nf_key) references nota_fiscal;
alter table arquivo_nfe add constraint fk_arquivo_nfe_servico_nfe foreign key (tipo_servico_nfe_key) references tipo_servico_nfe;
alter table arquivo_nfe_recebido add constraint fk_arq_nfe_rece_calendario foreign key (processamento_calendario_key) references calendario;
alter table arquivo_nfe_recebido add constraint fk_arq_nfe_rec_forn foreign key (fornecedor_key) references pessoa;
alter table arquivo_nfe_recebido add constraint fk_arq_nfe_rec_loja foreign key (loja_key) references pessoa;
alter table arquivo_nfe_recebido add constraint fk_arquivo_nfe_recebido_nota foreign key (nf_key) references nota_fiscal;
alter table arquivo_nfe_recebido add constraint fk_arquivo_nfe_receb_tipo_arq foreign key (tipo_arquivo_nfe_key) references tipo_arquivo_nfe;
alter table arquivo_nfe_recebido add constraint fk_tipo_operacao_nota foreign key (tipo_operacao_nota_fiscal_key) references tipo_operacao_nota_fiscal;
alter table autorizacao_pagamento add constraint fk_ap_cartorio_detalhe foreign key (cartorio_detalhe_key) references cartorio_detalhe;
alter table autorizacao_pagamento add constraint fk_ap_conta_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table autorizacao_pagamento add constraint fk_ap_conta_contabil_destino foreign key (conta_contabil_destino_key) references conta_contabil;
alter table autorizacao_pagamento add constraint fk_ap_contrato_servico foreign key (contrato_servico_key) references contrato_servico;
alter table autorizacao_pagamento add constraint fk_ap_factoring foreign key (factoring_key) references pessoa;
alter table autorizacao_pagamento add constraint fk_ap_fatura foreign key (fatura_key) references fatura;
alter table autorizacao_pagamento add constraint fk_ap_favorecido foreign key (favorecido) references pessoa;
alter table autorizacao_pagamento add constraint fk_ap_folha_pagamento_func foreign key (folha_pgto_funcionario_key) references folha_pagamento_funcionario;
alter table autorizacao_pagamento add constraint fk_ap_loja_pagadora foreign key (loja_pagadora) references loja;
alter table autorizacao_pagamento add constraint fk_ap_status_duplicata foreign key (status_duplicata_key) references status_duplicata;
alter table autorizacao_pagamento add constraint fk_ap_tipo_agendamento foreign key (tipo_agendamento_key) references tipo_agendamento;
alter table autorizacao_pagamento add constraint fk_ap_tipo_lancamento foreign key (tipo_lancamento_key) references tipo_lancamento;
alter table autorizacao_pagamento add constraint fk_auto_pag_multa_key foreign key (multa_key) references multa;
alter table autorizacao_pagamento add constraint fk_autorizacao_pagamento_tipo foreign key (tipo_autorizacao_pagamento_key) references tipo_autorizacao_pagamento;
alter table autorizacao_pagamento add constraint fk_autor_pag_tp_rec_trib foreign key (tipo_receita_tributaria_key) references tipo_receita_tributaria;
alter table autorizacao_pagamento add constraint fk_autor_pag_uf_favorecida foreign key (uf_favorecida) references estado;
alter table autorizacao_pagamento add constraint fk_aut_pagamento_ct_bancaria foreign key (conta_bancaria_key) references conta_bancaria;
alter table autorizacao_pagamento add constraint fk_aut_pag_bord foreign key (bordero_key) references bordero;
alter table autorizacao_pagamento add constraint fk_aut_pag_comp foreign key (competencia_key) references competencia;
alter table autorizacao_pagamento add constraint fk_aut_pag_lj foreign key (loja_key) references loja;
alter table autorizacao_pagamento add constraint fk_aut_pag_ocorr_ag foreign key (ocorrencia_agendamento_key) references ocorrencia_agendamento;
alter table autorizacao_pagamento add constraint fk_aut_pag_ocorr_cob foreign key (ult_ocorrencia_cobranca_key) references ocorrencia_cobranca;
alter table autorizacao_pagamento add constraint fk_aut_pag_pessoa foreign key (conferido_por) references pessoa;
alter table autorizacao_pagamento add constraint fk_aut_pag_tipo_cob foreign key (tipo_cobranca_key) references tipo_cobranca;
alter table autorizacao_pagamento add constraint fk_aut_pag_tipo_juros foreign key (tipo_juros_key) references tipo_juros;
alter table autorizacao_pagamento add constraint fk_aut_pag_tipo_protesto foreign key (tipo_protesto_key) references tipo_protesto;
alter table autorizacao_pagamento add constraint fk_aut_pag_tipo_status_pag foreign key (tipo_status_pagamento_key) references tipo_status_pagamento;
alter table autorizacao_pagamento add constraint fk_duplicata_agrup_originada foreign key (duplicata_agrup_originada_key) references autorizacao_pagamento;
alter table autorizacao_pagamento add constraint fk_pessoa_cedente_original foreign key (cedente_original_key) references pessoa;
alter table autorizacao_pagamento add constraint fk_tipo_forma_pagamento foreign key (tipo_forma_pagamento_key) references tipo_forma_pagamento;
alter table baixa_cartao add constraint fk_bc_cbancaria foreign key (conta_bancaria_key) references conta_bancaria;
alter table baixa_cartao add constraint fk_bc_loja foreign key (loja_key) references loja;
alter table baixa_cartao add constraint fk_bc_tipocx foreign key (tipo_caixa_key) references tipo_caixa;
alter table baixa_venda add constraint fk_baixa_venda_lj foreign key (loja_key) references loja;
alter table baixa_venda add constraint fk_baixa_venda_usuario foreign key (usuario_key) references usuario;
alter table balanco_mensal add constraint fk_balanco_mensal_set_compra foreign key (setor_compra_key) references setor_compra;
alter table banco_agendamento add constraint fk_bco_ag_bco foreign key (banco_key) references banco on delete cascade;
alter table banco_agendamento add constraint fk_bco_ag_tipo_ag foreign key (tipo_agendamento_key) references tipo_agendamento on delete cascade;
alter table banco_bloqueto add constraint fk_banco_bloqueto_favorecido foreign key (fornecedor_key) references pessoa;
alter table banco_bloqueto add constraint fk_bco_bloq_aut_pag foreign key (ap_key) references autorizacao_pagamento;
alter table banco_bloqueto add constraint fk_bco_bloq_pessoa foreign key (loja_key) references pessoa;
alter table banco_bloqueto add constraint fk_bco_bloq_tipo_status_bloq foreign key (tipo_status_bloqueto_key) references tipo_status_bloqueto;
alter table banco_cobranca add constraint fk_banco_cob_ap foreign key (ap_key) references autorizacao_pagamento;
alter table banco_cobranca add constraint fk_banco_cob_conta foreign key (conta_cendente_key) references conta_bancaria;
alter table banco_cobranca add constraint fk_banco_cob_conta_bancaria foreign key (conta_cedente_key) references conta_bancaria;
alter table banco_cobranca add constraint fk_banco_cob_sacado foreign key (sacado_key) references pessoa;
alter table banco_cobranca add constraint fk_banco_cob_status_conc foreign key (status_conciliacao_key) references status_conciliacao;
alter table banco_cobranca add constraint fk_banco_cob_tipo foreign key (tipo_carteira_cobranca_key) references tipo_carteira_cobranca;
alter table banco_cobranca add constraint fk_banco_cob_tipo_oc foreign key (tipo_ocorrencia_cobranca_key) references tipo_ocorrencia_cobranca;
alter table banco_cobranca_ocorrencia_tipo add constraint fk_banco_cob_oc_banco_cob foreign key (banco_cobranca_key) references banco_cobranca on delete cascade;
alter table banco_cobranca_ocorrencia_tipo add constraint fk_bco_cob_oc_tipo_tipo_oc foreign key (tipo_ocorrencia_banco_cob_key) references tipo_ocorrencia_banco_cobranca on delete cascade;
alter table banco_custodia add constraint fk_banco_custodia_conta foreign key (conta_bancaria_key) references conta_bancaria;
alter table banco_ext_hist_tip_cx add constraint fk_bco_ext_hist_tip_cx_tipo_cx foreign key (tipo_caixa_key) references tipo_caixa on delete cascade;
alter table banco_ext_hist_tip_cx add constraint fk_bco_ext_h_tip_cx_bco_ext_h foreign key (banco_extrato_historico_key) references banco_extrato_historico on delete cascade;
alter table banco_extrato add constraint fk_banco_extrato foreign key (status_conciliacao_key) references status_conciliacao;
alter table banco_extrato add constraint fk_banco_extrato_conta foreign key (conta_bancaria_key) references conta_bancaria;
alter table banco_extrato add constraint fk_banco_extrato_sub_conta foreign key (sub_conta_bancaria_key) references sub_conta_bancaria;
alter table banco_extrato add constraint fk_bco_ext_bco_ext_saldo foreign key (banco_extrato_saldo_key) references banco_extrato_saldo;
alter table banco_extrato_historico add constraint fk_banco foreign key (banco_key) references banco;
alter table banco_extrato_historico add constraint fk_tipo_movimento_bancario foreign key (tipo_movimento_bancario_key) references tipo_movimento_bancario;
alter table banco_extrato_saldo add constraint fk_banco_extrato_sd_sub_conta foreign key (sub_conta_bancaria_key) references sub_conta_bancaria;
alter table banco_extrato_saldo add constraint fk_banco_saldo_conta foreign key (conta_bancaria_key) references conta_bancaria;
alter table banco_pagamento add constraint fk_bco_pag_status_conc foreign key (status_conciliacao_key) references status_conciliacao;
alter table banco_pagamento add constraint fk_bco_pgto_conta_destino foreign key (destino_conta_bancaria_key) references conta_bancaria;
alter table banco_pagamento add constraint fk_bco_pgto_conta_origem foreign key (origem_conta_bancaria_key) references conta_bancaria;
alter table banco_pagamento_titulos add constraint fk_banco_pagamento_titulos_ap foreign key (ap_key) references autorizacao_pagamento;
alter table banco_pagamento_titulos add constraint fk_bco_pag_titulos_status_conc foreign key (status_conciliacao_key) references status_conciliacao;
alter table banco_pagamento_titulos add constraint fk_bco_pgto_titulos_conta foreign key (conta_bancaria_key) references conta_bancaria;
alter table bandeira add constraint fk_bandeira_pessoa_dir_finan foreign key (diretor_financeiro_key) references pessoa;
alter table bandeira_desconhecida add constraint fk_band_desc_lanc_loja_key foreign key (lancamento_loja_key) references lancamento_loja on delete cascade;
alter table bandeira_desconhecida add constraint fk_band_desc_receb_key foreign key (recebimento_key) references recebimento;
alter table bin_cartao_sub_finalizadora add constraint fk_bin_car_su_final_bin_carta foreign key (bin_cartao_key) references bin_cartao;
alter table bin_cartao_sub_finalizadora add constraint fk_bin_car_su_final_sub_final foreign key (sub_finalizadora_key) references sub_finalizadora;
alter table boleto_bancario add constraint fk_boleto_banc_conta_cob foreign key (conta_cobranca_key) references conta_cobranca;
alter table boleto_bancario add constraint fk_boleto_banc_pessoa foreign key (favorecido_key) references pessoa;
alter table bordero add constraint fk_bordero_conta_bancaria foreign key (conta_bancaria_key) references conta_bancaria;
alter table bordero add constraint fk_bordero_tipo_cobranca foreign key (tipo_cobranca_key) references tipo_cobranca;
alter table bordero add constraint fk_bordero_usuario_aprovacao foreign key (usuario_aprovacao) references usuario;
alter table bordero add constraint fk_bord_lj foreign key (loja_pagadora_key) references loja;
alter table bordero add constraint fk_bord_usr foreign key (usuario_key) references usuario;
alter table bordero_caixa add constraint fk_bcx_mov_bancario foreign key (movimento_bancario_key) references movimento_bancario;
alter table bordero_caixa add constraint fk_bcx_pessoa foreign key (portador_key) references pessoa;
alter table bordero_caixa add constraint fk_bcx_tipo_bordero_caixa foreign key (tipo_bordero_caixa_key) references tipo_bordero_caixa;
alter table bordero_caixa add constraint fk_bcx_usuario foreign key (usuario_gerado_por) references usuario;
alter table bordero_caixa add constraint fk_bord_cx_status_bord foreign key (status_bordero_key) references status_bordero;
alter table bordero_caixa_item add constraint fk_bcxi_bordero_cx foreign key (bordero_caixa_key) references bordero_caixa;
alter table bordero_caixa_item add constraint fk_bcxi_cad_cx foreign key (cadastro_caixa_key) references cadastro_caixa;
alter table bordero_caixa_item add constraint fk_bord_cx_item_aut_pag foreign key (duplicata_cobranca_key) references autorizacao_pagamento;
alter table cadastro_caixa add constraint fk_cad_caixa_administradora foreign key (administradora_key) references administradora;
alter table cadastro_caixa add constraint fk_cad_caixa_empresa foreign key (empresa_autorizacao_key) references administradora;
alter table cadastro_caixa add constraint fk_cad_caixa_loja foreign key (loja_key) references loja;
alter table cadastro_caixa add constraint fk_cad_caixa_pessoa_aut foreign key (pessoa_autorizacao_key) references pessoa;
alter table cadastro_caixa add constraint fk_cad_caixa_portador foreign key (portador_key) references pessoa;
alter table cadastro_caixa add constraint fk_cad_caixa_tipo_caixa foreign key (tipo_caixa_key) references tipo_caixa;
alter table cadastro_caixa add constraint fk_cad_caixa_tipo_mov_caixa foreign key (tipo_mov_caixa_key) references tipo_mov_caixa;
alter table cadastro_caixa add constraint fk_cc_conta_bancaria foreign key (conta_bancaria_key) references conta_bancaria;
alter table cadastro_caixa add constraint fk_ccx_cad_alinea_cheque foreign key (alinea_cheque_devolvido_key) references alinea_cheque_devolvido;
alter table cadastro_caixa add constraint fk_ccx_usuario foreign key (usuario_cheque_dev_recibo) references usuario;
alter table cadastro_caixa add constraint fk_movimento_bancario_baixa foreign key (movimento_bancario_baixa_key) references movimento_bancario;
alter table cadastro_caixa_ocorrencia add constraint fk_cco_cad_caixa foreign key (cadastro_caixa_key) references cadastro_caixa;
alter table cadastro_caixa_ocorrencia add constraint fk_cco_usuario foreign key (usuario_key) references usuario;
alter table caixa_troca add constraint fk_cx_troca_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table calendario_compras add constraint fk_cal_compras_comprador foreign key (comprador_key) references comprador;
alter table calendario_compras add constraint fk_cal_compras_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table calendario_pesquisa add constraint fk_cal_pesq_roteiro foreign key (roteiro_key) references roteiro;
alter table calendario_visita add constraint fk_cal_visita_cal_pesq foreign key (calendario_key) references calendario_pesquisa;
alter table card_ajuste_rv add constraint fk_card_ajuste_rv_conciliacao foreign key (status_conciliacao_key) references status_conciliacao;
alter table card_ajuste_rv add constraint fk_card_ajuste_rv_conta foreign key (conta_bancaria_key) references conta_bancaria;
alter table card_ajuste_rv add constraint fk_card_ajuste_rv_filial foreign key (estabelecimento_filial_key) references estabelecimento_filial;
alter table card_ajuste_rv add constraint fk_card_ajuste_rv_1 foreign key (card_resumo_venda_key) references card_resumo_venda;
alter table card_ajuste_rv add constraint fk_card_ajuste_rv_2 foreign key (tipo_ajuste_rv_key) references tipo_ajuste_resumo_venda;
alter table card_ajuste_rv add constraint fk_card_ajuste_rv_3 foreign key (tipo_motivo_ajuste_rv_key) references tipo_motivo_ajuste_rv;
alter table card_comprovante_venda add constraint fk_card_comprovante_status_con foreign key (status_conciliacao_key) references status_conciliacao;
alter table card_comprovante_venda add constraint fk_card_comprovante_venda_1 foreign key (card_resumo_venda_key) references card_resumo_venda;
alter table card_comprovante_venda add constraint fk_card_comprovante_venda_2 foreign key (tipo_captura_key) references tipo_captura;
alter table card_comprovante_venda add constraint fk_card_comprovante_venda_3 foreign key (tipo_status_cv_key) references tipo_status_cv;
alter table card_cv_parcela add constraint fk_card_cv_parcela_cad_caixa foreign key (cadastro_caixa_key) references cadastro_caixa;
alter table card_cv_parcela add constraint fk_card_cv_parcela_status_con foreign key (status_conciliacao_key) references status_conciliacao;
alter table card_cv_parcela add constraint fk_card_cv_parcela_1 foreign key (card_comprovante_venda_key) references card_comprovante_venda;
alter table card_cv_parcela add constraint fk_card_cv_parcela_2 foreign key (card_ordem_credito_key) references card_ordem_credito;
alter table card_cv_request add constraint fk_card_cv_request_conciliacao foreign key (status_conciliacao_key) references status_conciliacao;
alter table card_cv_request add constraint fk_card_cv_request_filial foreign key (estabelecimento_filial_key) references estabelecimento_filial;
alter table card_cv_request add constraint fk_card_cv_request_1 foreign key (card_comprovante_venda_key) references card_comprovante_venda;
alter table card_cv_request add constraint fk_card_cv_request_2 foreign key (tipo_motivo_request_key) references tipo_motivo_request;
alter table card_ordem_credito add constraint fk_card_ordem_credito foreign key (movimento_bancario_key) references movimento_bancario;
alter table card_ordem_credito add constraint fk_card_ordem_credito_1 foreign key (tipo_transacao_key) references tipo_transacao;
alter table card_ordem_credito add constraint fk_card_ordem_credito_2 foreign key (tipo_status_credito_key) references tipo_status_credito;
alter table card_ordem_credito add constraint fk_card_ordem_credito_3 foreign key (tipo_ordem_credito_key) references tipo_ordem_credito;
alter table card_ordem_credito add constraint fk_card_ordem_credito_4 foreign key (conta_bancaria_key) references conta_bancaria;
alter table card_ordem_credito add constraint fk_card_ordem_credito_5 foreign key (estabelecimento_key_creditado) references estabelecimento_filial;
alter table card_ordem_credito add constraint fk_card_ordem_credito_6 foreign key (estabelecimento_key_original) references estabelecimento_filial;
alter table card_ordem_credito add constraint fk_card_ordem_cred_tipo_cartao foreign key (tipo_cartao_key) references tipo_cartao;
alter table card_ordem_credito add constraint fk_ordem_credito_tipo_status foreign key (tipo_status_ordem_credito_key) references tipo_status_ordem_credito;
alter table card_ordem_credito_rv add constraint fk_card_ordem_credito_rv_1 foreign key (card_ordem_credito_key) references card_ordem_credito on delete cascade;
alter table card_ordem_credito_rv add constraint fk_card_ordem_credito_rv_2 foreign key (card_resumo_venda_key) references card_resumo_venda on delete cascade;
alter table card_resumo_venda add constraint fk_card_resumo_venda_1 foreign key (estabelecimento_filial_key) references estabelecimento_filial;
alter table card_resumo_venda add constraint fk_card_resumo_venda_2 foreign key (tipo_bandeira_key) references tipo_bandeira;
alter table card_resumo_venda add constraint fk_card_resumo_venda_3 foreign key (tipo_transacao_key) references tipo_transacao;
alter table card_resumo_venda add constraint fk_card_resumo_venda_4 foreign key (conta_bancaria_key) references conta_bancaria;
alter table card_resumo_venda add constraint fk_card_rv_tipo_cartao foreign key (tipo_cartao_key) references tipo_cartao;
alter table carta_correcao_motivo add constraint fk_carta_corr_mtv_carta_corr foreign key (carta_correcao_key) references carta_correcao on delete cascade;
alter table carta_correcao_motivo add constraint fk_carta_corr_mtv_mtv_corr foreign key (motivo_key) references motivo_correcao on delete cascade;
alter table carteira_cobranca add constraint fk_cart_cob_bco foreign key (banco_key) references banco;
alter table carteira_cobranca add constraint fk_cart_cob_tipo_cart_cob foreign key (tipo_carteira_cobranca_key) references tipo_carteira_cobranca;
alter table cartorio add constraint fk_cartorio_pessoa foreign key (pessoa_key) references pessoa;
alter table cartorio_detalhe add constraint fk_cartorio_detalhe_pessoa foreign key (cartorio_key) references pessoa;
alter table cheque_cliente add constraint fk_cheque_cliente_cheque_res foreign key (resolucao_key) references cheque_resolucao;
alter table cheque_cliente add constraint fk_cheque_cliente_cheque_sit foreign key (situacao_key) references cheque_situacao;
alter table cheque_emitido add constraint fk_cheq_emitido_conta_ban foreign key (conta_bancaria_key) references conta_bancaria;
alter table cheque_emitido add constraint fk_cheq_emitido_pessoa foreign key (favorecido) references pessoa;
alter table cheque_emitido add constraint fk_cheq_emitido_usuario foreign key (emitido_por) references usuario;
alter table cheque_emitido add constraint fk_cheq_emitido_usuario2 foreign key (impresso_por) references usuario;
alter table cheque_emitido add constraint fk_cheque_emitido_movban foreign key (movimento_bancario_key) references movimento_bancario;
alter table classificacao_fiscal add constraint fk_classificacao_fiscal_cofins foreign key (cofins_saida_key) references cofins;
alter table classificacao_fiscal add constraint fk_classificacao_fiscal_pis foreign key (pis_saida_key) references pis;
alter table classificacao_fiscal_uf add constraint fk_class_fiscal_uf_class foreign key (classificacao_fiscal_key) references classificacao_fiscal;
alter table classificacao_fiscal_uf add constraint fk_class_fiscal_uf_uf foreign key (uf) references estado;
alter table classificacao_fiscal_uf add constraint fk_classificacao_uf_icm foreign key (icm_key) references icm;
alter table clau_acordo_prom add constraint fk_cl_acd_pro_tipo_cl_acd_pro foreign key (tipo_clau_acordo_prom_key) references tipo_clau_acordo_prom;
alter table clausula_contrato add constraint fk_clau_contr_tipo_clau_contr foreign key (tipo_clausula_key) references tipo_clausula_contrato;
alter table cliente add constraint fk_cliente_dia_semana foreign key (entrega_dia_final) references dia_semana;
alter table cliente add constraint fk_cliente_entrega_inicial foreign key (entrega_dia_inicial) references dia_semana;
alter table cliente add constraint fk_cliente_lj foreign key (loja_cadastro) references loja;
alter table cliente add constraint fk_cliente_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table cliente add constraint fk_cliente_ramo_atividade foreign key (ramo_atividade_key) references ramo_atividade;
alter table cliente add constraint fk_cliente_regiao_entrega foreign key (regiao_entrega_key) references regiao_entrega;
alter table cliente add constraint fk_cliente_status_credito foreign key (status_credito) references status_credito;
alter table cliente add constraint fk_cliente_vendedor foreign key (vendedor_key) references pessoa;
alter table cliente add constraint fk_cli_loja_atendimento foreign key (loja_atendimento) references loja;
alter table cliente add constraint fk_tipo_cliente foreign key (tipo_cliente_key) references tipo_cliente;
alter table cobranca add constraint fk_cobranca_ap foreign key (ap_key) references autorizacao_pagamento on delete cascade;
alter table cobranca add constraint fk_cob_tipo_cadastramento_cob foreign key (tipo_cadastramento_cob_key) references tipo_cadastramento_cob;
alter table cobranca add constraint fk_cob_tipo_cart_cob foreign key (tipo_carteira_cobranca_key) references tipo_carteira_cobranca;
alter table cobranca add constraint fk_cob_tipo_distribuicao_bloq foreign key (tipo_distribuicao_bloqueto_key) references tipo_distribuicao_bloqueto;
alter table cobranca add constraint fk_cob_tipo_emissao_bloq foreign key (tipo_emissao_bloqueto_key) references tipo_emissao_bloqueto;
alter table cof add constraint fk_cof_cof foreign key (codigo_complementar) references cof;
alter table cof add constraint fk_cof_tipo_base_credito_pis foreign key (tipo_base_credito_pis_key) references tipo_base_credito_pis;
alter table cof add constraint fk_cof_tipo_mov foreign key (tipo_movimento_key) references tipo_movimento;
alter table cof_tipo_pedido add constraint fk_cof foreign key (cof) references cof on delete cascade;
alter table cof_tipo_pedido add constraint fk_tipo_pedido foreign key (tipo_pedido_key) references tipo_pedido on delete cascade;
alter table cofins add constraint fk_cofins_pis_relacionado foreign key (pis_key_relacionado) references pis;
alter table cofins add constraint fk_cts_cofins foreign key (cst_pis_cofins_key) references cst_pis_cofins;
alter table competencia_contabil add constraint fk_competencia_contabil_exerc foreign key (exercicio_contabil_key) references exercicio_contabil;
alter table competencia_contabil_loja add constraint competencia_contabil_lj_pt_apu foreign key (partida_apuracao_key) references partida_dobrada;
alter table competencia_contabil_loja add constraint competencia_contabil_loja_stat foreign key (status_competencia_key) references status_competencia;
alter table competencia_contabil_loja add constraint fk_competencia_ct_lj_comp_cont foreign key (competencia_contabil_key) references competencia_contabil;
alter table competencia_contabil_loja add constraint fk_competencia_ct_lj_loja foreign key (loja_key) references loja;
alter table composicao add constraint fk_composicao_prod foreign key (produto_parte) references produto;
alter table composicao add constraint fk_composicao_prod_final foreign key (produto_final) references produto;
alter table comprador add constraint fk_comprador_pessoa foreign key (pessoa_key) references pessoa;
alter table conciliacao_extrato add constraint fk_conc_ext_movimento_bancario foreign key (movimento_bancario_key) references movimento_bancario on delete cascade;
alter table conciliacao_extrato add constraint fk_concialia_ext_banco_extrato foreign key (banco_extrato_key) references banco_extrato on delete cascade;
alter table conciliacao_fininvest add constraint fk_conc_fininvest_lj foreign key (loja_key) references loja;
alter table concorrente add constraint fk_concorrente_pessoa foreign key (pessoa_key) references pessoa;
alter table consulta_credito_diaria add constraint fk_consulta_credito_1 foreign key (estabelecimento_filial_key) references estabelecimento_filial;
alter table consulta_credito_diaria add constraint fk_consulta_credito_2 foreign key (tipo_consulta_credito_key) references tipo_consulta_credito;
alter table consulta_credito_periodo add constraint fk_consulta_credito_periodo_1 foreign key (tipo_consulta_credito_key) references tipo_consulta_credito;
alter table consulta_credito_periodo add constraint fk_consulta_credito_periodo_2 foreign key (estabelecimento_filial_key) references estabelecimento_filial;
alter table consulta_nfe add constraint fk_consulta_nfe_ambiente foreign key (tipo_ambiente_nfe_key) references tipo_ambiente_nfe;
alter table consulta_nfe add constraint fk_consulta_nfe_arq_remessa foreign key (arquivo_remessa) references arquivo_nfe;
alter table consulta_nfe add constraint fk_consulta_nfe_arq_retorno foreign key (arquivo_retorno) references arquivo_nfe;
alter table consulta_nfe add constraint fk_consulta_nfe_resp_nfe foreign key (tipo_resposta_nfe_key) references tipo_resposta_nfe;
alter table consulta_nfe add constraint fk_consulta_nfe_usuario foreign key (usuario_key) references usuario;
alter table consulta_status_servico_nfe add constraint fk_consulta_st_servico_ambient foreign key (tipo_ambiente_nfe_key) references tipo_ambiente_nfe;
alter table consulta_status_servico_nfe add constraint fk_consulta_st_servico_estado foreign key (uf) references estado;
alter table consulta_status_servico_nfe add constraint fk_consulta_st_servico_resp foreign key (tipo_resposta_nfe_key) references tipo_resposta_nfe;
alter table consulta_status_servico_nfe add constraint fk_consulta_st_servico_usuario foreign key (usuario_key) references usuario;
alter table consulta_status_servico_nfe add constraint fk_consulta_st_srv_arq_remessa foreign key (arquivo_remessa) references arquivo_nfe;
alter table consulta_status_servico_nfe add constraint fk_consulta_st_srv_arq_retorno foreign key (arquivo_retorno) references arquivo_nfe;
alter table conta_analitica add constraint fk_conta_anali_conta_sint foreign key (conta_sintetica_key) references conta_sintetica;
alter table conta_bancaria add constraint fk_conta_bancaria_ct_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table conta_bancaria add constraint fk_conta_bancaria_pessoa foreign key (pessoa_key) references pessoa;
alter table conta_bancaria add constraint fk_conta_bc_tipo_conta_bc foreign key (tipo_conta_bancaria_key) references tipo_conta_bancaria;
alter table conta_bancaria add constraint fk_cont_banc_agencia foreign key (agencia_key) references agencia;
alter table conta_bancaria add constraint fk_cont_banc_sit_conta foreign key (situacao_conta_key) references situacao_conta;
alter table conta_bancaria_cad_parms add constraint fk_cont_banc_cad_parms_bco foreign key (banco_key) references banco;
alter table conta_bancaria_dependente add constraint fk_cont_banc_dep_cont_banc foreign key (conta_bancaria_key) references conta_bancaria;
alter table conta_bancaria_dependente add constraint fk_cont_banc_dep_pessoa foreign key (pessoa_key) references pessoa;
alter table conta_bancaria_parms add constraint fk_cont_banc_parms_cont_banc foreign key (conta_bancaria_key) references conta_bancaria;
alter table conta_cobranca add constraint fk_conta_cob_cart_cob foreign key (carteira_cobranca_key) references carteira_cobranca;
alter table conta_cobranca add constraint fk_conta_cob_cont_banc foreign key (conta_bancaria_key) references conta_bancaria;
alter table conta_contabil add constraint fk_conta_contabil_primeir_grau foreign key (conta_de_primeiro_grau_key) references conta_contabil;
alter table conta_contabil add constraint fk_conta_cont_conta_cont foreign key (conta_superior) references conta_contabil;
alter table conta_contabil add constraint fk_conta_cont_plano_conta foreign key (plano_conta_key) references plano_conta;
alter table conta_fornecedor add constraint fk_conta_forn_forma_pag foreign key (forma_pagamento) references forma_pagamento;
alter table conta_fornecedor add constraint fk_conta_forn_lj foreign key (loja_key) references loja;
alter table conta_fornecedor add constraint fk_conta_forn_mod_acord_prom foreign key (modelo_acordo_prom_key) references modelo_acordo_prom;
alter table conta_fornecedor add constraint fk_conta_forn_mov_estoque foreign key (movimento_estoque_key) references movimento_estoque;
alter table conta_fornecedor add constraint fk_conta_forn_set_compra foreign key (setor_compra_key) references setor_compra;
alter table conta_fornecedor add constraint fk_conta_forn_tipo_lanc foreign key (tipo_lancamento_key) references tipo_lancamento;
alter table conta_fornecedor add constraint fk_conta_forn_usr foreign key (gerado_por) references usuario;
alter table conta_fornecedor add constraint fk_forn_div_cf foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table conta_fornecedor_mov_estoque add constraint fk_cfme_movimento_conta_forn foreign key (movimento_conta_fornecedor_key) references movimento_conta_fornecedor on delete cascade;
alter table conta_fornecedor_mov_estoque add constraint fk_cfme_movimento_estoque foreign key (movimento_estoque_key) references movimento_estoque on delete cascade;
alter table conta_sintetica add constraint fk_conta_sint_conta_sint foreign key (conta_superior) references conta_sintetica;
alter table conta_tipo_produto_bancario add constraint fk_ctpb_conta foreign key (conta_bancaria_key) references conta_bancaria on delete cascade;
alter table conta_tipo_produto_bancario add constraint fk_ctpb_tipo_produto foreign key (tipo_produto_bancario_key) references tipo_produto_bancario on delete cascade;
alter table contador add constraint fk_contador_estado foreign key (uf) references estado;
alter table contador add constraint fk_contador_pessoa foreign key (pessoa_key) references pessoa;
alter table contador_lote_nfe add constraint fk_contador_lote_nfe_loja foreign key (loja_key) references loja;
alter table contador_nota add constraint fk_contador_nota_lj foreign key (loja_key) references loja;
alter table contato add constraint fk_contato_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table contato add constraint fk_contato_tipo_contato foreign key (tipo_contato_key) references tipo_contato;
alter table contrato_carro_forte add constraint fk_ccf_conta_bancaria_key foreign key (conta_bancaria_key) references conta_bancaria;
alter table contrato_carro_forte add constraint fk_ccf_tipo_pessoa foreign key (transportadora) references tipo_pessoa;
alter table contrato_fornecimento add constraint fk_cf_aniversario foreign key (aniversario_pagamento) references forma_pagamento;
alter table contrato_fornecimento add constraint fk_cf_resol_compra foreign key (resolucao_devolucao_compra) references forma_pagamento;
alter table contrato_fornecimento add constraint fk_cf_resol_troca foreign key (resolucao_devolucao_troca) references forma_pagamento;
alter table contrato_fornecimento add constraint fk_contrato_fornecimento_model foreign key (modelo_contrato_forn_key) references modelo_contrato_fornecimento;
alter table contrato_fornecimento add constraint fk_contrato_forn_tipo_base_des foreign key (tipo_base_calculo_desconto_key) references tipo_base_calculo_desconto;
alter table contrato_fornecimento add constraint fk_contr_forn_condicao_pag foreign key (condicao_pagamento_key) references condicao_pagamento;
alter table contrato_fornecimento add constraint fk_contr_forn_forma_pag foreign key (fidelidade_pagamento) references forma_pagamento;
alter table contrato_fornecimento add constraint fk_contr_forn_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table contrato_fornecimento add constraint fk_contr_forn_pessoa foreign key (representante_key) references pessoa;
alter table contrato_fornecimento add constraint fk_contr_forn_ref_prazo foreign key (referencia_prazo_key) references referencia_prazo;
alter table contrato_fornecimento add constraint fk_contr_forn_res_troca foreign key (resolucao_troca_key) references resolucao_troca;
alter table contrato_fornecimento add constraint fk_contr_forn_tipo_forn foreign key (tipo_fornecimento_key) references tipo_fornecimento;
alter table contrato_fornecimento add constraint fk_contr_forn_tipo_pag foreign key (tipo_pagamento_key) references tipo_pagamento;
alter table contrato_fornecimento add constraint fk_contr_forn_usr foreign key (usuario_key) references usuario;
alter table contrato_fornecimento add constraint fk_tipo_frete foreign key (tipo_frete_key) references tipo_frete;
alter table contrato_fornecimento_clausula add constraint fk_contr_forn_clau_clau_contr foreign key (clausula_contrato_key) references clausula_contrato on delete cascade;
alter table contrato_fornecimento_clausula add constraint fk_contr_forn_clau_contr_forn foreign key (contrato_fornecimento_key) references contrato_fornecimento on delete cascade;
alter table contrato_servico add constraint fk_contrato_finan_tipo_perio foreign key (tipo_periodicidade_key) references tipo_periodicidade;
alter table contrato_servico add constraint fk_contrato_imovel_key foreign key (imovel_despesa_key) references imovel_despesa;
alter table contrato_servico add constraint fk_contrato_servico_municipio foreign key (municipio_key) references municipio;
alter table contrato_servico add constraint fk_contrato_servico_tipo_contr foreign key (tipo_contrato_financeiro_key) references tipo_contrato_financeiro;
alter table contrato_servico add constraint fk_contrato_servico_uf foreign key (estado_sigla) references estado;
alter table contrato_servico add constraint fk_contrato_svc_ct__cont_dest foreign key (conta_contabil_destino_key) references conta_contabil;
alter table contrato_servico add constraint fk_contrato_tipo_imovel foreign key (tipo_imovel_despesa_key) references tipo_imovel_despesa;
alter table contrato_servico add constraint fk_contr_serv_conta_cont foreign key (centro_custo_key) references conta_contabil;
alter table contrato_servico add constraint fk_contr_serv_lj foreign key (loja_key) references loja;
alter table contrato_servico add constraint fk_contr_serv_pessoa foreign key (pessoa_key) references pessoa;
alter table contrato_servico add constraint fk_contr_serv_usr foreign key (usuario_key) references usuario;
alter table contrato_servico add constraint fk_nf_tipo foreign key (nf_tipo_key) references nota_fiscal_tipo;
alter table conveniado add constraint fk_conveniado_cliente foreign key (pessoa_key) references cliente;
alter table conveniado add constraint fk_conveniado_convenio foreign key (convenio_key) references convenio;
alter table convenio add constraint fk_convenio_cliente foreign key (pessoa_key) references cliente;
alter table convenio_bancario add constraint fk_conv_banc_bco foreign key (banco_key) references banco;
alter table convenio_bancario add constraint fk_conv_banc_tipo_prod_banc foreign key (tipo_produto_bancario_key) references tipo_produto_bancario;
alter table convenio_bancario_loja add constraint fk_conv_banc_lj_conv_banc foreign key (convenio_bancario_key) references convenio_bancario;
alter table convenio_bancario_loja add constraint fk_conv_banc_lj_pessoa foreign key (loja_key) references pessoa;
alter table convenio_conta_bancaria add constraint fk_conta_bancaria foreign key (conta_bancaria_key) references conta_bancaria on delete cascade;
alter table convenio_conta_bancaria add constraint fk_convenio_bancario foreign key (convenio_bancario_key) references convenio_bancario on delete cascade;
alter table correntista add constraint fk_correntista_cont_banc foreign key (conta_bancaria_key) references conta_bancaria on delete cascade;
alter table correntista add constraint fk_correntista_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table cst_pis_cofins add constraint fk_cst_pis_cofins_complementar foreign key (cst_complementar_padrao) references cst_pis_cofins;
alter table cupom_devolvido add constraint fk_cupom_devol_nota_fiscal foreign key (nf_key) references nota_fiscal;
alter table cupom_devolvido add constraint fk_cupom_devolvido_loja foreign key (loja_key) references loja;
alter table cupom_devolvido add constraint fk_cupom_devolvido_tipo foreign key (tipo_cupom_devolvido_key) references tipo_cupom_devolvido;
alter table cupom_devolvido add constraint fk_cupom_devolvido_usuario foreign key (usuario_key) references usuario;
alter table cupom_devolvido add constraint fk_cupom_dev_usuario_estorno foreign key (usuario_estorno_key) references usuario;
alter table cupom_devolvido add constraint fk_k_cupom_devolvido_operador foreign key (operador_devolucao_key) references operador;
alter table cupom_fiscal add constraint fk_cupom_fiscal_calendario foreign key (calendario_key) references calendario;
alter table cupom_fiscal add constraint fk_nota_fiscal_cupom_fiscal foreign key (nf_key) references nota_fiscal;
alter table cupom_item add constraint fk_cupom_item_calendario foreign key (calendario_key) references calendario;
alter table cupom_item add constraint fk_cupom_item_cofins foreign key (cofins_key) references cofins;
alter table cupom_item add constraint fk_cupom_item_cupom_fiscal foreign key (cupom_fiscal_key) references cupom_fiscal;
alter table cupom_item add constraint fk_cupom_item_icm foreign key (icm_key) references icm;
alter table cupom_item add constraint fk_cupom_item_pis foreign key (pis_key) references pis;
alter table cupom_item add constraint fk_cupom_item_produto foreign key (produto_key) references produto;
alter table cupom_item_nota_fiscal_item add constraint fk_nf_cupom_nf_item_nf foreign key (nota_fiscal_item_key) references nota_fiscal_item on delete cascade;
alter table cupom_leitura add constraint fk_cupom_leitura_calendario foreign key (calendario_key) references calendario;
alter table cupom_leitura add constraint fk_cupom_leitura_cupom_fiscal foreign key (cupom_fiscal_key) references cupom_fiscal;
alter table cupom_recebimento add constraint fk_cupom_receb_calendario foreign key (calendario_key) references calendario;
alter table cupom_recebimento add constraint fk_cupom_receb_cupom_fiscal foreign key (cupom_fiscal_key) references cupom_fiscal;
alter table custo_falta add constraint fk_custo_falta_contr_forn foreign key (contrato) references contrato_fornecimento;
alter table custo_falta add constraint fk_custo_falta_icm foreign key (icm_key) references icm;
alter table custo_falta add constraint fk_custo_falta_list_falta foreign key (lista_falta_key) references lista_falta on delete cascade;
alter table custo_falta add constraint fk_custo_falta_prod foreign key (produto_key) references produto;
alter table custo_teorico add constraint fk_custo_teorico_prod foreign key (produto_key) references produto on delete cascade;
alter table dados_contas_receber add constraint fk_dados_conta_responsavel foreign key (responsavel1) references pessoa;
alter table dados_contas_receber add constraint fk_dados_contas_receber_pessoa foreign key (responsavel2) references pessoa;
alter table declaracao_importacao add constraint fk_declaracao_impor_forn_key foreign key (codigo_exportador) references fornecedor;
alter table declaracao_importacao add constraint fk_declaracao_impor_nf_key foreign key (nf_key) references nota_fiscal;
alter table declaracao_importacao add constraint fk_declaracao_impor_uf foreign key (uf) references estado;
alter table declaracao_importacao_item add constraint fk_decl_impor_item_decl_impor foreign key (declaracao_importacao_key) references declaracao_importacao;
alter table declaracao_importacao_item add constraint fk_decl_import_item_forn_key foreign key (codigo_fabricante) references fornecedor;
alter table depreciacao add constraint fk_depreciacao_cofins foreign key (cofins_key) references cofins;
alter table depreciacao add constraint fk_depreciacao_competencia foreign key (competencia_key) references competencia;
alter table depreciacao add constraint fk_depreciacao_escrita_apura foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table depreciacao add constraint fk_depreciacao_loja foreign key (loja_key) references loja;
alter table depreciacao add constraint fk_depreciacao_patrim_item foreign key (patrimonio_item_key) references patrimonio_item;
alter table depreciacao add constraint fk_depreciacao_pessoa_audit foreign key (auditor_key) references pessoa;
alter table depreciacao add constraint fk_depreciacao_pessoa_confer foreign key (conferente_key) references pessoa;
alter table depreciacao add constraint fk_depreciacao_pis foreign key (pis_key) references pis;
alter table depreciacao add constraint fk_depreciacao_status_escrita foreign key (status_escrita_fiscal_key) references status_escrita_fiscal;
alter table desconto add constraint fk_desconto_tipo_desconto foreign key (tipo_desconto_key) references tipo_desconto;
alter table desconto_ap add constraint fk_desc_ap_ap_key foreign key (ap_key) references autorizacao_pagamento on delete cascade;
alter table desconto_ap add constraint fk_desc_ap_desconto_key foreign key (desconto_key) references desconto on delete cascade;
alter table desconto_cobranca add constraint fk_desconto_cob_cob foreign key (cobranca_key) references cobranca on delete cascade;
alter table desconto_cobranca add constraint fk_desconto_cob_desconto foreign key (desconto_key) references desconto on delete cascade;
alter table dias_pagamento add constraint fk_dias_pag_contr_forn foreign key (contrato_fornecimento_key) references contrato_fornecimento on delete cascade;
alter table dias_recebimento add constraint fk_dias_receb_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table distribuicao_demanda add constraint fk_dist_demanda_dist_log_item foreign key (distribuicao_logist_item_key) references distribuicao_logistica_item;
alter table distribuicao_demanda add constraint fk_dist_demanda_tipo_est_vend foreign key (tipo_estatistica_venda_key) references tipo_estatistica_venda;
alter table distribuicao_logistica add constraint fk_dist_logist_item_pedido foreign key (item_pedido_cd_key) references item_pedido;
alter table distribuicao_logistica add constraint fk_distribuicao_logist_pessoa foreign key (loja_key) references loja;
alter table distribuicao_logistica add constraint fk_distribuicao_log_produto foreign key (produto_key) references produto;
alter table distribuicao_logistica add constraint fk_distribuicao_log_usuario foreign key (usuario_digitacao_key) references usuario;
alter table distribuicao_logistica add constraint fk_dist_tipo_dist_logist_key foreign key (tipo_distribuicao_logist_key) references tipo_distribuicao_logistica;
alter table distribuicao_logistica_item add constraint fk_dist_log_item_dist_log foreign key (distribuicao_logistica_key) references distribuicao_logistica;
alter table distribuicao_logistica_item add constraint fk_dist_log_item_item_pedido foreign key (item_pedido_destinatario_key) references item_pedido;
alter table distribuicao_logistica_item add constraint fk_dist_log_item_pessoa foreign key (destinatario_key) references pessoa;
alter table distribuicao_logistica_item add constraint fk_dist_log_item_usuario foreign key (usuario_cancelamento_key) references usuario;
alter table divergencia_impor_log_item add constraint fk_divergencia_impor_cd foreign key (cd_key) references loja;
alter table divergencia_impor_log_item add constraint fk_divergencia_impor_log_pai foreign key (divergencia_importacao_log_key) references divergencia_importacao_log;
alter table divergencia_impor_log_item add constraint fk_divergencia_impor_loja foreign key (loja_key) references loja;
alter table divergencia_impor_log_item add constraint fk_divergencia_impor_prod foreign key (produto_key) references produto;
alter table divergencia_importacao_log add constraint fk_divergencia_impor_log_usuar foreign key (usuario_key) references usuario;
alter table divisao_representante add constraint fk_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao on delete cascade;
alter table divisao_representante add constraint fk_rep foreign key (representante_key) references pessoa on delete cascade;
alter table edi_cartao_item add constraint fk_edi_cartao_item_adm foreign key (administradora_key) references administradora;
alter table edi_cartao_item add constraint fk_edi_cartao_item_cont_banc foreign key (conta_bancaria_key) references conta_bancaria;
alter table edi_cartao_item add constraint fk_edi_cartao_item_mov_cx foreign key (mov_caixa_key) references mov_caixa;
alter table edi_cartao_item add constraint fk_edi_cart_item_edi_cart_lt foreign key (edi_cartao_lote_key) references edi_cartao_lote;
alter table edi_cartao_linha add constraint fk_edi_cart_linha_edi_cart_lt foreign key (edi_cartao_lote_key) references edi_cartao_lote;
alter table empresa add constraint fk_empresa_pessoa foreign key (pessoa_key) references pessoa;
alter table endereco add constraint fk_endereco_estado foreign key (estado_sigla) references estado;
alter table endereco add constraint fk_endereco_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table endereco add constraint fk_endereco_tipo_endereco foreign key (tipo_endereco_key) references tipo_endereco;
alter table endereco add constraint fk_municipio foreign key (municipio_key) references municipio;
alter table endereco_logistico add constraint fk_endereco_logistico_area foreign key (endereco_logistico_area_key) references endereco_logistico_area;
alter table endereco_logistico add constraint fk_endereco_logistico_loja foreign key (loja_key) references loja;
alter table endereco_logistico add constraint fk_endereco_logistico_palete foreign key (palete_key) references palete;
alter table endereco_logistico add constraint fk_endereco_logistico_produto foreign key (produto_key) references produto;
alter table endereco_logistico add constraint fk_endereco_logistico_tipo foreign key (tipo_endereco_logistico_key) references tipo_endereco_logistico;
alter table endereco_logistico add constraint fk_endereco_logist_prod_orig foreign key (produto_origem_key) references produto;
alter table escrita_apuracao add constraint fk_escrita_apuracao_loja foreign key (loja_key) references loja;
alter table escrita_apuracao add constraint fk_escrita_apuracao_usuar foreign key (usuario_key) references usuario;
alter table escrita_apuracao_advertencia add constraint fk_esc_apur_advert_esc_apur foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table escrita_apuracao_advertencia add constraint fk_esc_apur_advert_tipo foreign key (tipo_escrita_apuracao_adv_key) references tipo_escrita_apuracao_advert;
alter table escrita_apuracao_fed_cred add constraint fk_escrita_ap_fed_cred_tipo_cr foreign key (tipo_credito_pis_cofins_key) references tipo_credito_pis_cofins;
alter table escrita_apuracao_fed_cred add constraint fk_escrita_apuracao_federal foreign key (escrita_apuracao_federal_key) references escrita_apuracao_federal;
alter table escrita_apuracao_fed_cred_det add constraint fk_escrita_ap_fed_cred_det_cst foreign key (cst_pis_cofins_key) references cst_pis_cofins;
alter table escrita_apuracao_fed_cred_det add constraint fk_escrita_apuracao_fed_cred foreign key (escrita_apuracao_fed_cred_key) references escrita_apuracao_fed_cred;
alter table escrita_apuracao_fed_cred_det add constraint fk_tipo_base_credito_pis foreign key (tipo_base_credito_pis_key) references tipo_base_credito_pis;
alter table escrita_apuracao_fed_deb add constraint fk_escrita_ap_fed_deb_pai foreign key (escrita_apuracao_federal_key) references escrita_apuracao_federal;
alter table escrita_apuracao_fed_deb add constraint fk_escrita_apuracao_fed_deb_tc foreign key (tipo_contr_apurada_pis_key) references tipo_contr_apurada_pis;
alter table escrita_apuracao_fed_deb_det add constraint fk_esc_apura_fed_deb_det_cst foreign key (cst_pis_cofins_key) references cst_pis_cofins;
alter table escrita_apuracao_fed_deb_det add constraint fk_esc_apura_fed_deb_det_deb foreign key (escrita_apuracao_fed_deb_key) references escrita_apuracao_fed_deb;
alter table escrita_apuracao_fed_deb_det add constraint fk_esc_apura_fed_deb_det_tdt foreign key (tipo_detalhe_deb_federal_key) references tipo_detalhe_deb_federal;
alter table escrita_apuracao_fed_rc_nt add constraint fk_esc_ap_fed_nt_cst foreign key (cst_pis_cofins_key) references cst_pis_cofins;
alter table escrita_apuracao_fed_rc_nt add constraint fk_esc_ap_fed_nt_esc_ap_fed foreign key (escrita_apuracao_federal_key) references escrita_apuracao_federal;
alter table escrita_apuracao_federal add constraint fk_escr_ap_fd_tipo_imposto_fd foreign key (tipo_imposto_federal_key) references tipo_imposto_federal;
alter table escrita_apuracao_federal add constraint fk_escrita_apuracao_federal_ea foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table escrita_apuracao_icms add constraint fk_escrita_apuracao_ap foreign key (ap_key) references autorizacao_pagamento;
alter table escrita_apuracao_icms add constraint fk_escrita_apuracao_icms_ea foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table escrita_apuracao_icms_item add constraint fk_escr_apur_item_escr_apur foreign key (escrita_apuracao_icms_key) references escrita_apuracao_icms;
alter table escrita_apuracao_icms_item add constraint fk_escrita_apur_item_cof foreign key (cof) references cof;
alter table escrita_apuracao_icms_item add constraint fk_escrita_apur_item_estado foreign key (uf) references estado;
alter table escrita_apuracao_uf add constraint fk_escrita_apuracao_uf_ea foreign key (escrita_apuracao_icms_key) references escrita_apuracao_icms;
alter table escrita_apuracao_uf add constraint fk_escrita_apuracao_uf_estado foreign key (uf) references estado;
alter table escrita_documento add constraint fk_auditor_escrita_doc foreign key (auditor_key) references usuario;
alter table escrita_documento add constraint fk_base_cred_pis_escrita_doc foreign key (tipo_base_credito_pis_key) references tipo_base_credito_pis;
alter table escrita_documento add constraint fk_cofins_escrita_doc foreign key (cofins_key) references cofins;
alter table escrita_documento add constraint fk_conferente_escrita_doc foreign key (conferente_key) references usuario;
alter table escrita_documento add constraint fk_duplicata_escrita_doc foreign key (duplicata_key) references autorizacao_pagamento;
alter table escrita_documento add constraint fk_esc_apuracao_escrita_doc foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table escrita_documento add constraint fk_loja_escrita_documento foreign key (loja_key) references loja;
alter table escrita_documento add constraint fk_partic_escrita_doc foreign key (participante_key) references pessoa;
alter table escrita_documento add constraint fk_pis_escrita_doc foreign key (pis_key) references pis;
alter table escrita_documento add constraint fk_status_escrita_doc foreign key (status_escrita_fiscal_key) references status_escrita_fiscal;
alter table escrita_documento add constraint fk_usuario_cancel_escrita_doc foreign key (usuario_cancelamento_key) references usuario;
alter table escrita_fiscal add constraint fk_ef_notaf_key foreign key (nf_key) references nota_fiscal;
alter table escrita_fiscal add constraint fk_esc_fisc_tipo_reg_sintegra foreign key (tipo_registro_sintegra_key) references tipo_registro_sintegra;
alter table escrita_fiscal add constraint fk_escrita_auditor foreign key (auditor_key) references usuario;
alter table escrita_fiscal add constraint fk_escrita_fiscal_ea foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table escrita_fiscal add constraint fk_escrita_fiscal_emitente foreign key (emitente_key) references pessoa;
alter table escrita_fiscal add constraint fk_escrita_fiscal_usuario_canc foreign key (usuario_cancelamento_key) references usuario;
alter table escrita_fiscal add constraint fk_escrita_fisc_pessoa foreign key (destinatario_key) references pessoa;
alter table escrita_fiscal add constraint fk_escrita_fisc_uf_dest foreign key (uf_destinatario) references estado;
alter table escrita_fiscal add constraint fk_escrita_fisc_uf_rem foreign key (uf_remetente) references estado;
alter table escrita_fiscal add constraint fk_escrita_fisc_usr foreign key (conferente_key) references usuario;
alter table escrita_fiscal add constraint fk_escrita_frete foreign key (escrita_fiscal_frete_key) references escrita_fiscal;
alter table escrita_fiscal add constraint fk_escrita_remetente foreign key (remetente_key) references pessoa;
alter table escrita_fiscal add constraint fk_status_esc_fiscal_key foreign key (status_escrita_fiscal_key) references status_escrita_fiscal;
alter table escrita_fiscal add constraint fk_tipo_documento_fiscal foreign key (tipo_documento_fiscal_key) references tipo_documento_fiscal;
alter table escrita_fiscal add constraint fk_tipo_modelo_nf foreign key (tipo_modelo_nf_key) references tipo_modelo_nf;
alter table escrita_fiscal_ajuste add constraint fk_ef_escrita_ajuste foreign key (escrita_fiscal_key) references escrita_fiscal;
alter table escrita_fiscal_ajuste add constraint fk_esc_ajuste_auditor foreign key (auditor_key) references usuario;
alter table escrita_fiscal_ajuste add constraint fk_esc_ajuste_conferente foreign key (conferente_key) references usuario;
alter table escrita_fiscal_ajuste add constraint fk_esc_ajuste_processo_fiscal foreign key (processo_fiscal_key) references processo_fiscal;
alter table escrita_fiscal_ajuste add constraint fk_esc_ajuste_status_esc foreign key (status_escrita_fiscal_key) references status_escrita_fiscal;
alter table escrita_fiscal_ajuste add constraint fk_escrita_ajuste_loja foreign key (loja_key) references loja;
alter table escrita_fiscal_ajuste add constraint fk_escrita_ajuste_origem foreign key (origem_esc_fiscal_ajuste_key) references origem_escrita_fiscal_ajuste;
alter table escrita_fiscal_ajuste add constraint fk_escrita_ajuste_tipo foreign key (tipo_escrita_fiscal_ajuste_key) references tipo_escrita_fiscal_ajuste;
alter table escrita_fiscal_ajuste add constraint fk_escrita_fiscal_ajuste_ea foreign key (escrita_apuracao_key) references escrita_apuracao;
alter table escrita_fiscal_detalhe add constraint fk_escrita_detalhe_escrita foreign key (escrita_fiscal_key) references escrita_fiscal;
alter table escrita_fiscal_item add constraint fk_ef__cof foreign key (cof) references cof;
alter table escrita_fiscal_item add constraint fk_ef__ef_item_key foreign key (escrita_fiscal_key) references escrita_fiscal;
alter table escrita_fiscal_item add constraint fk_esc_fiscal_cofins foreign key (cofins_key) references cofins;
alter table escrita_fiscal_item add constraint fk_esc_fiscal_pis foreign key (pis_key) references pis;
alter table escrita_fiscal_item add constraint fk_escrita_fiscal_item_icm foreign key (icm_key) references icm;
alter table escrita_fiscal_item add constraint fk_escrita_fiscal_item_nfinp foreign key (nota_fiscal_item_key) references nota_fiscal_item;
alter table escrita_fiscal_observacao add constraint fk_escrita_fiscal foreign key (escrita_fiscal_key) references escrita_fiscal;
alter table escrita_fiscal_observacao add constraint fk_modelo_observacao_fiscal foreign key (modelo_observacao_fiscal_key) references modelo_observacao_fiscal;
alter table escrita_fiscal_ocorrencia add constraint fk_esc_fiscal_oco_escr foreign key (escrita_fiscal_key) references escrita_fiscal;
alter table escrita_fiscal_ocorrencia add constraint fk_esc_fiscal_oco_usu foreign key (usuario_key) references usuario;
alter table esquema_contabil add constraint fk_esquema_contabil_processo foreign key (processo_contabil_key) references processo_contabil;
alter table estabelecimento_filial add constraint fk_estabelecimento_captura foreign key (tipo_captura_key) references tipo_captura;
alter table estabelecimento_filial add constraint fk_estabelecimento_filial_1 foreign key (estabelecimento_matriz_key) references estabelecimento_matriz;
alter table estabelecimento_filial add constraint fk_estabelecimento_filial_2 foreign key (loja_key) references loja;
alter table estabelecimento_matriz add constraint fk_estabelecimento_matriz_1 foreign key (administradora_key) references administradora;
alter table estado_patrimonio_item add constraint fk_estado_patrim_item_sigla foreign key (estado_sigla) references estado;
alter table exportacao_redf add constraint fk_exportacao_redf_escrita foreign key (escrita_fiscal_key) references escrita_fiscal;
alter table exportacao_redf add constraint fk_exportacao_redf_loja foreign key (loja_key) references loja;
alter table exportacao_redf add constraint fk_exportacao_redf_usuario foreign key (usuario_key) references usuario;
alter table factoring add constraint fk_factoring foreign key (pessoa_key) references pessoa;
alter table fechamento_caixa_operador add constraint fk_fco_usuario foreign key (usuario_key) references usuario;
alter table fechamento_caixa_operador add constraint fk_fech_caixa_operador_loja foreign key (loja_key) references loja;
alter table fechamento_caixa_operador add constraint fk_fech_caixa_oper_operador foreign key (operador_key) references operador;
alter table ficha_estoque add constraint fk_ficha_estoque_lj foreign key (loja_key) references loja;
alter table ficha_estoque add constraint fk_ficha_estoque_prod foreign key (produto_key) references produto on delete cascade;
alter table ficha_estoque_troca add constraint fk_ficha_estoque_loja foreign key (loja_key) references loja;
alter table ficha_estoque_troca add constraint fk_ficha_estoque_produto foreign key (produto_key) references produto;
alter table folha_pagamento add constraint fk_folha_pagamento_competencia foreign key (competencia_key) references competencia;
alter table folha_pagamento add constraint fk_folha_pagamento_loja foreign key (loja_key) references loja;
alter table folha_pagamento_detalhe add constraint fk_folha_pgto_detalhe_func foreign key (folha_pgto_funcionario_key) references folha_pagamento_funcionario;
alter table folha_pagamento_detalhe add constraint fk_folha_pgto_detalhe_tipo foreign key (tipo_folha_pagamento_key) references tipo_folha_pagamento;
alter table folha_pagamento_funcionario add constraint fk_folha_pgto_func_folha foreign key (folha_pagamento_key) references folha_pagamento;
alter table folha_pagamento_funcionario add constraint fk_folha_pgto_func_funcionario foreign key (funcionario_key) references funcionario;
alter table fornecedor add constraint fk_fornecedor_matriz_forn foreign key (fornecedor_matriz_key) references fornecedor;
alter table fornecedor add constraint fk_forn_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table fornecedor add constraint fk_forn_van_edi foreign key (van_edi_key) references van_edi;
alter table fornecedor_divisao add constraint fk_forn_div_forn foreign key (fornecedor_key) references fornecedor on delete cascade;
alter table fornecedor_divisao add constraint fk_forn_div_forn_div foreign key (fornecedor_superior,linha_superior) references fornecedor_divisao on delete cascade;
alter table fornecedor_produto add constraint fk_fornecedor_prod_tipo_emb foreign key (tipo_embalagem_faturamento_key) references tipo_embalagem_faturamento;
alter table fornecedor_produto add constraint fk_forn_prod_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table fornecedor_produto add constraint fk_forn_prod_prod foreign key (produto_key) references produto on delete cascade;
alter table func_afastamento add constraint fk_func_afastamento_func foreign key (funcionario_key) references funcionario;
alter table func_afastamento add constraint fk_func_afastamento_motivo foreign key (func_motivo_afastamento_key) references func_motivo_afastamento;
alter table func_dependente add constraint fk_func_dependente_funcionario foreign key (funcionario_key) references funcionario;
alter table func_dependente add constraint fk_func_dependente_grau_parent foreign key (func_grau_parentesco_key) references func_grau_parentesco;
alter table func_ferias add constraint fk_func_ferias_funcionario foreign key (funcionario_key) references funcionario;
alter table func_funcao add constraint fk_func_funcao_ant_efetiva foreign key (funcao_anterior_efetiva_key) references funcao;
alter table func_funcao add constraint fk_func_funcao_ant_registro foreign key (funcao_anterior_registro_key) references funcao;
alter table func_funcao add constraint fk_func_funcao_funcionario foreign key (funcionario_key) references funcionario;
alter table func_funcao add constraint fk_func_funcao_reaj_efetiva foreign key (funcao_reajustada_efetiva_key) references funcao;
alter table func_funcao add constraint fk_func_funcao_reaj_registro foreign key (funcao_reajustada_registro_key) references funcao;
alter table func_historico add constraint fk_func_historico_funcionario foreign key (funcionario_key) references funcionario;
alter table func_salario add constraint fk_func_salario_funcionario foreign key (funcionario_key) references funcionario;
alter table func_salario add constraint fk_func_salario_motivo_ajuste foreign key (func_motivo_ajuste_salario_key) references func_motivo_ajuste_salario;
alter table funcao add constraint fk_funcao_secao foreign key (secao_key) references secao;
alter table funcionario add constraint fk_func_estado foreign key (carteira_profissional_estado) references estado;
alter table funcionario add constraint fk_func_funcao foreign key (funcao_efetiva) references funcao;
alter table funcionario add constraint fk_funcionario_banco foreign key (banco_conta_salario_key) references banco;
alter table funcionario add constraint fk_funcionario_funcao foreign key (funcao_registro) references funcao;
alter table funcionario add constraint fk_funcionario_loja_efetiva foreign key (loja_efetiva) references loja;
alter table funcionario add constraint fk_funcionario_sindicato foreign key (sindicato_key) references sindicato;
alter table funcionario add constraint fk_funcionario_tipo_instrucao foreign key (tipo_grau_de_instrucao_key) references tipo_grau_de_instrucao;
alter table funcionario add constraint fk_funcionario_tipo_sanguineo foreign key (tipo_sanguineo_key) references tipo_sanguineo;
alter table funcionario add constraint fk_func_lj foreign key (loja_registro) references loja;
alter table funcionario add constraint fk_func_pessoa foreign key (pessoa_key) references pessoa;
alter table funcionario add constraint fk_func_status_func foreign key (status_funcionario_key) references status_funcionario;
alter table funcionario_pensionista add constraint fk_funcionario_pensionista_fun foreign key (funcionario_key) references funcionario;
alter table funcionario_pensionista add constraint fk_funcionario_pensionista_pen foreign key (pensionista_key) references pessoa;
alter table funcionario_vale_compra add constraint fk_func_vale_compra_pessoa foreign key (pessoa_key) references pessoa;
alter table governo_estadual add constraint fk_governo_estadual_estado foreign key (uf) references estado;
alter table grupo_acesso_conta_contabil add constraint fk_grupo_acesso_conta foreign key (conta_contabil_key) references conta_contabil on delete cascade;
alter table grupo_acesso_conta_contabil add constraint fk_grupo_acesso_grupo foreign key (grupo_acesso_key) references grupo on delete cascade;
alter table grupo_acesso_regiao_preco add constraint fk_grupo_ac_reg_grupo foreign key (grupo_acesso_key) references grupo on delete cascade;
alter table grupo_acesso_regiao_preco add constraint fk_grupo_ac_reg_preco foreign key (regiao_preco_key) references regiao_preco on delete cascade;
alter table grupo_acesso_secao_preco add constraint fk_grupo_ac_sec_grupo foreign key (grupo_acesso_key) references grupo on delete cascade;
alter table grupo_acesso_secao_preco add constraint fk_grupo_ac_sec_secao foreign key (secao_key) references secao on delete cascade;
alter table grupo_produto add constraint fk_gp_prod_secao foreign key (secao_key) references secao;
alter table grupo_usuario add constraint fk_gp_usr_gp foreign key (grupo_key) references grupo on delete cascade;
alter table grupo_usuario add constraint fk_gp_usr_usr foreign key (usuario_key) references usuario on delete cascade;
alter table guia_carro_forte add constraint fk_gcf_contrato_key foreign key (contrato_carro_forte_key) references contrato_carro_forte;
alter table guia_carro_forte add constraint fk_gcf_pessoa_key foreign key (usuario_key) references usuario;
alter table guia_carro_forte_mov_caixa add constraint fk_guia_car_mov_cx_guia_car foreign key (guia_carro_forte_key) references guia_carro_forte on delete cascade;
alter table guia_carro_forte_mov_caixa add constraint fk_guia_carro_ft_mov_cx_mov_cx foreign key (mov_caixa_key) references mov_caixa on delete cascade;
alter table guia_diferenca add constraint fk_gd_gmotivo foreign key (guia_motivo_diferenca_key) references guia_motivo_diferenca;
alter table guia_diferenca add constraint fk_gd_guia_dif foreign key (guia_carro_forte_key) references guia_carro_forte;
alter table guia_diferenca add constraint fk_gd_usuario foreign key (usuario_key) references usuario;
alter table guia_recolhimento add constraint fk_guia_recolhi_guia_rec_deta foreign key (tipo_guia_recolhi_detalhe_key) references tipo_guia_recolhimento_detalhe;
alter table guia_recolhimento add constraint fk_guia_recolhimento_ap foreign key (ap_key) references autorizacao_pagamento;
alter table guia_recolhimento add constraint fk_guia_recolhimento_lj foreign key (loja_key) references loja;
alter table guia_recolhimento add constraint fk_guia_recolhimento_status foreign key (status_guia_recolhimento_key) references status_guia_recolhimento;
alter table guia_recolhimento add constraint fk_guia_recolhimento_tp_impt foreign key (tipo_imposto_key) references tipo_imposto;
alter table guia_recolhimento add constraint fk_guia_recolhimento_tp_rec foreign key (tipo_receita_tributaria_key) references tipo_receita_tributaria;
alter table guia_recolhimento add constraint fk_guia_recolhimento_usuario foreign key (usuario_key) references usuario;
alter table guia_recolhimento_escrita add constraint fk_guia_reco_escr_escri_fisc foreign key (escrita_fiscal_key) references escrita_fiscal;
alter table guia_recolhimento_escrita add constraint fk_guia_reco_escr_guia_rec foreign key (guia_recolhimento_key) references guia_recolhimento;
alter table historico_pdv add constraint fk_hist_pdv_tipo_lanc_cx foreign key (tipo_lancamento_caixa_key) references tipo_lancamento_caixa;
alter table icm add constraint fk_csosn foreign key (csosn_key) references csosn;
alter table icm add constraint fk_icm_aliquota_icm foreign key (aliquota) references aliquota_icm;
alter table icm add constraint fk_icm_cst_origem foreign key (codigo_origem) references cst_origem;
alter table icm add constraint fk_icm_cst_tributacao foreign key (codigo_tributacao) references cst_tributacao;
alter table icm_sub_grupo add constraint fk_icm_sub_gp_icm foreign key (icm_key) references icm on delete cascade;
alter table icm_sub_grupo add constraint fk_icm_sub_gp_sub_gp_prod foreign key (subgrupo_produto_key) references sub_grupo_produto on delete cascade;
alter table icm_venda add constraint fk_icm_venda_estado foreign key (estado_sigla) references estado;
alter table icm_venda add constraint fk_icm_venda_icm foreign key (icm_key) references icm;
alter table icm_venda add constraint fk_icm_venda_icm_atacado foreign key (icms_atacado_key) references icm;
alter table icm_venda add constraint fk_icm_venda_prod foreign key (produto_key) references produto on delete cascade;
alter table imovel_despesa add constraint fk_imovel_despesa_estado foreign key (estado) references estado;
alter table imovel_despesa add constraint fk_imovel_despesa_loja foreign key (loja_key) references loja;
alter table importacao_conta_bancaria add constraint fk_imp_cont_banc_tipo_insc foreign key (tipo_inscricao_key) references tipo_inscricao;
alter table importacao_estabelecimento add constraint fk_importacao_estabelecimento foreign key (administradora_key) references administradora;
alter table importacao_pessoa add constraint fk_imp_pessoa_tipo_insc foreign key (tipo_inscricao_key) references tipo_inscricao;
alter table importacao_pessoa add constraint fk_imp_pessoa_tipo_pessoa_desc foreign key (tipo_pessoa_descricao_key) references tipo_pessoa_descricao;
alter table informacao_nutricional add constraint fk_inf_nutr_med_caseira_dec foreign key (medida_caseira_decimal_key) references medida_caseira_decimal;
alter table informacao_nutricional add constraint fk_inf_nutr_med_caseira_desc foreign key (medida_caseira_descricao_key) references medida_caseira_descricao;
alter table informacao_nutricional add constraint fk_inf_nutr_prod foreign key (produto_key) references produto;
alter table informacao_nutricional add constraint fk_inf_nutr_unidade_porcao foreign key (unidade_porcao_key) references unidade_porcao;
alter table inventario add constraint fk_inv_inv foreign key (inventario_key_anterior) references inventario;
alter table inventario add constraint fk_inv_inv_geral foreign key (inventario_geral) references inventario_geral on delete cascade;
alter table inventario add constraint fk_inv_lj foreign key (loja_key) references loja;
alter table inventario_geral_item add constraint fk_inv_geral_item_inv_geral foreign key (inventario_geral) references inventario_geral on delete cascade;
alter table inventario_geral_item add constraint fk_inv_geral_item_prod foreign key (produto_key) references produto on delete cascade;
alter table inventario_item add constraint fk_inv_item_inv_lt foreign key (inventario_key,lote) references inventario_lote on delete cascade;
alter table inventario_lote add constraint fk_inventario_lote_area foreign key (area) references inventario_area;
alter table inventario_lote add constraint fk_inventario_lote_terceiro foreign key (terceiro_key) references pessoa;
alter table inventario_lote add constraint fk_inv_lt_inv foreign key (inventario_key) references inventario on delete cascade;
alter table inventario_movimento add constraint fk_inv_mov_inv foreign key (inventario_key) references inventario on delete cascade;
alter table inventario_movimento add constraint fk_inv_mov_prod foreign key (produto_key) references produto;
alter table inventario_movimento_detalhe add constraint fk_inventario_mov_det_ind_poss foreign key (indicador_de_propriedade_key) references indicador_de_propriedade;
alter table inventario_movimento_detalhe add constraint fk_inventario_mov_det_inventar foreign key (inventario_key) references inventario;
alter table inventario_movimento_detalhe add constraint fk_inventario_mov_det_produto foreign key (produto_key) references produto;
alter table inventario_movimento_detalhe add constraint fk_inventario_mov_det_terceiro foreign key (terceiro_key) references pessoa;
alter table inventario_saldo add constraint fk_inv_saldo_inv foreign key (inventario_key) references inventario on delete cascade;
alter table inventario_saldo add constraint fk_inv_saldo_prod foreign key (produto_key) references produto;
alter table inventario_troca add constraint fk_inventario_troca_loja foreign key (loja_key) references loja;
alter table inventario_troca add constraint fk_inventario_troca_usuario foreign key (usuario_key) references usuario;
alter table inventario_troca_item add constraint fk_inv_troca_item_inv_troca foreign key (inventario_troca_key) references inventario_troca;
alter table inventario_troca_item add constraint fk_inv_troca_item_mov_estoque foreign key (movimento_estoque_key) references movimento_estoque;
alter table ipi add constraint fk_cst_ipi foreign key (cst_ipi_key) references cst_ipi;
alter table item add constraint fk_item_prod foreign key (produto_key) references produto on delete cascade;
alter table item_cupom_devolvido add constraint fk_cupom_devolvido_item foreign key (cupom_devolvido_key) references cupom_devolvido;
alter table item_cupom_devolvido add constraint fk_item_cp_devolvido_prod foreign key (produto_key) references produto;
alter table item_falta add constraint fk_item_falta_list_falta foreign key (lista_falta_key) references lista_falta on delete cascade;
alter table item_falta add constraint fk_item_falta_lj foreign key (loja_key) references loja;
alter table item_falta add constraint fk_item_falta_prod foreign key (produto_key) references produto;
alter table item_pedido add constraint fk_item_pedido_cd foreign key (cd_key) references loja;
alter table item_pedido add constraint fk_item_pedido_neg_item foreign key (negociacao_item_key) references negociacao_item;
alter table item_pedido add constraint fk_item_pedido_pedido foreign key (pelt_key) references pedido on delete cascade;
alter table item_pedido add constraint fk_item_pedido_prod_vd foreign key (produto_venda_key) references produto;
alter table item_pedido add constraint fk_item_pedido_usuario_ap foreign key (usuario_aprovacao) references usuario;
alter table item_pedido add constraint fk_item_ped_prod foreign key (produto_key) references produto;
alter table item_pedido_falta add constraint fk_item_ped_falta_custo_falta foreign key (custo_falta_key) references custo_falta on delete cascade;
alter table item_pedido_falta add constraint fk_item_ped_falta_item_falta foreign key (item_falta_key) references item_falta on delete cascade;
alter table lancamento_loja add constraint fk_lanc_lj_lj foreign key (loja_key) references loja;
alter table lancamento_loja add constraint fk_lanc_lj_operador foreign key (operador_key) references operador;
alter table lancamento_loja add constraint fk_lanc_lj_pessoa foreign key (pessoa_key) references pessoa;
alter table lancamento_loja add constraint fk_lanc_lj_tipo_lanc_cx foreign key (tipo_lancamento_caixa_key) references tipo_lancamento_caixa;
alter table lancamento_loja add constraint fk_ll_fiscal foreign key (fiscal_key) references operador;
alter table lancamento_loja_saldo add constraint fk_lanc_lj_saldo_lj foreign key (loja_key) references loja;
alter table leitura_z add constraint fk_leitura_z_lj foreign key (loja_key) references loja;
alter table leitura_z add constraint fk_leitura_z_vd_tipo_trans foreign key (vd_tipo_transacao_key) references vd_tipo_transacao;
alter table linha_cd add constraint fk_linha_cd_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table linha_cd add constraint fk_linha_cd_lj foreign key (cd_key) references loja;
alter table linha_cd add constraint fk_linha_cd_loja foreign key (loja_key) references loja;
alter table linha_cd add constraint fk_linha_cd_prod foreign key (produto_key) references produto;
alter table linha_compra add constraint fk_linha_compra_comprador foreign key (comprador_key) references comprador on delete cascade;
alter table linha_compra add constraint fk_linha_compra_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao on delete cascade;
alter table linha_compra add constraint fk_linha_compra_linha_lj foreign key (loja_key,produto_key) references linha_loja on delete cascade;
alter table linha_loja add constraint fk_linha_lj_lj foreign key (loja_key) references loja;
alter table linha_loja add constraint fk_linha_lj_prod foreign key (produto_key) references produto on delete cascade;
alter table lista_falta_geral add constraint fk_list_falta_geral_list_falta foreign key (lista_falta_key) references lista_falta on delete cascade;
alter table lista_falta_pedido_master add constraint fk_lista_falta_pedido_master foreign key (pedido_key) references pedido_master on delete cascade;
alter table lista_produto_fornecedor add constraint fk_list_prod_forn_forn foreign key (fornecedor_key) references fornecedor;
alter table lista_produto_fornecedor add constraint fk_list_prod_forn_list_prod foreign key (lista_produto_key) references lista_produto;
alter table lista_produto_item add constraint fk_list_prod_item_list_prod foreign key (lista_produto_key) references lista_produto on delete cascade;
alter table lista_produto_item add constraint fk_list_prod_item_prod foreign key (produto_key) references produto on delete cascade;
alter table log_arquivo_nfe_recebido add constraint arquivo_nfe_recebido_gravidade foreign key (tipo_gravidade_log_key) references tipo_gravidade_log;
alter table log_arquivo_nfe_recebido add constraint fk_ind_log_arq_nfe_arq foreign key (arquivo_nfe_recebido_key) references arquivo_nfe_recebido;
alter table log_arquivo_nfe_recebido add constraint fk_log_arq_nfe_rec_tipo_log foreign key (tipo_log_arquivo_nfe_receb_key) references tipo_log_arquivo_nfe_receb;
alter table log_baixa_venda add constraint fk_baixa_venda_loja foreign key (loja_key) references loja;
alter table log_baixa_venda add constraint fk_baixa_venda_movimento foreign key (tipo_movimento_key) references tipo_movimento;
alter table log_baixa_venda add constraint fk_log_baixa_venda_usuario foreign key (usuario_key) references usuario;
alter table log_grupo add constraint fk_log_grupo_gru foreign key (grupo_key) references grupo;
alter table log_grupo add constraint fk_log_grupo_perm foreign key (permissao_key) references permissao;
alter table log_grupo add constraint fk_log_grupo_usu foreign key (usuario_key) references usuario;
alter table log_parametro add constraint fk_log_param_parametro_key foreign key (parametro_key) references parametro;
alter table log_parametro add constraint fk_log_param_tipo_parametro foreign key (tipo_parametro_key) references tipo_parametro;
alter table log_parametro add constraint fk_log_param_usuario foreign key (usuario_key) references usuario;
alter table log_permissao add constraint fk_log_permissao_grupo foreign key (grupo_key) references grupo;
alter table log_permissao add constraint fk_log_permissao_usu foreign key (usuario_key) references usuario;
alter table log_permissao add constraint fk_log_permissao_usu_alt foreign key (usuario_alteracao_key) references usuario;
alter table log_prorrogacao_ofertas add constraint fk_log_prorrog_ofertas_pessoa foreign key (alterado_por) references pessoa;
alter table log_sistema add constraint fk_log_sistema_tipo_log foreign key (tipo_log_key) references tipo_log;
alter table log_sistema add constraint fk_log_sistema_usr foreign key (usuario_key) references usuario;
alter table logistica_carga add constraint fk_logist_carga_lj foreign key (cd_key) references loja;
alter table logistica_lote add constraint fk_logis_lote_geracao foreign key (usuario_geracao_key) references usuario;
alter table logistica_lote add constraint fk_logist_lt_logist_carga foreign key (logistica_carga_key) references logistica_carga;
alter table logistica_lote add constraint fk_logist_lt_pessoa foreign key (destinatario_key) references pessoa;
alter table logistica_lote add constraint fk_logist_lt_tipo_sep foreign key (tipo_separacao_key) references tipo_separacao;
alter table logistica_lote add constraint fk_logist_lt_usr foreign key (usuario_separacao_key) references usuario;
alter table logistica_lote add constraint fk_logist_lt_usr_conf foreign key (usuario_conferencia_key) references usuario;
alter table logistica_lote_item add constraint fk_logist_lote_it_reser_est_it foreign key (reserva_estoque_item_key) references reserva_estoque_item;
alter table logistica_lote_item add constraint fk_logist_lt_item_icm foreign key (icm_faturado_key) references icm;
alter table logistica_lote_item add constraint fk_logist_lt_item_logist_lt foreign key (logistica_lote_key) references logistica_lote;
alter table logistica_lote_item add constraint fk_logist_lt_item_nf foreign key (nf_key) references nota_fiscal;
alter table logistica_lote_item add constraint fk_logist_lt_item_prod foreign key (produto_key) references produto;
alter table loja add constraint fk_lj_dados_contas_receber foreign key (dados_contas_receber_key) references dados_contas_receber;
alter table loja add constraint fk_lj_lj foreign key (cd_key) references loja;
alter table loja add constraint fk_lj_pessoa foreign key (pessoa_key) references pessoa;
alter table loja add constraint fk_lj_rede foreign key (rede_key) references rede;
alter table loja add constraint fk_lj_regiao_preco foreign key (regiao_preco_key) references regiao_preco;
alter table loja add constraint fk_lj_tipo_regime_trib foreign key (tipo_regime_tributario_key) references tipo_regime_tributario;
alter table loja add constraint fk_loja_bandeira foreign key (bandeira_key) references bandeira;
alter table loja add constraint fk_loja_cnae foreign key (cnae_key) references cnae;
alter table loja add constraint fk_loja_contador foreign key (contador_key) references contador;
alter table loja add constraint fk_loja_empresa foreign key (empresa_key) references empresa;
alter table loja add constraint fk_loja_loja_troca foreign key (loja_troca_key) references loja;
alter table loja add constraint fk_loja_matriz foreign key (loja_matriz_key) references loja;
alter table loja add constraint fk_loja_ramo_atividade foreign key (loja_ramo_atividade_key) references loja_ramo_atividade;
alter table loja add constraint fk_loja_tipo_ambiente_nfe foreign key (tipo_ambiente_nfe_key) references tipo_ambiente_nfe;
alter table loja add constraint fk_tipo_classificacao_loja foreign key (classificacao) references tipo_classificacao_loja;
alter table loja_balanca add constraint fk_lj_bal_lj foreign key (loja_key) references loja on delete cascade;
alter table loja_balanca add constraint fk_lj_bal_tipo_bal foreign key (balanca_key) references tipo_balanca on delete cascade;
alter table loja_cartao_baixa add constraint fk_lj_cartao_bx_conta_cont foreign key (conta_credito) references conta_contabil;
alter table loja_cartao_baixa add constraint fk_lj_cartao_bx_lj foreign key (loja_key) references loja;
alter table loja_cartao_baixa add constraint fk_lj_cartao_bx_tipo_lanc_cx foreign key (tipo_lancamento_caixa_key) references tipo_lancamento_caixa;
alter table loja_cartao_baixa add constraint fk_loja_cartao_baixa_conta foreign key (conta_debito) references conta_contabil;
alter table loja_pdv add constraint fk_lj_pdv_lj foreign key (loja_key) references loja;
alter table loja_pdv add constraint fk_lj_pdv_tipo_pdv foreign key (tipo_pdv_key) references tipo_pdv;
alter table loja_tipo_balanca add constraint fk_loja_tipo_balanca_balanca foreign key (tipo_balanca_key) references tipo_balanca on delete cascade;
alter table loja_tipo_balanca add constraint fk_loja_tipo_balanca_loja foreign key (loja_key) references loja on delete cascade;
alter table loja_tipo_etiqueta add constraint fk_loja_tipo_etiqueta_etiqueta foreign key (tipo_etiqueta_key) references tipo_etiqueta on delete cascade;
alter table loja_tipo_etiqueta add constraint fk_loja_tipo_etiqueta_loja foreign key (loja_key) references loja on delete cascade;
alter table loja_tipo_pdv add constraint fk_loja_tipo_pdv_loja foreign key (loja_key) references loja on delete cascade;
alter table loja_tipo_pdv add constraint fk_loja_tipo_pdv_pdv foreign key (tipo_pdv_key) references tipo_pdv on delete cascade;
alter table loja_tipo_terminal_consulta add constraint fk_loja_tipo_terminal_loja foreign key (loja_key) references loja on delete cascade;
alter table loja_tipo_terminal_consulta add constraint fk_loja_tipo_terminal_terminal foreign key (tipo_terminal_consulta_key) references tipo_terminal_consulta on delete cascade;
alter table lote_troca add constraint fk_lt_troca_lj foreign key (loja_key) references loja;
alter table lote_troca add constraint fk_lt_troca_pessoa foreign key (pessoa_key) references pessoa;
alter table lote_troca_item add constraint fk_lote_troca_item_motivo foreign key (motivo_troca_key) references motivo_troca;
alter table lote_troca_item add constraint fk_lote_troca_mov_estoque foreign key (movimento_estoque_key) references movimento_estoque;
alter table lote_troca_item add constraint fk_lt_troca_item_lt_troca foreign key (lote_troca_key) references lote_troca;
alter table lote_troca_item add constraint fk_lt_troca_item_prod foreign key (produto_key) references produto;
alter table mapa_contabil add constraint fk_mapa_contabil_superior foreign key (mapa_contabil_superior) references mapa_contabil;
alter table mapa_contabil add constraint fk_mapa_cont_conta_cont foreign key (conta_contabil_key) references conta_contabil;
alter table mapa_pdv_icms add constraint fk_mapa_pdv_icm_icm foreign key (icm_key) references icm;
alter table mapa_pdv_icms add constraint fk_mapa_pdv_icms_loja foreign key (loja_key) references loja;
alter table mapa_recebimento_loja add constraint fk_mapa_receb_loja_loja foreign key (loja_key) references loja;
alter table mapa_recebimento_loja add constraint fk_mapa_receb_loja_receb foreign key (recebimento_key) references recebimento;
alter table mapa_resumo add constraint fk_mapa_resumo_loja foreign key (loja_key) references loja;
alter table mapa_resumo add constraint fk_mapa_resumo_usuario foreign key (usuario_cancelamento_key) references usuario;
alter table mapa_resumo_item add constraint fk_mapa_resumo_item_mr foreign key (mapa_resumo_key) references mapa_resumo;
alter table mapa_subfinalizadora_tef add constraint fk_mapa_subfinalizadora_tef_sb foreign key (sub_finalizadora_key) references sub_finalizadora;
alter table mapa_subfinalizadora_tef add constraint fk_mapa_subfinalizadora_tef_tf foreign key (tipo_tef_key) references tipo_tef;
alter table mapa_tipo_lancamento_tipo_mov add constraint fk_mapa_tltm_tipo_lancamento foreign key (tipo_lancamento_key) references tipo_lancamento on delete cascade;
alter table mapa_tipo_lancamento_tipo_mov add constraint fk_mapa_tltm_tipo_movimento foreign key (tipo_movimento_key) references tipo_movimento on delete cascade;
alter table margem add constraint fk_sub_grupo foreign key (subgrupo_produto_key) references sub_grupo_produto on delete cascade;
alter table margem_loja add constraint fk_margem_loja foreign key (loja_key) references loja;
alter table margem_loja add constraint fk_produto_loja foreign key (produto_key) references produto;
alter table mensagem_popup add constraint fk_mensagem_popup_req_sup foreign key (requisicao_suporte_key) references requisicao_suporte;
alter table mensagem_usuario add constraint fk_mensagem_usuario_usuario foreign key (usuario_key) references usuario on delete cascade;
alter table mensagem_usuario add constraint fk_msg_usuario_msg_popup foreign key (mensagem_popup_key) references mensagem_popup on delete cascade;
alter table menu add constraint fk_menu_menu foreign key (pai) references menu;
alter table menu add constraint fk_menu_permissao foreign key (permissao_key) references permissao;
alter table menu_acesso add constraint fk_menu_acesso_menu foreign key (menu_key) references menu;
alter table menu_acesso add constraint fk_menu_acesso_usuario foreign key (usuario_key) references usuario;
alter table menu_usuario_favoritos add constraint fk_menu_favoritos_us_menu foreign key (menu_key) references menu;
alter table menu_usuario_favoritos add constraint fk_menu_favoritos_us_usuario foreign key (usuario_key) references usuario;
alter table modelo_clau_acordo_prom add constraint fk_mod_cl_acd_pro_cl_acd_pro foreign key (clau_acordo_prom_key) references clau_acordo_prom on delete cascade;
alter table modelo_clau_acordo_prom add constraint fk_mod_cl_acd_pro_mod_acd_pro foreign key (modelo_acordo_prom_key) references modelo_acordo_prom on delete cascade;
alter table modelo_contrato_fornecimento add constraint fk_modelo_contrato_forn_usr_1 foreign key (usuario_criacao_key) references usuario;
alter table modelo_contrato_fornecimento add constraint fk_modelo_contrato_forn_usr_2 foreign key (usuario_modificacao_key) references usuario;
alter table mov_caixa add constraint fk_mcx_cadastro_caixa foreign key (cadastro_caixa_key) references cadastro_caixa;
alter table mov_caixa add constraint fk_mcx_loja foreign key (loja_key) references loja;
alter table mov_caixa add constraint fk_mcx_movimento_bancario foreign key (movimento_bancario_key) references movimento_bancario;
alter table mov_caixa add constraint fk_mcx_tipo_caixa foreign key (tipo_caixa_key) references tipo_caixa;
alter table mov_caixa add constraint fk_mcx_tipo_mov_caixa foreign key (tipo_mov_caixa_key) references tipo_mov_caixa;
alter table mov_caixa add constraint fk_movcaixa_bordero foreign key (bordero_key) references bordero;
alter table mov_caixa add constraint fk_mov_caixa_tipo_ent_tes foreign key (tipo_entrada_tesouraria_key) references tipo_entrada_tesouraria;
alter table mov_caixa add constraint fk_mov_caixa_usuario foreign key (usuario_key) references usuario;
alter table mov_cob_cheque_dev add constraint fk_cadastro_caixa_key foreign key (cadastro_caixa_key) references cadastro_caixa;
alter table mov_cob_cheque_dev add constraint fk_mov_caixa_key foreign key (mov_caixa_key) references mov_caixa;
alter table mov_cob_cheque_dev add constraint fk_movimento_bancario_key foreign key (movimento_bancario_key) references movimento_bancario;
alter table movimentacao_carga add constraint fk_loja_rec_carga foreign key (loja_key) references loja;
alter table movimentacao_carga add constraint fk_receb_carga_local_entrega foreign key (local_entrega_key) references loja;
alter table movimentacao_carga add constraint fk_receb_carga_tipo_oper_nf foreign key (tipo_operacao_nota_fiscal_key) references tipo_operacao_nota_fiscal;
alter table movimentacao_carga add constraint fk_usuario_rec_carga foreign key (conferente) references usuario;
alter table movimentacao_carga add constraint fk_usuario_rec_carga1 foreign key (gerado_por) references usuario;
alter table movimento_bancario add constraint fk_mov_bancario_competencia foreign key (competencia_key) references competencia;
alter table movimento_bancario add constraint fk_mov_banc_bord foreign key (bordero_key) references bordero;
alter table movimento_bancario add constraint fk_mov_banc_cont_banc foreign key (conta_bancaria_key) references conta_bancaria;
alter table movimento_bancario add constraint fk_mov_banc_pessoa foreign key (pessoa_key) references pessoa;
alter table movimento_bancario add constraint fk_mov_banc_tipo_mov_banc foreign key (tipo_movimento_bancario_key) references tipo_movimento_bancario;
alter table movimento_bancario add constraint fk_movimento_bancario_extrato foreign key (banco_extrato_key) references banco_extrato;
alter table movimento_bancario add constraint fk_movimento_bancario_mb foreign key (movimento_original_key) references movimento_bancario;
alter table movimento_bancario add constraint fk_movimento_bancario_sub_cnt foreign key (sub_conta_bancaria_key) references sub_conta_bancaria;
alter table movimento_compra add constraint fk_mc_nfi foreign key (nota_fiscal_item_key) references nota_fiscal_item;
alter table movimento_compra add constraint fk_mov_compra_icm foreign key (icm_key) references icm;
alter table movimento_compra add constraint fk_mov_compra_lj foreign key (loja_key) references loja;
alter table movimento_compra add constraint fk_mov_compra_mov_estoque foreign key (movimento_estoque_key) references movimento_estoque;
alter table movimento_compra add constraint fk_mov_compra_nota_fiscal foreign key (nf_key) references nota_fiscal;
alter table movimento_compra add constraint fk_mov_compra_prod foreign key (produto_comprado_key) references produto;
alter table movimento_compra add constraint fk_mov_compra_tipo_mov foreign key (tipo_movimento_key) references tipo_movimento;
alter table movimento_compra add constraint fk_movimento_estoque_nf_origem foreign key (nf_origem_key) references nota_fiscal;
alter table movimento_conta_fornecedor add constraint fk_mov_conta_modelo_acordo_pro foreign key (modelo_acordo_prom_key) references modelo_acordo_prom;
alter table movimento_conta_fornecedor add constraint fk_mov_conta_nota_fiscal foreign key (nf_key) references nota_fiscal;
alter table movimento_conta_fornecedor add constraint fk_mov_conta_representante foreign key (representante_key) references representante;
alter table movimento_conta_fornecedor add constraint fk_mov_conta_setor_compra foreign key (setor_compra_key) references setor_compra;
alter table movimento_conta_fornecedor add constraint fk_mov_conta_tipo_lancamento foreign key (tipo_lancamento_key) references tipo_lancamento;
alter table movimento_conta_fornecedor add constraint fk_mov_conta_usuario foreign key (usuario_key) references usuario;
alter table movimento_contabil add constraint fk_mov_contabil_centro_custo foreign key (centro_custo_key) references centro_custo;
alter table movimento_contabil add constraint fk_mov_cont_tipo_org_cont foreign key (tipo_origem_contabil_key) references tipo_origem_contabil;
alter table movimento_contabil add constraint fk_movimento_contabil_conta foreign key (conta_contabil_key) references conta_contabil;
alter table movimento_contabil add constraint fk_movimento_contabil_loja foreign key (loja_key) references loja;
alter table movimento_contabil add constraint fk_movimento_partida_dobrada foreign key (partida_dobrada_key) references partida_dobrada;
alter table movimento_estoque add constraint fk_me_produto_origem foreign key (produto_origem) references produto;
alter table movimento_estoque add constraint fk_mov_estoque_cofins foreign key (cofins_key) references cofins;
alter table movimento_estoque add constraint fk_mov_estoque_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table movimento_estoque add constraint fk_mov_estoque_icm foreign key (icm_key) references icm;
alter table movimento_estoque add constraint fk_mov_estoque_lj foreign key (loja_key) references loja;
alter table movimento_estoque add constraint fk_mov_estoque_pis foreign key (pis_key) references pis;
alter table movimento_estoque add constraint fk_mov_estoque_prod foreign key (produto_key) references produto;
alter table movimento_estoque add constraint fk_mov_estoque_tipo_mov foreign key (tipo_movimento_key) references tipo_movimento;
alter table movimento_estoque add constraint fk_movimento_estoque_setor foreign key (setor_compra_key) references setor_compra;
alter table movimento_estoque add constraint fk_movimento_estoque_usuario foreign key (usuario_key) references usuario;
alter table movimento_estoque add constraint fk_movimento_fornec_div_key foreign key (fornecedor_divisao_key) references fornecedor_divisao;
alter table movimento_estoque add constraint fk_movimento_origem foreign key (movimento_origem_key) references movimento_estoque;
alter table movimento_estoque_composicao add constraint fk_mov_comp_mov_est_filho foreign key (movimento_estoque_filho_key) references movimento_estoque on delete cascade;
alter table movimento_estoque_composicao add constraint fk_mov_comp_mov_est_pai foreign key (movimento_estoque_pai_key) references movimento_estoque on delete cascade;
alter table movimento_estoque_terceiro add constraint fk_me_ter_prod_org foreign key (produto_origem_key) references produto;
alter table movimento_estoque_terceiro add constraint fk_mov_estoque_terc_loja_mov foreign key (loja_movimento_key) references loja;
alter table movimento_estoque_terceiro add constraint fk_mov_estoque_terc_nf_item foreign key (nota_fiscal_item_key) references nota_fiscal_item;
alter table movimento_estoque_terceiro add constraint fk_mov_estoque_terc_portador foreign key (portador_key) references pessoa;
alter table movimento_estoque_terceiro add constraint fk_mov_estoque_terc_produto foreign key (produto_key) references produto;
alter table movimento_estoque_terceiro add constraint fk_mov_estoque_terc_propriet foreign key (proprietario_key) references pessoa;
alter table movimento_estoque_terceiro add constraint fk_mov_estoque_terc_tipo_mov foreign key (tipo_movimento_terceiro_key) references tipo_movimento_terceiro;
alter table movimento_estoque_terceiro add constraint fk_mov_estoque_terc_usuario foreign key (usuario_key) references usuario;
alter table movimento_estoque_terceiro add constraint fk_movimento_estoque_tercei_nf foreign key (nota_fiscal_origem_key) references nota_fiscal;
alter table movimento_troca add constraint fk_movimento_troca_me foreign key (movimento_estoque_key) references movimento_estoque on delete cascade;
alter table movimento_troca add constraint fk_movimento_troca_motivo foreign key (motivo_troca_key) references motivo_troca on delete cascade;
alter table multa add constraint fk_multa_tipo_multa foreign key (tipo_multa_key) references tipo_multa;
alter table municipio add constraint fk_uf foreign key (uf) references estado;
alter table negociacao add constraint fk_my_0005 foreign key (usuario_key) references usuario;
alter table negociacao add constraint fk_negociacao_contr_forn foreign key (contrato_fornecimento_key) references contrato_fornecimento on delete cascade;
alter table negociacao_item add constraint fk_negociacao_item_cofins foreign key (cofins_key) references cofins;
alter table negociacao_item add constraint fk_negociacao_item_icm foreign key (icm_key) references icm;
alter table negociacao_item add constraint fk_negociacao_item_icm_venda foreign key (icm_key_venda) references icm;
alter table negociacao_item add constraint fk_negociacao_item_negociacao foreign key (negociacao_key) references negociacao on delete cascade;
alter table negociacao_item add constraint fk_negociacao_item_pis foreign key (pis_key) references pis;
alter table negociacao_item add constraint fk_negociacao_item_prod foreign key (controle_estoque) references produto;
alter table negociacao_item add constraint fk_ni_produto foreign key (produto_key) references produto on delete cascade;
alter table negociacao_item add constraint fk_tipo_item_compra foreign key (tipo_item_compra_key) references tipo_item_compra;
alter table nota_fiscal add constraint fk_indicador_pagamento foreign key (indicador_pagamento_key) references indicador_pagamento;
alter table nota_fiscal add constraint fk_nf_cof foreign key (codigo_operacao_fiscal) references cof;
alter table nota_fiscal add constraint fk_nf_contrato_servico foreign key (contrato_servico_key) references contrato_servico;
alter table nota_fiscal add constraint fk_nf_lj foreign key (local_cobranca) references loja;
alter table nota_fiscal add constraint fk_nf_loja foreign key (loja_key) references loja;
alter table nota_fiscal add constraint fk_nf_nf_tipo foreign key (nf_tipo_key) references nota_fiscal_tipo;
alter table nota_fiscal add constraint fk_nf_pessoa foreign key (fornecedor_key) references pessoa;
alter table nota_fiscal add constraint fk_nf_status_recebimento foreign key (ultimo_status_recebimento_key) references status_recebimento;
alter table nota_fiscal add constraint fk_nota_fiscal_tipo_emissao_nf foreign key (tipo_emissao_nfe_key) references tipo_emissao_nfe;
alter table nota_fiscal add constraint fk_nota_fiscal_tipo_modelo_nf foreign key (tipo_modelo_nf_key) references tipo_modelo_nf;
alter table nota_fiscal add constraint fk_nota_fiscal_tipo_status_nfe foreign key (tipo_status_nfe_key) references tipo_status_nfe;
alter table nota_fiscal add constraint fk_nota_fiscal_usuario_canc foreign key (usuario_cancelamento_key) references usuario;
alter table nota_fiscal add constraint fk_rec_carga_nota_fiscal foreign key (movimentacao_carga_key) references movimentacao_carga;
alter table nota_fiscal add constraint fk_tipo_divergencia_nf foreign key (tipo_divergencia_nf_key) references tipo_divergencia_nota_fiscal;
alter table nota_fiscal add constraint fk_tipo_guia_nf foreign key (tipo_guia_recolhimento_key) references tipo_guia_recolhimento;
alter table nota_fiscal add constraint fk_tipo_operacao_nota_fiscal foreign key (tipo_operacao_nota_fiscal_key) references tipo_operacao_nota_fiscal;
alter table nota_fiscal_email add constraint fk_nota_fiscal_email_nf foreign key (nf_key) references nota_fiscal;
alter table nota_fiscal_email add constraint fk_nota_fiscal_email_usr_canc foreign key (usuario_envio_cancelamento) references usuario;
alter table nota_fiscal_email add constraint fk_nota_fiscal_email_usr_emis foreign key (usuario_envio_emissao) references usuario;
alter table nota_fiscal_fatura add constraint fk_nf_fatura_fatura_key foreign key (fatura_key) references fatura on delete cascade;
alter table nota_fiscal_fatura add constraint fk_nf_fatura_nf_key foreign key (nf_key) references nota_fiscal on delete cascade;
alter table nota_fiscal_frete add constraint fk_nf_frete_cfop foreign key (cfop_key) references cof;
alter table nota_fiscal_frete add constraint fk_nf_frete_cofins foreign key (cofins_key) references cofins;
alter table nota_fiscal_frete add constraint fk_nf_frete_icms foreign key (icm_key) references icm;
alter table nota_fiscal_frete add constraint fk_nf_frete_local_entrega foreign key (local_entrega) references pessoa;
alter table nota_fiscal_frete add constraint fk_nf_frete_nf foreign key (nf_key) references nota_fiscal on delete cascade;
alter table nota_fiscal_frete add constraint fk_nf_frete_pis foreign key (pis_key) references pis;
alter table nota_fiscal_frete add constraint fk_nf_frete_tipo_frete foreign key (tipo_frete_key) references tipo_frete;
alter table nota_fiscal_frete add constraint fk_nf_frete_tipo_modelo foreign key (tipo_modelo_nf_key) references tipo_modelo_nf;
alter table nota_fiscal_frete add constraint fk_nf_frete_transportadora foreign key (transportadora_key) references transportadora;
alter table nota_fiscal_item add constraint fk_icms_interestadual foreign key (icms_interestadual_key) references icm;
alter table nota_fiscal_item add constraint fk_municipio_iss_key foreign key (municipio_iss_key) references municipio;
alter table nota_fiscal_item add constraint fk_nfi_nfi foreign key (nota_fiscal_item_origem_key) references nota_fiscal_item;
alter table nota_fiscal_item add constraint fk_nf_item_cfop foreign key (cfop_key) references cof;
alter table nota_fiscal_item add constraint fk_nf_item_cst_iss foreign key (cst_iss) references cst_iss;
alter table nota_fiscal_item add constraint fk_nf_item_declaracao_impor foreign key (declaracao_importacao_key) references declaracao_importacao;
alter table nota_fiscal_item add constraint fk_nf_item_icm foreign key (icm_key) references icm;
alter table nota_fiscal_item add constraint fk_nf_item_icm2 foreign key (icm_key_venda) references icm;
alter table nota_fiscal_item add constraint fk_nf_item_nf foreign key (nf_key) references nota_fiscal;
alter table nota_fiscal_item add constraint fk_nf_item_pedido foreign key (item_pedido_key) references item_pedido;
alter table nota_fiscal_item add constraint fk_nf_item_produto foreign key (produto_key) references produto;
alter table nota_fiscal_item add constraint fk_nf_item_tipo_instrucao foreign key (tipo_instrucao_nota_fiscal_key) references tipo_instrucao_nota_fiscal;
alter table nota_fiscal_item add constraint fk_nota_fiscal_item_cofins foreign key (cofins_key) references cofins;
alter table nota_fiscal_item add constraint fk_nota_fiscal_item_pis foreign key (pis_key) references pis;
alter table nota_fiscal_item_divergencia add constraint fk_nf_item_diverg_icm foreign key (icm_key) references icm;
alter table nota_fiscal_item_divergencia add constraint fk_nf_item_diverg_item foreign key (nota_fiscal_item_key) references nota_fiscal_item;
alter table nota_fiscal_item_divergencia add constraint fk_nf_item_div_nf_div_tipo foreign key (status_divergencia_nf_key) references status_divergencia_nota_fiscal;
alter table nota_fiscal_item_divergencia add constraint fk_requisicao_suporte_key foreign key (requisicao_suporte_key) references requisicao_suporte;
alter table nota_fiscal_item_divergencia add constraint fk_usuario foreign key (usuario_aprovacao_key) references usuario;
alter table nota_fiscal_item_patrimonio add constraint fk_nf_patr_it_grupo_patri foreign key (grupo_patrimonio_key) references grupo_patrimonio;
alter table nota_fiscal_item_patrimonio add constraint fk_nf_patr_it_indi_uso_ativo foreign key (indicador_uso_ativo_key) references indicador_do_uso_do_ativo;
alter table nota_fiscal_item_patrimonio add constraint fk_nota_fiscal_item_patrimonio foreign key (patrimonio_item_key) references patrimonio_item;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_cfop foreign key (cfop_key) references cof;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_cst_cofins foreign key (cst_cofins) references cst_pis_cofins;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_cst_iss foreign key (cst_iss) references cst_iss;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_cst_origem foreign key (cst_origem_icms) references cst_origem;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_cst_pis foreign key (cst_pis) references cst_pis_cofins;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_cst_tributacao foreign key (cst_tributacao_icms) references cst_tributacao;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_nf foreign key (nf_key) references nota_fiscal;
alter table nota_fiscal_item_xml add constraint fk_nf_item_xml_nf_item foreign key (nf_item_key) references nota_fiscal_item;
alter table nota_fiscal_item_xml add constraint fk_nfi_xml_modalidade_icms foreign key (modalidade_icms_key) references modalidade_icms;
alter table nota_fiscal_item_xml add constraint fk_nfi_xml_modalidade_icms_st foreign key (modalidade_icms_st_key) references modalidade_icms_st;
alter table nota_fiscal_mensagem add constraint fk_nf_mensagem foreign key (nf_key) references nota_fiscal;
alter table nota_fiscal_mensagem_sefaz add constraint fk_nota_fiscal_msg_sfz_nf foreign key (nf_key) references nota_fiscal;
alter table nota_fiscal_msg_fiscal add constraint fk_nota_fiscal_msg_ap foreign key (ap_key) references autorizacao_pagamento;
alter table nota_fiscal_msg_fiscal add constraint fk_nota_fiscal_msg_modelo foreign key (modelo_mensagem_fiscal_key) references modelo_mensagem_fiscal;
alter table nota_fiscal_msg_fiscal add constraint fk_nota_fiscal_msg_nf foreign key (nf_key) references nota_fiscal;
alter table nota_fiscal_msg_fiscal add constraint fk_nota_fiscal_msg_nf_ref foreign key (nf_referencia_key) references nota_fiscal;
alter table nota_fiscal_msg_fiscal add constraint fk_nota_fiscal_msg_processo foreign key (processo_fiscal_key) references processo_fiscal;
alter table nota_fiscal_origem add constraint fk_nota_fiscal_nf_origem foreign key (nf_key) references nota_fiscal on delete cascade;
alter table nota_fiscal_origem add constraint fk_nota_origem_nf_origem foreign key (origem_nf_key) references nota_fiscal on delete cascade;
alter table nota_fiscal_pagamento add constraint fk_nf_pag_aut_pag foreign key (ap_key) references autorizacao_pagamento;
alter table nota_fiscal_pagamento add constraint fk_nf_pag_contr_forn foreign key (contrato_fornecimento_key) references contrato_fornecimento;
alter table nota_fiscal_pedido add constraint fk_nf_ped_nf foreign key (nf_key) references nota_fiscal on delete cascade;
alter table nota_fiscal_pedido add constraint fk_nf_ped_ped foreign key (pelt_key) references pedido on delete cascade;
alter table nota_fiscal_pedido_venda add constraint fk_nota_fiscal foreign key (nf_key) references nota_fiscal on delete cascade;
alter table nota_fiscal_pedido_venda add constraint fk_pedido_venda foreign key (pedido_venda_key) references pedido_venda on delete cascade;
alter table nota_fiscal_total add constraint fk_nota_fiscal_total_ap foreign key (ap_impostos_a_recolher) references autorizacao_pagamento;
alter table observacao add constraint fk_observacao_pessoa foreign key (usuario_key) references pessoa;
alter table observacao add constraint fk_obs_pessoa foreign key (pessoa_key) references pessoa;
alter table ocorrencia add constraint fk_ocorr_aut_pag foreign key (ap_key) references autorizacao_pagamento;
alter table ocorrencia add constraint fk_ocorr_usr foreign key (usuario_key) references usuario;
alter table ocorrencia_agendamento add constraint fk_oa_usuario foreign key (usuario_autorizacao_key) references pessoa;
alter table ocorrencia_agendamento add constraint fk_ocorr_ag_aut_pag foreign key (ap_key) references autorizacao_pagamento;
alter table ocorrencia_agendamento add constraint fk_ocorr_ag_pessoa foreign key (usuario_agendamento_key) references pessoa;
alter table ocorrencia_agendamento add constraint fk_ocorr_ag_tipo_ag foreign key (tipo_agendamento_key) references tipo_agendamento;
alter table ocorrencia_bordero add constraint fk_ocorrencia_bordero_bordero foreign key (bordero_key) references bordero;
alter table ocorrencia_bordero add constraint fk_ocorrencia_bordero_usuario foreign key (usuario_key) references usuario;
alter table ocorrencia_cobranca add constraint fk_oc_cobranca_sol_usuario foreign key (usuario_key) references usuario;
alter table ocorrencia_cobranca add constraint fk_oc_cobranca_tipo_status foreign key (tipo_status_cobranca_key) references tipo_status_cobranca;
alter table ocorrencia_cobranca add constraint fk_ocorrencia_cobranca_ap foreign key (ap_key) references autorizacao_pagamento;
alter table ocorrencia_diaria add constraint fk_ocorr_diaria_usr foreign key (usuario_key) references usuario;
alter table ocorrencia_pagamento_direto add constraint fk_ocorr_pag_direto_bco_ocorr foreign key (banco_ocorrencia_key) references banco_ocorrencia on delete cascade;
alter table ocorrencia_pagamento_direto add constraint fk_ocorr_pag_direto_bco_pag foreign key (banco_pagamento_key) references banco_pagamento on delete cascade;
alter table ocorrencia_pagamento_titulos add constraint fk_ocorr_pag_tit_bco_pag_tit foreign key (banco_pagamento_titulos_key) references banco_pagamento_titulos on delete cascade;
alter table ocorrencia_pagamento_titulos add constraint fk_ocorr_pag_titulos_bco_ocorr foreign key (banco_ocorrencia_key) references banco_ocorrencia on delete cascade;
alter table ocorrencia_pdv add constraint fk_ocorr_pdv_hist_pdv foreign key (historico_key) references historico_pdv;
alter table ocorrencia_pdv add constraint fk_ocorr_pdv_lj_pdv foreign key (loja_pdv_key) references loja_pdv;
alter table ocorrencia_pdv add constraint fk_ocorr_pdv_operador foreign key (operador_key) references operador;
alter table ocorrencia_pendencia add constraint fk_oco_pen_item_pedido foreign key (item_pedido_key) references item_pedido;
alter table ocorrencia_pendencia add constraint fk_oco_pen_usuario foreign key (usuario_key) references usuario;
alter table ocorrencia_taxa add constraint fk_ocorrencia_taxa_loja foreign key (loja_key) references loja;
alter table ocorrencia_taxa add constraint fk_ocorr_tx_usr foreign key (usuario_key) references usuario;
alter table ocorrencia_tesouraria add constraint fk_ocorr_tes_cad_cx foreign key (cadastro_caixa_key) references cadastro_caixa;
alter table ocorrencia_tesouraria add constraint fk_ocorr_tes_mov_cx foreign key (mov_caixa_key) references mov_caixa;
alter table ocorrencia_tesouraria add constraint fk_ocorr_tes_usr foreign key (usuario_key) references usuario;
alter table ocorrencia_venda_online add constraint fk_oco_ven_onl_loja foreign key (loja_key) references loja;
alter table ocorrencia_venda_online add constraint fk_oco_ven_onl_usu foreign key (usuario_key) references usuario;
alter table ocorrencias_mb add constraint fk_ocorrs_mb_mov_banc foreign key (movimento_bancario_key) references movimento_bancario;
alter table ocorrencias_mb add constraint fk_ocorrs_mb_pessoa foreign key (usuario_key) references pessoa;
alter table operador add constraint fk_operador_lj foreign key (loja_key) references loja;
alter table operador add constraint fk_operador_pessoa foreign key (pessoa_key) references pessoa;
alter table pack_virtual add constraint fk_pack_virtual_grupo_desconto foreign key (grupo_desconto_key) references pack_virtual_grupo;
alter table pack_virtual add constraint fk_pack_virtual_grupo_gatilho foreign key (grupo_gatilho_key) references pack_virtual_grupo;
alter table pack_virtual add constraint fk_pack_virtual_modelo foreign key (pack_virtual_modelo_key) references pack_virtual_modelo;
alter table pack_virtual add constraint fk_pack_virtual_usuario foreign key (usuario_key) references usuario;
alter table pack_virtual_grupo_produto add constraint fk_pack_virt_grupo_prod_grupo foreign key (pack_virtual_grupo_key) references pack_virtual_grupo on delete cascade;
alter table pack_virtual_grupo_produto add constraint fk_pack_virt_grupo_prod_prod foreign key (produto_key) references produto on delete cascade;
alter table pack_virtual_loja add constraint fk_pack_virtual_loja_loja foreign key (loja_key) references loja on delete cascade;
alter table pack_virtual_loja add constraint fk_pack_virtual_loja_pack foreign key (pack_virtual_key) references pack_virtual on delete cascade;
alter table pagamento_bancario add constraint fk_pag_banc_aut_pag foreign key (ap_key) references autorizacao_pagamento on delete cascade;
alter table pagamento_bancario add constraint fk_pag_banc_mov_banc foreign key (movimento_bancario_key) references movimento_bancario on delete cascade;
alter table pagamento_caixa add constraint fk_pagamento_caixa_ap foreign key (ap_key) references autorizacao_pagamento on delete cascade;
alter table pagamento_caixa add constraint fk_pagamento_caixa_mov_caixa foreign key (mov_caixa_key) references mov_caixa on delete cascade;
alter table pagamento_direto_bordero add constraint fk_pag_direto_bord_bord foreign key (bordero_key) references bordero;
alter table pagamento_direto_bordero add constraint fk_pag_direto_bord_transf_elet foreign key (transferencia_eletronica_key) references transferencia_eletronica;
alter table parametro add constraint fk_parametro_tipo_parametro foreign key (tipo_parametro_key) references tipo_parametro;
alter table parametros_loja add constraint fk_parametros_loja_formato_key foreign key (formato_key) references formato_nota_fiscal;
alter table parametros_loja add constraint fk_parametros_loja_loja foreign key (loja_key) references loja;
alter table partida_dobrada add constraint fk_lancamento_contabil_loja foreign key (loja_key) references loja;
alter table partida_dobrada add constraint fk_partida_db_comp_contabil foreign key (competencia_contabil_key) references competencia_contabil;
alter table partida_dobrada add constraint fk_partida_dobrada_esquema foreign key (esquema_contabil_key) references esquema_contabil;
alter table partida_dobrada add constraint fk_partida_dobrada_origem foreign key (partida_de_origem_key) references partida_dobrada;
alter table patrimonio_grupo add constraint fk_patrimonio_grupo_categoria foreign key (patrimonio_categoria_key) references patrimonio_categoria;
alter table patrimonio_item add constraint fk_compet_deprec_final foreign key (competencia_depreciacao_final) references competencia;
alter table patrimonio_item add constraint fk_indicador_uso_ativo foreign key (indicador_uso_ativo_key) references indicador_do_uso_do_ativo;
alter table patrimonio_item add constraint fk_patri_grupo_patrimonio foreign key (grupo_patrimonio_key) references grupo_patrimonio;
alter table patrimonio_item add constraint fk_patri_item_tipo_baixa_patri foreign key (tipo_baixa_patrimonio_key) references tipo_baixa_patrimonio;
alter table patrimonio_item add constraint fk_patrim_item_ct_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table patrimonio_item add constraint fk_patrimonio_item_comp foreign key (competencia_key) references competencia;
alter table patrimonio_item add constraint fk_patrimonio_item_ct_custo foreign key (centro_custo_key) references centro_custo;
alter table patrimonio_item add constraint fk_patrimonio_item_estado foreign key (estado_patrimonio_item_key) references estado_patrimonio_item;
alter table patrimonio_item add constraint fk_patrimonio_item_loja foreign key (loja_key) references loja;
alter table patrimonio_item add constraint fk_patrimonio_item_nf_key foreign key (nf_key_aquisicao) references nota_fiscal;
alter table patrimonio_item add constraint fk_patrimonio_item_produto foreign key (produto_key) references produto;
alter table patrimonio_item add constraint fk_patrimonio_item_status foreign key (status_patrimonio_item_key) references status_patrimonio_item;
alter table patrimonio_item add constraint fk_tipo_patrimonio_item foreign key (tipo_patrimonio_item_key) references tipo_patrimonio_item;
alter table patrimonio_item_baixa add constraint fk_patri_item_baixa_patri_item foreign key (patrimonio_item_key) references patrimonio_item;
alter table patrimonio_item_baixa add constraint fk_patri_item_baixa_tipo_baix foreign key (tipo_baixa_patrimonio_key) references tipo_baixa_patrimonio;
alter table patrimonio_item_baixa add constraint fk_patri_item_baixa_usu_baixa foreign key (usuario_baixa_key) references usuario;
alter table patrimonio_item_baixa add constraint fk_patri_item_baixa_usu_estor foreign key (usuario_estorno_key) references usuario;
alter table patrimonio_sub_grupo add constraint fk_patrimonio_sub_grupo_grupo foreign key (patrimonio_grupo_key) references patrimonio_grupo;
alter table pauta_fiscal_estado add constraint fk_pauta_fiscal_estado_estado foreign key (estado_sigla) references estado;
alter table pauta_fiscal_estado add constraint fk_pauta_fiscal_estado_pauta foreign key (pauta_fiscal_key) references pauta_fiscal;
alter table pedido add constraint fk_pedido_local_entrega foreign key (local_entrega) references pessoa;
alter table pedido add constraint fk_pedido_loja foreign key (loja_key) references loja;
alter table pedido add constraint fk_pedido_ped_master foreign key (pedido_key) references pedido_master;
alter table pedido add constraint fk_ped_tipo_ped foreign key (tipo_pedido_key) references tipo_pedido;
alter table pedido_item_estatistica add constraint fk_item_estatistica_loja foreign key (loja_key) references loja;
alter table pedido_item_estatistica add constraint fk_item_estatistica_venda foreign key (tipo_estatistica_venda_key) references tipo_estatistica_venda;
alter table pedido_item_estatistica add constraint fk_item_estatist_item_pedido foreign key (item_pedido_key) references item_pedido;
alter table pedido_item_estatistica add constraint fk_ped_item_estat_sug_externa foreign key (sugestao_compra_externa_key) references sugestao_compra_externa;
alter table pedido_master add constraint fk_pedido_master_distrib foreign key (tipo_distribuicao_key) references tipo_distribuicao;
alter table pedido_master add constraint fk_pedido_master_negociacao foreign key (negociacao_key) references negociacao;
alter table pedido_master add constraint fk_pedido_master_status_ped foreign key (status_pedido_key) references status_pedido;
alter table pedido_master add constraint fk_pedido_master_usuario foreign key (usuario_key) references usuario;
alter table pedido_master add constraint fk_pedido_master_vendedor foreign key (vendedor_key) references pessoa;
alter table pedido_master add constraint fk_ped_master_tipo_est_venda foreign key (tipo_estatistica_venda_key) references tipo_estatistica_venda;
alter table pedido_saida add constraint fk_pedido_saida_destino foreign key (destino_key) references pessoa;
alter table pedido_saida add constraint fk_ped_saida_pessoa foreign key (origem_key) references pessoa;
alter table pedido_saida add constraint fk_ped_saida_usr foreign key (usuario_key) references usuario;
alter table pedido_saida_item add constraint fk_ped_saida_item foreign key (icm_key) references icm;
alter table pedido_saida_item add constraint fk_ped_saida_item_ped_saida foreign key (pedido_saida_key) references pedido_saida on delete cascade;
alter table pedido_saida_item add constraint fk_ped_saida_item_prod foreign key (produto_key) references produto;
alter table pedido_venda add constraint fk_pedido_venda_ar foreign key (ar_key) references autorizacao_pagamento;
alter table pedido_venda add constraint fk_pedido_venda_cliente foreign key (cliente_key) references cliente;
alter table pedido_venda add constraint fk_pedido_venda_convenio foreign key (convenio_key) references convenio;
alter table pedido_venda add constraint fk_pedido_venda_entrega foreign key (pedido_venda_entrega_key) references pedido_venda_entrega;
alter table pedido_venda add constraint fk_pedido_venda_entregador foreign key (entregador_key) references pessoa;
alter table pedido_venda add constraint fk_pedido_venda_faturador foreign key (faturador_key) references pessoa;
alter table pedido_venda add constraint fk_pedido_venda_loja foreign key (loja_key) references loja;
alter table pedido_venda add constraint fk_pedido_venda_pagto foreign key (pedido_venda_forma_pagto_key) references pedido_venda_forma_pagto;
alter table pedido_venda add constraint fk_pedido_venda_separador foreign key (separador_key) references pessoa;
alter table pedido_venda add constraint fk_pedido_venda_vendedor foreign key (vendedor_key) references pessoa;
alter table pedido_venda add constraint fk_ped_venda_status_ped_ven foreign key (pedido_venda_status_key) references pedido_venda_status;
alter table pedido_venda_item add constraint fk_pedido_venda_cofins foreign key (cofins_key) references cofins;
alter table pedido_venda_item add constraint fk_pedido_venda_item foreign key (pedido_venda_key) references pedido_venda;
alter table pedido_venda_item add constraint fk_pedido_venda_pis foreign key (pis_key) references pis;
alter table pedido_venda_item add constraint fk_pedido_venda_produto foreign key (produto_key) references produto;
alter table permissao add constraint fk_permissao_operacao foreign key (operacao_key) references operacao;
alter table permissao add constraint fk_permissao_sistema foreign key (sistema_key) references sistema;
alter table permissao_grupo add constraint fk_permissao_gp_gp foreign key (grupo_key) references grupo;
alter table permissao_grupo add constraint fk_permissao_gp_permissao foreign key (permissao_key) references permissao;
alter table permissao_menu add constraint fk_permissao_menu_menu foreign key (menu_key) references menu;
alter table permissao_menu add constraint fk_permissao_menu_permissao foreign key (permissao_key) references permissao;
alter table pesquisa_itens add constraint fk_pesq_itens_pesq foreign key (pesquisa_key) references pesquisa on delete cascade;
alter table pesquisa_itens add constraint fk_pesq_itens_prod foreign key (produto_key) references produto on delete cascade;
alter table pesquisa_jornal add constraint fk_pesq_jorn_pessoa foreign key (concorrente_key) references pessoa;
alter table pesquisa_jornal add constraint fk_pesq_jorn_tipo_pesq_jorn foreign key (tipo_pesquisa_key) references tipo_pesquisa_jornal;
alter table pesquisa_jornal add constraint fk_pesquisa_jornal_psq_jrn_ger foreign key (pesquisa_jornal_geral_key) references pesquisa_jornal_geral;
alter table pesquisa_jornal_geral add constraint fk_pesquisa_jornal_geral_tipo foreign key (tipo_pesquisa_key) references tipo_pesquisa_jornal;
alter table pesquisa_jornal_produto add constraint fk_pesq_jorn_prod_pesq_jorn foreign key (pesquisa_jornal_key) references pesquisa_jornal;
alter table pesquisa_jornal_produto add constraint fk_pesq_jorn_prod_prod foreign key (produto_key) references produto;
alter table pessoa add constraint fk_pessoa_conta_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table pessoa add constraint fk_pessoa_estado_civil foreign key (estado_civil_key) references estado_civil;
alter table pessoa add constraint fk_pessoa_tipo_domicilio foreign key (tipo_domicilio_key) references tipo_domicilio;
alter table pessoa add constraint fk_pessoa_tipo_reg_simples foreign key (tipo_regime_simples_key) references tipo_regime_simples;
alter table pessoa_recebimento add constraint fk_pessoa_receb_condicao_receb foreign key (condicao_recebimento_key) references condicao_recebimento;
alter table pessoa_recebimento add constraint fk_pessoa_receb_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table pessoa_recebimento add constraint fk_pessoa_receb_ref_prazo foreign key (referencia_prazo_key) references referencia_prazo;
alter table pis add constraint fk_cts_pis foreign key (cst_pis_cofins_key) references cst_pis_cofins;
alter table pis add constraint fk_pis_cofins_relacionado foreign key (cofins_key_relacionado) references cofins;
alter table prazo_recebimento add constraint fk_prazo_recebimento_contrato foreign key (contrato_fornecimento_key) references contrato_fornecimento on delete cascade;
alter table precatorio add constraint fk_precatorio_credor_original foreign key (credor_original_key) references pessoa;
alter table precatorio add constraint fk_precatorio_duplicata foreign key (duplicata_key) references autorizacao_pagamento;
alter table precatorio add constraint fk_precatorio_escrita_ajuste foreign key (escrita_fiscal_ajuste_key) references escrita_fiscal_ajuste;
alter table precatorio add constraint fk_precatorio_loja_credora foreign key (loja_credora_key) references loja;
alter table precatorio add constraint fk_precatorio_usuario foreign key (usuario_key) references usuario;
alter table precatorio add constraint fk_precatorio_usuario_cancel foreign key (usuario_cancelamento_key) references usuario;
alter table preco_concorrente add constraint fk_preco_concorrente_pessoa foreign key (pessoa_key) references pessoa;
alter table preco_transferencia add constraint fk_preco_transferencia_loja foreign key (loja_key) references loja;
alter table preco_transferencia add constraint fk_preco_transferencia_produto foreign key (produto_key) references produto;
alter table preco_transferencia add constraint fk_preco_transferencia_usuario foreign key (usuario_key) references usuario;
alter table preco_transferencia_log add constraint fk_preco_transferencia_hist_lj foreign key (loja_key) references loja;
alter table preco_transferencia_log add constraint fk_preco_transferencia_hist_pr foreign key (produto_key) references produto;
alter table preco_transferencia_log add constraint fk_preco_transferencia_hist_us foreign key (usuario_key) references usuario;
alter table preco_venda add constraint fk_my_0004 foreign key (promocao_key) references promocao;
alter table preco_venda add constraint fk_preco_venda_lj foreign key (loja_key) references loja;
alter table preco_venda add constraint fk_preco_venda_prod foreign key (produto_key) references produto on delete cascade;
alter table preco_venda add constraint fk_preco_venda_regiao_preco foreign key (regiao_preco_key) references regiao_preco;
alter table preco_venda add constraint fk_preco_venda_tipo_status foreign key (tipo_status_preco_venda_key) references tipo_status_preco_venda;
alter table preco_venda add constraint fk_preco_venda_usr foreign key (usuario_key) references usuario;
alter table preco_venda_caixa add constraint fk_preco_venda_cx_lj foreign key (loja_key) references loja;
alter table preco_venda_caixa add constraint fk_preco_venda_cx_prod foreign key (produto_key) references produto on delete cascade;
alter table preco_venda_caixa add constraint fk_preco_venda_cx_promocao foreign key (promocao_key) references promocao;
alter table preco_venda_caixa add constraint fk_preco_venda_cx_regiao_preco foreign key (regiao_preco_key) references regiao_preco;
alter table preco_venda_caixa add constraint fk_preco_venda_cx_usr foreign key (usuario_key) references usuario;
alter table preco_venda_oferta add constraint fk_preco_venda_oferta_lj foreign key (loja_key) references loja;
alter table preco_venda_oferta add constraint fk_preco_venda_oferta_prod foreign key (produto_key) references produto;
alter table preco_venda_oferta add constraint fk_preco_venda_oferta_promocao foreign key (promocao_key) references promocao;
alter table prestador_servico add constraint fk_prestador_servico_pessoa foreign key (pessoa_key) references pessoa;
alter table previa_transferencia add constraint fk_previa_trans_destino foreign key (loja_destino_key) references loja;
alter table previa_transferencia add constraint fk_previa_transf_usuario foreign key (usuario_key) references usuario;
alter table previa_transferencia add constraint fk_prev_transf_lj foreign key (loja_origem_key) references loja;
alter table previa_transferencia_item add constraint fk_prev_transf_item_prod foreign key (produto_key) references produto;
alter table previa_transferencia_item add constraint fk_prev_trans_item_prev_transf foreign key (previa_transferencia_key) references previa_transferencia;
alter table previsao_loja add constraint fk_previsao_lj_lj foreign key (loja_key) references loja;
alter table previsao_setor add constraint fk_previsao_set_set_compra foreign key (setor_key) references setor_compra;
alter table processo_fiscal add constraint fk_processo_fiscal_origem foreign key (origem_processo_fiscal_key) references origem_processo_fiscal;
alter table produto add constraint fk_prod_centro_custo foreign key (centro_custo_key) references centro_custo;
alter table produto add constraint fk_prod_classificacao_fiscal foreign key (classificacao_fiscal_key) references classificacao_fiscal;
alter table produto add constraint fk_prod_cofins foreign key (cofins_key) references cofins;
alter table produto add constraint fk_prod_embalagem foreign key (embalagem_key) references embalagem;
alter table produto add constraint fk_prod_forn_div foreign key (troca_fornecedor_key,troca_divisao_key) references fornecedor_divisao;
alter table produto add constraint fk_prod_margem foreign key (margem_key) references margem;
alter table produto add constraint fk_prod_patrimonio_sub_grupo foreign key (patrimonio_sub_grupo_key) references patrimonio_sub_grupo;
alter table produto add constraint fk_prod_pis foreign key (pis_key) references pis;
alter table produto add constraint fk_prod_prod foreign key (controle_estoque) references produto;
alter table produto add constraint fk_prod_set_compra foreign key (setor_compra_key) references setor_compra;
alter table produto add constraint fk_prod_sub_gp_prod foreign key (sub_grupo_produto_key) references sub_grupo_produto;
alter table produto add constraint fk_prod_troca_descarte_destino foreign key (troca_descarte_destino) references troca_descarte_destino;
alter table produto add constraint fk_produto_cofins_entrada foreign key (cofins_entrada_key) references cofins;
alter table produto add constraint fk_produto_concorrente foreign key (produto_concorrente_key) references produto_concorrente;
alter table produto add constraint fk_produto_ct_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table produto add constraint fk_produto_curva foreign key (curva) references curva_abc;
alter table produto add constraint fk_produto_destinacao_produto foreign key (destinacao_produto_key) references destinacao_produto;
alter table produto add constraint fk_produto_grade_produto foreign key (grade_produto_key) references grade_produto;
alter table produto add constraint fk_produto_ipi_entrada foreign key (ipi_entrada_key) references ipi;
alter table produto add constraint fk_produto_ipi_saida foreign key (ipi_saida_key) references ipi;
alter table produto add constraint fk_produto_pauta_fiscal foreign key (pauta_fiscal_key) references pauta_fiscal;
alter table produto add constraint fk_produto_pis_entrada foreign key (pis_entrada_key) references pis;
alter table produto add constraint fk_produto_preco_equiv foreign key (preco_equivalente) references produto on delete cascade;
alter table produto add constraint fk_produto_tipo_composicao foreign key (tipo_composicao_key) references tipo_composicao;
alter table produto add constraint fk_produto_vasilhame foreign key (vasilhame_key) references produto;
alter table produto add constraint fk_tipo_contr_producao_produto foreign key (tipo_controle_producao_key) references tipo_controle_producao;
alter table produto_balanca add constraint fk_prod_bal_prod foreign key (produto_key) references produto;
alter table produto_balanca add constraint fk_prod_bal_tipo_bal foreign key (balanca_key) references tipo_balanca;
alter table produto_balanca_detalhe add constraint fk_prod_bal_detalhe_tipo_bal foreign key (balanca_key) references tipo_balanca;
alter table produto_pesquisado add constraint fk_prod_pesqdo_cal_visita foreign key (calendario_key,concorrente_key,ordem_visita) references calendario_visita;
alter table produto_validade add constraint fk_prod_validade_mov_compra foreign key (movimento_estoque_key) references movimento_compra;
alter table produto_validade add constraint fk_pv_loja foreign key (loja_key) references loja;
alter table produto_validade add constraint fk_pv_produto foreign key (produto_key) references produto;
alter table produto_validade add constraint fk_validade_nf_item foreign key (nf_item_pedido_key) references nota_fiscal_item on delete cascade;
alter table promocao add constraint fk_fecham_usuar foreign key (fechamento_usuario_key) references usuario on delete cascade;
alter table promocao_loja add constraint fk_prom_loja_loja foreign key (loja_key) references loja on delete cascade;
alter table promocao_loja add constraint fk_prom_loja_prom foreign key (promocao_key) references promocao on delete cascade;
alter table quebra_tesouraria add constraint fk_quebra_tesouraria_loja foreign key (loja_key) references loja;
alter table quebra_tesouraria add constraint fk_quebra_tesouraria_tipo foreign key (tipo_quebra_tesouraria_key) references tipo_quebra_tesouraria;
alter table quebra_tesouraria add constraint fk_quebra_tesouraria_usuario foreign key (usuario_key) references usuario;
alter table recebimento_palete_item add constraint fk_palete_rec_palete_item foreign key (palete_key) references palete;
alter table recebimento_palete_item add constraint fk_rec_carga_rec_palete_item foreign key (movimentacao_carga_key) references movimentacao_carga;
alter table rede_loja add constraint fk_rede_lj_lj foreign key (loja_key) references loja on delete cascade;
alter table rede_loja add constraint fk_rede_lj_rede foreign key (rede_key) references rede on delete cascade;
alter table registro_fiscal add constraint fk_reg_fisc_contador foreign key (contador_key) references contador;
alter table registro_fiscal add constraint fk_reg_fisc_lj foreign key (loja_key) references loja;
alter table registro_fiscal add constraint fk_reg_fisc_pessoa foreign key (responsavel_key) references pessoa;
alter table registro_fiscal add constraint fk_reg_fisc_tipo_mod_reg_fisc foreign key (tipo_modelo_reg_fiscal_key) references tipo_modelo_registro_fiscal;
alter table registro_fiscal add constraint fk_reg_fisc_usr foreign key (usuario_key) references usuario;
alter table registro_fiscal_numeracao add constraint fk_reg_fisc_num_lj foreign key (loja_key) references loja;
alter table registro_fiscal_numeracao add constraint fk_reg_fisc_num_tipo_reg_fisc foreign key (tipo_registro_fiscal_key) references tipo_registro_fiscal;
alter table relatorio_movimento add constraint fk_rel_mov_tipo_mov foreign key (tipo_movimento_key) references tipo_movimento on delete cascade;
alter table relatorio_movimento add constraint fk_rel_mov_tipo_rel foreign key (tipo_relatorio_key) references tipo_relatorio on delete cascade;
alter table relatorio_operador add constraint fk_rel_operador_lj foreign key (loja_key) references loja;
alter table relatorio_operador add constraint fk_rel_operador_operador foreign key (operador_key) references operador;
alter table representante add constraint fk_representante_pessoa foreign key (pessoa_key) references pessoa;
alter table requisicao_suporte add constraint fk_req_sup_lj foreign key (loja_key) references loja;
alter table requisicao_suporte add constraint fk_req_sup_pessoa foreign key (usuario_key) references pessoa;
alter table requisicao_suporte add constraint fk_req_sup_tipo_req foreign key (tipo_requisicao_key) references tipo_requisicao_suporte;
alter table requisicao_suporte add constraint fk_req_sup_usuario foreign key (usuario_suporte) references pessoa;
alter table requisicao_suporte add constraint fk_requisicao_suporte_mensagem foreign key (primeira_mensagem_key) references mensagem_popup on delete set null;
alter table reserva_estoque add constraint fk_reserva_estoque_loja foreign key (loja_key) references loja;
alter table reserva_estoque add constraint fk_reserva_estoque_mov_compra foreign key (movimento_compra_key) references movimento_compra;
alter table reserva_estoque add constraint fk_reserva_estoque_produto foreign key (produto_key) references produto;
alter table reserva_estoque_item add constraint fk_reserva_est_item_dist_item foreign key (distribuicao_logist_item_key) references distribuicao_logistica_item;
alter table reserva_estoque_item add constraint fk_reserva_estoque_item_pessoa foreign key (destinatario_key) references pessoa;
alter table reserva_estoque_item add constraint fk_reserva_estoque_item_reserv foreign key (reserva_estoque_key) references reserva_estoque;
alter table resumo_apuracao_impostos add constraint fk_res_apur_imp_departamento foreign key (departamento_key) references departamento;
alter table resumo_apuracao_impostos add constraint fk_res_apur_imp_grupo_prod foreign key (grupo_produto_key) references grupo_produto;
alter table resumo_apuracao_impostos add constraint fk_res_apur_imp_loja foreign key (loja_key) references pessoa;
alter table resumo_apuracao_impostos add constraint fk_res_apur_imp_secao foreign key (secao_key) references secao;
alter table resumo_apuracao_impostos add constraint fk_res_apur_imp_setor_compra foreign key (setor_compra_key) references setor_compra;
alter table resumo_apuracao_impostos add constraint fk_res_apur_imp_sub_grupo_prod foreign key (sub_grupo_produto_key) references sub_grupo_produto;
alter table resumo_conta_comercial add constraint fk_resumo_conta_setor_compra foreign key (setor_compra_key) references setor_compra;
alter table resumo_conta_comercial add constraint fk_resumo_conta_tipo_lanca foreign key (tipo_lancamento_key) references tipo_lancamento;
alter table resumo_cupom_fiscal add constraint fk_resumo_cupom_fiscal_calend foreign key (calendario_key) references calendario;
alter table resumo_cupom_fiscal add constraint fk_resumo_cupom_fiscal_loja foreign key (loja_key) references loja;
alter table resumo_cupom_fiscal add constraint fk_resumo_cupom_fiscal_receb foreign key (recebimento_key) references recebimento;
alter table resumo_geral add constraint fk_res_geral_departamento foreign key (departamento_key) references departamento;
alter table resumo_geral add constraint fk_res_geral_secao foreign key (secao_key) references secao;
alter table resumo_geral add constraint fk_resumo_geral_calendario foreign key (calendario_key) references calendario;
alter table resumo_pedido_venda_cliente add constraint fk_resumo_pedido_venda_cliente foreign key (cliente_key) references cliente;
alter table resumo_pedido_venda_cliente add constraint fk_resumo_pedido_venda_produto foreign key (produto_key) references produto;
alter table resumo_presenca_cupom add constraint fk_resumo_presenca_cupom_cal foreign key (calendario_key) references calendario;
alter table resumo_presenca_cupom add constraint fk_resumo_presenca_cupom_loja foreign key (loja_key) references loja;
alter table resumo_presenca_cupom add constraint fk_resumo_presenca_cupom_secao foreign key (secao_key) references secao;
alter table resumo_tkt_medio add constraint fk_resumo_tkt_medio_calendario foreign key (calendario_key) references calendario;
alter table resumo_tkt_medio add constraint fk_resumo_tkt_medio_loja foreign key (loja_key) references loja;
alter table resumo_tkt_medio_depto add constraint fk_resumo_tkt_med_depto_calend foreign key (calendario_key) references calendario;
alter table resumo_tkt_medio_depto add constraint fk_resumo_tkt_med_depto_depto foreign key (departamento_key) references departamento;
alter table resumo_tkt_medio_depto add constraint fk_resumo_tkt_med_depto_loja foreign key (loja_key) references loja;
alter table resumo_tkt_medio_finalizadora add constraint fk_resumo_tkt_finalizadora_dt foreign key (calendario_key) references calendario;
alter table resumo_tkt_medio_finalizadora add constraint fk_resumo_tkt_finalizadora_fn foreign key (finalizadora_key) references recebimento;
alter table resumo_tkt_medio_finalizadora add constraint fk_resumo_tkt_finalizadora_lj foreign key (loja_key) references loja;
alter table resumo_tkt_medio_hora add constraint fk_resumo_tkt_hora_calendario foreign key (calendario_key) references calendario;
alter table resumo_tkt_medio_hora add constraint fk_resumo_tkt_hora_loja foreign key (loja_key) references loja;
alter table resumo_tkt_medio_hora_depto add constraint fk_resumo_tkt_hora_depto_calen foreign key (calendario_key) references calendario;
alter table resumo_tkt_medio_hora_depto add constraint fk_resumo_tkt_hora_depto_depto foreign key (departamento_key) references departamento;
alter table resumo_tkt_medio_hora_depto add constraint fk_resumo_tkt_hora_depto_loja foreign key (loja_key) references loja;
alter table resumo_tkt_medio_hora_secao add constraint fk_resumo_tkt_hora_secao_calen foreign key (calendario_key) references calendario;
alter table resumo_tkt_medio_hora_secao add constraint fk_resumo_tkt_hora_secao_depto foreign key (departamento_key) references departamento;
alter table resumo_tkt_medio_hora_secao add constraint fk_resumo_tkt_hora_secao_loja foreign key (loja_key) references loja;
alter table resumo_tkt_medio_hora_secao add constraint fk_resumo_tkt_hora_secao_secao foreign key (secao_key) references secao;
alter table resumo_tkt_medio_secao add constraint fk_resumo_tkt_med_secao_calend foreign key (calendario_key) references calendario;
alter table resumo_tkt_medio_secao add constraint fk_resumo_tkt_med_secao_loja foreign key (loja_key) references loja;
alter table resumo_tkt_medio_secao add constraint fk_resumo_tkt_med_secao_secao foreign key (secao_key) references secao;
alter table romaneio add constraint fk_romaneio_nf foreign key (nf_key) references nota_fiscal;
alter table romaneio add constraint fk_romaneio_usuario foreign key (conferente) references usuario;
alter table romaneio_item add constraint fk_romaneio_item_produto foreign key (item_key) references item;
alter table romaneio_item add constraint fk_romaneio_item_romaneio foreign key (romaneio_key) references romaneio;
alter table romaneio_item add constraint fk_romaneio_nf_item foreign key (nf_item_pedido_key) references nota_fiscal_item;
alter table roteiro_item add constraint fk_roteiro_item_pesq foreign key (pesquisa_key) references pesquisa;
alter table roteiro_item add constraint fk_roteiro_item_roteiro foreign key (roteiro_key) references roteiro;
alter table saldo_contabil_atual add constraint fk_saldo_contabil_atual_conta foreign key (conta_contabil_key) references conta_contabil;
alter table saldo_contabil_atual add constraint fk_saldo_contabil_atual_loja foreign key (loja_key) references loja;
alter table saldo_contabil_inicial add constraint fk_saldo_ci_conta_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table saldo_contabil_inicial add constraint fk_saldo_ci_loja foreign key (loja_key) references loja;
alter table saldo_contabil_por_competencia add constraint fk_saldo_contabil_comp_comp foreign key (competencia_contabil_key) references competencia_contabil;
alter table saldo_contabil_por_competencia add constraint fk_saldo_contabil_comp_conta foreign key (conta_contabil_key) references conta_contabil;
alter table saldo_contabil_por_competencia add constraint fk_saldo_contabil_comp_loja foreign key (loja_key) references loja;
alter table sangria_lancamento_tipo add constraint fk_sang_lanc_tp_tipo_lanc_cx foreign key (tipo_lancamento_caixa_key) references tipo_lancamento_caixa;
alter table secao add constraint fk_secao_departamento foreign key (departamento_key) references departamento;
alter table separacao add constraint fk_sep_lj foreign key (loja_key) references loja;
alter table separacao_item add constraint fk_sep_item_prod foreign key (produto_key) references produto;
alter table separacao_item add constraint fk_sep_item_sep foreign key (separacao_key) references separacao on delete cascade;
alter table separacao_lote add constraint fk_sep_lt_prod foreign key (produto_key) references produto;
alter table separacao_lote add constraint fk_sep_lt_sep foreign key (separacao_key) references separacao on delete cascade;
alter table separacao_mercadoria add constraint fk_sep_merc_sep_item foreign key (separacao_key,produto_pai) references separacao_item on delete cascade;
alter table setor_balanca add constraint fk_set_bal_set_bal_padrao foreign key (setor_balanca_key) references setor_balanca_padrao;
alter table setor_balanca add constraint fk_set_bal_tipo_bal foreign key (balanca_key) references tipo_balanca;
alter table setor_compra add constraint fk_set_compra_comprador foreign key (responsavel) references comprador;
alter table sindicato add constraint fk_sindicato_pessoa foreign key (pessoa_key) references pessoa;
alter table solicitacao_compra add constraint fk_usuario_emissao foreign key (usuario_emissao) references usuario;
alter table solicitacao_compra add constraint fk_usuario_fechamento foreign key (usuario_fechamento) references usuario;
alter table solicitacao_compra_produto add constraint fk_solicitacao_produto foreign key (produto_key) references produto;
alter table solicitacao_compra_produto add constraint fk_solic_produto_solic_compra foreign key (solicitacao_compra_key) references solicitacao_compra;
alter table solicitacao_compra_produto_lj add constraint fk_solicitacao_produto_loja foreign key (loja_key) references loja;
alter table solicitacao_compra_produto_lj add constraint fk_solic_produto_lj_solic_prod foreign key (solicitacao_compra_produto_key) references solicitacao_compra_produto;
alter table status_credito add constraint fk_status_credito_bloq_credito foreign key (bloqueio_credito_key) references bloqueio_credito;
alter table status_recebimento add constraint fk_stat_receb_tp_stat_receb foreign key (tipo_status_recebimento_key) references tipo_status_recebimento;
alter table status_recebimento add constraint fk_status_receb_nf foreign key (nf_key) references nota_fiscal on delete cascade;
alter table status_recebimento add constraint fk_status_receb_usr foreign key (usuario_key) references usuario;
alter table sub_conta_bancaria add constraint fk_sub_conta_conta_bancaria foreign key (conta_bancaria_key) references conta_bancaria;
alter table sub_conta_bancaria add constraint fk_sub_conta_tipo_conta foreign key (tipo_conta_bancaria_key) references tipo_conta_bancaria;
alter table sub_finalizadora add constraint fk_sub_finalizadora_bandeira foreign key (tipo_bandeira_key) references tipo_bandeira;
alter table sub_finalizadora add constraint fk_sub_fin_fin foreign key (finalizadora_key) references finalizadora;
alter table sub_finalizadora add constraint fk_sub_fin_tipo_cx foreign key (fk_tipo_caixa) references tipo_caixa;
alter table sub_finalizadora add constraint fk_sub_recebimento foreign key (recebimento_key) references recebimento;
alter table sub_grupo_produto add constraint fk_sub_gp_prod_cofins foreign key (cofins_key) references cofins;
alter table sub_grupo_produto add constraint fk_sub_gp_prod_gp_prod foreign key (grupo_produto_key) references grupo_produto;
alter table sub_grupo_produto add constraint fk_sub_gp_prod_pis foreign key (pis_key) references pis;
alter table sugestao_compra_externa add constraint fk_sugest_compra_ext_forn foreign key (fornecedor_key) references fornecedor;
alter table sugestao_compra_externa add constraint fk_sugest_compra_ext_loja foreign key (loja_key) references loja;
alter table sugestao_compra_externa add constraint fk_sugest_compra_ext_produto foreign key (produto_key) references produto;
alter table sugestao_compra_externa add constraint fk_sugest_compra_ext_usuario foreign key (usuario_key) references usuario;
alter table taxa_cartao_conta add constraint fk_tx_cartao_conta_tipo_cx foreign key (tipo_caixa_key) references tipo_caixa;
alter table taxa_cartao_loja add constraint fk_taxa_cartao_loja_conta foreign key (taxa_cartao_conta_key) references taxa_cartao_conta;
alter table terceiro add constraint fk_terceiro_pessoa foreign key (pessoa_key) references pessoa;
alter table teste_edi add constraint fk_teste_edi_conta_banc foreign key (conta_bancaria_key) references conta_bancaria;
alter table teste_edi add constraint fk_teste_edi_tipo_teste_edi foreign key (tipo_teste_edi_key) references tipo_teste_edi;
alter table teste_edi add constraint fk_teste_edi_usuario foreign key (usuario_key) references usuario;
alter table tipo_arquivo add constraint fk_tipo_arquivo_permissao foreign key (permissao_key) references permissao;
alter table tipo_caixa add constraint fk_tcx_adm foreign key (administradora_key) references administradora;
alter table tipo_caixa add constraint fk_tcx_tgmcx foreign key (grupo_caixa_key) references grupo_caixa;
alter table tipo_caixa add constraint fk_tipo_caixa_conta_despesa foreign key (conta_contabil_despesa_key) references conta_contabil;
alter table tipo_caixa add constraint fk_tipo_caixa_conta_receita foreign key (conta_contabil_receita_key) references conta_contabil;
alter table tipo_caixa add constraint fk_tipo_caixa_ct_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table tipo_caixa add constraint fk_tipo_caixa_periodo_corte foreign key (tipo_caixa_periodo_corte_key) references tipo_caixa_periodo_corte;
alter table tipo_caixa add constraint fk_tipo_caixa_tmb foreign key (tipo_movimento_bancario_key) references tipo_movimento_bancario;
alter table tipo_caixa_prazo add constraint fk_tipo_caixa_prazo_tipo_cx foreign key (tipo_caixa_key) references tipo_caixa;
alter table tipo_entrada_tesouraria add constraint fk_tipo_ent_tes_conta_cont foreign key (conta_contabil_key) references conta_contabil;
alter table tipo_escrita_fiscal_ajuste add constraint fk_ef_ajuste_tp_imposto foreign key (tipo_imposto_key) references tipo_imposto;
alter table tipo_folha_pagamento_mapa add constraint fk_tipo_folha_cobranca foreign key (tipo_folha_cobranca_key) references tipo_folha_cobranca;
alter table tipo_folha_pagamento_mapa add constraint fk_tipo_folha_tipo_folha_mapa foreign key (tipo_folha_pagamento_key) references tipo_folha_pagamento;
alter table tipo_guia_recolhimento_detalhe add constraint fk_t_gui_reco_deta_t_gui_reco foreign key (tipo_guia_recolhimento_key) references tipo_guia_recolhimento;
alter table tipo_imposto add constraint fk_tipo_imposto_tipo_guia foreign key (tipo_guia_recolhimento_key) references tipo_guia_recolhimento;
alter table tipo_lancamento add constraint fk_tipo_lancamento_conta_patri foreign key (conta_contabil_patrimonio_key) references conta_contabil;
alter table tipo_lancamento add constraint fk_tipo_lancamento_conta_resul foreign key (conta_contabil_resultado_key) references conta_contabil;
alter table tipo_lancamento_caixa add constraint fk_tipo_lanc_cx_fin foreign key (finalizadora_key) references finalizadora;
alter table tipo_lancamento_caixa add constraint fk_tipo_lanc_cx_sub_fin foreign key (sub_finalizadora_key) references sub_finalizadora;
alter table tipo_modelo_registro_fiscal add constraint fk_tp_mod_reg_fisc_tp_reg_fisc foreign key (tipo_registro_fiscal_key) references tipo_registro_fiscal;
alter table tipo_mov_caixa add constraint fk_tipo_caixa_estorno foreign key (tipo_mov_caixa_estorno_key) references tipo_mov_caixa;
alter table tipo_movimento add constraint fk_tipo_movimento_estorno foreign key (tipo_movimento_estorno_key) references tipo_movimento;
alter table tipo_movimento_bancario add constraint fk_tipo_mov_banc_ct_contabil foreign key (conta_contabil_key) references conta_contabil;
alter table tipo_movimento_bancario add constraint fk_tipo_mov_banc_grupo_finan foreign key (grupo_financeiro_key) references grupo_financeiro;
alter table tipo_movimento_bancario add constraint fk_tmb_administradora foreign key (fk_administradora) references administradora;
alter table tipo_pdv add constraint fk_tipo_pdv_tipo_tef foreign key (tipo_tef_key) references tipo_tef;
alter table tipo_pessoa add constraint fk_tipo_pessoa_descricao foreign key (tipo_pessoa_descricao_key) references tipo_pessoa_descricao;
alter table tipo_pessoa add constraint fk_tipo_pessoa_pessoa foreign key (pessoa_key) references pessoa on delete cascade;
alter table tipo_receita_tributaria add constraint fk_tipo_imposto foreign key (tipo_imposto_key) references tipo_imposto;
alter table tipo_receita_tributaria add constraint fk_tipo_rec_tributaria_estado foreign key (estado_sigla) references estado;
alter table transferencia_eletronica add constraint fk_transf_ele_cc_credito foreign key (conta_bancaria_credito_key) references conta_bancaria;
alter table transferencia_eletronica add constraint fk_transf_elet_ag_transf foreign key (agendamento_transferencia_key) references agendamento_transferencia;
alter table transferencia_eletronica add constraint fk_transf_elet_cont_banc foreign key (conta_bancaria_debito_key) references conta_bancaria;
alter table transferencia_eletronica add constraint fk_transf_elet_mtv_transf foreign key (motivo_transferencia_key) references motivo_transferencia;
alter table transferencia_eletronica add constraint fk_transf_elet_tipo_status_pag foreign key (tipo_status_pagamento_key) references tipo_status_pagamento;
alter table transferencia_eletronica add constraint fk_transf_elet_tipo_transf foreign key (tipo_transferencia_key) references tipo_transferencia;
alter table transferencia_valores add constraint fk_transf_val_lj foreign key (loja_key_origem) references loja;
alter table transferencia_valores add constraint fk_transf_val_loja_destino foreign key (loja_key_destino) references loja;
alter table transferencia_valores add constraint fk_transf_val_mtv_transf_val foreign key (motivo_transferencia_key) references motivo_transferencia_valores;
alter table transferencia_valores add constraint fk_transf_val_tipo_cx foreign key (tipo_caixa_key) references tipo_caixa;
alter table transferencia_valores add constraint fk_transf_val_usr foreign key (usuario_entrada_key) references usuario;
alter table transferencia_valores add constraint fk_transf_val_usuario_saida foreign key (usuario_saida_key) references usuario;
alter table transmissao_nfe add constraint fk_transmissao_nfe_ambiente foreign key (tipo_ambiente_nfe_key) references tipo_ambiente_nfe;
alter table transmissao_nfe add constraint fk_transmissao_nfe_arq_remessa foreign key (arquivo_remessa) references arquivo_nfe;
alter table transmissao_nfe add constraint fk_transmissao_nfe_arq_retorno foreign key (arquivo_retorno) references arquivo_nfe;
alter table transmissao_nfe add constraint fk_transmissao_nfe_nota_fiscal foreign key (nf_key) references nota_fiscal;
alter table transmissao_nfe add constraint fk_transmissao_nfe_resp_nfe foreign key (tipo_resposta_nfe_key) references tipo_resposta_nfe;
alter table transmissao_nfe add constraint fk_transmissao_nfe_servico_nfe foreign key (tipo_servico_nfe_key) references tipo_servico_nfe;
alter table transmissao_nfe add constraint fk_transmissao_nfe_usuario foreign key (usuario_key) references usuario;
alter table transportadora add constraint fk_transportadora_pessoa foreign key (pessoa_key) references pessoa;
alter table transportadora_cargas add constraint fk_transportadora_cargas foreign key (pessoa_key) references pessoa;
alter table transportadora_valores add constraint fk_transportadora_valores foreign key (pessoa_key) references pessoa;
alter table tributacao_ref_produto_de_para add constraint fk_trib_ref_prod_de_para_prod foreign key (produto_key) references produto;
alter table tributacao_ref_produto_log add constraint fk_trib_ref_prod_log_classif foreign key (anterior_classif_fiscal_key) references classificacao_fiscal;
alter table tributacao_ref_produto_log add constraint fk_trib_ref_prod_log_cofins foreign key (anterior_cofins_key) references cofins;
alter table tributacao_ref_produto_log add constraint fk_trib_ref_prod_log_icms foreign key (anterior_icms_key) references icm;
alter table tributacao_ref_produto_log add constraint fk_trib_ref_prod_log_pis foreign key (anterior_pis_key) references pis;
alter table tributacao_ref_produto_log add constraint fk_trib_ref_prod_log_trib_prod foreign key (tributacao_ref_produto_key) references tributacao_referencia_produto;
alter table tributacao_ref_produto_log add constraint fk_trib_ref_prod_log_usuario foreign key (usuario_alteracao_key) references usuario;
alter table tributacao_referencia_lote add constraint fk_tributacao_ref_lote_usuario foreign key (usuario_importacao_key) references usuario;
alter table tributacao_referencia_produto add constraint fk_trib_ref_produto_classif foreign key (classificacao_fiscal_key) references classificacao_fiscal;
alter table tributacao_referencia_produto add constraint fk_trib_ref_produto_cofins foreign key (cofins_key) references cofins;
alter table tributacao_referencia_produto add constraint fk_trib_ref_produto_icms foreign key (icms_key) references icm;
alter table tributacao_referencia_produto add constraint fk_trib_ref_produto_pis foreign key (pis_key) references pis;
alter table tributacao_referencia_produto add constraint fk_trib_ref_produto_produto foreign key (produto_key) references produto;
alter table tributacao_referencia_produto add constraint fk_trib_ref_produto_trib_ref foreign key (tributacao_referencia_lote_key) references tributacao_referencia_lote;
alter table troca add constraint fk_troca_lj foreign key (loja_key) references loja;
alter table troca add constraint fk_troca_prod foreign key (produto_key) references produto;
alter table troca add constraint fk_troca_tipo_troca foreign key (tipo_troca_key) references tipo_troca;
alter table troca_produto_loja add constraint fk_troca_prod_fornecedor foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table troca_produto_loja add constraint fk_troca_prod_loja foreign key (loja_key) references loja;
alter table troca_produto_loja add constraint fk_troca_prod_loja_produto foreign key (produto_key) references produto;
alter table troca_transferencia add constraint fk_troca_transf_forn_div foreign key (fornecedor_key,divisao_key) references fornecedor_divisao;
alter table troca_transferencia add constraint fk_troca_transf_lj foreign key (loja_origem_key) references loja;
alter table troca_transferencia add constraint fk_troca_transf_loja_dest foreign key (loja_destino_key) references loja;
alter table troca_transferencia add constraint fk_troca_transf_prod foreign key (produto_key) references produto;
alter table ultimo_movimento add constraint fk_ultimo_mov_mov_estoque foreign key (ajuste_credito) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_ajuste_debito foreign key (ajuste_debito) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_armazenagem_entrada foreign key (armazenagem_entrada) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_armazenagem_saida foreign key (armazenagem_saida) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_compra foreign key (compra) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_devolucao_compra foreign key (devolucao_compra) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_transferencia foreign key (transferencia) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_troca_entrada foreign key (troca_entrada) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_troca_saida foreign key (troca_saida) references movimento_estoque;
alter table ultimo_movimento add constraint fk_um_venda foreign key (venda) references movimento_estoque;
alter table ultimo_pedido_venda_cliente add constraint fk_ultimo_pedido_venda foreign key (pedido_venda_key) references pedido_venda on delete cascade;
alter table ultimo_pedido_venda_cliente add constraint fk_ultimo_pedido_venda_cliente foreign key (cliente_key) references cliente on delete cascade;
alter table uniao add constraint fk_uniao_filho foreign key (chave_filho) references pessoa on delete cascade;
alter table uniao add constraint fk_uniao_pessoa foreign key (chave_pai) references pessoa;
alter table uniao add constraint fk_uniao_tipo_uniao foreign key (tipo_uniao_key) references tipo_uniao;
alter table usuario add constraint fk_usr_pessoa foreign key (usuario_key) references pessoa;
alter table usuario add constraint fk_usuario_theme foreign key (theme_key) references theme;
alter table usuario_limite_financeiro add constraint fk_usr_lim_finan_usr foreign key (usuario_key) references usuario;
alter table usuario_limite_financeiro add constraint fk_usr_lim_fin_tipo_mov_fin foreign key (tipo_movimento_financeiro_key) references tipo_movimento_financeiro;
alter table usuario_loja add constraint fk_usuario_loja_loja foreign key (loja_key) references loja on delete cascade;
alter table usuario_loja add constraint fk_usuario_loja_usuario foreign key (usuario_key) references usuario on delete cascade;
alter table usuario_preferencias add constraint fk_usr_pref_usr foreign key (usuario_key) references usuario;
alter table vd_cupom_devolvido add constraint fk_vd_cupom_devol_loja foreign key (loja_key) references loja;
alter table vd_cupom_devolvido add constraint fk_vd_cupom_devol_nota_fiscal foreign key (nf_key) references nota_fiscal;
alter table vd_cupom_devolvido add constraint fk_vd_cupom_devol_operador foreign key (operador_devolucao_key) references operador;
alter table vd_cupom_devolvido add constraint fk_vd_cupom_devol_tipo foreign key (tipo_cupom_devolvido_key) references tipo_cupom_devolvido;
alter table vd_cupom_devolvido add constraint fk_vd_cupom_devol_usuario foreign key (usuario_key) references usuario;
alter table vd_cupom_devolvido add constraint fk_vd_cupom_devol_usu_estorno foreign key (usuario_estorno_key) references usuario;
alter table vd_cupom_fiscal add constraint fk_nota_fiscal_vd_cupom_fiscal foreign key (nf_key) references nota_fiscal;
alter table vd_cupom_fiscal add constraint fk_vd_cupom_fiscal_calendario foreign key (calendario_key) references calendario;
alter table vd_cupom_fiscal add constraint fk_vd_cupom_fiscal_tipo foreign key (tipo) references vd_tipo_cupom;
alter table vd_cupom_item add constraint fk_cofins_vd_cupom_item foreign key (cofins_key) references cofins;
alter table vd_cupom_item add constraint fk_pis_vd_cupom_item foreign key (pis_key) references pis;
alter table vd_cupom_item add constraint fk_produto_vd_cupom_item foreign key (produto_key) references produto;
alter table vd_cupom_item add constraint fk_vd_cp_item_icm foreign key (icm_key) references icm;
alter table vd_cupom_item add constraint fk_vd_cp_item_vd_cp_fisc foreign key (cupom_fiscal_key) references vd_cupom_fiscal on delete cascade;
alter table vd_cupom_item_nota_fiscal_item add constraint fk_nf_vd_cupom_item_cupom foreign key (vd_cupom_item_key) references vd_cupom_item on delete cascade;
alter table vd_cupom_item_nota_fiscal_item add constraint fk_nf_vd_cupom_nf_item_nf foreign key (nota_fiscal_item_key) references nota_fiscal_item on delete cascade;
alter table vd_cupom_recebimento add constraint fk_vd_cp_receb_receb foreign key (recebimento_key) references recebimento;
alter table vd_cupom_recebimento add constraint fk_vd_cp_receb_vd_cp_fisc foreign key (cupom_fiscal_key) references vd_cupom_fiscal on delete cascade;
alter table vd_item_cupom_devolvido add constraint fk_vd_item_cupom_devol_loja foreign key (loja_key) references loja;
alter table vd_item_cupom_devolvido add constraint fk_vd_item_cupom_devol_produto foreign key (produto_key) references produto;
alter table vd_item_cupom_devolvido add constraint fk_vd_item_cupom_devol_usuario foreign key (vd_cupom_devolvido_key) references vd_cupom_devolvido;
alter table vd_leitura add constraint fk_vd_leitura_vd_cp_fisc foreign key (cupom_fiscal_key) references vd_cupom_fiscal on delete cascade;
alter table vd_leitura add constraint fk_vd_leitura_vd_tipo_trans foreign key (vd_tipo_transacao_key) references vd_tipo_transacao;
alter table vd_tipo_transacao add constraint fk_vd_tipo_trans_tipo_lanc_cx foreign key (tipo_lancamento_caixa_key) references tipo_lancamento_caixa;
alter table vd_tipo_transacao add constraint fk_vd_tipo_trans_tipo_mapa_res foreign key (tipo_mapa_resumo_key) references tipo_mapa_resumo;
alter table vd_tt_recebimento add constraint fk_vdtt_recebimento foreign key (vd_tipo_transacao_key) references vd_tipo_transacao on delete cascade;
alter table vd_tt_recebimento add constraint fk_vdtt_vtt foreign key (recebimento_key) references recebimento on delete cascade;
alter table vencimento_medio_estoque add constraint fk_venc_medio_estoque_lj foreign key (loja_key) references loja;
alter table vencimento_medio_estoque add constraint fk_venc_medio_estoque_prod foreign key (produto_key) references produto;
alter table venda_irregular add constraint fk_venda_irregular_lj foreign key (loja_key) references loja;
alter table venda_online_log add constraint fk_vo_log_loja foreign key (loja_key) references loja;
alter table vendedor add constraint fk_vendedor_pessoa foreign key (pessoa_key) references pessoa;

create index agendamento_transferencia_tran on agendamento_transferencia(transferencia_eletronica_key asc);
create index ajuste_troca_data on ajuste_trocas(data_ajuste asc);
create index ajuste_troca_loja on ajuste_trocas(loja_key asc);
create index arq_dest on arquivo(destinatario asc);
create index indx_arquivo_edi_linha on arquivo_edi_linha(arquivo_edi_key asc);
create index arquivo_nfe_nf on arquivo_nfe(nf_key asc);
create index ind_arq_nfe_loja on arquivo_nfe(loja_key asc);
create index arquivo_nfe_recebido_cnpj_remt on arquivo_nfe_recebido(cpf_cnpj_remetente asc);
create index arquivo_nfe_recebido_data on arquivo_nfe_recebido(data_processamento asc);
create index arquivo_nfe_recebido_loja on arquivo_nfe_recebido(loja_key asc);
create index arquivo_nfe_recebido_nf_numero on arquivo_nfe_recebido(numero_nota_fiscal asc);
create index arquivo_nfe_recebido_nome_remt on arquivo_nfe_recebido(nome_remetente asc);
create index arquivo_nfe_recebido_status on arquivo_nfe_recebido(tipo_status_arquivo_key asc);
create index idx_processamento_calendario on arquivo_nfe_recebido(processamento_calendario_key asc);
create index ind_arq_nfe_rec_nf on arquivo_nfe_recebido(nf_key asc);
create index ind_arq_nfe_rec_tipo_chave on arquivo_nfe_recebido(tipo_arquivo_nfe_key asc,chave asc);
create index ap_bordero on autorizacao_pagamento(bordero_key asc);
create index ap_contrato_servico on autorizacao_pagamento(contrato_servico_key asc);
create index ap_data_pagamento on autorizacao_pagamento(data_pagamento asc);
create index ap_doc on autorizacao_pagamento(numero_documento asc);
create index ap_fatura on autorizacao_pagamento(fatura_key asc);
create index ap_favorecido on autorizacao_pagamento(favorecido asc);
create index ap_valor_fat_favorecido on autorizacao_pagamento(valor_fatura asc,favorecido asc);
create index ap_vcto on autorizacao_pagamento(data_vencimento asc);
create index idx_ap_data_quitacao on autorizacao_pagamento(data_quitacao asc);
create index idx_auto_pag_data_emissao on autorizacao_pagamento(data_emissao asc);
create index idx_autori_pag_mod_acordo_prom on autorizacao_pagamento(modelo_acordo_prom_key asc);
create index idx_duplicata_agrupamento on autorizacao_pagamento(duplicata_agrup_originada_key asc);
create index idx_baixa_venda_data_venda on baixa_venda(data_venda asc);
create index idx_baixa_venda_ecf on baixa_venda(ecf asc);
create index idx_baixa_venda_loja_key on baixa_venda(loja_key asc);
create index bm_ano_mes on balanco_mensal(ano asc,mes asc,loja_key asc);
create index bm_loja on balanco_mensal(loja_key asc,periodo asc);
create index bm_periodo on balanco_mensal(periodo asc);
create index bm_prod_loj on balanco_mensal(produto_key asc,loja_key asc);
create index bm_produto on balanco_mensal(produto_key asc);
create index bm_produto_periodo on balanco_mensal(produto_key asc,periodo asc);
create index prim_venda on balanco_mensal(primeira_venda asc);
create index banco_cobranca_ap on banco_cobranca(ap_key asc);
create index banco_extrato_conta on banco_extrato(conta_bancaria_key asc);
create index banco_extrato_data on banco_extrato(lancamento_data asc);
create index banco_extrato_data_contabil on banco_extrato(data_contabil asc);
create index banco_extrato_ext_saldo on banco_extrato(banco_extrato_saldo_key asc);
create index banco_extrato_status on banco_extrato(status_conciliacao_key asc);
create index banco_extrato_valor on banco_extrato(lancamento_valor asc);
create index banco_extrato_historico_banco on banco_extrato_historico(banco_key asc);
create index banco_extrato_historico_tp_mov on banco_extrato_historico(tipo_movimento_bancario_key asc);
create index bordero_conta_bancaria on bordero(conta_bancaria_key asc);
create index cc_cpf_tipo_caixa_data_dep on cadastro_caixa(cpf asc,tipo_caixa_key asc,data_para_deposito asc);
create index idx_mov_bancario_baixa_key on cadastro_caixa(movimento_bancario_baixa_key asc);
create index cadastro_caixa_ocorrencia_cc on cadastro_caixa_ocorrencia(cadastro_caixa_key asc);
create index idx_calendario_ano_mes on calendario(ano_mes asc);
create index card_ajuste_rv_estabel_filial on card_ajuste_rv(estabelecimento_filial_key asc);
create index card_ajuste_rv_rv on card_ajuste_rv(card_resumo_venda_key asc);
create index card_comprovante_resumo_venda on card_comprovante_venda(card_resumo_venda_key asc);
create index card_cv_parcela_cadastro_caixa on card_cv_parcela(cadastro_caixa_key asc);
create index card_cv_parcela_cv on card_cv_parcela(card_comprovante_venda_key asc);
create index card_ordem_credito_conta on card_ordem_credito(conta_bancaria_key asc);
create index card_ordem_credito_filial on card_ordem_credito(estabelecimento_key_creditado asc);
create index card_resumo_venda_conta on card_resumo_venda(conta_bancaria_key asc);
create index cc_cliente on cheque_cliente(pessoa_key asc);
create index cc_data on cheque_cliente(data asc);
create index idx_class_fiscal_descriao on classificacao_fiscal(descricao asc);
create index cliente_telefone_principal on cliente(telefone_principal asc);
create index cobranca_ap on cobranca(ap_key asc);
create index idx_competencia_ct_exercicio on competencia_contabil(exercicio_contabil_key asc);
create index idx_competencia_ct_lj_comp_ct on competencia_contabil_loja(competencia_contabil_key asc);
create index idx_competencia_ct_lj_loja on competencia_contabil_loja(loja_key asc);
create index conc_finin_loja on conciliacao_fininvest(loja_key asc);
create index conta_analitica_sintetica on conta_analitica(conta_sintetica_key asc);
create index conta_bancaria_agencia on conta_bancaria(agencia_key asc);
create index conta_bancaria_pessoa on conta_bancaria(pessoa_key asc);
create index cf_forn_div on conta_fornecedor(fornecedor_key asc,divisao_key asc);
create index cf_setor on conta_fornecedor(setor_compra_key asc);
create index idx_conta_forn_mov_est_mov_est on conta_fornecedor_mov_estoque(movimento_estoque_key asc);
create index contato_pessoa on contato(pessoa_key asc);
create index cf_forndiv on contrato_fornecimento(fornecedor_key asc,divisao_key asc);
create index ind_contrato_servico_loja on contrato_servico(loja_key asc);
create index ind_contrato_servico_pessoa on contrato_servico(pessoa_key asc);
create index cupom_devolvido_nf on cupom_devolvido(nf_key asc);
create index ind_cupom_devolvido_operador on cupom_devolvido(operador_devolucao_key asc);
create index cp_valor on cupom_fiscal(valor_total asc);
create index cupom_fiscal_nf on cupom_fiscal(nf_key asc);
create index cupom_item_cupom_fiscal on cupom_item(cupom_fiscal_key asc);
create index cupom_leitura_cupom_fiscal on cupom_leitura(cupom_fiscal_key asc);
create index cupom_receb_cupom_fiscal on cupom_recebimento(cupom_fiscal_key asc);
create index idx_declaracao_importacao_nf on declaracao_importacao(nf_key asc);
create index ind_depreciacao_loja on depreciacao(loja_key asc);
create index distribuicao_logistica_loja on distribuicao_logistica(loja_key asc);
create index divergencia_impor_log_item_pai on divergencia_impor_log_item(divergencia_importacao_log_key asc);
create index xak1embalagem on embalagem(nome asc);
create index end_muni on endereco(municipio_key asc);
create index idx_endereco_estado on endereco(estado_sigla asc);
create index idx_escrita_ap_fed_cred_eaf on escrita_apuracao_fed_cred(escrita_apuracao_federal_key asc);
create index idx_escr_ap_fed_cred_det_base on escrita_apuracao_fed_cred_det(tipo_base_credito_pis_key asc);
create index idx_escr_ap_fed_cred_det_pai on escrita_apuracao_fed_cred_det(escrita_apuracao_fed_cred_key asc);
create index ind_escr_apuracao_fed_deb_escr on escrita_apuracao_fed_deb(escrita_apuracao_federal_key asc);
create index idx_escr_ap_fed_tipo_imp_fed on escrita_apuracao_federal(tipo_imposto_federal_key asc);
create index ind_escr_apuracao_federal_escr on escrita_apuracao_federal(escrita_apuracao_key asc);
create index ind_escrita_ap_icms_escr_ap on escrita_apuracao_icms(escrita_apuracao_key asc);
create index escrita_apuracao_item_ea on escrita_apuracao_icms_item(escrita_apuracao_icms_key asc);
create index idx_escrita_doc_data_operacao on escrita_documento(data_operacao asc);
create index idx_escrita_doc_duplicata on escrita_documento(duplicata_key asc);
create index idx_escrita_doc_esc_apuracao on escrita_documento(escrita_apuracao_key asc);
create index idx_escrita_doc_loja on escrita_documento(loja_key asc);
create index idx_escrita_doc_participante on escrita_documento(participante_key asc);
create index idx_escrita_doc_status_escrita on escrita_documento(status_escrita_fiscal_key asc);
create index escrita_fiscal_data_es_loja on escrita_fiscal(data_entrada_saida asc,remetente_key asc);
create index escrita_fiscal_emitente on escrita_fiscal(emitente_key asc);
create index escrita_fiscal_nf on escrita_fiscal(nf_key asc);
create index escrita_fiscal_nf_numero on escrita_fiscal(nf_numero asc);
create index idx_escrita_fiscal_modelo on escrita_fiscal(tipo_modelo_nf_key asc);
create index ind_escrita_fiscal_escr_ap on escrita_fiscal(escrita_apuracao_key asc);
create index ind_escrita_fiscal_status on escrita_fiscal(status_escrita_fiscal_key asc);
create index ind_escr_fiscal_ajuste_escr on escrita_fiscal_ajuste(escrita_fiscal_key asc);
create index ind_escr_fiscal_ajuste_escr_ap on escrita_fiscal_ajuste(escrita_apuracao_key asc);
create index ind_escr_fiscal_ajuste_loja on escrita_fiscal_ajuste(loja_key asc);
create index ind_escr_fiscal_ajuste_status on escrita_fiscal_ajuste(status_escrita_fiscal_key asc);
create index efi_nfi on escrita_fiscal_item(nota_fiscal_item_key asc);
create index escrita_fiscal_item_aliquota on escrita_fiscal_item(aliquota asc);
create index escrita_fiscal_item_ef on escrita_fiscal_item(escrita_fiscal_key asc);
create index idx_escrita_fiscal_item_prod on escrita_fiscal_item(produto_key asc);
create index idx_escrita_fiscal_obs_ef on escrita_fiscal_observacao(escrita_fiscal_key asc);
create index ind_escrita_fiscal_obs_modelo on escrita_fiscal_observacao(modelo_observacao_fiscal_key asc);
create index ind_escrita_fiscal_ocor_escr on escrita_fiscal_ocorrencia(escrita_fiscal_key asc);
create index estabelecimento_filial_loja on estabelecimento_filial(loja_key asc);
create index estabelecimento_filial_matriz on estabelecimento_filial(estabelecimento_matriz_key asc);
create index xak1estado on estado(nome asc);
create index ind_exportacao_redf_func on exportacao_redf(loja_key asc);
create index fco_data_loja_ecf on fechamento_caixa_operador(data asc,loja_key asc,numero_ecf asc);
create index idx_ficha_estoque_ter_indi on ficha_estoque_terceiros(indicador_de_propriedade_key asc);
create index idx_ficha_estoque_ter_prod on ficha_estoque_terceiros(produto_key asc);
create index idx_ficha_estoque_ter_terc on ficha_estoque_terceiros(terceiro_key asc);
create index idx_ficha_estoque_troca_lj on ficha_estoque_troca(loja_key asc);
create index fornecedor_matriz on fornecedor(fornecedor_matriz_key asc);
create index fd_fornecedor_key on fornecedor_divisao(fornecedor_key asc);
create index fornecedor_divisao_descricao on fornecedor_divisao(descricao asc);
create index fornecedor_produto_cod_ref on fornecedor_produto(codigo_referencia asc);
create index fp_produto_key on fornecedor_produto(produto_key asc);
create index ind_func_afastamento_func on func_afastamento(funcionario_key asc);
create index ind_func_dependente on func_dependente(funcionario_key asc);
create index func_ferias_funcionario on func_ferias(funcionario_key asc);
create index ind_func_funcao_func on func_funcao(funcionario_key asc);
create index func_historico_funcionario on func_historico(funcionario_key asc);
create index ind_func_salario_func on func_salario(funcionario_key asc);
create index xak1grupo on grupo(nome asc);
create index grupo_produto_secao on grupo_produto(secao_key asc);
create index ind_guia_diferenca_cf on guia_diferenca(guia_carro_forte_key asc);
create index icm_venda_produto_key on icm_venda(produto_key asc);
create index idx_importacao_cb_agencia on importacao_conta_bancaria(agencia_numero asc);
create index idx_importacao_cb_banco on importacao_conta_bancaria(banco_numero asc);
create index idx_importacao_cb_inscr on importacao_conta_bancaria(inscricao_numero asc);
create index idx_importacao_pessoa_inscr on importacao_pessoa(inscricao_numero asc);
create index ind_inv_inv_geral on inventario(inventario_geral asc);
create index indx_inventario on inventario(loja_key asc,inventario_key asc);
create index idx_inventario_mov_det_ind_pro on inventario_movimento_detalhe(indicador_de_propriedade_key asc);
create index idx_inventario_mov_det_produto on inventario_movimento_detalhe(produto_key asc);
create index item_produto on item(produto_key asc);
create index ind_item_cupom_devolvido_cp on item_cupom_devolvido(cupom_devolvido_key asc);
create index idx_ped_neg_item on item_pedido(negociacao_item_key asc);
create index ind_ip_ped_pelt_key on item_pedido(pelt_key asc);
create index idx_keys on keys(keyi1 asc,keyi2 asc,keyi3 asc);
create index ind_lancamento_loja_operador on lancamento_loja(operador_key asc);
create index ll_cupom_fiscal on lancamento_loja(cupom_fiscal_key asc);
create index ll_cupom_numero_ecf on lancamento_loja(cupom_numero asc,numero_ecf asc);
create index ll_data on lancamento_loja(data asc);
create index ll_data_loja_cx_central on lancamento_loja(data asc,loja_key asc,caixa_central asc);
create index ll_loja on lancamento_loja(loja_key asc);
create index ll_loja_data_tlc on lancamento_loja(data asc,loja_key asc,tipo_lancamento_caixa_key asc);
create index indx_leitura_z_cupom_fiscal on leitura_z(cupom_fiscal_key asc);
create index leitura_tipo on leitura_z(loja_key asc,tipo_leitura asc,tipo_transacao asc,data_venda asc);
create index lc_forn_div on linha_compra(fornecedor_key asc,divisao_key asc);
create index lc_prod_loj on linha_compra(produto_key asc,loja_key asc);
create index ind_lista_produto_forn_forn on lista_produto_fornecedor(fornecedor_key asc);
create index ind_lista_produto_forn_prod on lista_produto_fornecedor(lista_produto_key asc);
create index log_arquivo_data on log_arquivo(data asc,usuario asc,operacao asc);
create index ind_log_arq_nfe_arq on log_arquivo_nfe_recebido(arquivo_nfe_recebido_key asc);
create index log_baixa_venda_loja_data on log_baixa_venda(loja_key asc,data_venda asc);
create index log_processado_ado on log_processado(arquivo_key asc,data asc,operacao asc);
create index log_sistema_data_ocorrencia on log_sistema(data_ocorrencia asc);
create index log_sistema_tipo_item on log_sistema(tipo_log_key asc,item_key asc);
create index logistica_lote_item_lote on logistica_lote_item(logistica_lote_key asc);
create index logistica_lote_item_produto on logistica_lote_item(produto_key asc);
create index logistica_lote_item_reserve_it on logistica_lote_item(reserva_estoque_item_key asc);
create index loja_regiao on loja(regiao_preco_key asc);
create index xak1loja on loja(numero asc);
create index ind_lote_troca_loja on lote_troca(loja_key asc);
create index ind_lote_troca_pessoa on lote_troca(pessoa_key asc);
create index lote_troca_pai on lote_troca_item(lote_troca_key asc);
create unique index uk_mapa_receb_loja_cod on mapa_recebimento_loja(recebimento_key asc,loja_key asc,codigo_pdv asc);
create index ind_mapa_resumo_loja on mapa_resumo(loja_key asc);
create index mapa_resumo_loja on mapa_resumo(data asc);
create index mapa_resumo_item_mp on mapa_resumo_item(mapa_resumo_key asc);
create index mapa_subfinalizadora_tef_cods on mapa_subfinalizadora_tef(tipo_tef_key asc,codigo_administradora asc,codigo_bandeira asc);
create index idx_margem_subgrupo on margem(subgrupo_produto_key asc,valor asc);
create index msg_popup_datar on mensagem_popup(data_recebimento asc);
create index msg_popup_data_receb_user on mensagem_popup(enviado_por asc,data_recebimento asc);
create index requisicao_suporte_indx on mensagem_popup(requisicao_suporte_key asc);
create index idx_menu_acesso_menu on menu_acesso(menu_key asc);
create index idx_menu_acesso_data on menu_acesso(data asc);
create index idx_menu_acesso_usuario on menu_acesso(usuario_key asc);
create index mcx_cadastro_caixa_key on mov_caixa(cadastro_caixa_key asc);
create index mov_caixa_mov_bancario on mov_caixa(movimento_bancario_key asc);
create index idx_tipo_operacao_nf on movimentacao_carga(tipo_operacao_nota_fiscal_key asc);
create index ind_movimentacao_carga_loja on movimentacao_carga(loja_key asc);
create index ind_movimento_bancario_pessoa on movimento_bancario(pessoa_key asc);
create index mov_bancario_conta_bancaria on movimento_bancario(conta_bancaria_key asc);
create index mov_bancario_tipo_mov_bancario on movimento_bancario(tipo_movimento_bancario_key asc);
create index movimento_bancario_valor on movimento_bancario(valor asc);
create index idx_mc_nfi on movimento_compra(nota_fiscal_item_key asc);
create index idx_mc_patrimonio on movimento_compra(patrimonio_item_key asc);
create index mc_loj_ped_tipo_ent on movimento_compra(pedido_key asc,tipo_pedido_key asc,entrega asc,loja_key asc);
create index mc_nf on movimento_compra(nf_key asc);
create index mc_ped_loja_tipoped on movimento_compra(pedido_key asc,loja_key asc,tipo_pedido_key asc);
create index mc_ped_tipo_ent on movimento_compra(pedido_key asc,tipo_pedido_key asc,entrega asc);
create index mc_ped_tipo_ent_prod on movimento_compra(pedido_key asc,tipo_pedido_key asc,entrega asc,produto_comprado_key asc);
create index movimento_estoque_nf_origem on movimento_compra(nf_origem_key asc);
create index idx_mov_conta_data on movimento_conta_fornecedor(data_emissao asc);
create index idx_mov_conta_forn_forn_div on movimento_conta_fornecedor(fornecedor_divisao_key asc);
create index idx_mov_conta_forn_loja on movimento_conta_fornecedor(loja_key asc);
create index idx_mov_conta_mod_acordo_prom on movimento_conta_fornecedor(modelo_acordo_prom_key asc);
create index idx_mov_conta_numero_acordo on movimento_conta_fornecedor(numero_acordo asc);
create index idx_mov_conta_setor_compra on movimento_conta_fornecedor(setor_compra_key asc);
create index idx_mov_conta_tipo_lancamento on movimento_conta_fornecedor(tipo_lancamento_key asc);
create index idx_movimento_contabil_ct_cust on movimento_contabil(centro_custo_key asc);
create index movimento_contabil_conta on movimento_contabil(conta_contabil_key asc);
create index movimento_contabil_partida on movimento_contabil(partida_dobrada_key asc);
create index movimento_cont_tipo_org_con on movimento_contabil(tipo_origem_contabil_key asc);
create index idx_movimento_origem on movimento_estoque(movimento_origem_key asc);
create index me_data_prod_loja on movimento_estoque(data_movimento asc,produto_key asc,loja_key asc);
create index me_forn_div_data on movimento_estoque(fornecedor_key asc,divisao_key asc,data_movimento asc);
create index me_loja_data on movimento_estoque(loja_key asc,data_movimento asc);
create index me_mov_estorno on movimento_estoque(movimento_estorno_key asc);
create index mvi_fornecedor_divisao_key on movimento_estoque(fornecedor_divisao_key asc);
create index mov_estoque_composicao_indx on movimento_estoque_composicao(movimento_estoque_pai_key asc);
create index mov_estoque_terc_data on movimento_estoque_terceiro(data_movimento asc);
create index mov_estoque_terc_nf_item on movimento_estoque_terceiro(nota_fiscal_item_key asc);
create index mov_estoque_terc_prod on movimento_estoque_terceiro(produto_key asc);
create index mov_estoque_terc_prod_orig on movimento_estoque_terceiro(produto_origem_key asc);
create index movimento_estoque_tercei_nf on movimento_estoque_terceiro(nota_fiscal_origem_key asc);
create index uf_municipio on municipio(uf asc);
create index idx_negociacao_aprovada on negociacao(aprovada asc);
create index neg_contrato on negociacao(contrato_fornecimento_key asc,negociacao_key asc);
create index controle_estoque on negociacao_item(controle_estoque asc);
create index idx_neg_alt_pis_cofins_cad on negociacao_item(alterar_pis_cofins_cadastro asc);
create index idx_produto_key on negociacao_item(produto_key asc);
create index neg_controle_estoque on negociacao_item(negociacao_key asc,controle_estoque asc);
create index idx_nota_fiscal_cfop on nota_fiscal(codigo_operacao_fiscal asc);
create index idx_nota_fiscal_tipo_operacao on nota_fiscal(tipo_operacao_nota_fiscal_key asc);
create index nf_data on nota_fiscal(data_emissao asc);
create index nf_data_rec on nota_fiscal(data_recebimento asc);
create index nf_loja on nota_fiscal(loja_key asc);
create index nf_nf_numero_forn on nota_fiscal(nf_numero asc,fornecedor_key asc);
create index nf_rec_carga on nota_fiscal(movimentacao_carga_key asc);
create index nf_tipo on nota_fiscal(nf_tipo_key asc);
create index nota_fiscal_data_cancelamento on nota_fiscal(data_cancelamento asc);
create index nota_fiscal_fim_lancamento on nota_fiscal(fim_lancamento asc);
create index idx_nfi_declaracao_importacao on nota_fiscal_item(declaracao_importacao_key asc);
create index idx_nfi_origem on nota_fiscal_item(nota_fiscal_item_origem_key asc);
create index nfi_fornecedor_divisao_key on nota_fiscal_item(fornecedor_divisao_key asc);
create index nfi_item_pedido on nota_fiscal_item(item_pedido_key asc);
create index nfi_nf_prod on nota_fiscal_item(nf_key asc,produto_key asc);
create index nfi_ped on nota_fiscal_item(pedido_key asc);
create index idx_nf_item_xml_nf_item_key on nota_fiscal_item_xml(nf_item_key asc);
create index ind_nota_fiscal_item_xml_nfix on nota_fiscal_item_xml(nf_key asc);
create index ind_nota_fisc_mens_sefaz_nfms on nota_fiscal_mensagem_sefaz(nf_key asc);
create index idx_nota_fiscal_msg_fiscal on nota_fiscal_msg_fiscal(nf_key asc);
create index idx_nota_fiscal_msg_fisc_model on nota_fiscal_msg_fiscal(modelo_mensagem_fiscal_key asc);
create index idx_nota_fiscal_msg_fisc_nf_rf on nota_fiscal_msg_fiscal(nf_referencia_key asc);
create index nf_pagamento_ap on nota_fiscal_pagamento(ap_key asc);
create index nota_fiscal_pedido_nf on nota_fiscal_pedido(nf_key asc);
create index ocorrencia_ap on ocorrencia(ap_key asc);
create index ocorrencia_bordero_bordero on ocorrencia_bordero(bordero_key asc);
create index ocorrencia_taxa_loja on ocorrencia_taxa(loja_key asc);
create index ocorrencia_tesouraria_cad_cx on ocorrencia_tesouraria(cadastro_caixa_key asc);
create index ocorrencia_tesouraria_mov_cx on ocorrencia_tesouraria(mov_caixa_key asc);
create index ocorrencias_mb_mb on ocorrencias_mb(movimento_bancario_key asc);
create index operador_loja on operador(loja_key asc);
create index pagamento_bancario_ap on pagamento_bancario(ap_key asc);
create index pagamento_direto_bordero_trans on pagamento_direto_bordero(transferencia_eletronica_key asc);
create index idx_partida_dobrada_esquema on partida_dobrada(esquema_contabil_key asc);
create index idx_partida_dobrada_loja on partida_dobrada(loja_key asc);
create index idx_partida_dobrada_origem on partida_dobrada(partida_de_origem_key asc);
create index ind_pedido_pedido_key on pedido(pedido_key asc);
create index pedido_data_entrega_final on pedido(data_entrega_final asc);
create index pedido_data_entrega_inicial on pedido(data_entrega_inicial asc);
create index indx_ped_item_estatistica on pedido_item_estatistica(item_pedido_key asc);
create index ind_ped_master_data_emissao on pedido_master(data_emissao asc,fornecedor_divisao_key asc);
create index ind_ped_master_fornecedor_div on pedido_master(fornecedor_divisao_key asc);
create index ind_ped_master_negociacao on pedido_master(negociacao_key asc);
create index ped_venda_cliente_key on pedido_venda(cliente_key asc);
create index ped_venda_data_emissao on pedido_venda(data_emissao asc);
create index ped_venda_loja_key on pedido_venda(loja_key asc);
create index ped_venda_produto_key on pedido_venda_item(produto_key asc);
create index xak1pesquisa on pesquisa(nome asc);
create index pj_data on pesquisa_jornal(data_inicial asc,data_final asc);
create index preco_atual_loja_key on preco_atual(loja_key asc);
create index preco_atual_produto_key on preco_atual(produto_key asc);
create index preco_atual_produto_loja on preco_atual(produto_key asc,loja_key asc);
create index preco_concorrente_pessoa on preco_concorrente(pessoa_key asc);
create index loj_tipo_inic_final on preco_venda(loja_key asc,tipo asc,data_inicial asc,data_final asc,regiao_preco_key asc,produto_key asc);
create index pv_prod_loja_tipo on preco_venda(produto_key asc,loja_key asc,tipo asc);
create index pv_prod_regia0 on preco_venda(produto_key asc,regiao_preco_key asc);
create index pv_prod_tipo_inic_reg on preco_venda(produto_key asc,tipo asc,data_inicial asc,regiao_preco_key asc);
create index pv_prod_tipo_loja_dinicial on preco_venda(produto_key asc,tipo asc,loja_key asc,data_inicial asc);
create index pv_prod_tipo_loja_preco on preco_venda(produto_key asc,tipo asc,loja_key asc,preco asc);
create index pv_prom_key on preco_venda(promocao_key asc);
create index pv_tipo_inic_reg on preco_venda(tipo asc,data_inicial asc,regiao_preco_key asc);
create index pv_usuario on preco_venda(usuario_key asc,tipo asc);
create index idx_produto_centro_custo on produto(centro_custo_key asc);
create index prod_cont_est on produto(controle_estoque asc);
create index prod_fornec_troca on produto(troca_fornecedor_key asc,troca_divisao_key asc);
create index prod_setor on produto(setor_compra_key asc);
create index prod_sgp on produto(sub_grupo_produto_key asc);
create index prod_sgp_patrimonio on produto(patrimonio_sub_grupo_key asc);
create index prod_somar_venda on produto(somar_venda asc);
create index produto_desc on produto(descricao asc);
create index produto_preco on produto(preco_equivalente asc);
create index pv_prod_venda on produto(produto_key asc,venda asc);
create index produto_validade_produto_loja on produto_validade(produto_key asc,loja_key asc);
create index prval_nfip on produto_validade(nf_item_pedido_key asc);
create index ind_recebimento_palete_item_rc on recebimento_palete_item(movimentacao_carga_key asc);
create index rede_loja_rede on rede_loja(rede_key asc);
create index registro_fiscal_loja on registro_fiscal(loja_key asc);
create index ro_data_operador_loja on relatorio_operador(data asc,loja_key asc,operador_key asc);
create index req_sup_data on requisicao_suporte(data asc);
create index req_sup_nf_lj_data on requisicao_suporte(nf_key asc,loja_key asc,data asc);
create index requisicao_suporte_data on requisicao_suporte(usuario_key asc,data asc);
create index reserva_estoque_loja on reserva_estoque(loja_key asc);
create index reserva_estoque_produto on reserva_estoque(produto_key asc);
create index reserva_estoque_item_destinata on reserva_estoque_item(destinatario_key asc);
create index reserva_estoque_item_distribui on reserva_estoque_item(distribuicao_logist_item_key asc);
create index reserva_estoque_item_reserva on reserva_estoque_item(reserva_estoque_key asc);
create index rc_loja_prod on resumo_cobertura(loja_key asc,produto_key asc);
create index idx_resumo_conta_com_forn_div on resumo_conta_comercial(fornecedor_divisao_key asc);
create index idx_resumo_conta_com_loja on resumo_conta_comercial(loja_key asc);
create index idx_resumo_conta_com_setor on resumo_conta_comercial(setor_compra_key asc);
create index idx_resumo_conta_com_tipo_lanc on resumo_conta_comercial(tipo_lancamento_key asc);
create index resumo_geral_secao_dt_lj_sec on resumo_geral(data_movimento asc,loja_key asc,setor_compra_key asc,secao_key asc,departamento_key asc);
create index rm_data_bm on resumo_margem(data_movimento asc);
create index rm_data_loja_bm on resumo_margem(data_movimento asc,loja_key asc);
create index resumo_me_ano_loja_prod on resumo_me(ano asc,loja_key asc,produto_key asc);
create index rm_ano_mes_loja on resumo_me(ano asc,mes asc,loja_key asc);
create index rm_ano_mes_loja_mov on resumo_me(ano asc,mes asc,loja_key asc,movimento asc);
create index idx_resumo_menu_acesso_usr_men on resumo_menu_acesso_por_usuario(menu_key asc);
create index idx_resumo_menu_acesso_usr_usr on resumo_menu_acesso_por_usuario(usuario_key asc);
create index ind_resumo_pend_ped_ped_key on resumo_pedidos_pendentes(item_pedido_key asc);
create index resumo_ped_pend_produto_lj on resumo_pedidos_pendentes(produto_venda_key asc,loja_key asc);
create index romaneio_nf on romaneio(nf_key asc);
create index romaneio_item_nfi on romaneio_item(nf_item_pedido_key asc);
create index xak1roteiro on roteiro(nome asc);
create index idx_saldo_ct_comp_conta_comp on saldo_contabil_por_competencia(competencia_contabil_key asc);
create index idx_saldo_ct_comp_conta_contab on saldo_contabil_por_competencia(conta_contabil_key asc);
create index idx_saldo_ct_comp_loja on saldo_contabil_por_competencia(loja_key asc);
create index secao_departamento on secao(departamento_key asc);
create index separacao_loja on separacao(loja_key asc);
create index solicitacao_compra_produto_sl on solicitacao_compra_produto(solicitacao_compra_key asc,produto_key asc);
create index solicitacao_compra_prod_lj_sl on solicitacao_compra_produto_lj(solicitacao_compra_produto_key asc,loja_key asc);
create index nf_key on status_recebimento(nf_key asc);
create index sub_finalizadora_finalizadora on sub_finalizadora(finalizadora_key asc);
create index sub_grupo_produto_grupo on sub_grupo_produto(grupo_produto_key asc);
create index idx_sug_compra_ext_data_forn on sugestao_compra_externa(data_inicial_sugestao asc,fornecedor_divisao_key asc);
create index tipo_caixa_adm on tipo_caixa(administradora_key asc);
create index xak1tipo_contato on tipo_contato(nome asc);
create index tm_mov on tipo_movimento(movimento asc);
create index transmissao_nfe_nf on transmissao_nfe(nf_key asc);
create index ult_mov_loja on ultimo_movimento(loja_key asc);
create index um_compra_venda on ultimo_movimento(produto_key asc,loja_key asc,compra asc,venda asc);
create index um_produto_key on ultimo_movimento(produto_key asc);
create index usuario_key_recebe_popup on usuario(usuario_key asc,recebe_popup asc);
create index ind_vd_cupom_devolv_operador on vd_cupom_devolvido(operador_devolucao_key asc);
create index vd_cupom_devolvido_nf on vd_cupom_devolvido(nf_key asc);
create index vd_cupom_fiscal_data on vd_cupom_fiscal(calendario_key asc);
create index vd_cupom_fiscal_ecf on vd_cupom_fiscal(ecf asc);
create index vd_cupom_fiscal_ecf_loja on vd_cupom_fiscal(ecf asc,loja_key asc);
create index vd_cupom_fiscal_loja on vd_cupom_fiscal(loja_key asc);
create index vd_cupom_fiscal_nf on vd_cupom_fiscal(nf_key asc);
create index vd_cupom_fiscal_tipo on vd_cupom_fiscal(tipo asc);
create index vd_barra_key on vd_cupom_item(barra_key asc);
create index vd_item_cupom on vd_cupom_item(cupom_fiscal_key asc);
create index vd_cp_receb on vd_cupom_recebimento(cupom_fiscal_key asc);
create index vd_rec on vd_cupom_recebimento(recebimento_key asc);
create index vd_cp_leitura on vd_leitura(cupom_fiscal_key asc);
create index v90d_data_prod_loja on venda90dias(produto_key asc,data_movimento asc,loja_key asc);
create index ean_venda_irregular on venda_irregular(ean asc);
create index venda_online_log_cal on venda_online_log(calendario_key asc);

create index ap_nvl_data on autorizacao_pagamento(NVL("DATA_PRORROGACAO_CONFIRMADA","DATA_VENCIMENTO") asc);
create index ap_valor_fatura on autorizacao_pagamento(valor_fatura asc,NVL("ABATIMENTO",0)+NVL("DESCONTO_FINANCEIRO",0) asc);
create index fd_upper_descricao on fornecedor_divisao(UPPER("DESCRICAO") asc);
create index pessoa_nome_abreviado on pessoa(UPPER("NOME_ABREVIADO") asc);
create index pessoa_nome_razao on pessoa(UPPER("NOME_RAZAO") asc);
create index pv_prod_tipo_dfinal on preco_venda(produto_key asc,tipo asc,"DATA_FINAL"+1 asc);
create index produto_unitario on produto(COALESCE("CONTROLE_ESTOQUE","PRODUTO_KEY") asc);
create index produto_upper_descricao on produto(UPPER("DESCRICAO") asc);

create bitmap index idx_acordo_baixa_custo_data on acordo_baixa_custo(data_emissao asc);
create bitmap index idx_acordo_baixa_custo_forn on acordo_baixa_custo(fornecedor_key asc,divisao_key asc);
create bitmap index idx_acordo_baixa_custo_loja on acordo_baixa_custo(loja_key asc);
create bitmap index idx_acordo_baixa_custo_it_pai on acordo_baixa_custo_item(acordo_baixa_custo_key asc);
create bitmap index arquivo_edi_tipo_arquivo on arquivo_edi(tipo_arquivo_edi_key asc);
create bitmap index arquivo_edi_tipo_status on arquivo_edi(tipo_status_arquivo_key asc);
create bitmap index ap_loja_bm on autorizacao_pagamento(loja_key asc);
create bitmap index ap_loja_pagadora on autorizacao_pagamento(loja_pagadora asc);
create bitmap index ap_pr_bm on autorizacao_pagamento(pagar_receber asc);
create bitmap index ap_prioridade on autorizacao_pagamento(prioridade asc);
create bitmap index ap_tipo_autorizacao_pagamento on autorizacao_pagamento(tipo_autorizacao_pagamento_key asc);
create bitmap index ap_tipo_status_pagamento on autorizacao_pagamento(tipo_status_pagamento_key asc);
create bitmap index banco_bloqueto_ap on banco_bloqueto(ap_key asc);
create bitmap index banco_bloqueto_tipo_status_con on banco_bloqueto(tipo_status_bloqueto_key asc);
create bitmap index banco_extrato_saldo_conta on banco_extrato_saldo(conta_bancaria_key asc);
create bitmap index banco_extrato_saldo_data_fin on banco_extrato_saldo(saldo_final_data asc);
create bitmap index banco_extrato_saldo_data_ini on banco_extrato_saldo(saldo_inicial_data asc);
create bitmap index banco_pagamento_status_conc on banco_pagamento(status_conciliacao_key asc);
create bitmap index banco_pagamento_titulos_status on banco_pagamento_titulos(status_conciliacao_key asc);
create bitmap index bordero_loja on bordero(loja_pagadora_key asc);
create bitmap index cadastro_cx_data on cadastro_caixa(data asc);
create bitmap index cadastro_cx_data_deposito on cadastro_caixa(data_para_deposito asc);
create bitmap index cadastro_cx_data_prev_credito on cadastro_caixa(data_previsao_credito asc);
create bitmap index cadastro_cx_loja on cadastro_caixa(loja_key asc);
create bitmap index cadastro_cx_tipo_caixa on cadastro_caixa(tipo_caixa_key asc);
create bitmap index cadastro_cx_tipo_mov_caixa on cadastro_caixa(tipo_mov_caixa_key asc);
create bitmap index card_ajuste_rv_status_conc on card_ajuste_rv(status_conciliacao_key asc);
create bitmap index card_comprovante_data_tran on card_comprovante_venda(data_transacao asc);
create bitmap index card_comprovante_status_conc on card_comprovante_venda(status_conciliacao_key asc);
create bitmap index card_cv_parcela_data_prev_cred on card_cv_parcela(data_previsao_credito asc);
create bitmap index card_cv_parcela_status_conc on card_cv_parcela(status_conciliacao_key asc);
create bitmap index card_cv_request_status_conc on card_cv_request(status_conciliacao_key asc);
create bitmap index card_ordem_credito_tipo_cartao on card_ordem_credito(tipo_cartao_key asc);
create bitmap index card_rv_data_emissao on card_resumo_venda(data_emissao asc);
create bitmap index card_rv_data_previsao_credito on card_resumo_venda(data_previsao_credito asc);
create bitmap index card_rv_estabelecimento on card_resumo_venda(estabelecimento_filial_key asc);
create bitmap index card_rv_tipo_bandeira on card_resumo_venda(tipo_bandeira_key asc);
create bitmap index card_rv_tipo_cartao on card_resumo_venda(tipo_cartao_key asc);
create bitmap index compra_90dias_data on compra_90dias(data_movimento asc);
create bitmap index compra_90dias_loja on compra_90dias(loja_key asc);
create bitmap index compra_90dias_produto on compra_90dias(produto_key asc);
create bitmap index convenio_bancario_loja_loja on convenio_bancario_loja(loja_key asc);
create bitmap index cupom_fiscal_data on cupom_fiscal(calendario_key asc);
create bitmap index cupom_fiscal_loja on cupom_fiscal(loja_key asc);
create bitmap index idx_cupom_fiscal_cancelado on cupom_fiscal(cancelado asc);
create bitmap index idx_cupom_fiscal_ecf on cupom_fiscal(ecf asc);
create bitmap index idx_cupom_fiscal_tipo on cupom_fiscal(tipo asc);
create bitmap index cupom_item_barra on cupom_item(barra_key asc);
create bitmap index cupom_item_data on cupom_item(calendario_key asc);
create bitmap index idx_ci_loja on cupom_item(loja_key asc);
create bitmap index idx_ci_90d_data on cupom_item_90d(calendario_key asc);
create bitmap index idx_ci_90d_loja on cupom_item_90d(loja_key asc);
create bitmap index cpl_data on cupom_leitura(calendario_key asc);
create bitmap index cpl_tipo_leitura on cupom_leitura(tipo_leitura asc);
create bitmap index cpl_tipo_transacao on cupom_leitura(tipo_transacao asc);
create bitmap index cpr_data on cupom_recebimento(calendario_key asc);
create bitmap index cpr_recebimento on cupom_recebimento(recebimento_key asc);
create bitmap index idx_depreciacao_competencia on depreciacao(competencia_key asc);
create bitmap index escrita_apuracao_item_aliquota on escrita_apuracao_icms_item(aliquota asc);
create bitmap index escrita_apuracao_item_cof on escrita_apuracao_icms_item(cof asc);
create bitmap index escrita_apuracao_item_sinal on escrita_apuracao_icms_item(sinal asc);
create bitmap index escrita_apuracao_item_uf on escrita_apuracao_icms_item(uf asc);
create bitmap index escrita_fiscal_destinatario on escrita_fiscal(destinatario_key asc);
create bitmap index escrita_fiscal_dt_conferencia on escrita_fiscal(data_conferencia asc);
create bitmap index escrita_fiscal_dt_entrada on escrita_fiscal(data_entrada_saida asc);
create bitmap index escrita_fiscal_rementente on escrita_fiscal(remetente_key asc);
create bitmap index escrita_fiscal_sinal on escrita_fiscal(sinal asc);
create bitmap index estabelecimento_matriz_adm on estabelecimento_matriz(administradora_key asc);
create bitmap index ediario_data on estoque_diario(data asc);
create bitmap index ediario_loja on estoque_diario(loja_key asc);
create bitmap index ediario_produto on estoque_diario(produto_key asc);
create bitmap index idx_estoque_diario_det_indi on estoque_diario_detalhe(indicador_de_propriedade_key asc);
create bitmap index idx_estoque_diario_det_loja on estoque_diario_detalhe(loja_key asc);
create bitmap index idx_estoque_diario_det_prod on estoque_diario_detalhe(produto_key asc);
create bitmap index idx_estoque_diario_det_terc on estoque_diario_detalhe(terceiro_key asc);
create bitmap index fco_data on fechamento_caixa_operador(data asc);
create bitmap index fco_loja on fechamento_caixa_operador(loja_key asc);
create bitmap index fco_operador on fechamento_caixa_operador(operador_key asc);
create bitmap index mapa_resumo_item_ecf_alq on mapa_resumo_item(ecf asc);
create bitmap index idx_mov_caixa_bordero on mov_caixa(bordero_key asc);
create bitmap index mcx_data on mov_caixa(data asc);
create bitmap index mcx_loja on mov_caixa(loja_key asc);
create bitmap index mcx_tipo_caixa on mov_caixa(tipo_caixa_key asc);
create bitmap index mcx_tipo_mov_caixa on mov_caixa(tipo_mov_caixa_key asc);
create bitmap index idx_mov_bancario_bordero on movimento_bancario(bordero_key asc);
create bitmap index mov_bancario_data_concil on movimento_bancario(data_conciliacao asc);
create bitmap index mov_bancario_data_emissao on movimento_bancario(data_emissao asc);
create bitmap index mov_bancario_data_pagto on movimento_bancario(data_pagamento asc);
create bitmap index idx_movto_contabil_origem_key on movimento_contabil(origem_key asc);
create bitmap index idx_me_data_lancto on movimento_estoque(data_lancamento asc);
create bitmap index me_data on movimento_estoque(data_movimento asc);
create bitmap index me_forndiv on movimento_estoque(fornecedor_key asc,divisao_key asc);
create bitmap index me_loja on movimento_estoque(loja_key asc);
create bitmap index me_prod on movimento_estoque(produto_key asc);
create bitmap index me_quantidade on movimento_estoque(quantidade asc);
create bitmap index me_setor on movimento_estoque(setor_compra_key asc);
create bitmap index me_tipo on movimento_estoque(tipo_movimento_key asc);
create bitmap index mov_estoque_terc_loja on movimento_estoque_terceiro(loja_movimento_key asc);
create bitmap index mov_estoque_terc_portador on movimento_estoque_terceiro(portador_key asc);
create bitmap index mov_estoque_terc_proprietario on movimento_estoque_terceiro(proprietario_key asc);
create bitmap index neg_data_emissao on negociacao(data_emissao asc);
create bitmap index ocorrencia_agendamento_ap on ocorrencia_agendamento(ap_key asc);
create bitmap index ocorrencia_agendamento_tipo_ag on ocorrencia_agendamento(tipo_agendamento_key asc);
create bitmap index idx_patrimonio_item_prod on patrimonio_item(produto_key asc);
create bitmap index pv_status on preco_venda(status asc);
create bitmap index pvo_data on preco_venda_oferta(data asc);
create bitmap index pvo_loja on preco_venda_oferta(loja_key asc);
create bitmap index pvo_produto on preco_venda_oferta(produto_key asc);
create bitmap index idx_res_apur_imp_data_loja on resumo_apuracao_impostos(ano asc,mes asc,loja_key asc);
create bitmap index rcf_forn on resumo_conta_fornecedor(fornecedor_key asc,divisao_key asc);
create bitmap index rcf_setor on resumo_conta_fornecedor(setor asc);
create bitmap index idx_rcc_ano on resumo_cupom_consolidado(ano asc);
create bitmap index idx_rcc_loja on resumo_cupom_consolidado(loja_key asc);
create bitmap index idx_rcc_mes on resumo_cupom_consolidado(mes asc);
create bitmap index idx_rcc_produto on resumo_cupom_consolidado(produto_key asc);
create bitmap index idx_resumo_cupom_loja_data on resumo_cupom_fiscal(loja_key asc,calendario_key asc);
create bitmap index rem_ano on resumo_estoque_mensal(ano asc);
create bitmap index rem_loja on resumo_estoque_mensal(loja_key asc);
create bitmap index rem_mes on resumo_estoque_mensal(mes asc);
create bitmap index rem_produto on resumo_estoque_mensal(produto_key asc);
create bitmap index ri_depto on resumo_inventario(departamento_key asc);
create bitmap index ri_grupo on resumo_inventario(grupo_produto_key asc);
create bitmap index ri_inv_geral on resumo_inventario(inventario_geral asc);
create bitmap index ri_loja on resumo_inventario(loja_key asc);
create bitmap index ri_produto on resumo_inventario(produto_key asc);
create bitmap index ri_secao on resumo_inventario(secao_key asc);
create bitmap index ri_setor on resumo_inventario(setor_compra_key asc);
create bitmap index ri_subgrupo on resumo_inventario(sub_grupo_produto_key asc);
create bitmap index rme_data on resumo_movimento_estoque(calendario_key asc);
create bitmap index rme_departamento on resumo_movimento_estoque(departamento_key asc);
create bitmap index rme_fornecedor on resumo_movimento_estoque(fornecedor_key asc,divisao_key asc);
create bitmap index rme_grupo on resumo_movimento_estoque(grupo_produto_key asc);
create bitmap index rme_loja on resumo_movimento_estoque(loja_key asc);
create bitmap index rme_produto on resumo_movimento_estoque(produto_key asc);
create bitmap index rme_produto_origem on resumo_movimento_estoque(produto_origem_key asc);
create bitmap index rme_secao on resumo_movimento_estoque(secao_key asc);
create bitmap index rme_setor on resumo_movimento_estoque(setor_compra_key asc);
create bitmap index rme_sub_grupo on resumo_movimento_estoque(sub_grupo_produto_key asc);
create bitmap index rme60d_data on resumo_movimento_estoque_60d(calendario_key asc);
create bitmap index rme60d_departamento on resumo_movimento_estoque_60d(departamento_key asc);
create bitmap index rme60d_fornecedor on resumo_movimento_estoque_60d(fornecedor_key asc,divisao_key asc);
create bitmap index rme60d_grupo on resumo_movimento_estoque_60d(grupo_produto_key asc);
create bitmap index rme60d_loja on resumo_movimento_estoque_60d(loja_key asc);
create bitmap index rme60d_produto on resumo_movimento_estoque_60d(produto_key asc);
create bitmap index rme60d_produto_origem on resumo_movimento_estoque_60d(produto_origem_key asc);
create bitmap index rme60d_secao on resumo_movimento_estoque_60d(secao_key asc);
create bitmap index rme60d_setor on resumo_movimento_estoque_60d(setor_compra_key asc);
create bitmap index rme60d_sub_grupo on resumo_movimento_estoque_60d(sub_grupo_produto_key asc);
create bitmap index rtme_ano on resumo_tipo_movimento_estoque(ano asc);
create bitmap index rtme_loja on resumo_tipo_movimento_estoque(loja_key asc);
create bitmap index rtme_mes on resumo_tipo_movimento_estoque(mes asc);
create bitmap index rtme_produto on resumo_tipo_movimento_estoque(produto_key asc);
create bitmap index resumo_ticket_medio_data on resumo_tkt_medio(calendario_key asc);
create bitmap index resumo_ticket_medio_loja on resumo_tkt_medio(loja_key asc);
create bitmap index resumo_tkt_medio_depto_data on resumo_tkt_medio_depto(calendario_key asc);
create bitmap index resumo_tkt_medio_depto_dpto on resumo_tkt_medio_depto(departamento_key asc);
create bitmap index resumo_tkt_medio_depto_loja on resumo_tkt_medio_depto(loja_key asc);
create bitmap index resumo_tkt_med_finalizadora_dt on resumo_tkt_medio_finalizadora(calendario_key asc);
create bitmap index resumo_tkt_med_finalizadora_fn on resumo_tkt_medio_finalizadora(finalizadora_key asc);
create bitmap index resumo_tkt_med_finalizadora_lj on resumo_tkt_medio_finalizadora(loja_key asc);
create bitmap index resumo_tkt_medio_hora_data on resumo_tkt_medio_hora(calendario_key asc);
create bitmap index resumo_tkt_medio_hora_loja on resumo_tkt_medio_hora(loja_key asc);
create bitmap index resumo_tkt_med_hora_depto_data on resumo_tkt_medio_hora_depto(calendario_key asc);
create bitmap index resumo_tkt_med_hora_depto_dpto on resumo_tkt_medio_hora_depto(departamento_key asc);
create bitmap index resumo_tkt_med_hora_depto_loja on resumo_tkt_medio_hora_depto(loja_key asc);
create bitmap index resumo_tkt_med_hora_secao_data on resumo_tkt_medio_hora_secao(calendario_key asc);
create bitmap index resumo_tkt_med_hora_secao_dpto on resumo_tkt_medio_hora_secao(departamento_key asc);
create bitmap index resumo_tkt_med_hora_secao_loja on resumo_tkt_medio_hora_secao(loja_key asc);
create bitmap index resumo_tkt_med_hora_secao_seca on resumo_tkt_medio_hora_secao(secao_key asc);
create bitmap index resumo_tkt_medio_secao_data on resumo_tkt_medio_secao(calendario_key asc);
create bitmap index resumo_tkt_medio_secao_dpto on resumo_tkt_medio_secao(secao_key asc);
create bitmap index resumo_tkt_medio_secao_loja on resumo_tkt_medio_secao(loja_key asc);
create bitmap index rvlm_ano on resumo_venda_lucro_mes(ano asc);
create bitmap index rvlm_calendario on resumo_venda_lucro_mes(calendario_key asc);
create bitmap index rvlm_depto on resumo_venda_lucro_mes(departamento_key asc);
create bitmap index rvlm_forndiv on resumo_venda_lucro_mes(fornecedor_key asc,divisao_key asc);
create bitmap index rvlm_grupo on resumo_venda_lucro_mes(grupo_produto_key asc);
create bitmap index rvlm_loja on resumo_venda_lucro_mes(loja_key asc);
create bitmap index rvlm_mes on resumo_venda_lucro_mes(mes asc);
create bitmap index rvlm_produto on resumo_venda_lucro_mes(produto_key asc);
create bitmap index rvlm_rede on resumo_venda_lucro_mes(rede_key asc);
create bitmap index rvlm_secao on resumo_venda_lucro_mes(secao_key asc);
create bitmap index rvlm_sub_grupo on resumo_venda_lucro_mes(sub_grupo_produto_key asc);
create bitmap index transfer_90dias_data on transferencia_90dias(data_movimento asc);
create bitmap index transfer_90dias_lj_destino on transferencia_90dias(loja_destino_key asc);
create bitmap index transfer_90dias_lj_origem on transferencia_90dias(loja_origem_key asc);
create bitmap index transfer_90dias_produto on transferencia_90dias(produto_key asc);
create bitmap index v90d_data on venda90dias(data_movimento asc);

create or replace view menus_view as select level as "level",
    m.menu_key,
    m.label,
    m.link,
    m.pai,
    m.ordem
  from menu m
    start with pai  is null
    connect by m.pai = prior m.menu_key
  order by level, 
    pai,
    ordem,
    label
;

create or replace view produtos_venda as select p.produto_key,
       nvl(p.preco_equivalente, p.produto_key) produto_origem,
       p.fator_preco,
       p.controle_estoque,
       p.fator_estoque,
       p.venda
from produto p
where p.exporta_pdv = 1
and ( p.venda = 1 or p.compra = 1 )
order by p.produto_key
;

create or replace view view_saldo_contabil_acumulado as select scc.loja_key,
    scc.conta_contabil_key,
    scc.competencia_contabil_key,
    scc.debito,
    scc.credito,
    scc.saldo,
    sum(saldo) over (partition by scc.loja_key, scc.conta_contabil_key order by cc.mes) as saldo_acumulado
  from saldo_contabil_por_competencia scc
  inner join competencia_contabil cc
  on ( scc.competencia_contabil_key = cc.competencia_contabil_key )
  order by scc.loja_key,
    scc.conta_contabil_key,
    cc.mes
;

create or replace view view_resumo_financeiro as SELECT ap.loja_key,
       ap.favorecido,
       ap.tipo_autorizacao_pagamento_key,
       SUM( CASE WHEN ( ap.pagar_receber = upper('p') )
                 THEN ap.valor_fatura
                 ELSE 0
       END) AS credito,
       SUM( CASE WHEN ( ap.pagar_receber = upper('r') )
                 THEN ap.valor_fatura
                 ELSE 0
       END) AS debito,
       SUM( CASE WHEN ( ap.pagar_receber = upper('p') )
                 THEN ap.valor_fatura
                 ELSE 0
       END)
       -
       SUM( CASE WHEN ( ap.pagar_receber = upper('r') )
                 THEN ap.valor_fatura
                 ELSE 0
       END) AS saldo
FROM autorizacao_pagamento ap
WHERE data_quitacao IS NULL
AND cancelada       <> 1
GROUP BY ap.loja_key, ap.favorecido, ap.tipo_autorizacao_pagamento_key
;

create or replace view view_balancete_de_verificacao as SELECT sa.loja_key,
  sa.conta_contabil_key,
  sa.competencia_contabil_key,
  lag(sa.saldo_acumulado,1,0) over (PARTITION BY sa.loja_key, sa.conta_contabil_key order by rownum) AS saldo_anterior,
  sa.debito,
  sa.credito,
  sa.saldo,
  sa.saldo_acumulado
FROM
  (SELECT scc.loja_key,
    scc.conta_contabil_key,
    scc.competencia_contabil_key,
    scc.debito,
    scc.credito,
    scc.saldo,
    SUM(saldo) OVER (PARTITION BY scc.loja_key, scc.conta_contabil_key order by ec.ano, cc.mes) AS saldo_acumulado
  FROM saldo_contabil_por_competencia scc
  INNER JOIN competencia_contabil cc  ON ( scc.competencia_contabil_key = cc.competencia_contabil_key )
  INNER JOIN exercicio_contabil ec  ON ( cc.exercicio_contabil_key = ec.exercicio_contabil_key)
  order by scc.loja_key,
    scc.conta_contabil_key,
    ec.ano, cc.mes
  ) sa
;

create or replace view view_gtin_produto as select produto_key, max(barra_key) as gtin
from item
group by produto_key
;

create or replace view view_categoria_produto as select sgp.sub_grupo_produto_key, sgp.nome as subgrupo,
  gp.grupo_produto_key, gp.nome as grupo,
  s.secao_key, s.nome as secao,
  d.departamento_key, d.nome as departamento
from sub_grupo_produto sgp
inner join grupo_produto gp on sgp.grupo_produto_key = gp.grupo_produto_key
inner join secao s on gp.secao_key = s.secao_key
inner join departamento d on d.departamento_key = s.departamento_key
;

create or replace package "RELATORIO" AUTHID CURRENT_USER as
	procedure gera_resumos;
  function mov_estoque_ultimo_key(chave string) return number;
  function mov_estoque_ultima_data(chave string, data_default date) return date;
  function mov_estoque_atualiza(chave string) return number;
end "RELATORIO";
/

create or replace PACKAGE BODY "RELATORIO" as
  procedure executa(nome string, descr string) is
    msg varchar(40);
    cmd varchar(200);
    data1 timestamp(2);
    data2 timestamp(2);
  begin
    msg := rpad(descr, 30, ' ') || ' : ';
    cmd := nome;
    data1 := systimestamp();
    begin
      dbms_output.put(msg);
      execute immediate 'call ' || nome;
      data2 := systimestamp();
      dbms_output.put_line(data2 - data1);
    exception 
      when OTHERS then
        data2 := systimestamp();
        dbms_output.put_line(data2 - data1);
        dbms_output.put_line('!!!Erro: ' || SQLERRM);
        rollback;
    end;
    commit;
  end;
  function mov_estoque_ultimo_key(chave string) return number is
    movimento_min number;
  begin
    select count(*) into movimento_min from parametros_tec where nome = chave;
    if movimento_min > 0 then
        select to_number(valor) into movimento_min from parametros_tec where nome = chave;
    end if;
    return movimento_min;
  end;
  function mov_estoque_ultima_data(chave string, data_default date) return date is
    movimento_min number;
    data_min date;
  begin
    movimento_min := mov_estoque_ultimo_key(chave);
    if movimento_min = 0 then
        data_min := data_default;
    else
        select min(data_movimento) into data_min from movimento_estoque where movimento_estoque_key > movimento_min;
    end if;
    return data_min;
  end;
  function mov_estoque_atualiza(chave string) return number is
    movimento_atual number;
  begin
    select max(movimento_estoque_key) into movimento_atual from movimento_estoque;
    delete from parametros_tec where nome = chave;
    insert into parametros_tec values (chave, movimento_atual);
    return movimento_atual;
  end;
  procedure gera_resumos is
    data1 timestamp(2);
    data2 timestamp(2);
    data3 timestamp(2);
    num   number;
    v_mes varchar(20);
    v_ano varchar(20);
    v_mes1 date;
    v_mes2 date;
  begin
    data1 := systimestamp();
    dbms_output.put('Inicio dos relatorios          : ');
    dbms_output.put_line(data1);
    /* preco */
    executa('preco.gera_preco_atual(trunc(sysdate))', 'Preco Atual');
    /* movimento_estoque */
    executa('relatorio_geral()', 'Resumo Geral');
    executa('relatorio_margem()', 'Resumo Margem');
    executa('relatorio_me(sysdate - 1)', 'Resumo ME');
    executa('relatorio_venda_categoria(trunc(add_months(sysdate,-1),''month''), last_day(trunc(add_months(sysdate,-1),''month'')))', 'Venda Categoria 1');
    executa('relatorio_venda_categoria(trunc(sysdate, ''month''), last_day(sysdate))', 'Venda Categoria 2');
    executa('relatorio_ranking_ano()', 'Ranking Ano');
    executa('relatorio_vencimento_medio()', 'Vencimento Medio');
    executa('relatorio_tipo_mov_estoque()', 'Resumo Tipo Movimento Estoque');
    /* resumo_movimento_estoque */
    executa('relatorio_movimento_estoque()', 'Resumo Movimento Estoque');
    executa('relatorio_mov_estoque_60d()', 'Resumo Movimento Estoque 60D');
    executa('relatorio_venda_lucro()', 'Resumo Venda Lucro');
    executa('relatorio_cobertura()', 'Resumo Cobertura');
    executa('relatorio_venda_90dias()', 'Venda 90 Dias');
    executa('relatorio_compra_90dias()', 'Compra 90 Dias');
    /* pedido */
    executa('relatorio_pedidos_pendentes()', 'Resumo Pedidos Pendentes');
    executa('relatorio_pedidos()', 'Resumo Pedidos');
    /* escrita_fiscal */
    executa('relatorio_apuracao_impostos(trunc(sysdate))', 'Resumo Apuracao Impostos');
    /* ficha_estoque */
    executa('relatorio_nivel_servico()', 'Nivel de Servico');
    executa('relatorio_estoque_diario(trunc(sysdate)-1)', 'Estoque Diario');
    /* estoque_diario */
    executa('relatorio_estoque_mensal()', 'Resumo Estoque Mensal');
    /* pedido_venda */
    executa('relatorio_pedido_venda_cliente()', 'Pedido Venda Cliente');
    /* produto_validade */
    executa('relatorio_data_validade()', 'Resumo Data Validade');
    /* lancamento_loja * */
    executa('relatorio_lancamento_loja(trunc(sysdate)-1)', 'Lancamento Loja');
    /* mensagem_popup * */
    executa('relatorio_mensagem_popup(trunc(sysdate)-1)', 'Mensagem Popup');
    /* competencia * */
    executa('status_competencia_atual()', 'Alterar Status Competencia Atual');
    /* caixa_postal * */
    executa('relatorio_caixa_postal()', 'Caixa Postal');
    /* cupom_fiscal */
    executa('relatorio_cupom_item()', 'Resumo Cupom Apuracao');    
    executa('relatorio_ticket_medio()', 'Ticket Medio');
    executa('relatorio_cupom_fiscal(trunc(sysdate))', 'Resumo Cupom Fiscal');
    executa('relatorio_presenca_cupom(5)', 'Resumo Presenca Cupom');
    data3 := systimestamp();
    dbms_output.put('Fim dos relatorios             : ');
    dbms_output.put_line(data3);
    dbms_output.put('Tempo Total                    : ');
    dbms_output.put_line(data3 - data1);
  end gera_resumos;
END "RELATORIO";
/

create or replace package "PRECO" as
	procedure gera_preco_tmp(lojaKey in integer, datap in date);
	procedure gera_preco_tmp(lojaKey in integer, datap in date, produtoKey in integer);
	function busca_preco_venda(produto in integer, loja in integer) return number;
	function busca_preco_venda_oferta(produto in integer, loja in integer) return number;
	function busca_preco_venda_normal(produto in integer, loja in integer) return number;
	function busca_preco_venda_regiao(produto in integer, regiao in integer) return number;
	procedure gera_preco_transferencia(usuario in integer);
	procedure gera_preco_atual(datap in date);
end "PRECO";
/

create or replace package body "PRECO" as
  procedure gera_preco_tmp(lojaKey in integer, datap in date) as
  begin
    insert into preco_atual_tmp(produto_key, preco_regiao_key, preco_regiao, preco_regiao_data,
        preco_loja_key, preco_loja, preco_loja_data, preco_oferta_key, preco_oferta, preco_oferta_inicial,
        preco_oferta_final,preco_oferta2_key, preco_oferta2, preco_oferta2_inicial, preco_oferta2_final,usuario_key,
        preco_loja_fidelidade, preco_regiao_fidelidade,usuario_oferta_key, data_reprovacao_oferta)
      select p.produto_key, regiao.preco_venda_key preco_regiao_key, pvr.preco preco_regiao,
             pvr.data_inicial preco_regiao_data, loja.preco_venda_key preco_loja_key,
             pvl.preco preco_loja, pvl.data_inicial preco_loja_data, oferta.preco_venda_key preco_oferta_key,
             pvo.preco preco_oferta, pvo.data_inicial preco_oferta_inicial, pvo.data_final preco_oferta_final,
             oferta2.preco_venda_key preco_oferta2_key, pvo2.preco preco_oferta2, pvo2.data_inicial preco_oferta2_inicial,
             pvo2.data_final preco_oferta2_final,
             coalesce (pvl.usuario_key, pvr.usuario_key) usuario_key, pvl.preco_fidelidade, pvr.preco_fidelidade,
             coalesce (pvo.usuario_key, pvo2.usuario_key) usuario_oferta_key, pv_ofertas_reprovadas.data_emissao
      from produto p, preco_venda pvr, preco_venda pvl, preco_venda pvo, preco_venda pvo2, preco_venda pv_ofertas_reprovadas, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 join loja l on (pv.regiao_preco_key = l.regiao_preco_key)
          where  pv.tipo = 'N'
            and  pv.data_inicial <= datap
            and  pv.status = 1
            and  l.pessoa_key = lojaKey
          group  by pv.produto_key) regiao, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
          where  pv.tipo = 'N'
            and  pv.data_inicial <= datap
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group  by pv.produto_key) loja, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 left join promocao pr on (pv.promocao_key = pr.promocao_key)
          where  pv.tipo = 'J'
            and  (pr.status = 'F' or pr.status is null)
            and  datap between pv.data_inicial and pv.data_final
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group  by pv.produto_key) oferta, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 left join promocao pr on (pv.promocao_key = pr.promocao_key)
          where  pv.tipo = 'J'
            and  (pr.status = 'F' or pr.status is null)
            and  datap >= pv.data_inicial
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group  by pv.produto_key) oferta2, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 left join promocao pr on (pv.promocao_key = pr.promocao_key)
          where  pv.tipo = 'R'
            and  datap >= pv.data_inicial
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group  by pv.produto_key) ofertas_reprovadas
      where  p.produto_key = regiao.produto_key (+)
        and  p.produto_key = loja.produto_key (+)
        and  p.produto_key = oferta.produto_key (+)
        and  p.produto_key = oferta2.produto_key (+)
        and  p.produto_key = ofertas_reprovadas.produto_key (+)
        and  p.exporta_pdv = 1
        and  regiao.preco_venda_key = pvr.preco_venda_key (+)
        and  loja.preco_venda_key = pvl.preco_venda_key (+)
        and  oferta.preco_venda_key = pvo.preco_venda_key (+)
        and  oferta2.preco_venda_key = pvo2.preco_venda_key (+)
        and  ofertas_reprovadas.preco_venda_key = pv_ofertas_reprovadas.preco_venda_key (+)
        and  (loja.preco_venda_key is not null or regiao.preco_venda_key is not null)
        and  coalesce(oferta.preco_venda_key, loja.preco_venda_key, regiao.preco_venda_key) is not null
      order  by produto_key;
  end;
procedure gera_preco_tmp(lojaKey in integer, datap in date, produtoKey in integer) as
  begin
    insert into preco_atual_tmp(produto_key, preco_regiao_key, preco_regiao, preco_regiao_data,
        preco_loja_key, preco_loja, preco_loja_data, preco_oferta_key, preco_oferta, preco_oferta_inicial,
        preco_oferta_final,preco_oferta2_key, preco_oferta2, preco_oferta2_inicial, preco_oferta2_final,usuario_key,
        preco_loja_fidelidade, preco_regiao_fidelidade, usuario_oferta_key, data_reprovacao_oferta)
      select p.produto_key, regiao.preco_venda_key preco_regiao_key, pvr.preco preco_regiao,
             pvr.data_inicial preco_regiao_data, loja.preco_venda_key preco_loja_key,
             pvl.preco preco_loja, pvl.data_inicial preco_loja_data, oferta.preco_venda_key preco_oferta_key,
             pvo.preco preco_oferta, pvo.data_inicial preco_oferta_inicial, pvo.data_final preco_oferta_final,
             oferta2.preco_venda_key preco_oferta2_key, pvo2.preco preco_oferta2, pvo2.data_inicial preco_oferta2_inicial,
             pvo2.data_final preco_oferta2_final,
             coalesce (pvl.usuario_key, pvr.usuario_key) usuario_key, pvl.preco_fidelidade, pvr.preco_fidelidade,
             coalesce (pvo.usuario_key, pvo2.usuario_key) usuario_oferta_key, pv_ofertas_reprovadas.data_emissao
      from produto p, preco_venda pvr, preco_venda pvl, preco_venda pvo, preco_venda pvo2, preco_venda pv_ofertas_reprovadas, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 join loja l on (pv.regiao_preco_key = l.regiao_preco_key)
          where  pv.tipo = 'N'
            and  pv.data_inicial <= datap
            and  pv.status = 1
            and  l.pessoa_key = lojaKey
          group  by pv.produto_key) regiao, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
          where  pv.tipo = 'N'
            and  pv.data_inicial <= datap
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group  by pv.produto_key) loja, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 left join promocao pr on (pv.promocao_key = pr.promocao_key)
          where  pv.tipo = 'J'
            and  (pr.status = 'F' or pr.status is null)
            and  datap between pv.data_inicial and pv.data_final
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group  by pv.produto_key) oferta, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 left join promocao pr on (pv.promocao_key = pr.promocao_key)
          where  pv.tipo = 'J'
            and  (pr.status = 'F' or pr.status is null)
            and  datap >= pv.data_inicial
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group  by pv.produto_key) oferta2, (
          select pv.produto_key, max(preco_venda_key) preco_venda_key
          from   preco_venda pv
                 left join promocao pr on (pv.promocao_key = pr.promocao_key)
          where  pv.tipo = 'R'
            and  datap >= pv.data_inicial
            and  pv.status = 1
            and  pv.loja_key = lojaKey
          group by pv.produto_key) ofertas_reprovadas
      where  p.produto_key = regiao.produto_key (+)
        and  p.produto_key = loja.produto_key (+)
        and  p.produto_key = oferta.produto_key (+)
        and  p.produto_key = oferta2.produto_key (+)
        and  p.produto_key = ofertas_reprovadas.produto_key (+)
        and  p.produto_key = produtoKey
        and  p.exporta_pdv = 1
        and  regiao.preco_venda_key = pvr.preco_venda_key (+)
        and  loja.preco_venda_key = pvl.preco_venda_key (+)
        and  oferta.preco_venda_key = pvo.preco_venda_key (+)
        and  oferta2.preco_venda_key = pvo2.preco_venda_key (+)
        and  ofertas_reprovadas.preco_venda_key = pv_ofertas_reprovadas.preco_venda_key (+)
        and  (loja.preco_venda_key is not null or regiao.preco_venda_key is not null)
        and  coalesce(oferta.preco_venda_key, loja.preco_venda_key, regiao.preco_venda_key) is not null
      order  by produto_key;
  end;
  function busca_preco_venda(produto in integer, loja in integer) return number is
    preco number;
  begin
    select coalesce(preco_oferta, preco_loja, preco_regiao, 0) into preco
    from   preco_atual
    where  produto_key = produto
      and  loja_key = loja;
    return preco;
  end;
  function busca_preco_venda_oferta(produto in integer, loja in integer) return number is
    preco number;
  begin
    select coalesce(preco_oferta, 0) into preco
    from   preco_atual
    where  produto_key = produto
      and  loja_key = loja;
    return preco;
  end;
  function busca_preco_venda_normal(produto in integer, loja in integer) return number is
    preco number;
  begin
    select coalesce(preco_loja, preco_regiao, 0) into preco
    from   preco_atual
    where  produto_key = produto
      and  loja_key = loja;
    return preco;
  end;
  function busca_preco_venda_regiao(produto in integer, regiao in integer) return number is
    preco number;
  begin
    select coalesce(max(preco_regiao), 0) into preco
    from   preco_atual pa, loja l
    where  produto_key = produto
      and  pa.loja_key = l.pessoa_key
      and  l.regiao_preco_key = regiao;
    return preco;
  end;
  procedure gera_preco_transferencia(usuario integer) is
  begin
    insert into keys(keyi1)
    select preco_transferencia_key from preco_transferencia;
    insert into preco_transferencia_log
    select preco_transferencia_key, loja_key, produto_key, data_alteracao, usuario_key,
           preco_calculado, preco_digitado, preco_venda_externa, data_final_preco_digitado,
           data_final_preco_venda_externa
    from   preco_transferencia;
    insert into preco_transferencia_tmp
    select loja_key, produto_key, data_alteracao, usuario_key,
           preco_calculado, preco_digitado, preco_venda_externa,
           data_final_preco_digitado, data_final_preco_venda_externa
    from preco_transferencia;
    delete from preco_transferencia ptt
    where  ptt.preco_transferencia_key in
    ( select keyi1 from keys );
    insert into preco_transferencia
    select seq_preco_transferencia.nextval,
           a.loja_key, a.produto_key,
           coalesce(a.data_alteracao, sysdate) as data_alteracao,
           a.usuario_key,
           a.preco_calculado,
           a.preco_digitado,
           a.preco_venda_externa,
           a.data_final_preco_digitado,
           a.data_final_preco_venda_externa
    from
    (   select cc.loja_key,  cc.produto_key,
               case when data_final_preco_digitado >= trunc(sysdate) then sysdate else data_alteracao end as data_alteracao,
               case when data_final_preco_digitado >= trunc(sysdate) then usuario_key else usuario end as usuario_key,
               case when cc.custo_bruto_sem_icm > 0
               then
               round(round((cc.custo_bruto_com_icm + coalesce(p.custo_logistico, 0)) * coalesce((p.margem_logistica/100), 0),2 ) + cc.custo_bruto_com_icm+ + coalesce(p.custo_logistico, 0),2)
               else 0
               end as preco_calculado,
               case when data_final_preco_digitado >= trunc(sysdate) then preco_digitado else null end preco_digitado,
               case when data_final_preco_venda_externa >= trunc(sysdate) then preco_venda_externa else null end preco_venda_externa,
               case when data_final_preco_digitado >= trunc(sysdate) then data_final_preco_digitado else null end data_final_preco_digitado,
               case when data_final_preco_venda_externa >= trunc(sysdate) then data_final_preco_venda_externa else null end data_final_preco_venda_externa
        from preco_transferencia_tmp pt, produto p, pis, cofins c, icm_venda iv, icm,
             ( select produto_key, loja_key,
                      sum(fe.custo_unitario_com_icm * fe.quantidade) / decode(sum(fe.quantidade), 0, 1, sum(fe.quantidade))  custo_bruto_com_icm,
                      sum(fe.custo_unitario * fe.quantidade) / decode(sum(fe.quantidade), 0, 1, sum(fe.quantidade))  custo_bruto_sem_icm
               from   ficha_estoque fe, loja l
               where  fe.loja_key = l.pessoa_key
               and    l.cd = 1
               group  by produto_key, loja_key
             ) cc
        where  cc.produto_key = p.produto_key
          and  pt.produto_key (+) = cc.produto_key
          and  pt.loja_key (+) = cc.loja_key
          and  p.pis_key = pis.pis_key
          and  p.cofins_key = c.cofins_key
          and  p.produto_key = iv.produto_key
          and  iv.icm_key = icm.icm_key
          and  iv.estado_sigla = 'SP'
    ) a
    where (coalesce(preco_calculado,0) > 0 or coalesce(preco_digitado,0) > 0);
    commit;
  end gera_preco_transferencia;
  procedure gera_preco_atual(datap in date) as
    cursor lojas is
      select pessoa_key
        from loja
      where  pessoa_key < 999;
    seq integer;
    c integer;
    lojaKey integer;
  begin
    seq := 0;
    execute immediate 'truncate table preco_atual';
    for l in lojas loop
      preco.gera_preco_tmp(l.pessoa_key, datap);
      insert /*+append*/ into preco_atual
        select seq + rownum, l.pessoa_key, p.*
        from preco_atual_tmp p;
      select count(*) into c from preco_atual_tmp;
      seq := seq + c;
      delete from preco_atual_tmp;
      commit;
    end loop;
  end gera_preco_atual;
end "PRECO";
/

create or replace package "ESTOQUE" as
	type MovimentoType is record (
		key                     int,
		produto                 int,
		origem                  int,
		loja                    int,
		data                    date,
		qtd                     number,
		valor                   number,
		custo                   number,
		custo_estoque           number,
		custo_estoque_com_icm   number,
		pis                     number,
		cofins                  number,
		icm_key                 int,
		icm                     number,
		saldo                   number,
		subgrupo                number,
		setor_compra            number,
		fornecedor              int,
		divisao                 int
	);
	function busca_preco_oferta(produto in integer, loja in integer) return number;
	function busca_preco_venda( produto integer,loja integer) return number;
	function busca_preco_venda_normal( produto integer,loja integer) return number;
	function busca_preco_venda_rede( produto integer,regiao integer) return number;
	function busca_preco_venda_caixa(produto in integer, loja in integer) return number;
	function calcula_custo(produto in integer, loja in integer, quantidade in number) return number;
	function calcula_custo_bruto(produto in integer, loja in integer, quantidade in number) return number;
	function calcula_custo_inv(produto in integer, loja in integer, quantidade in number) return number;
	function calcula_custo_bruto_inv(produto in integer, loja in integer, quantidade in number) return number;
	function calcula_custo_total(produto in integer, loja in integer) return number;
	function calcula_custo_bruto_total(produto in integer, loja in integer) return number;
	function calcula_saldo(produto in integer, loja in integer) return number;
	function calcula_saldo_disponivel(produto in integer, loja in integer) return number;
	function calcula_saldo_online(produto in integer, loja in integer) return number;
	function calcula_saldo_troca(produto in integer, loja in integer) return number;
	function calcula_saldo_rede(produto in integer, redeKey in integer) return number;
	function calcula_saldo_rede(produto in integer) return number;
	function calcula_custo_rede(produto in integer) return number;
	function calcula_custo_rede_sem_icm(produto in integer) return number;
	function busca_custo(produto in integer, loja in integer, quantidade in number) return number;
	function busca_custo_bruto(produto in integer, loja in integer, quantidade in number) return number;
	procedure ficha_estoque(produto in integer, loja in integer, data in date, quantidade in number, valor in number, icm in number, pis_valor in number, cofins_valor in number, sinal_estoque in number, sinal_em_terceiros in number, sinal_de_terceiros in number, sinal_estoque_futuro in number, saldo out number, custo in out number, custoBruto in out number);
	function insere_troca_cliente(loja integer, produto integer, data date, qtd number) return integer;
	procedure update_balanco_mensal(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype);
	procedure update_ultimo_movimento(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype);
end "ESTOQUE";
/

create or replace PACKAGE BODY "ESTOQUE" as
	versao_script varchar(20) := '29/12/2011 16:05';
 Cursor Busca(produtoKey in integer, lojaKey in integer) is
   select me.produto_key,nvl(mc.quantidade_entregue,0) quantidade_entregue, mc.custo_embalagem_final,
          mc.custo_embalagem_sem_icm_final, mc.fator_estoque, me.data_movimento
   from   movimento_estoque me, tipo_movimento tm,
          movimento_compra mc
   where  me.tipo_movimento_key = tm.tipo_movimento_key
     and  me.movimento_estoque_key = mc.movimento_estoque_key
     and  tm.busca_custo = 1
     and  me.loja_key = lojaKey
     and  me.produto_key = produtoKey
     and  me.data_movimento >= sysdate - 180
   order  by data_movimento desc;
 Cursor Linha(produto in integer, loja in integer) is
   select fe.*, lead(quantidade, 1, null) over (order by data) next_val, rowid
   from ficha_estoque fe
   where produto_key = produto
     and loja_key = loja
   order by data;
 Cursor LinhaInv(produto in integer, loja in integer) is
   select fe.*, lead(quantidade, 1, null) over (order by data) next_val, rowid
   from ficha_estoque fe
   where produto_key = produto
     and loja_key = loja
   order by data desc;
 Cursor LinhaCusto(produto in integer, loja in integer) is
   select fe.*, ct.valor, ct.valor_sem_icm
   from   ficha_estoque fe
          full join custo_teorico ct on (ct.produto_key = fe.produto_key)
   where  fe.produto_key = produto
     and  fe.loja_key = loja;
 Cursor ObterCustoTeorico(ProdutoKey in integer) is
   select *
   from   custo_teorico ct
   where  ct.produto_key = ProdutoKey;   
 Cursor ObterComposicao(produto in number) is
   select c.*
   from composicao c
   join produto p on p.produto_key = c.produto_final
   where p.tipo_composicao_key = 4
     and c.produto_final = produto;
 Cursor ObterPorEan(BarraKey in varchar2) is
   SELECT P.PRODUTO_KEY, ICM.ALIQUOTA, ICM.REDUCAO, P.SETOR_COMPRA_KEY
   FROM PRODUTO P, ITEM I, ICM_VENDA ICMV, ICM
   WHERE P.PRODUTO_KEY = I.PRODUTO_KEY
     AND ICMV.PRODUTO_KEY = P.PRODUTO_KEY
     AND ICM.ICM_KEY = ICMV.ICM_KEY
     AND I.BARRA_KEY = BarraKey;
 Cursor ObterProdutoPai(ProdutoKey in number) is
   select p.produto_key, p.fator_estoque
   from produto p
   start with produto_key = ProdutoKey
   connect by prior controle_estoque = produto_key;
 Cursor ObterSetorCompra(ProdutoKey in number) is
   select p.produto_key, p.setor_compra_key
   from produto p
   where p.produto_key = ProdutoKey;
 Cursor BuscaPreco(ProdutoKey in number, LojaKey in number) is
   select *
   from   preco_atual
   where  produto_key = ProdutoKey
     and  loja_key = LojaKey;
 Cursor PrecoDia(ProdutoKey in number, LojaKey in number) is
   SELECT NVL(B.PRECO,A.PRECO) valor
   FROM ( SELECT DISTINCT PV.PRODUTO_KEY,L.PESSOA_KEY LOJA_KEY , PV.PRECO,PV.DATA_INICIAL DATA_PRECO
             FROM PRECO_VENDA PV,LOJA L,
               (
               SELECT MAX(PRIORIDADE) PRIORIDADE ,PRODUTO_KEY,REGIAO_PRECO_KEY FROM
                 (
                 SELECT MAX(PRECO_VENDA_KEY) PRECO_VENDA_KEY,PRODUTO_KEY,1 PRIORIDADE,REGIAO_PRECO_KEY
                 FROM PRECO_VENDA
                 WHERE LOJA_KEY IS NULL AND TIPO = 'N'
                 AND   DATA_INICIAL <= SYSDATE      AND PRODUTO_KEY = ProdutoKey
                 GROUP BY PRODUTO_KEY,REGIAO_PRECO_KEY
                 UNION
                 SELECT MAX(PRECO_VENDA_KEY),PRODUTO_KEY,2,NULL  FROM PRECO_VENDA
                 WHERE LOJA_KEY = LojaKey  AND  TIPO = 'N'
                 AND   DATA_INICIAL <= SYSDATE       AND PRODUTO_KEY = ProdutoKey
                 GROUP BY PRODUTO_KEY
                 )
               GROUP BY PRODUTO_KEY,REGIAO_PRECO_KEY
               ) TOTAL ,
               (
               SELECT MAX(PRECO_VENDA_KEY) PRECO_VENDA_KEY,PRODUTO_KEY,1 PRIORIDADE,REGIAO_PRECO_KEY
               FROM PRECO_VENDA
               WHERE LOJA_KEY IS NULL AND TIPO = 'N'
                 AND   DATA_INICIAL <= SYSDATE     AND PRODUTO_KEY = ProdutoKey
               GROUP BY PRODUTO_KEY,REGIAO_PRECO_KEY
               UNION
               SELECT MAX(PRECO_VENDA_KEY),PRODUTO_KEY,2,NULL FROM PRECO_VENDA
               WHERE LOJA_KEY = LojaKey  AND TIPO = 'N'
                 AND   DATA_INICIAL <= SYSDATE    AND PRODUTO_KEY = ProdutoKey
               GROUP BY PRODUTO_KEY
               ) DETALHE
             WHERE TOTAL.PRODUTO_KEY     = DETALHE.PRODUTO_KEY
               AND TOTAL.PRIORIDADE      = DETALHE.PRIORIDADE
               AND TOTAL.REGIAO_PRECO_KEY = DETALHE.REGIAO_PRECO_KEY
               AND L.REGIAO_PRECO_KEY    = DETALHE.REGIAO_PRECO_KEY
               AND PV.PRECO_VENDA_KEY    = DETALHE.PRECO_VENDA_KEY
               and L.PESSOA_KEY = LojaKey
       ) A , ( SELECT * FROM PRECO_VENDA WHERE PRECO_VENDA_KEY IN
                (SELECT MAX(PRECO_VENDA_KEY)
                 FROM PRECO_VENDA PV,PROMOCAO PR
                 WHERE PV.PROMOCAO_KEY = PR.PROMOCAO_KEY (+)
                 AND   (PR.STATUS = 'F' OR PR.STATUS IS NULL)
               AND SYSDATE   BETWEEN PV.DATA_INICIAL AND PV.DATA_FINAL + 1
               AND   PV.LOJA_KEY = LojaKey AND TIPO = 'J' AND  PRODUTO_KEY = ProdutoKey
               GROUP BY LOJA_KEY,PRODUTO_KEY )
       ) B
   WHERE A.LOJA_KEY = B.LOJA_KEY(+) ;
  Cursor PrecoDiaRegiao(ProdutoKey in number, RegiaoPrecoKey in number) is
    SELECT PV.PRECO as valor
    FROM PRECO_VENDA PV,
    (
      SELECT MAX(PRECO_VENDA_KEY) PRECO_VENDA_KEY,PRODUTO_KEY,1 PRIORIDADE,REGIAO_PRECO_KEY
      FROM PRECO_VENDA
      WHERE LOJA_KEY IS NULL AND TIPO = 'N'
      AND   DATA_INICIAL <= SYSDATE
      AND PRODUTO_KEY = ProdutoKey
      AND REGIAO_PRECO_KEY = RegiaoPrecoKey
      GROUP BY PRODUTO_KEY,REGIAO_PRECO_KEY
    ) A
    WHERE PV.PRECO_VENDA_KEY = A.PRECO_VENDA_KEY;
  Cursor PrecoDiaLoja(ProdutoKey in number, LojaKey in number) is
    SELECT PV.PRECO as valor
    FROM PRECO_VENDA PV,
    (
      SELECT MAX(PRECO_VENDA_KEY) PRECO_VENDA_KEY
      FROM PRECO_VENDA PV, LOJA L
      WHERE PV.LOJA_KEY IS NULL AND TIPO = 'N'
      AND   DATA_INICIAL <= SYSDATE
      AND PRODUTO_KEY = ProdutoKey
      AND PV.REGIAO_PRECO_KEY = L.REGIAO_PRECO_KEY
      AND L.PESSOA_KEY = LojaKey
      GROUP BY PRODUTO_KEY,PV.REGIAO_PRECO_KEY
    ) A
    WHERE PV.PRECO_VENDA_KEY = A.PRECO_VENDA_KEY;
  Cursor PrecoOferta(produtoKey in integer, lojaKey in integer) is
    select nvl(preco, 0) preco
    from preco_venda pv, (
      select max(preco_venda_key) preco_venda_key
      from   preco_venda pv left join promocao pr on (pv.promocao_key = pr.promocao_key)
      where  (pv.promocao_key is null or pr.status = 'F')
        and  tipo = 'J'
        and  trunc(sysdate) between data_inicial and data_final
        and  pv.loja_key = lojaKey
        and  produto_key = produtoKey) promo
    where promo.preco_venda_key = pv.preco_venda_key;
 Cursor Resumo(produto in integer, loja in integer) is
   select nvl(sum(quantidade), 0) quantidade,
          decode(sum(quantidade), 0, max(custo_unitario), nvl(sum(custo_unitario * quantidade) / sum(quantidade), 0)) custo,
          decode(sum(quantidade), 0, max(custo_unitario_com_icm), nvl(sum(custo_unitario_com_icm * quantidade) / sum(quantidade), 0)) custo_com_icm,
          sum(quantidade_em_terceiros) quantidade_em_terceiros,
	      sum(quantidade_de_terceiros) quantidade_de_terceiros,
		  sum(quantidade_futura) quantidade_futura
   from ficha_estoque
   where produto_key = produto
     and loja_key = loja;
 Cursor ResumoRede(produto in integer, redeKey in integer) is
  select  nvl(sum(quantidade), 0) quantidade,
          decode(sum( case when quantidade <=0 then 1 else quantidade end ), 0, max(custo_unitario), nvl(sum(custo_unitario *  case when quantidade <=0 then 0 else quantidade end   ) / decode( sum(case when quantidade <=0 then 0 else quantidade end),0,1,sum(case when quantidade <=0 then 0 else quantidade end))    , 0)) custo,
          decode(sum(case when quantidade <=0 then 0 else quantidade end), 0, max(custo_unitario_com_icm), nvl(sum(custo_unitario_com_icm * case when quantidade <=0 then 0 else quantidade end) / decode( sum(case when quantidade <=0 then 0 else quantidade end),0,1,sum(case when quantidade <=0 then 0 else quantidade end)),    0)) custo_com_icm
   from ficha_estoque fe,rede_loja rl
   where produto_key = produto and rl.loja_key = fe.loja_key and rl.rede_key = redeKey;
 Cursor SaldoOnline(produtoKey in integer, lojaKey in Integer) is
    select saldo - venda saldo
    from (
      select nvl(sum(quantidade_vendida), 0) venda
      from   vd_cupom_item vci, vd_cupom_fiscal vcf, item i
      where  vcf.cupom_fiscal_key = vci.cupom_fiscal_key
        and  vci.barra_key = i.barra_key
        and  vcf.loja_key = lojaKey
        and  i.produto_key = produtoKey ) saldo, (
      select nvl(sum(quantidade), 0) saldo
      from   ficha_estoque fe
      where  produto_key = produtoKey
        and  loja_key = lojaKey) venda;
 Cursor SaldoTroca(produto in integer, loja in integer) is
   select quantidade quantidade from ficha_estoque_troca
   where produto_key = produto
     and loja_key = loja;
 Cursor UltimaCompra(ProdutoKey in number, LojaKey in number) is
   select
        nvl(mc.quantidade_entregue,0) quantidade_entregue, mc.custo_embalagem_final,
        mc.custo_embalagem_sem_icm_final, mc.fator_estoque, me.data_movimento
   from   movimento_estoque me, movimento_compra mc,
          ultimo_movimento um
   where  um.produto_key = ProdutoKey
     and  um.loja_key = LojaKey
     and  me.movimento_estoque_key = um.compra
     and  me.movimento_estoque_key = mc.movimento_estoque_key;
 TYPE LibCurTyp is REF CURSOR;
 TYPE TabLojasType is TABLE OF BOOLEAN INDEX BY BINARY_INTEGER;
 tab_lojas TabLojasType;
 function busca_preco_oferta(produto in integer, loja in integer) return number is
   Preco PrecoOferta%ROWTYPE;
   Preco2 BuscaPreco%ROWTYPE;
   p number;
  begin
   open BuscaPreco(produto, loja);
   fetch BuscaPreco into Preco2;
   close BuscaPreco;
   if Preco2.preco_oferta is null then
     open PrecoOferta(produto, loja);
     fetch PrecoOferta into Preco;
     close PrecoOferta;
     p := Preco.preco;
   else
     p := preco2.preco_oferta;
   end if;
   return p;
 end;
 function busca_preco_venda(produto in integer, loja in integer) return number is
   Preco PrecoDia%ROWTYPE;
   Preco2 BuscaPreco%ROWTYPE;
   p number;
  begin
   open BuscaPreco(produto, loja);
   fetch BuscaPreco into Preco2;
   close BuscaPreco;
   if coalesce(preco2.preco_oferta, preco2.preco_loja, preco2.preco_regiao) is null then
   open PrecoDia(produto, loja);
   fetch PrecoDia into Preco;
   close PrecoDia;
   p := Preco.valor;
   else
     p := coalesce(preco2.preco_oferta, preco2.preco_loja, preco2.preco_regiao);
   end if;
   return p;
 end;
  function busca_preco_venda_normal(produto in integer, loja in integer) return number is
    Preco PrecoDiaLoja%ROWTYPE;
    Preco2 BuscaPreco%ROWTYPE;
    p number;
   begin
    open BuscaPreco(produto, loja);
    fetch BuscaPreco into Preco2;
    close BuscaPreco;
    if coalesce(preco2.preco_loja, preco2.preco_regiao) is null then
      open PrecoDiaLoja(produto, loja);
      fetch PrecoDiaLoja into Preco;
      close PrecoDiaLoja;
      p := Preco.valor;
    else
      p := coalesce(preco2.preco_loja, preco2.preco_regiao);
    end if;
    return p;
  end;
  function busca_preco_venda_rede(produto in integer, regiao in integer) return number is
    Preco PrecoDiaRegiao%ROWTYPE;
   begin
    open PrecoDiaRegiao(produto, regiao);
    fetch PrecoDiaRegiao into Preco;
    close PrecoDiaRegiao;
    return Preco.valor;
  end;
 function busca_preco_venda_caixa(produto in integer, loja in integer) return number is
   Preco PrecoDia%ROWTYPE;
  begin
   open PrecoDia(produto, loja);
   fetch PrecoDia into Preco;
   close PrecoDia;
   return Preco.valor;
 end;
 function calcula_custo(produto in integer, loja in integer, quantidade in number) return number is
   LinhaCustoRow LinhaCusto%ROWTYPE;
 begin
   open LinhaCusto(produto, loja);
   fetch LinhaCusto into LinhaCustoRow;
   if(LinhaCusto%NOTFOUND) then
     close LinhaCusto;
     return 0;
   end if;
   close LinhaCusto;
   if(LinhaCustoRow.valor_sem_icm is null) then
     return LinhaCustoRow.custo_unitario;
   else
     return LinhaCustoRow.valor_sem_icm;
   end if;
 end;
 function calcula_custo_bruto(produto in integer, loja in integer, quantidade in number) return number is
   LinhaCustoRow LinhaCusto%ROWTYPE;
 begin
   open LinhaCusto(produto, loja);
   fetch LinhaCusto into LinhaCustoRow;
   if(LinhaCusto%NOTFOUND) then
     close LinhaCusto;
     return 0;
   end if;
   close LinhaCusto;
   if(LinhaCustoRow.valor is null) then
     return LinhaCustoRow.custo_unitario_com_icm;
   else
     return LinhaCustoRow.valor;
   end if;
 end;
 function calcula_custo_inv(produto in integer, loja in integer, quantidade in number) return number is
 begin
   return calcula_custo(produto, loja, 0);
 end;
 function calcula_custo_bruto_inv(produto in integer, loja in integer, quantidade in number) return number is
 begin
   return calcula_custo_bruto(produto, loja, 0);
 end;
 function calcula_saldo(produto in integer, loja in integer) return number is
   LinhaCustoRow LinhaCusto%ROWTYPE;
 begin
   open LinhaCusto(produto, loja);
   fetch LinhaCusto into LinhaCustoRow;
   if(LinhaCusto%NOTFOUND) then
     close LinhaCusto;
     return 0;
   end if;
   close LinhaCusto;
   if(LinhaCustoRow.quantidade is null) then
     return 0;
   end if;
   return LinhaCustoRow.quantidade;
 end;
 function calcula_saldo_disponivel(produto in integer, loja in integer) return number is
   LinhaCustoRow LinhaCusto%ROWTYPE;
 begin
   open LinhaCusto(produto, loja);
   fetch LinhaCusto into LinhaCustoRow;
   if(LinhaCusto%NOTFOUND) then
     close LinhaCusto;
     return 0;
   end if;
   close LinhaCusto;
   if(LinhaCustoRow.quantidade is null) then
     return 0;
   end if;
   return LinhaCustoRow.quantidade - LinhaCustoRow.quantidade_em_terceiros - LinhaCustoRow.quantidade_reservada - LinhaCustoRow.quantidade_futura;
 end;
 function calcula_saldo_online(produto in integer, loja in integer) return number is
   SaldoOnlineRow SaldoOnline%rowtype;
 begin
   open SaldoOnline(produto, loja);
   fetch SaldoOnline into SaldoOnlineRow;
   close SaldoOnline;
   return SaldoOnlineRow.saldo;
 end;
 function calcula_saldo_troca(produto in integer, loja in integer) return number is
   SaldoTrocaRow SaldoTroca%ROWTYPE;
  begin
   open SaldoTroca(produto, loja);
   fetch SaldoTroca into SaldoTrocaRow;
   close SaldoTroca;
   return SaldoTrocaRow.quantidade;
 end;
 function calcula_saldo_rede(produto in integer, redeKey in integer) return number is
   ResumoRow ResumoRede%ROWTYPE;
   CustoTeoricoRow ObterCustoTeorico%ROWTYPE;
 begin
   open ObterCustoTeorico(produto);
   fetch ObterCustoTeorico into CustoTeoricoRow;
   if(ObterCustoTeorico%FOUND) then
     Close ObterCustoTeorico;
     return 0;
   end if;
   Close ObterCustoTeorico;
   open ResumoRede(produto, redeKey);
   fetch ResumoRede into ResumoRow;
   close ResumoRede;
   return ResumoRow.quantidade;
 end;
 function calcula_saldo_rede(produto in integer) return number is
 begin
   return calcula_saldo_rede(produto, 1);
 end;
 function calcula_custo_rede(produto in integer) return number is
   ResumoRedeRow ResumoRede%ROWTYPE;
   CustoTeoricoRow ObterCustoTeorico%ROWTYPE;
 begin
   open ObterCustoTeorico(produto);
   fetch ObterCustoTeorico into CustoTeoricoRow;
   if(ObterCustoTeorico%FOUND) then
     Close ObterCustoTeorico;
     return 0;
   end if;
   Close ObterCustoTeorico;
   open ResumoRede(produto, 1);
   fetch ResumoRede into ResumoRedeRow;
   close ResumoRede;
   return ResumoRedeRow.custo_com_icm;
 end;
 function calcula_custo_rede_sem_icm(produto in integer) return number is
   ResumoRedeRow ResumoRede%ROWTYPE;
   CustoTeoricoRow ObterCustoTeorico%ROWTYPE;
 begin
   open ObterCustoTeorico(produto);
   fetch ObterCustoTeorico into CustoTeoricoRow;
   if(ObterCustoTeorico%FOUND) then
     Close ObterCustoTeorico;
     return 0;
   end if;
   Close ObterCustoTeorico;
   open ResumoRede(produto, 1);
   fetch ResumoRede into ResumoRedeRow;
   close ResumoRede;
   return ResumoRedeRow.custo;
 end;
 function calcula_custo_total(produto in integer, loja in integer) return number is
   ResumoRow Resumo%ROWTYPE;
   CustoTeoricoRow ObterCustoTeorico%ROWTYPE;
 begin
   open ObterCustoTeorico(produto);
   fetch ObterCustoTeorico into CustoTeoricoRow;
   if(ObterCustoTeorico%FOUND) then
     Close ObterCustoTeorico;
     return 0;
   end if;
   Close ObterCustoTeorico;
   open Resumo(produto, loja);
   fetch Resumo into ResumoRow;
   close Resumo;
   return ResumoRow.custo;
 end;
 function calcula_custo_bruto_total(produto in integer, loja in integer) return number is
   ResumoRow Resumo%ROWTYPE;
   CustoTeoricoRow ObterCustoTeorico%ROWTYPE;
 begin
   open ObterCustoTeorico(produto);
   fetch ObterCustoTeorico into CustoTeoricoRow;
   if(ObterCustoTeorico%FOUND) then
     Close ObterCustoTeorico;
     return 0;
   end if;
   Close ObterCustoTeorico;
   open Resumo(produto, loja);
   fetch Resumo into ResumoRow;
   close Resumo;
   return ResumoRow.custo_com_icm;
 end;
 function busca_custo(produto in integer, loja in integer, quantidade in number) return number is
   BuscaRow Busca%ROWTYPE;
   UltimaCompraRow UltimaCompra%ROWTYPE;
   custoTotal number;
   custoUnitario number;
   qtd number;
   diferenca number;
 begin
   open UltimaCompra(produto, loja);
   fetch UltimaCompra into UltimaCompraRow;
   if(UltimaCompra%FOUND) then
     if(UltimaCompraRow.quantidade_entregue * UltimaCompraRow.fator_estoque >= quantidade) then
       close UltimaCompra;
       return UltimaCompraRow.custo_embalagem_sem_icm_final / UltimaCompraRow.fator_estoque;
     end if;
   end if;
   close UltimaCompra;
   custoTotal := 0;
   qtd := 0;
   for BuscaRow in Busca(produto, loja) loop
     if(qtd = quantidade) then
       exit;
     end if;
     if(qtd + BuscaRow.quantidade_entregue * BuscaRow.fator_estoque >= quantidade) then
       diferenca := quantidade - qtd;
       qtd := qtd + diferenca;
       custoUnitario := BuscaRow.custo_embalagem_sem_icm_final / BuscaRow.fator_estoque;
       custoTotal := custoTotal + (custoUnitario * diferenca);
     else
       qtd := qtd + BuscaRow.quantidade_entregue * BuscaRow.fator_estoque;
       custoUnitario := BuscaRow.custo_embalagem_sem_icm_final / BuscaRow.fator_estoque;
       custoTotal := custoTotal + (custoUnitario * BuscaRow.quantidade_entregue * BuscaRow.fator_estoque);
     end if;
   end loop;
   if(qtd <> 0) then
     return custoTotal / qtd;
   else
     return 0;
   end if;
 end;
 function busca_custo_bruto(produto in integer, loja in integer, quantidade in number) return number is
   BuscaRow Busca%ROWTYPE;
   UltimaCompraRow UltimaCompra%ROWTYPE;
   custoTotal number;
   custoUnitario number;
   qtd number;
   diferenca number;
 begin
   open UltimaCompra(produto, loja);
   fetch UltimaCompra into UltimaCompraRow;
   if(UltimaCompra%FOUND) then
     if(UltimaCompraRow.quantidade_entregue * UltimaCompraRow.fator_estoque >= quantidade) then
       close UltimaCompra;
       return UltimaCompraRow.custo_embalagem_final / UltimaCompraRow.fator_estoque;
     end if;
   end if;
   close UltimaCompra;
   custoTotal := 0;
   qtd := 0;
   for BuscaRow in Busca(produto, loja) loop
     if(qtd = quantidade) then
       exit;
     end if;
     if(qtd + BuscaRow.quantidade_entregue * BuscaRow.fator_estoque >= quantidade) then
       diferenca := quantidade - qtd;
       qtd := qtd + diferenca;
       custoUnitario := BuscaRow.custo_embalagem_final / BuscaRow.fator_estoque;
       custoTotal := custoTotal + (custoUnitario * diferenca);
     else
       qtd := qtd + BuscaRow.quantidade_entregue * BuscaRow.fator_estoque;
       custoUnitario := BuscaRow.custo_embalagem_final / BuscaRow.fator_estoque;
       custoTotal := custoTotal + (custoUnitario * BuscaRow.quantidade_entregue * BuscaRow.fator_estoque);
     end if;
   end loop;
   if(qtd <> 0) then
     return custoTotal / qtd;
   else
     return 0;
   end if;
 end;
 procedure ficha_estoque_media(produto in integer, loja in integer, dataMov in date,
           quantidade in number, valor in number, icm in number, pis_valor in number,
           cofins_valor in number, sinal_estoque in number,
           sinal_em_terceiros in number, sinal_de_terceiros in number, sinal_estoque_futuro in number,
 		   saldo out number, custo in out number, custoBruto in out number) is
   ResumoRow Resumo%ROWTYPE;
   LinhaRow Linha%ROWTYPE;
   CustoTeoricoRow ObterCustoTeorico%ROWTYPE;
   qtd_em_terceiros number;
   qtd_de_terceiros number;
   qtd_futura number;
   qtd_estoque number;
   saldo_estoque number;
   saldo_local number;
   custo_local number;
   custo_bruto_local number;
   custo_novo number;
   custo_bruto_novo number;
 begin
   open ObterCustoTeorico(produto);
   fetch ObterCustoTeorico into CustoTeoricoRow;
   if(ObterCustoTeorico%FOUND) then
     saldo := 0;
     custo := CustoTeoricoRow.valor_sem_icm;
     custoBruto := CustoTeoricoRow.valor;
     Close ObterCustoTeorico;
     return;
   end if;
   close ObterCustoTeorico;
   open Resumo(produto, loja);
   fetch Resumo into ResumoRow;
   close Resumo;
   saldo_local := coalesce(ResumoRow.quantidade, 0);
   custo_local := coalesce(ResumoRow.custo, 0);
   custo_bruto_local := coalesce(ResumoRow.custo_com_icm, 0);
   qtd_em_terceiros := nvl(ResumoRow.quantidade_em_terceiros, 0) + (quantidade * sinal_em_terceiros);
   qtd_de_terceiros := nvl(ResumoRow.quantidade_de_terceiros, 0) + (quantidade * sinal_de_terceiros);
   qtd_futura := nvl(ResumoRow.quantidade_futura, 0) + (quantidade * sinal_estoque_futuro);
   saldo_estoque := saldo_local + (quantidade * sinal_estoque);
   qtd_estoque := saldo_estoque;
   if(saldo_estoque = 0) then
     qtd_estoque := 1;
   end if;
   custo_novo := coalesce(custo, (valor - coalesce(icm,0) - coalesce(pis_valor,0) - coalesce(cofins_valor,0)) / quantidade);
   custo_bruto_novo := coalesce(custoBruto, valor / quantidade);
   if(quantidade = 0 and sinal_estoque > 0) then -- nf complementar
     custo_local := (qtd_estoque * (custo_local + custo)) / qtd_estoque;
     custo_bruto_local := (qtd_estoque * (custo_bruto_local + custoBruto)) / qtd_estoque;
   else
     if(sinal_estoque > 0) then
       if(saldo_local <= 0) then -- saldo negativo, copia o novo custo
         custo_local := custo_novo;
         custo_bruto_local := custo_bruto_novo;
       else -- calcula media ponderada
         custo_local := ((custo_local * saldo_local) + (quantidade * custo_novo)) / qtd_estoque;
         custo_bruto_local := ((custo_bruto_local * saldo_local) + (quantidade * custo_bruto_novo)) / qtd_estoque;
       end if;
     elsif(sinal_estoque < 0) then
       if(saldo_estoque > 0) then
         if(custo is not null) then -- se for passado custo, calcular custo novo, caso contrario nao altera
           custo_local := ((custo_local * saldo_local) - (quantidade * custo)) / qtd_estoque;
           custo_bruto_local := ((custo_bruto_local * saldo_local) - (quantidade * custobruto)) / qtd_estoque;
         end if;
       else
         if(custo is not null) then -- se for passado custo, assumir o custo passado
           custo_local := custo;
           custo_bruto_local := custobruto;
         end if;
       end if;          
     elsif(sinal_estoque = 0 and custo > 0 and custobruto > 0) then -- foi feito esse if para baixar o custo do produto
         custo_local := custo;
         custo_bruto_local := custobruto;
     end if;
   end if;
   update ficha_estoque
     set data = data, quantidade = saldo_estoque,
     quantidade_de_terceiros = qtd_de_terceiros,
     quantidade_em_terceiros = qtd_em_terceiros,
     quantidade_futura = qtd_futura,
     custo_unitario = custo_local,
     custo_unitario_com_icm = custo_bruto_local
   where produto_key = produto
     and loja_key = loja;
   if(SQL%ROWCOUNT = 0) then
     insert into ficha_estoque(produto_key, loja_key, data, quantidade, custo_unitario, custo_unitario_com_icm, quantidade_em_terceiros, quantidade_de_terceiros, quantidade_futura)
     values (produto, loja, dataMov, saldo_estoque, custo_local, custo_bruto_local, qtd_em_terceiros, qtd_de_terceiros, qtd_futura);
   end if;
   saldo := saldo_estoque;
   custo := custo_local;
   custoBruto := custo_bruto_local;
 end;
 procedure ficha_estoque_nomov(produto in integer, loja in integer, dataMov in date,
           quantidade in number, valor in number, icm in number, saldo out number,
           custo in out number, custoBruto in out number) as
   linhas integer;
 begin
   saldo := 0;
   custoBruto := valor / quantidade;
   custo := (valor - icm) / quantidade;
     update ficha_estoque
      set quantidade = 0,
          quantidade_em_terceiros = 0,
          quantidade_de_terceiros = 0,
		  quantidade_futura = 0,
          quantidade_pendente_em_pedidos = 0,
          quantidade_reservada = 0,
          custo_unitario = custo,
          custo_unitario_com_icm = custoBruto,
          data = dataMov
    where produto_key = produto
      and loja_key = loja;
    linhas := SQL%ROWCOUNT;
    if(linhas > 1) then
      delete from ficha_estoque
      where  produto_key = produto and loja_key = loja;
      linhas := 0;
    end if;
    if(linhas = 0) then
      insert into ficha_estoque(produto_key, loja_key, data, quantidade,
                                custo_unitario, custo_unitario_com_icm)
      values (produto, loja, dataMov, 0, custo, custoBruto);
    end if;
 end;
 procedure ficha_estoque(produto in integer, loja in integer, data in date,
           quantidade in number, valor in number, icm in number, pis_valor in number,
           cofins_valor in number, sinal_estoque in number,
           sinal_em_terceiros in number, sinal_de_terceiros in number, sinal_estoque_futuro in number,
 		   saldo out number, custo in out number, custoBruto in out number) as
   cf LibCurTyp;
   v number;
 begin
   if(not tab_lojas.exists(loja)) then
     open cf for select controla_estoque from loja where pessoa_key = loja;
     fetch cf into v;
     if(v = 1) then
       tab_lojas(loja) := true;
     else
       tab_lojas(loja) := false;
     end if;
     close cf;
   end if;
     if(tab_lojas(loja) = false) then
     ficha_estoque_nomov(produto, loja, data, quantidade, valor, icm, saldo, custo, custoBruto);
     return;
   end if;
   if(produto <> 0) then
     ficha_estoque_media(produto, loja, data, quantidade, valor, icm, pis_valor, cofins_valor, sinal_estoque, sinal_em_terceiros, sinal_de_terceiros, sinal_estoque_futuro, saldo, custo, custoBruto);
   end if;
 end;
 function insere_troca_cliente(loja integer, produto integer, data date, qtd number)
          return integer is
   SetorCompraRow ObterSetorCompra%ROWTYPE;
   Result integer;
   SetorCompra integer;
   Valor number;
 begin
   Result := 0;
   if(loja = null or loja < 0) then
     return -1;
   end if;
   if(produto = null or produto <= 0) then
     return -1;
   end if;
   if(qtd = null or qtd <= 0) then
     return -1;
   end if;
   if(data = null) then
     return -1;
   end if;
   open ObterSetorCompra(produto);
   fetch ObterSetorCompra into SetorCompraRow;
   if(ObterSetorCompra%ROWCOUNT = 0) then
     close ObterSetorCompra;
     return 0;
   else
     SetorCompra := SetorCompraRow.Setor_Compra_Key;
   end if;
   close ObterSetorCompra;
   Valor := calcula_custo(produto, loja, qtd) * qtd;
   insert into movimento_estoque
   ( movimento_estoque_key, tipo_movimento_key, loja_key, produto_key, data_movimento, quantidade, valor, setor_compra_key )
   values (
     sequencia_controle_estoque.nextval,
     402, -- Troca Entrada Central
     loja,
     produto,
     data,
     qtd,
     Valor,
     SetorCompra );
   Result := Result + 1;
   return Result;
 end insere_troca_cliente;
  procedure update_bm_venda(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
  begin
    update balanco_mensal
    set    venda_quant = nvl(venda_quant,0) - (movimento.qtd * tipoMovimentoRow.sinal_estoque),
           venda_valor = nvl(venda_valor,0) - (movimento.valor * tipoMovimentoRow.sinal_estoque),
           est_final_quant = movimento.saldo, est_final_valor_compra = movimento.custo,
           icms_venda = nvl(icms_venda,0) + (movimento.icm * tipoMovimentoRow.sinal_estoque),
           custo_venda = nvl(custo_venda,0) + ((movimento.custo * movimento.qtd) * tipoMovimentoRow.sinal_estoque)
    where  produto_key = movimento.produto
      and  loja_key = movimento.loja
      and  ano = to_char(movimento.data, 'YYYY')
      and  mes = to_char(movimento.data, 'MM');
    if(SQL%ROWCOUNT = 0) then
      insert into balanco_mensal (periodo, ano, mes, loja_key, produto_key,
             venda_quant, venda_valor, est_final_quant, est_final_valor_compra,
             icms_venda, custo_venda, est_inic_quant, est_inic_valor_compra,
             troca_estoque_inicial, subgrupo, setor_compra_key, primeira_venda)
      values (to_date(concat('01/', to_char(movimento.data, 'MM/YYYY')), 'DD/MM/YYYY'),
             to_char(movimento.data, 'YYYY'), to_char(movimento.data, 'MM'),
             movimento.loja, movimento.produto,
             - (movimento.qtd * tipoMovimentoRow.sinal_estoque),
             - (movimento.valor * tipoMovimentoRow.sinal_estoque),
             movimento.saldo, movimento.custo_estoque,
             (movimento.icm * tipoMovimentoRow.sinal_estoque),
             ((movimento.custo * movimento.qtd) * tipoMovimentoRow.sinal_estoque),
             null, null, null, movimento.subgrupo, movimento.setor_compra, movimento.data);
    end if;
  end;
  procedure update_bm_compra(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
  begin
    update balanco_mensal
    set    compra_quant = nvl(compra_quant,0) + movimento.qtd,
           compra_valor = nvl(compra_valor,0) + movimento.valor,
           est_final_quant = movimento.saldo,
           est_final_valor_compra = movimento.custo,
           icms_venda = nvl(icms_venda,0) + movimento.icm
    where  produto_key = movimento.produto
      and  loja_key = movimento.loja
      and  ano = to_char(movimento.data, 'YYYY')
      and  mes = to_char(movimento.data, 'MM');
    if(SQL%ROWCOUNT = 0) then
      insert into balanco_mensal (periodo, ano, mes, loja_key, produto_key,
             compra_quant, compra_valor, est_final_quant, est_final_valor_compra,
             icms_venda, est_inic_quant, est_inic_valor_compra,
             troca_estoque_inicial, subgrupo, setor_compra_key, primeira_venda)
      values (to_date(concat('01/', to_char(movimento.data, 'MM/YYYY')), 'DD/MM/YYYY'),
             to_char(movimento.data, 'YYYY'), to_char(movimento.data, 'MM'),
             movimento.loja, movimento.produto, movimento.qtd, movimento.valor,
             movimento.saldo, movimento.custo_estoque, movimento.icm,
             null, null, null, movimento.subgrupo, movimento.setor_compra, movimento.data);
    end if;
  end;
  procedure update_bm_transferencia(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
  begin
    update balanco_mensal
    set    transferencia_quant = nvl(transferencia_quant,0) + movimento.qtd,
           transferencia_valor = nvl(transferencia_valor,0) + movimento.valor,
           est_final_quant = movimento.saldo,
           est_final_valor_compra = movimento.custo,
           icms_venda = nvl(icms_venda,0) + movimento.icm
    where  produto_key = movimento.produto
      and  loja_key = movimento.loja
      and  ano = to_char(movimento.data, 'YYYY')
      and  mes = to_char(movimento.data, 'MM');
    if(SQL%ROWCOUNT = 0) then
      insert into balanco_mensal (periodo, ano, mes, loja_key, produto_key,
             transferencia_quant, transferencia_valor, est_final_quant, est_final_valor_compra,
             icms_venda, est_inic_quant, est_inic_valor_compra,
             troca_estoque_inicial, subgrupo, setor_compra_key, primeira_venda)
      values (to_date(concat('01/', to_char(movimento.data, 'MM/YYYY')), 'DD/MM/YYYY'),
             to_char(movimento.data, 'YYYY'), to_char(movimento.data, 'MM'),
             movimento.loja, movimento.produto, movimento.qtd, movimento.valor,
             movimento.saldo, movimento.custo_estoque, movimento.icm,
             null, null, null, movimento.subgrupo, movimento.setor_compra, movimento.data);
    end if;
  end;
  procedure update_bm_troca_saida(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
  begin
    update balanco_mensal
    set    troca_saida_quant = nvl(troca_saida_quant,0) + movimento.qtd,
           troca_saida_valor = nvl(troca_saida_valor,0) + movimento.valor,
           est_final_quant = movimento.saldo,
           est_final_valor_compra = movimento.custo,
           icms_venda = nvl(icms_venda,0) + movimento.icm
    where  produto_key = movimento.produto
      and  loja_key = movimento.loja
      and  ano = to_char(movimento.data, 'YYYY')
      and  mes = to_char(movimento.data, 'MM');
    if(SQL%ROWCOUNT = 0) then
      insert into balanco_mensal (periodo, ano, mes, loja_key, produto_key,
             troca_saida_quant, troca_saida_valor, est_final_quant, est_final_valor_compra,
             icms_venda, custo_venda, est_inic_quant, est_inic_valor_compra,
             troca_estoque_inicial, subgrupo, setor_compra_key, primeira_venda)
      values (to_date(concat('01/', to_char(movimento.data, 'MM/YYYY')), 'DD/MM/YYYY'),
             to_char(movimento.data, 'YYYY'), to_char(movimento.data, 'MM'),
             movimento.loja, movimento.produto, movimento.qtd, movimento.valor,
             movimento.saldo, movimento.custo_estoque, movimento.icm,
             (movimento.custo * movimento.qtd),
             null, null, null, movimento.subgrupo, movimento.setor_compra, movimento.data);
    end if;
  end;
procedure update_bm_troca_entrada(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
  begin
    update balanco_mensal
    set    troca_entrada_quant = nvl(troca_entrada_quant,0) + movimento.qtd,
           troca_entrada_valor = nvl(troca_entrada_valor,0) + movimento.valor,
           est_final_quant = movimento.saldo,
           est_final_valor_compra = movimento.custo,
           icms_venda = nvl(icms_venda,0) + movimento.icm
    where  produto_key = movimento.produto
      and  loja_key = movimento.loja
      and  ano = to_char(movimento.data, 'YYYY')
      and  mes = to_char(movimento.data, 'MM');
    if(SQL%ROWCOUNT = 0) then
      insert into balanco_mensal (periodo, ano, mes, loja_key, produto_key,
             troca_entrada_quant, troca_entrada_valor, est_final_quant, est_final_valor_compra,
             icms_venda, custo_venda, est_inic_quant, est_inic_valor_compra,
             troca_estoque_inicial, subgrupo, setor_compra_key, primeira_venda)
      values (to_date(concat('01/', to_char(movimento.data, 'MM/YYYY')), 'DD/MM/YYYY'),
             to_char(movimento.data, 'YYYY'), to_char(movimento.data, 'MM'),
             movimento.loja, movimento.produto, movimento.qtd, movimento.valor,
             movimento.saldo, movimento.custo_estoque, movimento.icm,
             (movimento.custo * movimento.qtd),
             null, null, null, movimento.subgrupo, movimento.setor_compra, movimento.data);
    end if;
  end;
procedure update_bm_troca(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
    cursor c1(lojaKey in number, produtoKey in number) is
       select quantidade from ficha_estoque_troca where loja_key = lojaKey and  produto_key = produtoKey;
    r1 c1%rowtype;
    quantidadeFinal number;
  begin
    if(tipoMovimentoRow.sinal_troca < 0) then
      update_bm_troca_saida(movimento, tipoMovimentoRow);
    end if;
    if(tipoMovimentoRow.sinal_troca > 0) then
      update_bm_troca_entrada(movimento, tipoMovimentoRow);
    end if;
    if (tipoMovimentoRow.sinal_troca > 0) then
      quantidadeFinal := 0;
      open c1(movimento.loja, movimento.produto);
      fetch c1 into r1;
      if c1%found then
        quantidadeFinal := r1.quantidade;
      end if;
      close c1;
      quantidadeFinal := quantidadeFinal + movimento.qtd;
      if quantidadeFinal = 0 then
        update ficha_estoque_troca
           set quantidade = nvl(quantidade,0) + (tipoMovimentoRow.sinal_troca * movimento.qtd),
               CUSTO_MEDIO_SEM_IMPOSTO_UNIT = MOVIMENTO.CUSTO_ESTOQUE,
               CUSTO_MEDIO_COM_IMPOSTO_UNIT = MOVIMENTO.CUSTO_ESTOQUE_COM_ICM
        where  loja_key = movimento.loja
          and  produto_key = movimento.produto;
      else
        update ficha_estoque_troca
           set quantidade = nvl(quantidade,0) + (tipoMovimentoRow.sinal_troca * movimento.qtd),
               CUSTO_MEDIO_SEM_IMPOSTO_UNIT = (nvl(CUSTO_MEDIO_SEM_IMPOSTO_UNIT,0) * QUANTIDADE + MOVIMENTO.CUSTO_ESTOQUE * MOVIMENTO.QTD) / (QUANTIDADE+MOVIMENTO.QTD),
               CUSTO_MEDIO_COM_IMPOSTO_UNIT = (nvl(CUSTO_MEDIO_COM_IMPOSTO_UNIT,0) * quantidade + MOVIMENTO.CUSTO_ESTOQUE_COM_ICM * movimento.qtd) / (quantidade+movimento.qtd)
        where  loja_key = movimento.loja
          and  produto_key = movimento.produto;
	    end if;
	    IF(SQL%ROWCOUNT = 0) THEN
	    	INSERT INTO FICHA_ESTOQUE_TROCA (LOJA_KEY,PRODUTO_KEY,QUANTIDADE,CUSTO_MEDIO_SEM_IMPOSTO_UNIT, CUSTO_MEDIO_COM_IMPOSTO_UNIT)
	     	values (movimento.loja, movimento.produto, (tipoMovimentoRow.sinal_troca * movimento.qtd), nvl(movimento.custo_estoque, 0), nvl(movimento.custo_estoque_com_icm, 0));
	    end if;
	else
		update ficha_estoque_troca
	       set quantidade = nvl(quantidade,0) + (tipoMovimentoRow.sinal_troca * movimento.qtd)
	    where  loja_key = movimento.loja
	      and  produto_key = movimento.produto;
    end if;
  end;
procedure update_bm_ajuste(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
  begin
    update balanco_mensal
    set    ajuste_quant = nvl(ajuste_quant,0) + (tipoMovimentoRow.sinal_estoque * movimento.qtd),
           ajuste_valor = nvl(ajuste_valor,0) + (tipoMovimentoRow.sinal_estoque * movimento.valor),
           est_final_quant = movimento.saldo,
           est_final_valor_compra = movimento.custo,
           icms_venda = nvl(icms_venda,0) + movimento.icm
    where  produto_key = movimento.produto
      and  loja_key = movimento.loja
      and  ano = to_char(movimento.data, 'YYYY')
      and  mes = to_char(movimento.data, 'MM');
    if(SQL%ROWCOUNT = 0) then
      insert into balanco_mensal (periodo, ano, mes, loja_key, produto_key,
             ajuste_quant, ajuste_valor, est_final_quant, est_final_valor_compra,
             icms_venda, custo_venda, est_inic_quant, est_inic_valor_compra,
             troca_estoque_inicial, subgrupo, setor_compra_key, primeira_venda)
      values (to_date(concat('01/', to_char(movimento.data, 'MM/YYYY')), 'DD/MM/YYYY'),
             to_char(movimento.data, 'YYYY'), to_char(movimento.data, 'MM'),
             movimento.loja, movimento.produto, movimento.qtd,
             movimento.valor * tipoMovimentoRow.sinal_estoque,
             movimento.qtd * tipoMovimentoRow.sinal_estoque,
             movimento.custo_estoque, movimento.icm,
            (movimento.custo * movimento.qtd),
             null, null, null, movimento.subgrupo, movimento.setor_compra, movimento.data);
    end if;
  end;
  procedure update_balanco_mensal(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
  begin
    if(tipoMovimentoRow.movimento = 'V') then
      update_bm_venda(movimento, tipoMovimentoRow);
    end if;
    if(tipoMovimentoRow.movimento = 'C') then
      update_bm_compra(movimento, tipoMovimentoRow);
    end if;
    if(tipoMovimentoRow.movimento = 'F') then
      update_bm_transferencia(movimento, tipoMovimentoRow);
    end if;
    if(tipoMovimentoRow.movimento = 'T') then
      update_bm_troca(movimento, tipoMovimentoRow);
    end if;
    if(tipoMovimentoRow.movimento = 'A') then
      update_bm_ajuste(movimento, tipoMovimentoRow);
    end if;
  end update_balanco_mensal;
  procedure update_ultimo_movimento(movimento MovimentoType, tipoMovimentoRow tipo_movimento%rowtype) is
    campo varchar (20);
  begin
    if tipoMovimentoRow.estorno = 1 then
      return;
    end if;
    campo := '';
    case tipoMovimentoRow.movimento
      when 'V' then
        campo := 'venda';
      when 'C' then
        campo := 'compra';
      when 'F' then
        if tipoMovimentoRow.sinal_estoque >  0 then
          campo := 'transferencia';
        else
          campo := 'transferencia_saida';
        end if;
      when 'T' then
        if tipoMovimentoRow.sinal_troca > 0 then
          campo := 'troca_entrada';
        else
          campo := 'troca_saida';
        end if;
      when 'A' then
        if tipoMovimentoRow.debito_credito = 'D' then
          campo := 'ajuste_debito';
        else
          campo := 'ajuste_credito';
        end if;
      when 'D' then
        campo := 'devolucao_compra';
      when 'M' then
        if tipoMovimentoRow.sinal_em_terceiros = -1 or tipoMovimentoRow.sinal_de_terceiros = 1 then
          campo := 'armazenagem_entrada';
        else
          campo := 'armazenagem_saida';
        end if;
      else
        return;
    end case;
    execute immediate 'update ultimo_movimento um set ' || campo || ' = :1 where produto_key = :2 and loja_key = :3'
      using in movimento.key, in movimento.produto, in movimento.loja;
    if SQL%ROWCOUNT = 0 then
      execute immediate 'insert into ultimo_movimento (produto_key, loja_key, ' || campo || ') values (:1, :2, :3)'
        using in movimento.produto, in movimento.loja, in movimento.key;
    end if;
  end update_ultimo_movimento;
end "ESTOQUE";
/

create or replace package "UTILS" as
	function inc_sequence(seq_name varchar2, qtd in number) return tnumber;
end "UTILS";
/

create or replace package body "UTILS" as
	versao_script varchar(20) := '07/04/2011 18:54';
	function inc_sequence(seq_name varchar2, qtd in number) return tnumber is
		v_tnumber tnumber;
		v_key number;
		v_sql varchar(200);
		begin
			v_tnumber := tnumber();
			v_tnumber.extend(qtd);
			v_sql := 'select ' || seq_name || '.nextval from dual';
			for i in 1..qtd loop
				execute immediate v_sql into v_key;
				v_tnumber(i) := v_key;
			end loop;
			return v_tnumber;
	end inc_sequence;
end "UTILS";
/

create or replace procedure relatorio_ticket_medio as
 begin
  delete from resumo_tkt_medio_hora where calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate), 'yyyyMMdd');
  insert into RESUMO_TKT_MEDIO_HORA
  ( loja_key, calendario_key, hora, quantidade_cupons, valor_vendido)
  ( select x.loja_key, x.calendario_key, x.hora
           ,x.quantidade_cupons - coalesce(y.quantidade_cupons,0) as quantidade_cupons
           ,x.valor_vendido - coalesce(y.valor_vendido,0) as valor_vendido
    from
    ( select a.loja_key, a.calendario_key, a.hora, b.quantidade_cupons, a.valor_vendido
      from
      ( select cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24') as hora
               ,sum(ci.valor) as valor_vendido
        from cupom_fiscal cf, cupom_item ci, calendario ca
        where cf.cupom_fiscal_key = ci.cupom_fiscal_key
        and cf.calendario_key = ca.calendario_key
        and ci.calendario_key = ca.calendario_key
        and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
        group by cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24')
      ) a,
      ( select loja_key, calendario_key, hora, count(*) as quantidade_cupons
        from
        (
            select distinct cf.cupom_numero, cf.loja_key, cf.calendario_key, cf.ecf, to_char(cf.hora, 'hh24') as hora
            from cupom_fiscal cf, cupom_item ci, calendario ca
            where cf.cupom_fiscal_key = ci.cupom_fiscal_key
            and cf.calendario_key = ca.calendario_key
            and ci.calendario_key = ca.calendario_key
            and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
        )
        group by loja_key, calendario_key, hora
      ) b
      where a.loja_key = b.loja_key
      and a.calendario_key = b.calendario_key
      and a.hora = b.hora
    ) x,
    ( select c.loja_key, c.calendario_key, c.hora, d.quantidade_cupons, c.valor_vendido
      from
      ( select cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24') as hora
               ,sum(icd.valor_devolvido) as valor_vendido
        from item_cupom_devolvido icd, cupom_devolvido cd, calendario ca
        where icd.cupom_devolvido_key = cd.cupom_devolvido_key
        and cd.data = ca.data
        and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
        group by cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24')
      ) c,
      ( select loja_key, calendario_key, hora, count(*) as quantidade_cupons
        from
        (
	    select distinct cd.numero_cupom, cd.loja_key, ca.calendario_key, cd.numero_ecf, to_char(cd.hora_lancamento, 'hh24') as hora
            from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
            where cd.cupom_devolvido_key = icd.cupom_devolvido_key
            and ca.data = cd.data
            and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')        )
        group by loja_key, calendario_key, hora
      ) d
      where c.loja_key = d.loja_key
      and c.calendario_key = d.calendario_key
      and c.hora = d.hora
    ) y
    where x.loja_key = y.loja_key (+)
    and x.calendario_key = y.calendario_key (+)
    and x.hora = y.hora (+)
  );
  commit;
  delete from resumo_tkt_medio where calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate), 'yyyyMMdd');
  insert into RESUMO_TKT_MEDIO
  ( loja_key, calendario_key, quantidade_cupons, valor_vendido)
  ( select rtmh.loja_key, rtmh.calendario_key
           ,sum(rtmh.quantidade_cupons) as quantidade_cupons
           ,sum(rtmh.valor_vendido) as valor_vendido
    from resumo_tkt_medio_hora rtmh
    where rtmh.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
    group by rtmh.loja_key, rtmh.calendario_key
  );
  commit;
  delete from resumo_tkt_medio_hora_depto where calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate), 'yyyyMMdd');
  insert into RESUMO_TKT_MEDIO_HORA_DEPTO
  ( loja_key, calendario_key, hora, departamento_key, quantidade_cupons, valor_vendido)
  ( select x.loja_key, x.calendario_key, x.hora, x.departamento_key
           ,x.quantidade_cupons - coalesce(y.quantidade_cupons,0) as quantidade_cupons
           ,x.valor_vendido - coalesce(y.valor_vendido,0) as valor_vendido
    from
    ( select a.loja_key, a.calendario_key, a.hora, a.departamento_key, b.quantidade_cupons, a.valor_vendido
      from
      ( select loja_key, calendario_key, hora, departamento_key, sum(valor_vendido) as valor_vendido
        from
        (
          select cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24') as hora, d.departamento_key,
                 sum(ci.valor) as valor_vendido
          from cupom_fiscal cf, cupom_item ci, calendario ca
               ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
          where cf.cupom_fiscal_key = ci.cupom_fiscal_key
          and cf.calendario_key = ca.calendario_key
          and ci.calendario_key = ca.calendario_key
          and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
          and ci.barra_key = i.barra_key
          and i.produto_key = p.produto_key
          and p.controle_estoque is null
          and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
          and sgp.grupo_produto_key = gp.grupo_produto_key
          and gp.secao_key = se.secao_key
          and se.departamento_key = d.departamento_key
          group by cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24'), d.departamento_key
          union all
          select cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24') as hora, d.departamento_key,
                 sum(ci.valor) as valor_vendido
          from cupom_fiscal cf, cupom_item ci, calendario ca
               ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
          where cf.cupom_fiscal_key = ci.cupom_fiscal_key
          and cf.calendario_key = ca.calendario_key
          and ci.calendario_key = ca.calendario_key
          and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
          and ci.barra_key = i.barra_key
          and i.produto_key = p.produto_key
          and p.controle_estoque = ce.produto_key
          and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
          and sgp.grupo_produto_key = gp.grupo_produto_key
          and gp.secao_key = se.secao_key
          and se.departamento_key = d.departamento_key
          group by cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24'), d.departamento_key
        )
        group by loja_key, calendario_key, hora, departamento_key
      ) a,
      (
        select loja_key, calendario_key, hora, departamento_key, count(*) as quantidade_cupons
        from
        (
            select distinct cf.cupom_numero, cf.loja_key, cf.calendario_key, cf.ecf, to_char(cf.hora, 'hh24') as hora, d.departamento_key
            from cupom_fiscal cf, cupom_item ci, calendario ca
                 ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
            where cf.cupom_fiscal_key = ci.cupom_fiscal_key
            and cf.calendario_key = ca.calendario_key
            and ci.calendario_key = ca.calendario_key
            and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and ci.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque is null
            and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
            and se.departamento_key = d.departamento_key
            union all
            select distinct cf.cupom_numero, cf.loja_key, cf.calendario_key, cf.ecf, to_char(cf.hora, 'hh24') as hora, d.departamento_key
            from cupom_fiscal cf, cupom_item ci, calendario ca
                 ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
            where cf.cupom_fiscal_key = ci.cupom_fiscal_key
            and cf.calendario_key = ca.calendario_key
            and ci.calendario_key = ca.calendario_key
            and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and ci.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque = ce.produto_key
            and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
            and se.departamento_key = d.departamento_key
        )
        group by loja_key, calendario_key, hora, departamento_key
      ) b
      where a.loja_key = b.loja_key
      and a.calendario_key = b.calendario_key
      and a.hora = b.hora
      and a.departamento_key = b.departamento_key
      ) x,
      ( select c.loja_key, c.calendario_key, c.hora, c.departamento_key, d.quantidade_cupons, c.valor_vendido
        from
        ( select loja_key, calendario_key, hora, departamento_key, sum(valor_vendido) as valor_vendido
          from
          (
            select cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24') as hora, d.departamento_key
                   ,sum(icd.valor_devolvido) as valor_vendido
            from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                 ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
            where cd.cupom_devolvido_key = icd.cupom_devolvido_key
            and cd.data = ca.data
            and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and icd.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque is null
            and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
            and se.departamento_key = d.departamento_key
            group by cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24'), d.departamento_key
            union all
            select cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24') as hora, d.departamento_key
                   ,sum(icd.valor_devolvido) as valor_vendido
            from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                 ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
            where cd.cupom_devolvido_key = icd.cupom_devolvido_key
            and ca.data = cd.data
            and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and icd.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque = ce.produto_key
            and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
            and se.departamento_key = d.departamento_key
            group by cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24'), d.departamento_key
          )
          group by loja_key, calendario_key, hora, departamento_key
        ) c,
        ( select loja_key, calendario_key, hora, departamento_key, count(*) as quantidade_cupons
          from
          (
              select distinct cd.numero_cupom, cd.loja_key, ca.calendario_key, cd.numero_ecf, to_char(cd.hora_lancamento, 'hh24') as hora, d.departamento_key
              from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                   ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
              where cd.cupom_devolvido_key = icd.cupom_devolvido_key
              and ca.data = cd.data
              and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
              and icd.barra_key = i.barra_key
              and i.produto_key = p.produto_key
              and p.controle_estoque is null
              and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
              and sgp.grupo_produto_key = gp.grupo_produto_key
              and gp.secao_key = se.secao_key
              and se.departamento_key = d.departamento_key
              union all
              select distinct cd.numero_cupom, cd.loja_key, ca.calendario_key, cd.numero_ecf, to_char(cd.hora_lancamento, 'hh24') as hora, d.departamento_key
              from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                   ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se, departamento d
              where cd.cupom_devolvido_key = icd.cupom_devolvido_key
              and ca.data = cd.data
              and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
              and icd.barra_key = i.barra_key
              and i.produto_key = p.produto_key
              and p.controle_estoque = ce.produto_key
              and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
              and sgp.grupo_produto_key = gp.grupo_produto_key
              and gp.secao_key = se.secao_key
              and se.departamento_key = d.departamento_key
          )
          group by loja_key, calendario_key, hora, departamento_key
        ) d
        where c.loja_key = d.loja_key
        and c.calendario_key = d.calendario_key
        and c.hora = d.hora
        and c.departamento_key = d.departamento_key
      ) y
      where x.loja_key = y.loja_key (+)
      and x.calendario_key = y.calendario_key (+)
      and x.hora = y.hora (+)
      and x.departamento_key = y.departamento_key (+)
    );
  commit;
  delete from resumo_tkt_medio_depto where calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate), 'yyyyMMdd');
  insert into RESUMO_TKT_MEDIO_DEPTO
  ( loja_key, calendario_key, departamento_key, quantidade_cupons, valor_vendido)
  ( select rtmhd.loja_key, rtmhd.calendario_key, rtmhd.departamento_key
           ,sum(rtmhd.quantidade_cupons) as quantidade_cupons
           ,sum(rtmhd.valor_vendido) as valor_vendido
    from resumo_tkt_medio_hora_depto rtmhd
    where rtmhd.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
    group by rtmhd.loja_key, rtmhd.calendario_key, rtmhd.departamento_key
  );
  commit;
  delete from resumo_tkt_medio_hora_secao where calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate), 'yyyyMMdd');
  insert into RESUMO_TKT_MEDIO_HORA_SECAO
  ( loja_key, calendario_key, hora, departamento_key, secao_key, quantidade_cupons, valor_vendido)
  ( select x.loja_key, x.calendario_key, x.hora, x.departamento_key, x.secao_key
           ,x.quantidade_cupons - coalesce(y.quantidade_cupons,0) as quantidade_cupons
           ,x.valor_vendido - coalesce(y.valor_vendido,0) as valor_vendido
    from
    ( select a.loja_key, a.calendario_key, a.hora, a.departamento_key, a.secao_key, b.quantidade_cupons, a.valor_vendido
      from
      ( select loja_key, calendario_key, hora, departamento_key, secao_key, sum(valor_vendido) as valor_vendido
        from
        (
          select cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24') as hora, se.departamento_key, se.secao_key,
                 sum(ci.valor) as valor_vendido
          from cupom_fiscal cf, cupom_item ci, calendario ca
               ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
          where cf.cupom_fiscal_key = ci.cupom_fiscal_key
          and cf.calendario_key = ca.calendario_key
          and ci.calendario_key = ca.calendario_key
          and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
          and ci.barra_key = i.barra_key
          and i.produto_key = p.produto_key
          and p.controle_estoque is null
          and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
          and sgp.grupo_produto_key = gp.grupo_produto_key
          and gp.secao_key = se.secao_key
          group by cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24'), se.departamento_key, se.secao_key
          union all
          select cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24') as hora, se.departamento_key, se.secao_key,
                 sum(ci.valor) as valor_vendido
          from cupom_fiscal cf, cupom_item ci, calendario ca
               ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
          where cf.cupom_fiscal_key = ci.cupom_fiscal_key
          and cf.calendario_key = ca.calendario_key
          and ci.calendario_key = ca.calendario_key
          and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
          and ci.barra_key = i.barra_key
          and i.produto_key = p.produto_key
          and p.controle_estoque = ce.produto_key
          and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
          and sgp.grupo_produto_key = gp.grupo_produto_key
          and gp.secao_key = se.secao_key
          group by cf.loja_key, cf.calendario_key, to_char(cf.hora, 'hh24'), se.departamento_key, se.secao_key
        )
        group by loja_key, calendario_key, hora, departamento_key, secao_key
      ) a,
      (
        select loja_key, calendario_key, hora, departamento_key, secao_key, count(*) as quantidade_cupons
        from
        (
            select distinct cf.cupom_numero, cf.loja_key, cf.calendario_key, cf.ecf, to_char(cf.hora, 'hh24') as hora, se.departamento_key, se.secao_key
            from cupom_fiscal cf, cupom_item ci, calendario ca
                 ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
            where cf.cupom_fiscal_key = ci.cupom_fiscal_key
            and cf.calendario_key = ca.calendario_key
            and ci.calendario_key = ca.calendario_key
            and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and ci.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque is null
            and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
            union all
            select distinct cf.cupom_numero, cf.loja_key, cf.calendario_key, cf.ecf, to_char(cf.hora, 'hh24') as hora, se.departamento_key, se.secao_key
            from cupom_fiscal cf, cupom_item ci, calendario ca
                 ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
            where cf.cupom_fiscal_key = ci.cupom_fiscal_key
            and cf.calendario_key = ca.calendario_key
            and ci.calendario_key = ca.calendario_key
            and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and ci.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque = ce.produto_key
            and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
        )
        group by loja_key, calendario_key, hora, departamento_key, secao_key
      ) b
      where a.loja_key = b.loja_key
      and a.calendario_key = b.calendario_key
      and a.hora = b.hora
      and a.secao_key = b.secao_key
      ) x,
      ( select c.loja_key, c.calendario_key, c.hora, c.departamento_key, c.secao_key, d.quantidade_cupons, c.valor_vendido
        from
        ( select loja_key, calendario_key, hora, departamento_key, secao_key, sum(valor_vendido) as valor_vendido
          from
          (
            select cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24') as hora, se.departamento_key, se.secao_key
                   ,sum(icd.valor_devolvido) as valor_vendido
            from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                 ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
            where cd.cupom_devolvido_key = icd.cupom_devolvido_key
            and ca.data = cd.data
            and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and icd.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque is null
            and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
            group by cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24'), se.departamento_key, se.secao_key
            union all
            select cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24') as hora, se.departamento_key, se.secao_key
                   ,sum(icd.valor_devolvido) as valor_vendido
            from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                 ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
            where cd.cupom_devolvido_key = icd.cupom_devolvido_key
            and cd.data = ca.data
            and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
            and icd.barra_key = i.barra_key
            and i.produto_key = p.produto_key
            and p.controle_estoque = ce.produto_key
            and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
            and sgp.grupo_produto_key = gp.grupo_produto_key
            and gp.secao_key = se.secao_key
            group by cd.loja_key, ca.calendario_key, to_char(cd.hora_lancamento, 'hh24'), se.departamento_key, se.secao_key
          )
          group by loja_key, calendario_key, hora, departamento_key, secao_key
        ) c,
        ( select loja_key, calendario_key, hora, departamento_key, secao_key, count(*) as quantidade_cupons
          from
          (
              select distinct cd.numero_cupom, cd.loja_key, ca.calendario_key, cd.numero_ecf, to_char(cd.hora_lancamento, 'hh24') as hora, se.departamento_key, se.secao_key
              from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                   ,item i, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
              where cd.cupom_devolvido_key = icd.cupom_devolvido_key
              and ca.data = cd.data
              and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
              and icd.barra_key = i.barra_key
              and i.produto_key = p.produto_key
              and p.controle_estoque is null
              and p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
              and sgp.grupo_produto_key = gp.grupo_produto_key
              and gp.secao_key = se.secao_key
              and se.secao_key = se.secao_key
              union all
              select distinct cd.numero_cupom, cd.loja_key, ca.calendario_key, cd.numero_ecf, to_char(cd.hora_lancamento, 'hh24') as hora, se.departamento_key, se.secao_key
              from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
                   ,item i, produto ce, produto p, sub_grupo_produto sgp, grupo_produto gp, secao se
              where cd.cupom_devolvido_key = icd.cupom_devolvido_key
              and ca.data = cd.data
              and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
              and icd.barra_key = i.barra_key
              and i.produto_key = p.produto_key
              and p.controle_estoque = ce.produto_key
              and ce.sub_grupo_produto_key = sgp.sub_grupo_produto_key
              and sgp.grupo_produto_key = gp.grupo_produto_key
              and gp.secao_key = se.secao_key
          )
          group by loja_key, calendario_key, hora, departamento_key, secao_key
        ) d
        where c.loja_key = d.loja_key
        and c.calendario_key = d.calendario_key
        and c.hora = d.hora
        and c.secao_key = d.secao_key
      ) y
      where x.loja_key = y.loja_key (+)
      and x.calendario_key = y.calendario_key (+)
      and x.hora = y.hora (+)
      and x.secao_key = y.secao_key (+)
  );
  commit;
  delete from resumo_tkt_medio_secao where calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate), 'yyyyMMdd');
  insert into RESUMO_TKT_MEDIO_SECAO
  ( loja_key, calendario_key, departamento_key, secao_key, quantidade_cupons, valor_vendido)
  ( select rtmhs.loja_key, rtmhs.calendario_key, rtmhs.departamento_key, rtmhs.secao_key
           ,sum(rtmhs.quantidade_cupons) as quantidade_cupons
           ,sum(rtmhs.valor_vendido) as valor_vendido
    from resumo_tkt_medio_hora_secao rtmhs
    where rtmhs.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
    group by rtmhs.loja_key, rtmhs.calendario_key, rtmhs.departamento_key, rtmhs.secao_key
  );
  commit;
  delete from resumo_tkt_medio_finalizadora where calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate), 'yyyyMMdd');
  insert into RESUMO_TKT_MEDIO_FINALIZADORA
  ( loja_key, calendario_key, finalizadora_key, quantidade_cupons, valor_vendido)
  ( select x.loja_key, x.calendario_key, x.recebimento_key
           ,x.quantidade_cupons - coalesce(y.quantidade_cupons,0) as quantidade_cupons
           ,x.valor_vendido - coalesce(y.valor_vendido,0) as valor_vendido
    from
    ( select a.loja_key, a.calendario_key, a.recebimento_key, b.quantidade_cupons, a.valor_vendido
      from
      ( select cf.loja_key, cf.calendario_key, cr.recebimento_key, sum(cr.valor_recebido - cr.troco_fornecido) as valor_vendido
        from cupom_fiscal cf, calendario ca, cupom_recebimento cr
        where cf.cupom_fiscal_key = cr.cupom_fiscal_key
        and cf.calendario_key = ca.calendario_key
        and cr.calendario_key = ca.calendario_key
        and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
        group by cf.loja_key, cf.calendario_key, cr.recebimento_key
      ) a,
      ( select loja_key, calendario_key, recebimento_key, count(*) as quantidade_cupons
        from
        (
            select distinct cf.cupom_numero, cf.loja_key, cf.calendario_key, cf.ecf, cr.recebimento_key
            from cupom_fiscal cf, calendario ca, cupom_recebimento cr
            where cf.cupom_fiscal_key = cr.cupom_fiscal_key
            and cf.calendario_key = ca.calendario_key
            and cr.calendario_key = ca.calendario_key
            and cf.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
        )
        group by loja_key, calendario_key, recebimento_key
      ) b
      where a.loja_key = b.loja_key
      and a.calendario_key = b.calendario_key
      and a.recebimento_key = b.recebimento_key
    ) x,
    ( select c.loja_key, c.calendario_key, c.recebimento_key, d.quantidade_cupons, c.valor_vendido
      from
      ( select cd.loja_key, ca.calendario_key, 84 as recebimento_key, sum(icd.valor_devolvido) as valor_vendido
        from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
        where cd.cupom_devolvido_key = icd.cupom_devolvido_key
        and ca.data = cd.data
        and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
        group by cd.loja_key, ca.calendario_key
      ) c,
      ( select loja_key, calendario_key, recebimento_key, count(*) as quantidade_cupons
        from
        (
            select distinct cd.numero_cupom, cd.loja_key, ca.calendario_key, cd.numero_ecf, 84 as recebimento_key
            from item_cupom_devolvido icd, calendario ca, cupom_devolvido cd
            where cd.cupom_devolvido_key = icd.cupom_devolvido_key
            and ca.data = cd.data
            and ca.calendario_key between to_char(trunc(sysdate)-15, 'yyyyMMdd') and to_char(trunc(sysdate),'yyyyMMdd')
        )
        group by loja_key, calendario_key, recebimento_key
      ) d
      where c.loja_key = d.loja_key
      and c.calendario_key = d.calendario_key
      and c.recebimento_key = d.recebimento_key
    ) y
    where x.loja_key = y.loja_key (+)
    and x.calendario_key = y.calendario_key (+)
    and x.recebimento_key = y.recebimento_key (+)
  );
  commit;
end relatorio_ticket_medio;
/

create or replace procedure relatorio_geral as
 begin
   DELETE FROM RESUMO_GERAL where DATA_MOVIMENTO between trunc(trunc(sysdate)-7,'month') and last_day(trunc(sysdate)-1);
   insert into resumo_geral
   ( data_movimento, loja_key, setor_compra_key, venda, custo, quebra, custo_si, icms_venda, compras, bonificacoes,
     num_pedido_compra, num_pedido_bonificado, pedido_compra, pedido_bonificado, pis_venda, cofins_venda,
     departamento_key, secao_key, calendario_key, pis_compra, cofins_compra, icms_compra,
     vendas_quant, compras_quant, bonificacoes_quant
   )
   ( SELECT M.DATA_MOVIMENTO, M.LOJA_KEY, M.SETOR_COMPRA_KEY, A.VENDA
           ,A.CUSTO, A.QUEBRA, A.CUSTO_SI, A.ICMS_VENDA
           ,B.COMPRAS, B.BONIFICACOES
           ,C.NUM_PEDIDO_COMPRA, C.NUM_PEDIDO_BONIFICADO, C.PEDIDO_COMPRA, C.PEDIDO_BONIFICADO
           ,COALESCE(A.PIS_VENDA,0) AS PIS_VENDA
           ,COALESCE(A.COFINS_VENDA,0) AS COFINS_VENDA
           ,M.DEPARTAMENTO_KEY, M.SECAO_KEY, M.CALENDARIO_KEY
           ,COALESCE(B.PIS_COMPRA,0) AS PIS_COMPRA
           ,COALESCE(B.COFINS_COMPRA,0) AS COFINS_COMPRA
           ,COALESCE(B.ICMS_COMPRA, 0)  AS ICMS_COMPRA
           ,A.VENDA_QUANT
           ,B.COMPRAS_QUANT, B.BONIFICACOES_QUANT
     FROM
     ( SELECT ME.DATA_MOVIMENTO,ME.LOJA_KEY,P.SETOR_COMPRA_KEY
              ,SE.SECAO_KEY, SE.DEPARTAMENTO_KEY
              ,CA.CALENDARIO_KEY
       FROM MOVIMENTO_ESTOQUE ME,TIPO_MOVIMENTO TM,PRODUTO P
            ,SUB_GRUPO_PRODUTO SGP, GRUPO_PRODUTO GP, SECAO SE, CALENDARIO CA
       WHERE ME.TIPO_MOVIMENTO_KEY = TM.TIPO_MOVIMENTO_KEY
       AND   ME.DATA_MOVIMENTO BETWEEN TRUNC(TRUNC(SYSDATE)-7, 'month') AND LAST_DAY(TRUNC(SYSDATE)-1)
       AND   P.PRODUTO_KEY = ME.PRODUTO_KEY
       AND   ME.LOJA_KEY < 900
       AND   P.SUB_GRUPO_PRODUTO_KEY = SGP.SUB_GRUPO_PRODUTO_KEY
       AND   SGP.GRUPO_PRODUTO_KEY = GP.GRUPO_PRODUTO_KEY
       AND   GP.SECAO_KEY = SE.SECAO_KEY
       AND   ME.DATA_MOVIMENTO = CA.DATA
       GROUP BY ME.DATA_MOVIMENTO,CA.CALENDARIO_KEY,ME.LOJA_KEY,P.SETOR_COMPRA_KEY,SE.SECAO_KEY,SE.DEPARTAMENTO_KEY
     ) M,
     ( SELECT ME.DATA_MOVIMENTO,ME.LOJA_KEY,P.SETOR_COMPRA_KEY
              ,-SUM(ME.VALOR* TM.SINAL_ESTOQUE) VENDA
              ,-SUM(ME.QUANTIDADE* TM.SINAL_ESTOQUE) VENDA_QUANT
              ,-SUM(ME.CUSTO_ESTOQUE_COM_ICM*ME.QUANTIDADE * TM.SINAL_ESTOQUE) CUSTO
              ,-SUM(ME.VALOR* TM.SINAL_ESTOQUE * (NVL(M.QUEBRA,0)/100)) QUEBRA
              ,-SUM(ME.CUSTO_ESTOQUE*ME.QUANTIDADE * TM.SINAL_ESTOQUE) CUSTO_SI
              ,-SUM(ME.ICMS_VENDA* TM.SINAL_ESTOQUE) ICMS_VENDA
              ,-SUM(ME.PIS_VALOR * TM.SINAL_ESTOQUE) PIS_VENDA
              ,-SUM(ME.COFINS_VALOR * TM.SINAL_ESTOQUE) COFINS_VENDA
              ,SE.SECAO_KEY, SE.DEPARTAMENTO_KEY
              ,CA.CALENDARIO_KEY
       FROM MOVIMENTO_ESTOQUE ME,TIPO_MOVIMENTO TM,PRODUTO P,MARGEM M
            ,SUB_GRUPO_PRODUTO SGP, GRUPO_PRODUTO GP, SECAO SE, CALENDARIO CA
       WHERE ME.TIPO_MOVIMENTO_KEY = TM.TIPO_MOVIMENTO_KEY
       AND   ME.DATA_MOVIMENTO BETWEEN TRUNC(TRUNC(SYSDATE)-7, 'month') AND LAST_DAY(TRUNC(SYSDATE)-1)
       AND   TM.MOVIMENTO = 'V'
       AND   P.PRODUTO_KEY = ME.PRODUTO_KEY
       AND   M.MARGEM_KEY(+) = P.MARGEM_KEY
       AND   P.SOMAR_VENDA = 1 AND ME.LOJA_KEY < 900
       AND   P.SUB_GRUPO_PRODUTO_KEY = SGP.SUB_GRUPO_PRODUTO_KEY
       AND   SGP.GRUPO_PRODUTO_KEY = GP.GRUPO_PRODUTO_KEY
       AND   GP.SECAO_KEY = SE.SECAO_KEY
       AND   ME.DATA_MOVIMENTO = CA.DATA
       GROUP BY ME.DATA_MOVIMENTO,CA.CALENDARIO_KEY,ME.LOJA_KEY,P.SETOR_COMPRA_KEY,SE.SECAO_KEY,SE.DEPARTAMENTO_KEY
     ) A,
     ( SELECT DATA_MOVIMENTO, LOJA_KEY, SETOR_COMPRA_KEY, SECAO_KEY, DEPARTAMENTO_KEY
              ,SUM(COMPRAS) COMPRAS, SUM(BONIFICACOES) BONIFICACOES
              ,SUM(COMPRAS_QUANT) COMPRAS_QUANT, SUM(BONIFICACOES_QUANT) BONIFICACOES_QUANT
              ,SUM(PIS_COMPRA) AS PIS_COMPRA
              ,SUM(COFINS_COMPRA) AS COFINS_COMPRA
              ,SUM(ICMS_COMPRA) AS ICMS_COMPRA
       FROM
       (
        SELECT DATA_MOVIMENTO,LOJA_KEY,SETOR_COMPRA_KEY, SECAO_KEY, DEPARTAMENTO_KEY,
                CASE WHEN RESUMO_MOVIMENTO_ESTOQUE in ('C', 'D') THEN VALOR ELSE 0 END COMPRAS,
                CASE WHEN RESUMO_MOVIMENTO_ESTOQUE = 'CB' THEN VALOR ELSE 0 END BONIFICACOES,
                CASE WHEN RESUMO_MOVIMENTO_ESTOQUE in ('C', 'D') OR RESUMO_MOVIMENTO_ESTOQUE = 'FE' THEN QUANTIDADE ELSE 0 END AS COMPRAS_QUANT,
                CASE WHEN RESUMO_MOVIMENTO_ESTOQUE = 'CB' THEN QUANTIDADE ELSE 0 END AS BONIFICACOES_QUANT,
                PIS_COMPRA, COFINS_COMPRA, ICMS_COMPRA
         FROM
         ( SELECT ME.DATA_MOVIMENTO,ME.LOJA_KEY,PROD.SETOR_COMPRA_KEY,TM.RESUMO_MOVIMENTO_ESTOQUE,SE.SECAO_KEY,SE.DEPARTAMENTO_KEY
                  ,CASE WHEN ME.TIPO_MOVIMENTO_KEY <> 999 THEN SUM(ME.VALOR * TM.SINAL_ESTOQUE) ELSE SUM(ME.VALOR) END AS VALOR
                  ,CASE WHEN ME.TIPO_MOVIMENTO_KEY <> 999 THEN SUM(ME.QUANTIDADE * TM.SINAL_ESTOQUE) ELSE SUM(ME.QUANTIDADE) END AS QUANTIDADE
                  ,-SUM(ME.PIS_VALOR * TM.SINAL_ESTOQUE) PIS_COMPRA
                  ,-SUM(ME.COFINS_VALOR * TM.SINAL_ESTOQUE) COFINS_COMPRA
                  ,-SUM(ME.ICMS_VENDA* TM.SINAL_ESTOQUE) ICMS_COMPRA
           FROM MOVIMENTO_ESTOQUE ME,TIPO_MOVIMENTO TM,MOVIMENTO_COMPRA MC,PRODUTO PROD, NOTA_FISCAL NF
                ,SUB_GRUPO_PRODUTO SGP, GRUPO_PRODUTO GP, SECAO SE
           WHERE ME.TIPO_MOVIMENTO_KEY = TM.TIPO_MOVIMENTO_KEY
           AND MC.MOVIMENTO_ESTOQUE_KEY (+) = ME.MOVIMENTO_ESTOQUE_KEY
           AND ME.DATA_MOVIMENTO BETWEEN TRUNC(TRUNC(SYSDATE)-7, 'month') AND LAST_DAY(TRUNC(SYSDATE)-1)
           AND MC.NF_KEY = NF.NF_KEY (+)
           AND TM.RESUMO_MOVIMENTO_ESTOQUE IN ('C', 'D','CB','FE')
           AND PROD.PRODUTO_KEY = ME.PRODUTO_KEY AND ME.LOJA_KEY < 900
           AND   PROD.SUB_GRUPO_PRODUTO_KEY = SGP.SUB_GRUPO_PRODUTO_KEY
           AND   SGP.GRUPO_PRODUTO_KEY = GP.GRUPO_PRODUTO_KEY
           AND   GP.SECAO_KEY = SE.SECAO_KEY
           GROUP BY ME.DATA_MOVIMENTO,PROD.SETOR_COMPRA_KEY,ME.LOJA_KEY,TM.RESUMO_MOVIMENTO_ESTOQUE
                    ,ME.TIPO_MOVIMENTO_KEY ,SE.SECAO_KEY,SE.DEPARTAMENTO_KEY
         )
       )
       GROUP BY DATA_MOVIMENTO,LOJA_KEY,SETOR_COMPRA_KEY, SECAO_KEY, DEPARTAMENTO_KEY
     ) B,
     ( SELECT DATA_EMISSAO DATA_MOVIMENTO,LOJA_KEY,SETOR_COMPRA_KEY, SECAO_KEY, DEPARTAMENTO_KEY
              ,SUM(NUM_PEDIDO_COMPRA) NUM_PEDIDO_COMPRA,SUM(NUM_PEDIDO_BONIFICADO) NUM_PEDIDO_BONIFICADO
              ,SUM(PEDIDO_COMPRA) PEDIDO_COMPRA,SUM(PEDIDO_BONIFICADO) PEDIDO_BONIFICADO
       FROM
       ( SELECT DATA_EMISSAO,LOJA_KEY,SETOR_COMPRA_KEY,
                CASE FLAG_COMPRA WHEN '1' THEN NUM_PEDIDOS ELSE 0 END AS NUM_PEDIDO_COMPRA,
                CASE FLAG_COMPRA WHEN '1' THEN PEDIDO_VALOR ELSE 0 END AS PEDIDO_COMPRA,
                CASE FLAG_COMPRA WHEN '0' THEN NUM_PEDIDOS ELSE 0 END AS NUM_PEDIDO_BONIFICADO,
                CASE FLAG_COMPRA WHEN '0' THEN PEDIDO_VALOR ELSE 0 END AS PEDIDO_BONIFICADO
                ,SECAO_KEY, DEPARTAMENTO_KEY
         FROM
         ( SELECT PM.DATA_EMISSAO, P.LOJA_KEY, PROD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA, COUNT(P.PEDIDO_KEY) NUM_PEDIDOS
                  ,SUM(IP.QUANTIDADE * (  NI.VALOR_BRUTO - (NI.VALOR_BRUTO * NVL(NI.DESCONTO1,0) / 100)
                                                    - (NI.VALOR_BRUTO * NVL(NI.DESCONTO2,0) / 100)
                                                    - (NI.VALOR_BRUTO * NVL(NI.DESCONTO3,0) / 100)
                                                    + NVL(NI.IPI_VALOR,0) + NVL(NI.DESPESA_TRIBUTADA,0)
                                                    + NVL(NI.DESPESA_NAO_TRIBUTADA,0)
                                                    + NVL(NI.ICM_FONTE_VALOR,0)
                                                    + NVL(NI.FRETE_VALOR,0))) PEDIDO_VALOR
                  ,SE.SECAO_KEY,SE.DEPARTAMENTO_KEY
           FROM ITEM_PEDIDO IP, PEDIDO P, PEDIDO_MASTER PM, NEGOCIACAO_ITEM NI, PRODUTO PROD, TIPO_PEDIDO TP
                ,SUB_GRUPO_PRODUTO SGP, GRUPO_PRODUTO GP, SECAO SE
           WHERE PM.DATA_EMISSAO BETWEEN TRUNC(TRUNC(SYSDATE)-7, 'month') AND LAST_DAY(TRUNC(SYSDATE)-1)
           AND PM.PEDIDO_KEY      = P.PEDIDO_KEY
           AND P.PELT_KEY         = IP.PELT_KEY
           AND IP.PRODUTO_KEY     = NI.PRODUTO_KEY
           AND NI.NEGOCIACAO_KEY  = PM.NEGOCIACAO_KEY
           AND PROD.PRODUTO_KEY   = IP.PRODUTO_VENDA_KEY
           AND TP.TIPO_PEDIDO_KEY = P.TIPO_PEDIDO_KEY
           AND IP.QUANTIDADE > 0 AND PM.STATUS_PEDIDO_KEY = 1
           AND P.LOJA_KEY < 900
           AND PROD.SUB_GRUPO_PRODUTO_KEY = SGP.SUB_GRUPO_PRODUTO_KEY
           AND SGP.GRUPO_PRODUTO_KEY = GP.GRUPO_PRODUTO_KEY
           AND GP.SECAO_KEY = SE.SECAO_KEY
           GROUP BY PM.DATA_EMISSAO, P.LOJA_KEY, PROD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA, SE.SECAO_KEY, SE.DEPARTAMENTO_KEY
         )
       )
       GROUP BY DATA_EMISSAO, LOJA_KEY, SETOR_COMPRA_KEY, SECAO_KEY, DEPARTAMENTO_KEY
     ) C
     WHERE M.DATA_MOVIMENTO = A.DATA_MOVIMENTO(+)
     AND M.LOJA_KEY = A.LOJA_KEY(+)
     AND M.SETOR_COMPRA_KEY = A.SETOR_COMPRA_KEY(+)
     AND M.SECAO_KEY = A.SECAO_KEY (+)
     AND M.DEPARTAMENTO_KEY = A.DEPARTAMENTO_KEY(+)
     AND M.DATA_MOVIMENTO = B.DATA_MOVIMENTO(+)
     AND M.LOJA_KEY = B.LOJA_KEY(+)
     AND M.SETOR_COMPRA_KEY = B.SETOR_COMPRA_KEY(+)
     AND M.SECAO_KEY = B.SECAO_KEY (+)
     AND M.DEPARTAMENTO_KEY = B.DEPARTAMENTO_KEY(+)
     AND M.DATA_MOVIMENTO = C.DATA_MOVIMENTO(+)
     AND M.LOJA_KEY = C.LOJA_KEY(+)
     AND M.SECAO_KEY = C.SECAO_KEY (+)
     AND M.DEPARTAMENTO_KEY = C.DEPARTAMENTO_KEY(+)
     AND M.SETOR_COMPRA_KEY = C.SETOR_COMPRA_KEY(+)
   );
end relatorio_geral;
/

create or replace procedure relatorio_presenca_cupom(dias number) as
    data_inicial number;
    data_final number;
  begin
    select calendario_key into data_inicial from calendario where data = trunc(sysdate) - dias;
    select calendario_key into data_final from calendario where data = trunc(sysdate);
    delete from resumo_presenca_cupom where calendario_key >= data_inicial;
    insert into resumo_presenca_cupom (calendario_key, loja_key, secao_key, valor_venda,
                valor_venda_perc, qtd_venda, qtd_venda_perc, mix, mix_perc)
    select a.calendario_key, a.loja_key, a.secao_key,
           a.valor, round(a.valor / b.valor * 100, 2) valor_perc,
           a.quantidade, round(a.quantidade / b.quantidade * 100, 2) quantidade_perc,
           a.mix, a.mix / b.mix * 100 mix_perc
    from (
      select /* parallel(cf) */ci.calendario_key, cf.loja_key, gp.secao_key, sum(ci.valor) valor,
             sum(ci.quantidade) quantidade, count(distinct p.produto_key) mix
      from   cupom_fiscal cf
             join cupom_item ci on cf.cupom_fiscal_key = ci.cupom_fiscal_key
             join item i on ci.barra_key = i.barra_key
             join produto p on p.produto_key = i.produto_key
             join sub_grupo_produto sgp on p.sub_grupo_produto_key = sgp.sub_grupo_produto_key
             join grupo_produto gp on sgp.grupo_produto_key = gp.grupo_produto_key
      where  cf.calendario_key between data_inicial and data_final
        and  ci.calendario_key = cf.calendario_key
      group by ci.calendario_key, cf.loja_key, gp.secao_key) a, (
      select /* parallel(cf) */ ci.calendario_key, cf.loja_key, sum(ci.valor) valor,
             sum(ci.quantidade) quantidade, count(distinct p.produto_key) mix
      from   cupom_fiscal cf
             join cupom_item ci on cf.cupom_fiscal_key = ci.cupom_fiscal_key
             join item i on ci.barra_key = i.barra_key
             join produto p on p.produto_key = i.produto_key
      where  cf.calendario_key between data_inicial and data_final
        and  ci.calendario_key = cf.calendario_key
      group by ci.calendario_key, cf.loja_key) b
    where  a.loja_key = b.loja_key
      and  a.calendario_key = b.calendario_key
    order  by a.calendario_key, a.loja_key, a.secao_key;
end relatorio_presenca_cupom;
/

create or replace procedure relatorio_compra_90dias as
    calendarioKey number;
    hoje number;
    data_min date;
    movimento_atual number;
    nome_key string(40);
begin
    nome_key := 'relatorio.compra_90dias';
    data_min := relatorio.mov_estoque_ultima_data(nome_key, trunc(sysdate) - 91);
    calendarioKey := to_number(to_char(data_min, 'yyyymmdd'));
    hoje := to_number(to_char(sysdate - 1, 'yyyymmdd'));
    delete from compra_90dias where data_movimento >= data_min;
    insert into compra_90dias
    select data, produto_key, loja_key, sum(compra_qtd + bonificada_qtd) quantidade,
           sum(compra_valor + bonificada_valor) valor, 
           avg(compra_custo_si + bonificada_custo_si) custo_estoque_sem_icm,
           avg(compra_custo_ci + bonificada_custo_ci) custo_estoque_com_icm,
           max(fornecedor_key) fornecedor_key,
           max(divisao_key) divisao_key
    from   resumo_movimento_estoque rme 
           join calendario c on rme.calendario_key = c.calendario_key
    where  rme.calendario_key between calendarioKey and hoje
    group  by data, produto_key, loja_key;
    delete from compra_90dias where data_movimento < trunc(sysdate) - 91;
    movimento_atual := relatorio.mov_estoque_atualiza(nome_key);
end relatorio_compra_90dias;
/

create or replace procedure relatorio_data_validade as
   cursor c1 is
     select pv.*, fe.quantidade saldo
     from   produto_validade pv
            join ficha_estoque fe on (pv.produto_key = fe.produto_key and pv.loja_key = fe.loja_key)
     order  by pv.produto_key, pv.loja_key, data_entrada desc;
   r1 c1%rowtype;
   saldo number;
   qtd number;
   prod_ant number;
   loja_ant number;
 begin
   execute immediate 'truncate table relatorio_validade';
   prod_ant := 0;
   for r1 in c1 loop
     if prod_ant <> r1.produto_key or loja_ant <> r1.loja_key then
       saldo := 0;
       prod_ant := r1.produto_key;
       loja_ant := r1.loja_key;
     end if;
     if saldo < r1.saldo then
       if saldo + r1.quantidade > r1.saldo then
         qtd := r1.saldo - saldo;
       else
         qtd := r1.quantidade;
       end if;
       saldo := saldo + r1.quantidade;
       insert into relatorio_validade (loja_key, produto_key, quantidade, data_entrada, data_validade, numero_do_lote)
         values (r1.loja_key, r1.produto_key, qtd, r1.data_entrada, r1.data_validade, r1.numero_do_lote);
     end if;
  end loop;
end relatorio_data_validade;
/

create or replace procedure relatorio_movimento_estoque as
    movimento_atual number;
    dia date;
    calendarioKey number;
    dia_key number;
    nome_key string(40);
    type tdia is table of date;
    dias tdia;
begin
    nome_key := 'relatorio.movimento_estoque';
    movimento_atual := relatorio.mov_estoque_ultimo_key(nome_key);
    if movimento_atual = 0 then
        execute immediate 'select data from calendario where data > trunc(sysdate - 60)' bulk collect into dias;
    else
        execute immediate 'select distinct data_movimento from movimento_estoque where movimento_estoque_key >= :movimento_atual order by data_movimento' bulk collect into dias using movimento_atual ;
    end if;
    dia_key := dias.first;
    while dia_key is not null loop
        dia := dias(dia_key);
        calendarioKey := to_number(to_char(dia, 'yyyymmdd'));        
        delete from resumo_movimento_estoque where calendario_key = calendarioKey;
        insert into resumo_movimento_estoque
        ( calendario_key, produto_key, produto_origem_key, loja_key, fornecedor_key, divisao_key, setor_compra_key,
          departamento_key, secao_key, grupo_produto_key, sub_grupo_produto_key,
          compra_qtd    , compra_valor    , compra_custo_si    , compra_custo_ci    , compra_pis    , compra_cofins    , compra_icms,
          bonificada_qtd , bonificada_valor, bonificada_custo_si, bonificada_custo_ci, bonificada_pis, bonificada_cofins, bonificada_icms,
          troca_ent_qtd , troca_ent_valor , troca_ent_custo_si , troca_ent_custo_ci , troca_ent_pis , troca_ent_cofins , troca_ent_icms,
          troca_sai_qtd , troca_sai_valor , troca_sai_custo_si , troca_sai_custo_ci , troca_sai_pis , troca_sai_cofins , troca_sai_icms,
          transf_ent_qtd, transf_ent_valor, transf_ent_custo_si, transf_ent_custo_ci, transf_ent_pis, transf_ent_cofins, transf_ent_icms,
          transf_sai_qtd, transf_sai_valor, transf_sai_custo_si, transf_sai_custo_ci, transf_sai_pis, transf_sai_cofins, transf_sai_icms,
          ajuste_qtd    , ajuste_valor    , ajuste_custo_si    , ajuste_custo_ci    , ajuste_pis    , ajuste_cofins    , ajuste_icms,
          quebra_qtd    , quebra_valor    , quebra_custo_si    , quebra_custo_ci    , quebra_pis    , quebra_cofins    , quebra_icms,
          venda_qtd     , venda_valor     , venda_custo_si     , venda_custo_ci     , venda_pis     , venda_cofins     , venda_icms,
          oferta
        )
        select cal.calendario_key, p.produto_key, mov.produto_origem, mov.loja_key, mov.fornecedor_key, mov.divisao_key,
               mov.setor_compra_key, s.departamento_key, s.secao_key, sgp.grupo_produto_key, sgp.sub_grupo_produto_key,
               sum(case when resumo_movimento_estoque  in ('C' ,'D') then quantidade else 0 end) compra_quantidade,
               sum(case when resumo_movimento_estoque  in ('C' ,'D') then valor else 0 end) compra_valor,
               sum(case when resumo_movimento_estoque  in ('C' ,'D') then custo_estoque else 0 end) compra_custo,
               sum(case when resumo_movimento_estoque  in ('C' ,'D') then custo_estoque_ci else 0 end) compra_custo_ci,
               sum(case when resumo_movimento_estoque  in ('C' ,'D') then pis_valor else 0 end) compra_pis,
               sum(case when resumo_movimento_estoque  in ('C' ,'D') then cofins_valor else 0 end) compra_cofins,
               sum(case when resumo_movimento_estoque  in ('C' ,'D') then icms_valor else 0 end) compra_icms,
               sum(case resumo_movimento_estoque when 'CB' then quantidade else 0 end) bonif_quantidade,
               sum(case resumo_movimento_estoque when 'CB' then valor else 0 end) bonif_valor,
               sum(case resumo_movimento_estoque when 'CB' then custo_estoque else 0 end) bonif_custo,
               sum(case resumo_movimento_estoque when 'CB' then custo_estoque_ci else 0 end) bonif_custo_ci,
               sum(case resumo_movimento_estoque when 'CB' then pis_valor else 0 end) bonif_pis,
               sum(case resumo_movimento_estoque when 'CB' then cofins_valor else 0 end) bonif_cofins,
               sum(case resumo_movimento_estoque when 'CB' then icms_valor else 0 end) bonif_icms,
               sum(case resumo_movimento_estoque when 'TE' then quantidade else 0 end) troca_ent_quantidade,
               sum(case resumo_movimento_estoque when 'TE' then valor else 0 end) troca_ent_valor,
               sum(case resumo_movimento_estoque when 'TE' then custo_estoque else 0 end) troca_ent_custo,
               sum(case resumo_movimento_estoque when 'TE' then custo_estoque_ci else 0 end) troca_ent_custo_ci,
               sum(case resumo_movimento_estoque when 'TE' then pis_valor else 0 end) troca_ent_pis,
               sum(case resumo_movimento_estoque when 'TE' then cofins_valor else 0 end) troca_ent_cofins,
               sum(case resumo_movimento_estoque when 'TE' then icms_valor else 0 end) troca_ent_icms,
               sum(case resumo_movimento_estoque when 'TS' then quantidade else 0 end) troca_sai_quantidade,
               sum(case resumo_movimento_estoque when 'TS' then valor else 0 end) troca_sai_valor,
               sum(case resumo_movimento_estoque when 'TS' then custo_estoque else 0 end) troca_sai_custo,
               sum(case resumo_movimento_estoque when 'TS' then custo_estoque_ci else 0 end) troca_sai_custo_ci,
               sum(case resumo_movimento_estoque when 'TS' then pis_valor else 0 end) troca_sai_pis,
               sum(case resumo_movimento_estoque when 'TS' then cofins_valor else 0 end) troca_sai_cofins,
               sum(case resumo_movimento_estoque when 'TS' then icms_valor else 0 end) troca_sai_icms,
               sum(case resumo_movimento_estoque when 'FE' then quantidade else 0 end) tranf_ent_quantidade,
               sum(case resumo_movimento_estoque when 'FE' then valor else 0 end) tranf_ent_valor,
               sum(case resumo_movimento_estoque when 'FE' then custo_estoque else 0 end) tranf_ent_custo,
               sum(case resumo_movimento_estoque when 'FE' then custo_estoque_ci else 0 end) tranf_ent_custo_ci,
               sum(case resumo_movimento_estoque when 'FE' then pis_valor else 0 end) tranf_ent_pis,
               sum(case resumo_movimento_estoque when 'FE' then cofins_valor else 0 end) tranf_ent_cofins,
               sum(case resumo_movimento_estoque when 'FE' then icms_valor else 0 end) tranf_ent_icms,
               sum(case resumo_movimento_estoque when 'FS' then quantidade else 0 end) tranf_sai_quantidade,
               sum(case resumo_movimento_estoque when 'FS' then valor else 0 end) tranf_sai_valor,
               sum(case resumo_movimento_estoque when 'FS' then custo_estoque else 0 end) tranf_sai_custo,
               sum(case resumo_movimento_estoque when 'FS' then custo_estoque_ci else 0 end) tranf_sai_custo_ci,
               sum(case resumo_movimento_estoque when 'FS' then pis_valor else 0 end) pis,
               sum(case resumo_movimento_estoque when 'FS' then cofins_valor else 0 end) tranf_sai_cofins,
               sum(case resumo_movimento_estoque when 'FS' then icms_valor else 0 end) tranf_sai_icms,
               sum(case resumo_movimento_estoque when 'A' then quantidade else 0 end) ajuste_quantidade,
               sum(case resumo_movimento_estoque when 'A' then valor else 0 end) ajuste_valor,
               sum(case resumo_movimento_estoque when 'A' then custo_estoque else 0 end) ajuste_custo,
               sum(case resumo_movimento_estoque when 'A' then custo_estoque_ci else 0 end) ajuste_custo_ci,
               sum(case resumo_movimento_estoque when 'A' then pis_valor else 0 end) ajuste_pis,
               sum(case resumo_movimento_estoque when 'A' then cofins_valor else 0 end) ajuste_cofins,
               sum(case resumo_movimento_estoque when 'A' then icms_valor else 0 end) ajuste_icms,
               sum(case resumo_movimento_estoque when 'Q' then quantidade else 0 end) quebra_quantidade,
               sum(case resumo_movimento_estoque when 'Q' then valor else 0 end) quebra_valor,
               sum(case resumo_movimento_estoque when 'Q' then custo_estoque else 0 end) quebra_custo,
               sum(case resumo_movimento_estoque when 'Q' then custo_estoque_ci else 0 end) quebra_custo_ci,
               sum(case resumo_movimento_estoque when 'Q' then pis_valor else 0 end) quebra_pis,
               sum(case resumo_movimento_estoque when 'Q' then cofins_valor else 0 end) quebra_cofins,
               sum(case resumo_movimento_estoque when 'Q' then icms_valor else 0 end) quebra_icms,
               sum(case when resumo_movimento_estoque = 'V' and p.somar_venda = 1 then quantidade else 0 end) venda_quantidade,
               sum(case when resumo_movimento_estoque = 'V' and p.somar_venda = 1 then valor else 0 end) venda_valor,
               sum(case when resumo_movimento_estoque = 'V' and p.somar_venda = 1 then custo_estoque else 0 end) venda_custo,
               sum(case when resumo_movimento_estoque = 'V' and p.somar_venda = 1 then custo_estoque_ci else 0 end) venda_custo_ci,
               sum(case when resumo_movimento_estoque = 'V' and p.somar_venda = 1 then pis_valor else 0 end) venda_pis,
               sum(case when resumo_movimento_estoque = 'V' and p.somar_venda = 1 then cofins_valor else 0 end) venda_cofins,
               sum(case when resumo_movimento_estoque = 'V' and p.somar_venda = 1 then icms_valor else 0 end) venda_icms,
               max(mov.promocao) promocao
        from
        (
          select me.loja_key, me.produto_key, coalesce(me.produto_origem, me.produto_key) produto_origem, me.data_movimento,
                 coalesce(me.fornecedor_key, p.troca_fornecedor_key, 0) fornecedor_key,
                 coalesce(me.divisao_key, p.troca_divisao_key, 0) divisao_key, coalesce(me.setor_compra_key, p.setor_compra_key) setor_compra_key, sinal.resumo_movimento_estoque,
                 coalesce(sum(me.quantidade * sinal.sinal), 0) quantidade,
                 coalesce(sum(me.valor * sinal.sinal), 0) valor,
                 coalesce(sum(coalesce(me.icms_venda, me.valor * icm.aliquota * (100 - icm.reducao) / 10000) * sinal.sinal), 0) icms_valor,
                 coalesce(sum(me.quantidade * me.custo_estoque * sinal.sinal), 0) custo_estoque,
                 coalesce(sum(me.quantidade * me.custo_estoque_com_icm * sinal.sinal), 0) custo_estoque_ci,
                 coalesce(sum(me.pis_valor * sinal.sinal), 0) pis_valor,
                 coalesce(sum(me.cofins_valor * sinal.sinal), 0) cofins_valor,
                 max(coalesce(me.produto_promocao, 0)) promocao
          from   movimento_estoque me
          join
          (
            select tipo_movimento_key,
                   case resumo_movimento_estoque
                   when 'TS' then -sinal_troca
                   when 'TE' then sinal_troca
                   when 'V'  then -sinal_estoque
                   else sinal_estoque end sinal,
                   resumo_movimento_estoque
            from tipo_movimento
            where resumo_movimento_estoque is not null
          ) sinal on me.tipo_movimento_key = sinal.tipo_movimento_key
          join produto p on me.produto_key = p.produto_key
          left join icm on me.icm_key = icm.icm_key
          where me.data_movimento  =dia
          group by me.loja_key, me.produto_key, coalesce(me.produto_origem, me.produto_key), me.data_movimento,
                   coalesce(me.fornecedor_key, p.troca_fornecedor_key, 0), coalesce(me.divisao_key, p.troca_divisao_key, 0),
                   coalesce(me.setor_compra_key, p.setor_compra_key), sinal.resumo_movimento_estoque
        ) mov
        join produto p on mov.produto_key = p.produto_key
        join sub_grupo_produto sgp on sgp.sub_grupo_produto_key = p.sub_grupo_produto_key
        join grupo_produto gp on gp.grupo_produto_key = sgp.grupo_produto_key
        join secao s on s.secao_key = gp.secao_key
        join calendario cal on cal.data = mov.data_movimento
        group by cal.calendario_key, p.produto_key, mov.produto_origem, mov.loja_key, mov.fornecedor_key, mov.divisao_key,
                 mov.setor_compra_key, s.departamento_key, s.secao_key, sgp.grupo_produto_key, sgp.sub_grupo_produto_key;
        delete from keys;
        insert into keys(keyi1, keyi2, keyi3, keyi4)
        select calendario_key, loja_key, produto_origem_key,
            rank() over (partition by calendario_key, loja_key order by sum(venda_valor) desc) as venda_ranking
        from resumo_movimento_estoque
        where venda_valor > 0
            and calendario_key = calendarioKey
        group by calendario_key, loja_key, produto_origem_key;
        update resumo_movimento_estoque rme set venda_ranking =
        ( select keyi4
            from keys
            where keyi1 = rme.calendario_key
                and keyi2 = rme.loja_key
                and keyi3 = rme.produto_origem_key
        )
        where (calendario_key, loja_key, produto_origem_key) in
        (
            select keyi1, keyi2, keyi3
            from keys
        );
        dia_key := dias.next(dia_key);
    end loop;
    movimento_atual := relatorio.mov_estoque_atualiza(nome_key);
end;
/

create or replace procedure relatorio_apuracao_impostos(dia date) as
    calendarioKeyInicial number;
    calendarioKeyFinal number;
  begin
    calendarioKeyInicial := to_number(to_char(add_months(trunc(dia, 'month'), -1), 'yyyymmdd'));
    calendarioKeyFinal := to_number(to_char(last_day(dia), 'yyyymmdd'));
    delete from resumo_apuracao_impostos
    where  (ano, mes) in (select ano, mes from calendario where calendario_key between calendarioKeyInicial and calendarioKeyFinal);
    INSERT INTO resumo_apuracao_impostos (
        resumo_apuracao_impostos_key, ano, mes, departamento_key, secao_key, grupo_produto_key, sub_grupo_produto_key, setor_compra_key, loja_key, valor_contabil, pis_compra_valor, cofins_compra_valor, icms_compra_valor, sinal )
    SELECT SEQ_RESUMO_APURACAO_IMPOSTOS.nextval, t.*
    FROM (
   SELECT c.ano, c.mes, sc.departamento_key, sc.secao_key, gp.grupo_produto_key, sb.sub_grupo_produto_key, p.setor_compra_key, (case when ef.sinal > 0 then ef.destinatario_key else ef.remetente_key end) as loja_key , SUM ( efi.valor_contabil ) valor_contabil, SUM ( efi.valor_pis ) pis_valor, SUM ( efi.valor_cofins ) cofins_valor, SUM ( efi.valor_icms ) icms_valor, ef.sinal
      FROM escrita_fiscal_item efi
         LEFT JOIN escrita_fiscal ef ON ( ef.escrita_fiscal_key = efi.escrita_fiscal_key )
         LEFT JOIN calendario c ON ( c.data = ef.data_entrada_saida )
         LEFT JOIN produto p ON ( p.produto_key = efi.produto_key )
         LEFT JOIN sub_grupo_produto sb ON ( p.sub_grupo_produto_key = sb.sub_grupo_produto_key )
         LEFT JOIN grupo_produto gp ON ( sb.grupo_produto_key = gp.grupo_produto_key )
         LEFT JOIN secao sc ON ( gp.secao_key = sc.secao_key )
      WHERE c.calendario_key BETWEEN calendarioKeyInicial AND calendarioKeyFinal
      AND EF.data_cancelamento IS NULL
      AND EF.nf_key is not null
      GROUP BY c.ano, c.mes, sc.departamento_key, sc.secao_key, gp.grupo_produto_key, sb.sub_grupo_produto_key, p.setor_compra_key, (case when ef.sinal > 0 then ef.destinatario_key else ef.remetente_key end) , ef.sinal ) t;
end relatorio_apuracao_impostos;
/

create or replace procedure relatorio_nivel_servico as
 begin
   execute immediate 'truncate table resumo_nivel_servico';
   insert into resumo_nivel_servico
   select ll.loja_key, ll.produto_key, p.setor_compra_key setor, sum(fe.Quantidade)quantidade
   from linha_loja ll, ficha_estoque fe, produto p, rede_loja rl
   where ll.produto_key = fe.produto_key (+)
   and ll.loja_key = fe.loja_key (+)
   and ll.produto_key = p.produto_key (+)
   and ll.loja_key = rl.Loja_Key
   and rl.Rede_Key = 1
   and p.controle_estoque is null
   and p.venda = 1
   and p.status > 0
   group by ll.loja_key, ll.produto_key, p.descricao, p.setor_compra_key;
end relatorio_nivel_servico;
/

create or replace procedure relatorio_mov_estoque_60d as
    movimento_atual number;
    calendarioKey number;
    nome_key string(40);
    dia_key number;
    type tdia is table of date;
    dias tdia;
    dia date;
begin
    nome_key := 'relatorio.mov_estoque_60d';
    movimento_atual := relatorio.mov_estoque_ultimo_key(nome_key);
    if movimento_atual = 0 then
        execute immediate 'select data from calendario where data > trunc(sysdate - 60)' bulk collect into dias;
    else
        execute immediate 'select distinct data_movimento from movimento_estoque where movimento_estoque_key >= :movimento_atual order by data_movimento' bulk collect into dias using movimento_atual ;
    end if;
    delete from resumo_movimento_estoque_60d where calendario_key < to_number(to_char(sysdate - 60, 'yyyymmdd'));
    dia_key := dias.first;
    while dia_key is not null loop
        dia := dias(dia_key);
        calendarioKey := to_number(to_char(dia, 'yyyymmdd'));        
        delete from resumo_movimento_estoque_60d where calendario_key = calendarioKey;
        insert into resumo_movimento_estoque_60D
            ( calendario_key, produto_key, produto_origem_key, loja_key, fornecedor_key, divisao_key, setor_compra_key,
            departamento_key, secao_key, grupo_produto_key, sub_grupo_produto_key,
            compra_qtd    , compra_valor    , compra_custo_si    , compra_custo_ci    , compra_pis    , compra_cofins    , compra_icms,
            bonificada_qtd , bonificada_valor, bonificada_custo_si, bonificada_custo_ci, bonificada_pis, bonificada_cofins, bonificada_icms,
            troca_ent_qtd , troca_ent_valor , troca_ent_custo_si , troca_ent_custo_ci , troca_ent_pis , troca_ent_cofins , troca_ent_icms,
            troca_sai_qtd , troca_sai_valor , troca_sai_custo_si , troca_sai_custo_ci , troca_sai_pis , troca_sai_cofins , troca_sai_icms,
            transf_ent_qtd, transf_ent_valor, transf_ent_custo_si, transf_ent_custo_ci, transf_ent_pis, transf_ent_cofins, transf_ent_icms,
            transf_sai_qtd, transf_sai_valor, transf_sai_custo_si, transf_sai_custo_ci, transf_sai_pis, transf_sai_cofins, transf_sai_icms,
            ajuste_qtd    , ajuste_valor    , ajuste_custo_si    , ajuste_custo_ci    , ajuste_pis    , ajuste_cofins    , ajuste_icms,
            quebra_qtd    , quebra_valor    , quebra_custo_si    , quebra_custo_ci    , quebra_pis    , quebra_cofins    , quebra_icms,
            venda_qtd     , venda_valor     , venda_custo_si     , venda_custo_ci     , venda_pis     , venda_cofins     , venda_icms,
            oferta
            )
        select /*+ index_combine(rme) */ 
            rme.calendario_key, produto_key, produto_origem_key, loja_key, fornecedor_key, divisao_key, setor_compra_key,
            departamento_key, secao_key, grupo_produto_key, sub_grupo_produto_key,
            compra_qtd    , compra_valor    , compra_custo_si    , compra_custo_ci    , compra_pis    , compra_cofins    , compra_icms,
            bonificada_qtd , bonificada_valor, bonificada_custo_si, bonificada_custo_ci, bonificada_pis, bonificada_cofins, bonificada_icms,
            troca_ent_qtd , troca_ent_valor , troca_ent_custo_si , troca_ent_custo_ci , troca_ent_pis , troca_ent_cofins , troca_ent_icms,
            troca_sai_qtd , troca_sai_valor , troca_sai_custo_si , troca_sai_custo_ci , troca_sai_pis , troca_sai_cofins , troca_sai_icms,
            transf_ent_qtd, transf_ent_valor, transf_ent_custo_si, transf_ent_custo_ci, transf_ent_pis, transf_ent_cofins, transf_ent_icms,
            transf_sai_qtd, transf_sai_valor, transf_sai_custo_si, transf_sai_custo_ci, transf_sai_pis, transf_sai_cofins, transf_sai_icms,
            ajuste_qtd    , ajuste_valor    , ajuste_custo_si    , ajuste_custo_ci    , ajuste_pis    , ajuste_cofins    , ajuste_icms,
            quebra_qtd    , quebra_valor    , quebra_custo_si    , quebra_custo_ci    , quebra_pis    , quebra_cofins    , quebra_icms,
            venda_qtd     , venda_valor     , venda_custo_si     , venda_custo_ci     , venda_pis     , venda_cofins     , venda_icms,
            oferta
        from resumo_movimento_estoque rme
        where calendario_key = calendarioKey;
        dia_key := dias.next(dia_key);
    end loop;
    movimento_atual := relatorio.mov_estoque_atualiza(nome_key);
end relatorio_mov_estoque_60d;
/

create or replace procedure relatorio_estoque_mensal as
  begin
    delete from resumo_estoque_mensal
    where (ano, mes) in (
      select distinct ano, mes 
      from   calendario
      where  data >= trunc(add_months(sysdate, - 1)));
    insert into resumo_estoque_mensal(ano, mes, loja_key, produto_key, inicial_quantidade, inicial_valor_com_impostos,
           inicial_valor_sem_impostos, final_quantidade, final_valor_com_impostos, final_valor_sem_impostos)
    select b.ano, b.mes, a.loja_key, a.produto_key, inicial_quantidade, inicial_valor_com_impostos,
           inicial_valor_sem_impostos, final_quantidade, final_valor_com_impostos,
           final_valor_sem_impostos
    from (
      select c.ano, c.mes, ed.loja_key, ed.produto_key, ed.quantidade inicial_quantidade,
             ed.custo_unitario_com_icm inicial_valor_com_impostos, ed.custo_unitario inicial_valor_sem_impostos
      from   estoque_diario ed join calendario c on ed.data = c.data
      where  ed.data = (
        select min(data)
        from   estoque_diario
        where data between trunc(sysdate, 'month') - 1 and last_day(sysdate))) a, (
      select c.ano, c.mes, ed.loja_key, ed.produto_key, ed.quantidade final_quantidade,
             ed.custo_unitario_com_icm final_valor_com_impostos, ed.custo_unitario final_valor_sem_impostos
      from   estoque_diario ed join calendario c on ed.data = c.data
      where  ed.data = (
        select max(data)
        from estoque_diario
        where data between trunc(sysdate, 'month') - 1 and last_day(sysdate))) b
    where a.loja_key = b.loja_key
      and a.produto_key = b.produto_key;
    insert into resumo_estoque_mensal(ano, mes, loja_key, produto_key, inicial_quantidade, inicial_valor_com_impostos,
           inicial_valor_sem_impostos, final_quantidade, final_valor_com_impostos, final_valor_sem_impostos)
    select b.ano, b.mes, a.loja_key, a.produto_key, inicial_quantidade, inicial_valor_com_impostos,
           inicial_valor_sem_impostos, final_quantidade, final_valor_com_impostos,
           final_valor_sem_impostos
    from (
      select c.ano, c.mes, ed.loja_key, ed.produto_key, ed.quantidade inicial_quantidade,
             ed.custo_unitario_com_icm inicial_valor_com_impostos, ed.custo_unitario inicial_valor_sem_impostos
      from   estoque_diario ed join calendario c on ed.data = c.data
      where  ed.data = (
        select min(data)
        from  estoque_diario
        where data between trunc(add_months(sysdate, -1), 'month') - 1 and last_day(add_months(sysdate, -1)))) a, (
      select c.ano, c.mes, ed.loja_key, ed.produto_key, ed.quantidade final_quantidade,
             ed.custo_unitario_com_icm final_valor_com_impostos, ed.custo_unitario final_valor_sem_impostos
      from   estoque_diario ed join calendario c on ed.data = c.data
      where  ed.data = (
        select max(data)
        from estoque_diario
        where data between trunc(add_months(sysdate, -1), 'month') - 1 and last_day(add_months(sysdate, -1)))) b
    where a.loja_key = b.loja_key
      and a.produto_key = b.produto_key;
end relatorio_estoque_mensal;
/

create or replace procedure relatorio_vencimento_medio as
   cursor c1 is
   select me.produto_key, me.loja_key, me.quantidade,
          custo_embalagem_final / fator_estoque custo_ci,
          custo_embalagem_sem_icm_final / fator_estoque custo_si,
          mc.data_entrada, tp.bonificado, fe.quantidade saldo,
          nfp.data_vencimento as data_pagamento
   from   movimento_estoque me, movimento_compra mc, tipo_movimento tm,
          tipo_pedido tp, relatorio_movimento rm, ficha_estoque fe, nota_fiscal_pagamento nfp, nota_fiscal nf
   where  mc.movimento_estoque_key = me.movimento_estoque_key
     and  me.tipo_movimento_key = tm.tipo_movimento_key
     and  me.data_movimento > sysdate - 180
     and  tp.tipo_pedido_key (+)= mc.tipo_pedido_key
     and  tm.tipo_movimento_key = rm.tipo_movimento_key
     and  rm.tipo_relatorio_key = 1
     and  fe.produto_key = me.produto_key
     and  fe.loja_key = me.loja_key
     and  mc.nf_key = nf.nf_key
     and  mc.nf_key = nfp.nf_key (+)
     and  nfp.parcela = 1
     and  nf.data_cancelamento is null
   order  by me.loja_key asc, me.produto_key asc, me.data_movimento desc;
   l1 c1%rowtype;
   produtoOld number;
   lojaOld number;
   saldo number;
   qtd number;
   total number;
   dias number;
   tipoCompra char(1);
 begin
   execute immediate 'truncate table vencimento_medio_estoque';
   produtoOld := 0;
   lojaOld := 0;
   for l1 in c1 loop
     if l1.produto_key <> produtoOld or l1.loja_key <> lojaOld then
       saldo := l1.saldo;
       total := 0;
       produtoOld := l1.produto_key;
       lojaOld := l1.loja_key;
     end if;
     if saldo > total then
       if l1.bonificado = 0 then
         tipoCompra := 'C';
         dias := l1.data_pagamento - sysdate;
       elsif l1.bonificado = 1 then
         tipoCompra := 'B';
         dias := l1.data_entrada - sysdate;
       else
         tipoCompra := 'T';
         dias := l1.data_pagamento - sysdate;
       end if;
       if l1.quantidade > saldo - total then
         qtd := saldo - total;
       else
         qtd := l1.quantidade;
       end if;
       if dias is not null then
         insert into vencimento_medio_estoque (produto_key, loja_key, quantidade, dias_vencimento,
                                               tipo, custo_ci, custo_si, data_entrada)
         values (l1.produto_key, l1.loja_key, qtd, dias, tipoCompra,
                 l1.custo_ci, l1.custo_si, l1.data_entrada);
         total := total + qtd;
       end if;
     end if;
   end loop;
end relatorio_vencimento_medio;
/

create or replace procedure relatorio_cupom_item as
  data date;
  calendario_inicial number;
begin
  select to_char(add_months(trunc(sysdate, 'month'), -3), 'yyyymmdd') into calendario_inicial from dual;
  execute immediate 'truncate table cupom_item_90d';
  insert into cupom_item_90d
  select ci.cupom_item_key, ci.cupom_fiscal_key, cf.cupom_numero, cf.loja_key, ci.calendario_key,
         cf.ecf, ci.produto_key, ci.valor, ci.quantidade, ci.icm_key, ci.pis_key, ci.cofins_key, cf.cancelado, decode(ic.codigo_tributacao, 60, 5405, 5102) as cfop_key
  from cupom_fiscal cf
  join cupom_item ci on (cf.cupom_fiscal_key = ci.cupom_fiscal_key)
  join icm ic on (ic.icm_key = ci.icm_key)
  where ci.calendario_key >= calendario_inicial
    and ci.calendario_key = cf.calendario_key;
  commit;
  execute immediate 'truncate table resumo_cupom_consolidado';
  insert /*+ append */ into resumo_cupom_consolidado
  select loja_key, ano, mes, produto_key, pis_key, cofins_key, sum(valor_item), cfop_key
  from cupom_item_90d ci
  join calendario c on (ci.calendario_key = c.calendario_key)
  group by loja_key, ano, mes, produto_key, pis_key, cofins_key, cfop_key;
  commit;
end relatorio_cupom_item;
/

create or replace procedure relatorio_estoque_diario(dia_para_gerar date) as
   data_min date;
   table_teste number;
   dia date;
 begin
  dia := trunc(dia_para_gerar);
  data_min := add_months(dia, -18);  
  select count(*) into table_teste from user_indexes where index_name = 'EDIARIO_LOJA';
  if table_teste > 0 then
    execute immediate 'drop index EDIARIO_LOJA';
  end if;
  select count(*) into table_teste from user_indexes where index_name = 'EDIARIO_PRODUTO';
  if table_teste > 0 then
    execute immediate 'drop index EDIARIO_PRODUTO';
  end if;
  select count(*) into table_teste from user_indexes where lower(index_name) = 'idx_estoque_diario_det_loja';
  if table_teste > 0 then
    execute immediate 'drop index idx_estoque_diario_det_loja';
  end if;
  select count(*) into table_teste from user_indexes where lower(index_name) = 'idx_estoque_diario_det_prod';
  if table_teste > 0 then
    execute immediate 'drop index idx_estoque_diario_det_prod';
  end if;
  select count(*) into table_teste from user_indexes where lower(index_name) = 'idx_estoque_diario_det_terc';
  if table_teste > 0 then
    execute immediate 'drop index idx_estoque_diario_det_terc';
  end if;
  select count(*) into table_teste from user_indexes where lower(index_name) = 'idx_estoque_diario_det_indi';
  if table_teste > 0 then
    execute immediate 'drop index idx_estoque_diario_det_indi';
  end if; 
  delete from estoque_diario ed where ed.data < data_min or ed.data = dia;
  delete from estoque_diario_detalhe edd where edd.data < data_min  or edd.data = dia;  
  insert into estoque_diario(data, loja_key, produto_key, quantidade, custo_unitario, custo_unitario_com_icm)
  select dia , fe.loja_key, fe.produto_key, sum(fe.quantidade) quantidade,
         decode(sum(fe.quantidade), 0, 0, sum(fe.quantidade * fe.custo_unitario) / sum(fe.quantidade)) custo_unitario,
         decode(sum(fe.quantidade), 0, 0, sum(fe.quantidade * fe.custo_unitario_com_icm) / sum(fe.quantidade)) custo_unitario_com_icm
  from   ficha_estoque fe
  group  by fe.produto_key, fe.loja_key  
  having sum(fe.quantidade) > 0
  order by fe.produto_key, fe.loja_key;
  insert into estoque_diario_detalhe
  (data, loja_key, INDICADOR_DE_PROPRIEDADE_KEY, TERCEIRO_KEY, produto_key, quantidade, CUSTO_UNITARIO, CUSTO_UNITARIO_COM_IMPOSTO)
  select dia, fet.loja_key, fet.indicador_de_propriedade_key, fet.terceiro_key, fet.produto_key, fet.quantidade,
  coalesce(fe.CUSTO_UNITARIO,0), coalesce(fe.CUSTO_UNITARIO_COM_ICM,0)
  from   ficha_estoque_terceiros fet
  left join ficha_estoque fe on fe.produto_key = fet.produto_key and fe.loja_key = fet.loja_key
  where fet.quantidade > 0
  union
  select * from (
  select dia, fe.loja_key, 0 as INDICADOR_DE_PROPRIEDADE_KEY, null as terceiro_key,fe.produto_key, 
  (fe.quantidade - fe.quantidade_de_terceiros  - fe.quantidade_em_terceiros - fe.quantidade_futura) as quantidade_em_poder_da_loja,
  coalesce(fe.CUSTO_UNITARIO,0), coalesce(fe.CUSTO_UNITARIO_COM_ICM,0)
  from   ficha_estoque fe
  ) a where quantidade_em_poder_da_loja > 0
  order by loja_key, INDICADOR_DE_PROPRIEDADE_KEY, TERCEIRO_KEY, produto_key; 
  commit;
  execute immediate 'create bitmap index EDIARIO_LOJA on ESTOQUE_DIARIO (LOJA_KEY)';
  execute immediate 'create bitmap index EDIARIO_PRODUTO on ESTOQUE_DIARIO (PRODUTO_KEY)';
  execute immediate 'create bitmap index idx_estoque_diario_det_loja on estoque_diario_detalhe (LOJA_KEY)';
  execute immediate 'create bitmap index idx_estoque_diario_det_prod on estoque_diario_detalhe (PRODUTO_KEY)';
  execute immediate 'create bitmap index idx_estoque_diario_det_terc on estoque_diario_detalhe (TERCEIRO_KEY)';
  execute immediate 'create bitmap index idx_estoque_diario_det_indi on estoque_diario_detalhe (INDICADOR_DE_PROPRIEDADE_KEY)';
end relatorio_estoque_diario;
/

create or replace procedure relatorio_venda_lucro as
    calendarioKey number;
    data_min date;
    movimento_atual number;
    nome_key string(40);
begin
    nome_key := 'relatorio.venda_lucro';
    data_min := relatorio.mov_estoque_ultima_data(nome_key, add_months(trunc(sysdate, 'month'), -2));
    data_min := trunc(data_min, 'month');
    movimento_atual := relatorio.mov_estoque_atualiza(nome_key);
    calendarioKey := to_number(to_char(data_min, 'yyyymmdd'));
    delete from resumo_venda_lucro_mes where calendario_key >= calendarioKey;
    insert into resumo_venda_lucro_mes( produto_key, calendario_key, mes, ano, departamento_key, secao_key, grupo_produto_key, sub_grupo_produto_key,
                                         fornecedor_key, divisao_key, loja_key, rede_key, venda_qtd, venda_valor, entradas_qtd,entradas_valor, custo_total,
                                         custo_total_si, troca_qtd, troca_valor, venda_liquida)
    select rme.produto_key,
           to_char(trunc(min(c.data), 'month'),'yyyyMMdd') as calendario_key,
           c.mes, c.ano,
           rme.departamento_key, rme.secao_key, rme.grupo_produto_key, rme.sub_grupo_produto_key,
           max(rme.fornecedor_key) as fornecedor_key, max(rme.divisao_key) as divisao_key,
           rme.loja_key, min(l.rede_key) as rede_key,
           sum(rme.venda_qtd) as venda_qtd,
           sum(rme.venda_valor) as venda_valor,
           sum(rme.compra_qtd) + sum(rme.bonificada_qtd) + sum(rme.transf_ent_qtd) as entradas_qtd,
           sum(rme.compra_valor) + sum(rme.bonificada_valor) + sum(rme.transf_ent_valor) as entradas_valor,
           sum(rme.venda_custo_ci) as custo_total,
           sum(rme.venda_custo_si) as custo_total_si,
           sum(rme.troca_ent_qtd) as troca_qtd,
           sum(rme.troca_ent_valor) as troca_valor,
           sum(rme.venda_valor - rme.venda_pis - rme.venda_cofins - rme.venda_icms) as venda_liquida
    from resumo_movimento_estoque rme
         join loja l on l.pessoa_key = rme.loja_key
         join calendario c on c.calendario_key = rme.calendario_key
    where rme.calendario_key >= calendarioKey
    group by rme.produto_key, c.mes, c.ano, rme.loja_key,
             rme.departamento_key, rme.secao_key, rme.grupo_produto_key, rme.sub_grupo_produto_key;
end relatorio_venda_lucro;
/

create or replace procedure relatorio_me_mes(dia date) as
   inicio date;
 begin
   inicio := trunc(dia, 'month');
   delete from resumo_me
   where  mes = to_char(inicio, 'mm') and ano = to_char(inicio, 'yyyy');
   insert into resumo_me
   select to_char(inicio, 'mm'), to_char(inicio, 'yyyy') ,tm.movimento,loja_key,me.produto_key
         ,-sum(me.quantidade*tm.sinal_estoque) quantidade
         ,-sum(me.valor*tm.sinal_estoque) valor
         ,-sum(quantidade*custo_venda*tm.sinal_estoque) custo_venda
         ,-sum(icms_venda * tm.sinal_estoque) icms_venda
         ,-sum(me.custo_estoque*tm.sinal_estoque*quantidade) custo_estoque
         ,-sum(me.custo_estoque_com_icm*tm.sinal_estoque*quantidade) custo_estoque_com_icm
         ,-sum(me.pis_valor * tm.sinal_estoque) pis_valor
         ,-sum(me.cofins_valor * tm.sinal_estoque) cofins_valor
   from  movimento_estoque me,tipo_movimento tm, produto p, margem m
   where tm.tipo_movimento_key = me.tipo_movimento_key
     and me.data_movimento between inicio and last_day(inicio)
     and me.produto_key = p.produto_key
     and p.somar_venda = 1
     and p.margem_key = m.margem_key(+)
   group by loja_key, me.produto_key,tm.movimento ;
end relatorio_me_mes;
/

create or replace function "CALCULAVENCIMENTO" (Recebimento in date,Emissao in date,DataFixa in date,Dias in integer,Condicao in varchar2,Referencia in integer,Tipo in integer)
return date is
  Result date;
begin
   IF Tipo = 1 THEN
     IF (Condicao = 'AV' or Condicao = 'LD') THEN
       return Emissao;
     END IF;
     IF Condicao = 'DD' THEN
         IF Referencia = 1 THEN
           return Emissao + Dias ;
         ELSIF Referencia = 2 THEN
           return Recebimento  + Dias ;
         END IF;
     END IF;
     IF Condicao = 'FS' THEN
         IF Referencia = 1 THEN
           return NEXT_DAY(Emissao,'DOMINGO') + Dias ;
         ELSIF Referencia = 2 THEN
           return NEXT_DAY(Recebimento,'DOMINGO')   + Dias ;
         END IF;
     END IF;
     IF Condicao = 'FD' THEN
         IF Referencia = 1 THEN
            IF TO_NUMBER(TO_CHAR(Emissao,'DD')) > 20 THEN
              return LAST_DAY(Emissao) + Dias ;
            ELSIF TO_NUMBER(TO_CHAR(Emissao,'DD')) > 10 THEN
              return TRUNC(Emissao,'MONTH') +19  + Dias ;
            ELSE
              return TRUNC(Emissao,'MONTH') +09  + Dias ;
            END IF;
         ELSIF Referencia = 2 THEN
            IF TO_NUMBER(TO_CHAR(Recebimento,'DD')) > 20 THEN
              return LAST_DAY(Recebimento) + Dias ;
            ELSIF TO_NUMBER(TO_CHAR(Recebimento,'DD')) > 10 THEN
              return TRUNC(Recebimento,'MONTH') +19  + Dias ;
            ELSE
              return TRUNC(Recebimento,'MONTH') +09  + Dias ;
            END IF;
         END IF;
     END IF;
     IF Condicao = 'FQ' THEN
         IF Referencia = 1 THEN
            IF TO_NUMBER(TO_CHAR(Emissao,'DD')) > 15 THEN
              return LAST_DAY(Emissao) + Dias ;
            ELSE
              return TRUNC(Emissao,'MONTH')+14  + Dias ;
            END IF;
         ELSIF Referencia = 2 THEN
            IF TO_NUMBER(TO_CHAR(Recebimento,'DD')) > 15 THEN
              return LAST_DAY(Recebimento) + Dias ;
            ELSE
              return TRUNC(Recebimento,'MONTH')+14  + Dias ;
            END IF;
         END IF;
     END IF;
     IF Condicao = 'FM' THEN
         IF Referencia = 1 THEN
           return LAST_DAY(Emissao) + Dias ;
         ELSIF Referencia = 2 THEN
           return LAST_DAY(Recebimento)  + Dias ;
         END IF;
     END IF;
   ELSIF Tipo = 3 THEN
     return DataFixa ;
   ELSIF Tipo = 15 THEN
     return Emissao;
   ELSIF Tipo = 21 THEN
         IF Referencia = 1 THEN
           return Emissao + Dias ;
         ELSIF Referencia = 2 THEN
           return Recebimento  + Dias ;
         END IF;
   END IF;
  return(Result);
end "CALCULAVENCIMENTO";
/

create or replace procedure relatorio_ranking_ano as
 begin
   execute immediate 'truncate table ranking_ano';
   insert /*+ append */ into ranking_ano
   select key produto_key, perc_venda, sum(perc_venda) over ( order by venda desc rows unbounded preceding) as acumulado, 'C3' ranking
   from (
     select mg.key, ratio_to_report(venda) over () * 100 as perc_venda, venda
     from (
       select decode(p.caixa, 1, me.produto_key, me.produto_origem) key, -sum(me.valor * tm.sinal_estoque) venda
       from movimento_estoque me
            join tipo_movimento tm on tm.tipo_movimento_key = me.tipo_movimento_key
            join produto p on p.produto_key = me.produto_key
            join rede_loja rl on rl.loja_key = me.loja_key
       where me.data_movimento >= trunc(sysdate) - 30
         and tm.movimento = 'V'
         and p.somar_venda = 1
         and rl.rede_key = 1
       group by decode(p.caixa, 1, me.produto_key, me.produto_origem) )mg
     where venda > 0 ) t
   where key > 0;
   commit;
   UPDATE RANKING_ANO SET RANKING = 'A1' WHERE ACUMULADO <= 25 ;
   UPDATE RANKING_ANO SET RANKING = 'A2' WHERE ACUMULADO > 25 AND ACUMULADO <= 40 ;
   UPDATE RANKING_ANO SET RANKING = 'A3' WHERE ACUMULADO > 40 AND ACUMULADO <= 50 ;
   UPDATE RANKING_ANO SET RANKING = 'B1' WHERE ACUMULADO > 50 AND ACUMULADO <= 70 ;
   UPDATE RANKING_ANO SET RANKING = 'B2' WHERE ACUMULADO > 70 AND ACUMULADO <= 80 ;
   UPDATE RANKING_ANO SET RANKING = 'B3' WHERE ACUMULADO > 80 AND ACUMULADO <= 90 ;
   UPDATE RANKING_ANO SET RANKING = 'C1' WHERE ACUMULADO > 90 AND ACUMULADO <= 95 ;
   UPDATE RANKING_ANO SET RANKING = 'C2' WHERE ACUMULADO > 95 AND ACUMULADO <= 98 ;
   UPDATE RANKING_ANO SET RANKING = 'C3' WHERE ACUMULADO > 98 AND ACUMULADO <= 100 ;
   UPDATE PRODUTO P SET CURVA = ( SELECT RANKING FROM RANKING_ANO R WHERE P.PRODUTO_KEY = R.PRODUTO_KEY );
   update produto p set curva = (select p2.curva from produto p2 where p2.produto_key = p.controle_estoque)
   where p.caixa = 1;
   update produto p set curva = 'C3' WHERE CURVA IS NULL;
end relatorio_ranking_ano;
/

create or replace procedure relatorio_pedidos_pendentes as
 begin
  execute immediate 'truncate table resumo_pedidos_pendentes';
  insert into resumo_pedidos_pendentes( item_pedido_key, fornecedor_divisao_key, comprador_key, data_emissao,
                                        pelt_key, loja_key, produto_key, produto_venda_key,
                                        quantidade_caixas_pedidas, quantidade_caixas_entregues, quantidade_caixas_pendentes, custo_caixa,
                                        quantidade_unidades_pendentes, custo_unitario
                                      )
    SELECT ITEM_PEDIDO_KEY, FORNECEDOR_DIVISAO_KEY, COMPRADOR_KEY, DATA_EMISSAO,
         PELT_KEY, LOJA_KEY, PRODUTO_KEY, PRODUTO_VENDA_KEY,
         QUANTIDADE_CAIXAS_PEDIDAS, QUANTIDADE_CAIXAS_ENTREGUES, QUANTIDADE_CAIXAS_PENDENTES, CUSTO_CAIXA,
         QUANTIDADE_UNIDADES_PENDENTES, CUSTO_UNITARIO
  FROM
  (
    SELECT A.*, COALESCE(B.QUANTIDADE_CAIXAS_ENTREGUES,0) AS QUANTIDADE_CAIXAS_ENTREGUES,
           (A.QUANTIDADE_CAIXAS_PEDIDAS - COALESCE(B.QUANTIDADE_CAIXAS_ENTREGUES,0)) AS QUANTIDADE_CAIXAS_PENDENTES,
           (A.QUANTIDADE_CAIXAS_PEDIDAS - COALESCE(B.QUANTIDADE_CAIXAS_ENTREGUES,0)) * A.FATOR_ESTOQUE AS QUANTIDADE_UNIDADES_PENDENTES,
           ROUND(A.CUSTO_CAIXA / A.FATOR_ESTOQUE,3) AS CUSTO_UNITARIO
    FROM
    ( --parte A: todos os pedidos dentro da faixa de entrega
      SELECT IP.ITEM_PEDIDO_KEY,
             FD.FORNECEDOR_DIVISAO_KEY,
             PM.USUARIO_KEY AS COMPRADOR_KEY,
             PM.DATA_EMISSAO,
             P.PELT_KEY,
             P.LOJA_KEY,
             IP.PRODUTO_KEY,
             IP.PRODUTO_VENDA_KEY,
             IP.FATOR_ESTOQUE,
             IP.QUANTIDADE AS QUANTIDADE_CAIXAS_PEDIDAS,
             NI.VALOR_BRUTO - COALESCE(NI.DESCONTO_TOTAL,0) - COALESCE(NI.IPI_VALOR,0)
             + COALESCE(NI.DESPESA_TRIBUTADA,0) + COALESCE(NI.DESPESA_NAO_TRIBUTADA,0)
             + COALESCE(NI.ICM_FONTE_VALOR,0) + COALESCE(NI.FRETE_VALOR,0) AS CUSTO_CAIXA
      FROM ITEM_PEDIDO IP
           JOIN PEDIDO P ON P.PELT_KEY = IP.PELT_KEY
           JOIN PEDIDO_MASTER PM ON PM.PEDIDO_KEY = P.PEDIDO_KEY
           JOIN NEGOCIACAO N ON N.NEGOCIACAO_KEY = PM.NEGOCIACAO_KEY
           JOIN CONTRATO_FORNECIMENTO CF ON CF.CONTRATO_FORNECIMENTO_KEY = N.CONTRATO_FORNECIMENTO_KEY
           JOIN NEGOCIACAO_ITEM NI ON (NI.NEGOCIACAO_KEY = N.NEGOCIACAO_KEY AND NI.PRODUTO_KEY = IP.PRODUTO_KEY)
           JOIN FORNECEDOR_DIVISAO FD ON (FD.FORNECEDOR_KEY = CF.FORNECEDOR_KEY AND FD.DIVISAO_KEY = CF.DIVISAO_KEY)
      WHERE CF.RECEBE_SALDO_PEDIDO = 1
      AND   IP.QUANTIDADE          > 0
      AND   IP.PENDENCIA           = 1
      AND   P.DATA_ENTREGA_INICIAL <= TRUNC(SYSDATE)
      AND   P.DATA_ENTREGA_FINAL   >= TRUNC(SYSDATE)
      AND   PM.STATUS_PEDIDO_KEY = 1
    ) A,
    ( --parte B: movimentos recebidos
      SELECT P.PELT_KEY,
             PRODUTO_VENDA_KEY,
             SUM(MC.QUANTIDADE_ENTREGUE) AS QUANTIDADE_CAIXAS_ENTREGUES
      FROM MOVIMENTO_COMPRA MC
           JOIN TIPO_MOVIMENTO TM ON TM.TIPO_MOVIMENTO_KEY = MC.TIPO_MOVIMENTO_KEY
           JOIN PEDIDO P ON (P.PEDIDO_KEY = MC.PEDIDO_KEY AND P.LOJA_KEY = MC.LOJA_KEY AND P.TIPO_PEDIDO_KEY = MC.TIPO_PEDIDO_KEY AND P.ENTREGA = MC.ENTREGA)
           JOIN ITEM_PEDIDO IP ON (P.PELT_KEY = IP.PELT_KEY AND IP.PRODUTO_KEY = MC.PRODUTO_COMPRADO_KEY)
      WHERE MC.QUANTIDADE_ENTREGUE > 0
      AND TM.MOVIMENTO IN ('C', 'S', 'F')
      AND P.DATA_ENTREGA_INICIAL <= TRUNC(SYSDATE)
      AND P.DATA_ENTREGA_FINAL >= TRUNC(SYSDATE)
      AND IP.QUANTIDADE > 0
      GROUP BY P.PELT_KEY, PRODUTO_VENDA_KEY
    ) B
    WHERE A.PELT_KEY          = B.PELT_KEY (+)
    AND   A.PRODUTO_VENDA_KEY = B.PRODUTO_VENDA_KEY (+)
    AND   A.QUANTIDADE_CAIXAS_PEDIDAS > COALESCE(B.QUANTIDADE_CAIXAS_ENTREGUES,0)
  );
  update ficha_estoque set quantidade_pendente_em_pedidos = 0;
  update ficha_estoque fp set fp.quantidade_pendente_em_pedidos =
  ( select sum(quantidade_unidades_pendentes)
    from resumo_pedidos_pendentes
    where produto_venda_key = fp.produto_key
    and   loja_key = fp.loja_key
  )
  where (fp.produto_key,fp.loja_key) in
  ( select produto_venda_key, loja_key
    from resumo_pedidos_pendentes
    group by produto_venda_key, loja_key
  );
end relatorio_pedidos_pendentes;
/

create or replace procedure status_competencia_atual as
    begin
      update competencia set status = 1
      where competencia_key = (
            select co.competencia_key from competencia co
            inner join calendario ca on (co.ano_mes = ca.ano_mes)
            where ca.data = trunc(sysdate)
      );
end status_competencia_atual;
/

create or replace procedure relatorio_lancamento_loja(dia date) as
   data_min date;
   cmd varchar(1024);
   c integer;
 begin
  data_min := add_months(dia, -1);
  insert /*+ APPEND */ into lancamento_loja_log
  ( select *
    from lancamento_loja
    where lancamento_loja_key >
          ( select max(lancamento_loja_key)
            from lancamento_loja_log
          )
  );
  delete from bandeira_desconhecida
  where bandeira_desconhecida_key in (
  select b.bandeira_desconhecida_key
  from bandeira_desconhecida b
  inner join lancamento_loja l on (b.lancamento_loja_key = l.lancamento_loja_key)
  where l.data < data_min);
  delete /*+ index_combine(ll) */ from lancamento_loja ll
  where data < data_min;
end relatorio_lancamento_loja;
/

create or replace procedure relatorio_caixa_postal as
 begin
   delete from   arquivo
   where  (data < sysdate - 5 and  destinatario <> 999)
      or  (data < sysdate - 15 and destinatario = 999);
end relatorio_caixa_postal;
/

create or replace function "LOCAL_DATE" (dias in integer) return date is
begin
  return trunc(sysdate) + dias;
end "LOCAL_DATE";
/

create or replace procedure relatorio_venda_90dias as
    calendarioKey number;
    hoje number;
    data_min date;
    movimento_atual number;
    nome_key string(40);
begin
    nome_key := 'relatorio.venda_90dias';
    data_min := relatorio.mov_estoque_ultima_data(nome_key, trunc(sysdate) - 91);
    calendarioKey := to_number(to_char(data_min, 'yyyymmdd'));
    hoje := to_number(to_char(sysdate - 1, 'yyyymmdd'));
    delete from venda90dias where data_movimento >= data_min; 
    insert into venda90dias
    select data, produto_key, loja_key, sum(venda_qtd) quantidade,
           sum(venda_valor) valor, max(oferta) produto_prormocao
    from   resumo_movimento_estoque rme 
           join calendario c on rme.calendario_key = c.calendario_key
    where  rme.calendario_key between calendarioKey and hoje
    group  by data, produto_key, loja_key;
    delete from venda90dias where data_movimento < trunc(sysdate) - 91;
    movimento_atual := relatorio.mov_estoque_atualiza(nome_key);
end relatorio_venda_90dias;
/

create or replace procedure relatorio_me(dia date) as
    dia_mes integer;
  begin
    dia_mes := to_number(to_char(dia, 'dd'));
    if dia_mes <= 5 then
      relatorio_me_mes(add_months(dia, -1));
    end if;
    relatorio_me_mes(dia);
end relatorio_me;
/

create or replace procedure relatorio_mensagem_popup(dia date) as
   data_min date;
   cmd varchar(1024);
 begin
  data_min := add_months(dia, -1);
  delete from mensagem_popup
  where data_envio < data_min;
end relatorio_mensagem_popup;
/

create or replace function "LOCAL_TIME" (dias in integer) return date is
begin
  return sysdate + dias;
end "LOCAL_TIME";
/

create or replace procedure relatorio_pedido_venda_cliente as
  begin
    execute immediate 'truncate table resumo_pedido_venda_cliente';
    insert into resumo_pedido_venda_cliente
           (cliente_key, produto_key, quantidade_pedidos,
            quantidade_menor_pedido, quantidade_maior_pedido,
            quantidade_media_pedido, valor_menor_pedido, valor_maior_pedido,
            valor_medio_pedido)
    select coalesce(convenio_key, cliente_key) as cliente_key,
           produto_key,
           count(produto_key) as quantidade_pedidos,
           min(quantidade_pedida) as quantidade_menor_pedido,
           max(quantidade_pedida) as quantidade_maior_pedido,
           avg(quantidade_pedida) as quantidade_media_pedido,
           min(preco_venda_unitario) as valor_menor_pedido,
           max(preco_venda_unitario) as valor_maior_pedido,
           avg(preco_venda_unitario) as valor_medio_pedido
    from pedido_venda pv, pedido_venda_item pvi
    where pv.pedido_venda_key = pvi.pedido_venda_key
    and pv.pedido_venda_status_key = 6
    group by coalesce(convenio_key, cliente_key), produto_key;
    commit;
end relatorio_pedido_venda_cliente;
/

create or replace procedure relatorio_pedidos as
 begin
   delete from resumo_pedido where emissao > trunc(sysdate)-5 ;
   insert into resumo_pedido
       ( SELECT FD.DESCRICAO FORN, T.EMISSAO, T.PEDIDO_KEY, T.SETOR_COMPRA_KEY, T.FLAG_COMPRA, T.FORNECEDOR_KEY, T.DIVISAO_KEY
              ,T.PED_CAIXAS ,T.ENT_CAIXAS, T.PED_VALOR, T.ENT_VALOR, T.PED_LOJAS, T.ENT_LOJAS, T.PED_ITENS, T.ENT_ITENS
              ,D.DEVOLUCAO, F.CONTA_FORN
        FROM
         ( SELECT * FROM (
             SELECT PED.EMISSAO, PED.PEDIDO_KEY, PED.SETOR_COMPRA_KEY, PED.FLAG_COMPRA, PED.FORNECEDOR_KEY, PED.DIVISAO_KEY,
                    PED.PED_CAIXAS, ENT.ENT_CAIXAS, PED.PED_VALOR, ENT.ENT_VALOR, PED.PED_LOJAS, ENT.ENT_LOJAS,
                    PED.PED_ITENS, ENT.ENT_ITENS
             FROM (
               SELECT MIN(PM.DATA_EMISSAO)EMISSAO, P.PEDIDO_KEY, PROD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA, CF.FORNECEDOR_KEY
                       ,CF.DIVISAO_KEY, SUM(IP.QUANTIDADE) PED_CAIXAS
                       ,SUM(IP.QUANTIDADE * (  NI.VALOR_BRUTO -   NVL(NI.DESCONTO_TOTAL,0)
                                                  + NVL(NI.IPI_VALOR,0) + NVL(NI.DESPESA_TRIBUTADA,0)
                                                  + NVL(NI.DESPESA_NAO_TRIBUTADA,0)
                                                  + NVL(NI.ICM_FONTE_VALOR,0)
                                                  + NVL(NI.FRETE_VALOR,0))) PED_VALOR
                       ,COUNT(UNIQUE P.LOJA_KEY) PED_LOJAS
                       ,COUNT(UNIQUE IP.PRODUTO_KEY) PED_ITENS
                FROM  ITEM_PEDIDO IP, PEDIDO P, PEDIDO_MASTER PM, NEGOCIACAO_ITEM NI, PRODUTO PROD, TIPO_PEDIDO TP
                     ,NEGOCIACAO N, CONTRATO_FORNECIMENTO CF, REDE_LOJA RL
                WHERE PM.DATA_EMISSAO > TRUNC(SYSDATE)-5
                     AND PM.PEDIDO_KEY      = P.PEDIDO_KEY
                     AND P.PELT_KEY         = IP.PELT_KEY
                     AND IP.PRODUTO_KEY     = NI.PRODUTO_KEY
                     AND NI.NEGOCIACAO_KEY  = PM.NEGOCIACAO_KEY
                     AND PROD.PRODUTO_KEY   = IP.PRODUTO_VENDA_KEY
                     AND TP.TIPO_PEDIDO_KEY = P.TIPO_PEDIDO_KEY
                     AND IP.QUANTIDADE > 0 AND PM.STATUS_PEDIDO_KEY = 1
                     AND P.LOJA_KEY = RL.LOJA_KEY
                     AND RL.REDE_KEY = 1
                     AND N.NEGOCIACAO_KEY = NI.NEGOCIACAO_KEY
                     AND N.CONTRATO_FORNECIMENTO_KEY = CF.CONTRATO_FORNECIMENTO_KEY
                  GROUP BY P.PEDIDO_KEY, PROD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA, CF.FORNECEDOR_KEY, CF.DIVISAO_KEY
             ) PED,
             ( SELECT P.PEDIDO_KEY, PROD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA
                       ,NVL(SUM(MC.QUANTIDADE_FATURADA), 0) ENT_CAIXAS
                       ,NVL(SUM(MC.QUANTIDADE_FATURADA * MC.CUSTO_EMBALAGEM_FINAL), 0)ENT_VALOR
                       ,COUNT(UNIQUE ME.LOJA_KEY) ENT_LOJAS
                       ,COUNT(UNIQUE MC.PRODUTO_COMPRADO_KEY) ENT_ITENS
                FROM  ITEM_PEDIDO IP, PEDIDO P, PEDIDO_MASTER PM, NEGOCIACAO_ITEM NI, PRODUTO PROD, TIPO_PEDIDO TP
                      ,NEGOCIACAO N, CONTRATO_FORNECIMENTO CF, REDE_LOJA RL, MOVIMENTO_COMPRA MC, MOVIMENTO_ESTOQUE ME
                WHERE PM.DATA_EMISSAO > TRUNC(SYSDATE)-5
                     AND PM.PEDIDO_KEY      = P.PEDIDO_KEY
                     AND P.PELT_KEY         = IP.PELT_KEY
                     AND NI.PRODUTO_KEY     = IP.PRODUTO_KEY
                     AND NI.NEGOCIACAO_KEY  = PM.NEGOCIACAO_KEY
                     AND PROD.PRODUTO_KEY   = IP.PRODUTO_VENDA_KEY
                     AND TP.TIPO_PEDIDO_KEY = P.TIPO_PEDIDO_KEY
                     AND IP.QUANTIDADE > 0 AND PM.STATUS_PEDIDO_KEY = 1
                     AND P.LOJA_KEY = RL.LOJA_KEY
                     AND RL.REDE_KEY = 1
                     AND N.NEGOCIACAO_KEY = NI.NEGOCIACAO_KEY
                     AND N.CONTRATO_FORNECIMENTO_KEY = CF.CONTRATO_FORNECIMENTO_KEY
                     AND P.PEDIDO_KEY = MC.PEDIDO_KEY
                     AND P.ENTREGA = MC.ENTREGA
                     AND P.LOJA_KEY = ME.LOJA_KEY
                     AND P.TIPO_PEDIDO_KEY = MC.TIPO_PEDIDO_KEY
                     AND IP.PRODUTO_KEY = MC.PRODUTO_COMPRADO_KEY
                     AND MC.CUSTO_EMBALAGEM_FINAL  > 0
                     AND ME.MOVIMENTO_ESTOQUE_KEY  = MC.MOVIMENTO_ESTOQUE_KEY
                     AND ME.TIPO_MOVIMENTO_KEY <> 701
                  GROUP BY P.PEDIDO_KEY, PROD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA, CF.FORNECEDOR_KEY, CF.DIVISAO_KEY
             ) ENT
             WHERE  PED.PEDIDO_KEY = ENT.PEDIDO_KEY(+)
             AND PED.SETOR_COMPRA_KEY = ENT.SETOR_COMPRA_KEY(+)
             AND PED.FLAG_COMPRA = ENT.FLAG_COMPRA(+)
            )
        ) T,
        ( SELECT NI.PEDIDO_KEY, PD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA, CF.FORNECEDOR_KEY
                 ,CF.DIVISAO_KEY, -SUM(ME.VALOR*TM.SINAL_ESTOQUE) DEVOLUCAO
            FROM MOVIMENTO_ESTOQUE ME, MOVIMENTO_COMPRA MC, NOTA_FISCAL NF
                ,NOTA_FISCAL_ITEM NI, PRODUTO PD, PEDIDO P, PEDIDO_MASTER PM, TIPO_PEDIDO TP
                ,NEGOCIACAO N, CONTRATO_FORNECIMENTO CF, REDE_LOJA RL, TIPO_MOVIMENTO TM
           WHERE MC.MOVIMENTO_ESTOQUE_KEY = ME.MOVIMENTO_ESTOQUE_KEY
           AND NF.NF_KEY = MC.NF_KEY
           AND NI.NF_KEY = NF.NF_KEY
           AND NI.PRODUTO_KEY = MC.PRODUTO_COMPRADO_KEY
           AND NI.CONTROLE_ESTOQUE = ME.PRODUTO_KEY
           AND NI.CONTROLE_ESTOQUE = PD.PRODUTO_KEY
           AND NF.DATA_EMISSAO = ME.DATA_MOVIMENTO
           AND PM.PEDIDO_KEY = P.PEDIDO_KEY
           AND NI.PEDIDO_KEY = P.PEDIDO_KEY
           AND NI.ENTREGA = P.ENTREGA
           AND NF.LOJA_KEY = P.LOJA_KEY
           AND NI.TIPO_PEDIDO_KEY = P.TIPO_PEDIDO_KEY
           AND PM.DATA_EMISSAO > TRUNC(SYSDATE)-5
           AND TP.TIPO_PEDIDO_KEY = P.TIPO_PEDIDO_KEY
           AND P.LOJA_KEY = RL.LOJA_KEY
           AND RL.REDE_KEY = 1
           AND N.NEGOCIACAO_KEY = PM.NEGOCIACAO_KEY
           AND NI.PEDIDO_KEY IS NOT NULL
           AND N.CONTRATO_FORNECIMENTO_KEY = CF.CONTRATO_FORNECIMENTO_KEY
           AND TM.TIPO_MOVIMENTO_KEY = ME.TIPO_MOVIMENTO_KEY
           GROUP BY NI.PEDIDO_KEY, PD.SETOR_COMPRA_KEY, TP.FLAG_COMPRA, CF.FORNECEDOR_KEY, CF.DIVISAO_KEY
       ) D,
       (SELECT FLAG_COMPRA, C.PEDIDO_KEY, C.SETOR_COMPRA_KEY, C.FORNECEDOR_KEY, C.DIVISAO_KEY, C.CONTA_FORN
            FROM ( SELECT MC.PEDIDO_KEY, MC.TIPO_PEDIDO_KEY, ME.SETOR_COMPRA_KEY, ME.FORNECEDOR_KEY, ME.DIVISAO_KEY
                          ,SUM(MC.QUANTIDADE_ENTREGUE * MC.CUSTO_EMBALAGEM_FINAL) CONTA_FORN
                    FROM MOVIMENTO_ESTOQUE ME, MOVIMENTO_COMPRA MC
                    WHERE ME.TIPO_MOVIMENTO_KEY = 701
                     AND MC.MOVIMENTO_ESTOQUE_KEY = ME.MOVIMENTO_ESTOQUE_KEY
                     AND VALOR * QUANTIDADE > 0
                     AND (MC.PEDIDO_KEY, MC.ENTREGA, ME.LOJA_KEY)
                           IN ( SELECT UNIQUE P.PEDIDO_KEY, P.ENTREGA, P.LOJA_KEY
                                 FROM PEDIDO P, PEDIDO_MASTER PM
                                 WHERE P.PEDIDO_KEY = PM.PEDIDO_KEY
                                 AND PM.DATA_EMISSAO > TRUNC(SYSDATE)-5 )
                     GROUP BY MC.PEDIDO_KEY, MC.TIPO_PEDIDO_KEY, ME.SETOR_COMPRA_KEY, ME.FORNECEDOR_KEY, ME.DIVISAO_KEY
                  ) C, TIPO_PEDIDO TP
            WHERE TP.TIPO_PEDIDO_KEY = C.TIPO_PEDIDO_KEY
       ) F, FORNECEDOR_DIVISAO FD
       WHERE T.PEDIDO_KEY = D.PEDIDO_KEY(+)
       AND T.SETOR_COMPRA_KEY = D.SETOR_COMPRA_KEY(+)
       AND T.FLAG_COMPRA = D.FLAG_COMPRA(+)
       AND T.FORNECEDOR_KEY = D.FORNECEDOR_KEY(+)
       AND T.DIVISAO_KEY = D.DIVISAO_KEY(+)
       AND T.PEDIDO_KEY = F.PEDIDO_KEY(+)
       AND T.SETOR_COMPRA_KEY = F.SETOR_COMPRA_KEY(+)
       AND T.FLAG_COMPRA = F.FLAG_COMPRA(+)
       AND T.FORNECEDOR_KEY = F.FORNECEDOR_KEY(+)
       AND T.DIVISAO_KEY = F.DIVISAO_KEY(+)
       AND T.FORNECEDOR_KEY = FD.FORNECEDOR_KEY
       AND T.DIVISAO_KEY = FD.DIVISAO_KEY
      )
       ORDER BY T.PEDIDO_KEY;
end relatorio_pedidos;
/

create or replace procedure relatorio_cobertura as
 begin
   execute immediate 'truncate table resumo_cobertura';
   insert /*+ append*/ into resumo_cobertura
   ( select distinct a.loja_key, a.setor_compra_key
            ,a.produto_key, a.descricao
            ,nvl(fe.quantidade, 0) saldo
            ,fe.custo_unitario_com_icm custo
            ,a.dias_sem_venda, a.ultima_compra, a.ultima_venda
            ,a.quantidade, a.valor, a.media, V.QTD, V.QTD_DIAS, V.VENDA_DIARIA, V.PRIMEIRA_VENDA
            ,a.ultima_compra_quantidade
            ,a.ultima_compra_fornecedor_key
            ,a.ultima_compra_divisao_key
            ,a.ultima_compra_custo_bruto
            ,a.ultima_compra_custo_liquido
            ,a.sub_grupo_produto_key
            ,round(nvl(fe.quantidade, 0) / decode(v.venda_diaria, 0, 1, v.venda_diaria),2) cobertura
            ,fe.custo_unitario custo_liquido
            ,fe.custo_unitario_com_icm custo_bruto
     from
     ( select distinct p.produto_key, um.loja_key, p.descricao, p.setor_compra_key
              ,coalesce(trunc((sysdate-1) - me.data_movimento), 0) dias_sem_venda, me.data_movimento ultima_venda
              ,coalesce(me.quantidade, 0) quantidade, coalesce(me.valor, 0) valor
              ,coalesce(me.valor/decode(me.quantidade, 0, 1, me.quantidade), 0) media
              ,me2.data_movimento as ultima_compra
              ,me2.quantidade as ultima_compra_quantidade
              ,me2.fornecedor_key as ultima_compra_fornecedor_key
              ,me2.divisao_key as ultima_compra_divisao_key
              ,me2.custo_estoque_com_icm as ultima_compra_custo_bruto
              ,me2.custo_estoque as ultima_compra_custo_liquido
              ,p.sub_grupo_produto_key as sub_grupo_produto_key
        from produto p
       join ultimo_movimento um on um.produto_key = p.produto_key
       left join movimento_estoque me  
        on me.movimento_estoque_key = um.venda
       left join movimento_estoque me2 
        on me2.movimento_estoque_key = coalesce(um.compra, um.transferencia)
        and me2.quantidade > 0       
       where p.somar_venda = 1
     ) a,
     ( select rme.produto_key, rme.loja_key, min(c.data) PRIMEIRA_VENDA, sum(RME.VENDA_QTD) QTD
              ,ROUND(trunc(sysdate) - MIN(c.data)) QTD_DIAS
              ,ROUND(SUM(RME.VENDA_QTD) /
              (case when trunc(sysdate) - MIN(c.data) < 1 then 1 else trunc(sysdate) - MIN(c.data) end ),3) VENDA_DIARIA
       from RESUMO_MOVIMENTO_ESTOQUE_60D rme
       inner join calendario c on RME.CALENDARIO_KEY = C.CALENDARIO_KEY
       where C.DATA >= trunc(sysdate) - 42
       group by rme.produto_key, rme.loja_key
     ) v, ficha_estoque fe
     where v.produto_key = a.produto_key
     and v.loja_key = a.loja_key
     and v.loja_key <> 900
     and fe.produto_key = v.produto_key
     and fe.loja_key = v.loja_key
   );
   commit;
end relatorio_cobertura;
/

create or replace procedure relatorio_margem as
 begin
   delete from resumo_margem
   where DATA_MOVIMENTO between sysdate-2 and sysdate ;
   insert into resumo_margem
         SELECT ME.DATA_MOVIMENTO,me.loja_key,nvl(ME.setor_compra_key,0) setor_compra_key,me.produto_key
          ,-SUM(ME.VALOR* TM.SINAL_ESTOQUE)  venda
          ,-SUM(ME.CUSTO_ESTOQUE_COM_ICM*ME.QUANTIDADE * TM.SINAL_ESTOQUE) custo
          ,-SUM(ME.VALOR* TM.SINAL_ESTOQUE * (M.QUEBRA/100)) QUEBRA
          , CASE WHEN -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) <> 0 AND -SUM(ME.VALOR* TM.SINAL_ESTOQUE) / -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) < 0.99
                     THEN 0 ELSE -SUM(ME.VALOR* TM.SINAL_ESTOQUE)  END  AS VENDA_NORMAL
          , CASE WHEN -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) <> 0 AND -SUM(ME.VALOR* TM.SINAL_ESTOQUE) / -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) < 0.99
                     THEN  -SUM(ME.VALOR* TM.SINAL_ESTOQUE) ELSE 0 END  AS VENDA_OFERTA
          , CASE WHEN -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) <> 0 AND -SUM(ME.VALOR* TM.SINAL_ESTOQUE) / -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) < 0.99
                     THEN  -SUM(ME.CUSTO_ESTOQUE_COM_ICM*ME.QUANTIDADE * TM.SINAL_ESTOQUE) ELSE 0 END  AS CUSTO_OFERTA
          , CASE WHEN -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) <> 0 AND -SUM(ME.VALOR* TM.SINAL_ESTOQUE) / -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) < 0.99
                     THEN 0 ELSE  -SUM(ME.CUSTO_ESTOQUE_COM_ICM*ME.QUANTIDADE * TM.SINAL_ESTOQUE) END  AS CUSTO_NORMAL
          , CASE WHEN -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) <> 0 AND -SUM(ME.VALOR* TM.SINAL_ESTOQUE) / -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) < 0.99
                     THEN  -SUM(ME.VALOR* TM.SINAL_ESTOQUE * (M.QUEBRA/100))  ELSE 0 END  AS QUEBRA_OFERTA
          , CASE WHEN -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) <> 0 AND -SUM(ME.VALOR* TM.SINAL_ESTOQUE) / -SUM(COALESCE(PRECO_LOJA, PRECO_REGIAO)*QUANTIDADE*TM.SINAL_ESTOQUE) < 0.99
                     THEN 0  ELSE  -SUM(ME.VALOR* TM.SINAL_ESTOQUE * (M.QUEBRA/100)) END  AS QUEBRA_NORMAL
           FROM MOVIMENTO_ESTOQUE ME,TIPO_MOVIMENTO TM,PRODUTO P,MARGEM M, preco_atual pa,LOJA L
           WHERE ME.TIPO_MOVIMENTO_KEY = TM.TIPO_MOVIMENTO_KEY
             AND   ME.DATA_MOVIMENTO between sysdate-2 and sysdate
             AND   TM.MOVIMENTO = 'V'
             AND   P.PRODUTO_KEY = ME.PRODUTO_KEY AND P.SOMAR_VENDA = 1
             AND   M.MARGEM_KEY(+) = P.MARGEM_KEY  AND ME.LOJA_KEY = L.PESSOA_KEY
             AND   PA.PRODUTO_KEY(+) = ME.PRODUTO_KEY
             AND   PA.LOJA_KEY(+) = ME.LOJA_KEY
             and ME.LOJA_KEY < 900
           GROUP BY ME.DATA_MOVIMENTO,nvl(ME.setor_compra_key,0),me.loja_key,me.produto_key;
end relatorio_margem;
/

create or replace procedure relatorio_tipo_mov_estoque as
    calendarioKey number;
    data_min date;
    movimento_atual number;
    nome_key string(40);
begin
    nome_key := 'relatorio.tipo_mov_estoque';
    data_min := relatorio.mov_estoque_ultima_data(nome_key, add_months(trunc(sysdate, 'month'), -2));
    data_min := trunc(data_min, 'month');
    movimento_atual := relatorio.mov_estoque_atualiza(nome_key);
    delete from resumo_tipo_movimento_estoque
    where  (ano, mes) in (
      select distinct ano, mes
      from   calendario
      where  data >= data_min);
    insert into resumo_tipo_movimento_estoque (
    select ano, mes, loja_key, produto_key, tipo_movimento_key, count(*) numero_registros,
           sum(me.quantidade) quantidade, sum(me.valor) valor_bruto, sum(me.icms_venda) icms,
           sum(me.pis_valor) pis, sum(me.cofins_valor) cofins
    from   movimento_estoque me join calendario c on me.data_movimento = c.data
    where  data_movimento >= data_min
    group  by ano, mes, loja_key, produto_key, tipo_movimento_key);
end relatorio_tipo_mov_estoque;
/

create or replace procedure relatorio_venda_categoria(inicial date, final date) as
 begin
   delete from resumo_venda_categoria where to_date(periodo,'mm-yyyy') between inicial and final;
   insert into resumo_venda_categoria (PERIODO,LOJA_KEY,DEPARTAMENTO_KEY,SECAO_KEY,GRUPO_PRODUTO_KEY,SUB_GRUPO_PRODUTO_KEY,VENDA,CUSTO,CUSTO_SI,QUEBRA,ICMS_VENDA,VENDA_QTD,PIS_VALOR,COFINS_VALOR,TROCA_VALOR,TROCA_QTD)
   ( select vendas.*, trocas.troca_valor, trocas.troca_qtd
     from
     ( SELECT to_char(inicial,'mm-yyyy') periodo,
              me.loja_key,d.departamento_key,s.secao_key,gp.grupo_produto_key,sgp.sub_grupo_produto_key
              ,-SUM(ME.VALOR* TM.SINAL_ESTOQUE) venda_valor
              ,-SUM(ME.CUSTO_ESTOQUE_COM_ICM*ME.QUANTIDADE * TM.SINAL_ESTOQUE) custo
              ,-SUM(ME.CUSTO_ESTOQUE*ME.QUANTIDADE * TM.SINAL_ESTOQUE) custo_si
              ,-SUM(ME.VALOR* TM.SINAL_ESTOQUE * (M.QUEBRA/100)) QUEBRA
              ,-sum(me.icms_venda * TM.SINAL_ESTOQUE ) icms_venda
              ,-SUM(ME.QUANTIDADE * TM.SINAL_ESTOQUE) venda_qtd
              ,-SUM(ME.pis_valor * TM.SINAL_ESTOQUE) pis_valor
              ,-SUM(ME.cofins_valor * TM.SINAL_ESTOQUE) cofins_valor
       FROM MOVIMENTO_ESTOQUE ME,TIPO_MOVIMENTO TM,PRODUTO P,MARGEM M,SUB_GRUPO_PRODUTO SGP
            ,GRUPO_PRODUTO GP,SECAO S,DEPARTAMENTO D
       WHERE ME.TIPO_MOVIMENTO_KEY = TM.TIPO_MOVIMENTO_KEY
       AND   ME.DATA_MOVIMENTO between inicial and final
       AND   TM.MOVIMENTO = 'V'
       AND   P.PRODUTO_KEY = ME.PRODUTO_KEY
       AND   M.MARGEM_KEY(+) = P.MARGEM_KEY
       AND   P.SUB_GRUPO_PRODUTO_KEY = SGP.SUB_GRUPO_PRODUTO_KEY
       AND   SGP.GRUPO_PRODUTO_KEY = GP.GRUPO_PRODUTO_KEY
       AND   GP.SECAO_KEY = S.SECAO_KEY
       AND   S.DEPARTAMENTO_KEY = D.DEPARTAMENTO_KEY
       AND   P.SOMAR_VENDA = 1
       and me.loja_key < 900
       GROUP BY me.loja_key,d.departamento_key,s.secao_key,gp.grupo_produto_key,sgp.sub_grupo_produto_key
     ) vendas,
     ( SELECT me.loja_key, p.sub_grupo_produto_key
              ,-SUM(ME.CUSTO_ESTOQUE_COM_ICM*ME.QUANTIDADE * TM.SINAL_ESTOQUE) troca_valor
              ,-SUM(ME.QUANTIDADE * TM.SINAL_ESTOQUE) troca_qtd
       FROM MOVIMENTO_ESTOQUE ME,TIPO_MOVIMENTO TM,PRODUTO P
       WHERE ME.TIPO_MOVIMENTO_KEY = TM.TIPO_MOVIMENTO_KEY
       AND   ME.DATA_MOVIMENTO between inicial and final
       AND   TM.MOVIMENTO = 'T'
       AND   TM.TIPO_MOVIMENTO_KEY IN (401 ,402,405,410,421,422,425,430)
       AND   P.PRODUTO_KEY = ME.PRODUTO_KEY
       AND   P.SOMAR_VENDA = 1 and me.loja_key < 900
       GROUP BY me.loja_key, p.sub_grupo_produto_key
     ) trocas
     where vendas.loja_key = trocas.loja_key (+)
     and vendas.sub_grupo_produto_key = trocas.sub_grupo_produto_key (+)
   );
   commit;
end relatorio_venda_categoria;
/

create or replace procedure relatorio_cupom_fiscal(dia date) as
    calendarioKeyInicial number;
    calendarioKeyFinal number;
  begin
    calendarioKeyInicial := to_number(to_char(dia -7, 'yyyymmdd'));
    calendarioKeyFinal := to_number(to_char(dia, 'yyyymmdd'));
    delete from resumo_cupom_fiscal  where  calendario_key between calendarioKeyInicial and calendarioKeyFinal;
    insert into resumo_cupom_fiscal(RESUMO_CUPOM_FISCAL_KEY,
                                    LOJA_KEY,
                                    CALENDARIO_KEY,
                                    RECEBIMENTO_KEY,
                                    NUMERO_ECF,
                                    NUMERO_CUPOM,
                                    QUANTIDADE_ITENS,
                                    QUANTIDADE_TOTAL,
                                    VALOR_TOTAL,
                                    VALOR_RECEBIDO,
                                    CUPOM_FISCAL_KEY,
                                    VALOR_CUSTO,
                                    VALOR_PRECO)
                                    select seq_resumo_cupom_fiscal.nextval, t.*
                                      from
                                        (select cf.loja_key,
                                            cf.calendario_key,
                                            cr.recebimento_key,
                                            cf.ecf,
                                            cf.cupom_numero,
                                            cci.quantidade_itens,
                                            cci.quantidade_total,
                                            cci.valor_total,
                                            cr.valor_recebido - cr.troco_fornecido as valor_recebido,
                                            cf.cupom_fiscal_key,
                                            cci.valor_custo,
                                            cci.valor_preco
                                        from cupom_fiscal cf,
                                            cupom_recebimento cr,
                                          (select ci.cupom_fiscal_key,
                                            count(distinct p.produto_key) quantidade_itens,
                                            sum(ci.quantidade) quantidade_total,
                                            sum(ci.valor) valor_total,
                                            sum(CASE WHEN COALESCE(CT.VALOR,0) > 0 THEN (CT.VALOR * P.FATOR_PRECO) * CI.QUANTIDADE
                                                else
                                                  (CASE WHEN FC.CUSTO_UNITARIO_COM_ICM < 0 OR FC.CUSTO_UNITARIO_COM_ICM IS NULL THEN CI.VALOR ELSE (FC.CUSTO_UNITARIO_COM_ICM * P.FATOR_PRECO) * CI.QUANTIDADE END)
                                                   END) as valor_custo,
                                            sum(ci.valor / case when ci.quantidade =0 then 1 else ci.quantidade end) as valor_preco
                                          from cupom_item ci
                                          inner join item it on(it.barra_key = ci.barra_key)
                                          inner join produto p on p.produto_key = it.produto_key
                                          inner join cupom_fiscal cf on(cf.cupom_fiscal_key = ci.cupom_fiscal_key)
                                          left join ficha_estoque fc on(fc.produto_key = coalesce(p.controle_estoque,p.produto_key) and fc.loja_key = cf.loja_key)
                                          left join custo_teorico ct on ct.produto_key = coalesce(p.controle_estoque,p.produto_key)
                                          where ci.calendario_key between calendarioKeyInicial and calendarioKeyFinal
                                          and cf.calendario_key BETWEEN calendarioKeyInicial and calendarioKeyFinal
                                          GROUP BY ci.cupom_fiscal_key
                                          ) cci
                                        where cf.cupom_fiscal_key = cci.cupom_fiscal_key
                                        and cf.cupom_fiscal_key   = cr.cupom_fiscal_key
                                        order by cf.cupom_fiscal_key)t;
end relatorio_cupom_fiscal;
/

create or replace function "NEXT_VAL" (nome in varchar) return number as
  cmd number;
begin
  execute immediate 'select ' || nome || '.nextval as num from dual' into cmd;
  return cmd;
end "NEXT_VAL";
/

create or replace trigger "BEFORE_SALDO_CONTABIL_POR_COMP"
	BEFORE INSERT OR UPDATE ON SALDO_CONTABIL_POR_COMPETENCIA
	FOR EACH ROW
	BEGIN
		:NEW.SALDO := COALESCE(:NEW.CREDITO, 0) - COALESCE(:NEW.DEBITO, 0);
end "BEFORE_SALDO_CONTABIL_POR_COMP";
/

create or replace trigger "TMP_DELETE_LOJA_TIPO_BALANCA"
	BEFORE DELETE ON LOJA_TIPO_BALANCA
	BEGIN
		RAISE_APPLICATION_ERROR(-20001,'Nao foi possivel completar a operacao. Entre em contato com o suporte. (LOJA_TIPO_BALANCA)');
END "TMP_DELETE_LOJA_TIPO_BALANCA";
/

create or replace trigger "AFTER_PARTIDA_DOBRADA"
	AFTER UPDATE ON PARTIDA_DOBRADA
	FOR EACH ROW
	DECLARE
		/* DECLARANDO O CURSOR */
    CURSOR cursor_movimentos(partidaDobradaKey NUMBER) IS
			SELECT *
			FROM movimento_contabil
			WHERE partida_dobrada_key = partidaDobradaKey;
    /* DECLARANDO O TYPE QUE SER USADO PARA ARMAZENAR CADA LINHA DO CURSOR */
    movimentoContabilRow cursor_movimentos%ROWTYPE;
    /* DECLARANDO VRIAVEIS QUE SERO USADAS NOS CALCULOS */
    valorCredito NUMBER(15,2);
		valorDebito NUMBER(15,2);
	BEGIN
    /* APENAS CASO TENHA OCORRIDO UMA MUDANA DE COMPETNCIA */
    IF (:old.competencia_contabil_key <> :new.competencia_contabil_key) THEN
      /* ATUALIZA OS SALDOS DAS CONTAS CONTBEIS DOS MOVIMENTOS DA PARTIDA*/
      open cursor_movimentos(:new.partida_dobrada_key);
        loop
          fetch cursor_movimentos into movimentoContabilRow;
          exit when cursor_movimentos%NOTFOUND;
          /* DEFINE O VALOR ATUAL DO MOVIMENTO */
          if (movimentoContabilRow.sinal > 0) then
            valorCredito := movimentoContabilRow.valor;
            valorDebito := 0;
          else
            valorDebito := movimentoContabilRow.valor;
            valorCredito := 0;
          end if;
          /* RETIRA O VALOR NA COMPETNCIA E CONTA CONTABIL ANTERIOR */
          UPDATE saldo_contabil_por_competencia
            set debito = coalesce(debito, 0) - valorDebito,
                credito = coalesce(credito, 0) - valorCredito
          where loja_key = :new.loja_key
          AND CONTA_CONTABIL_KEY = movimentoContabilRow.CONTA_CONTABIL_KEY
          and competencia_contabil_key = :old.competencia_contabil_key;
          /* CASO NO EXISTA UM REGISTRO PARA A COMPETENCIA ANTERIOR, CRIA UM */
          if (SQL%ROWCOUNT = 0) then
            insert into saldo_contabil_por_competencia (loja_key, conta_contabil_key, competencia_contabil_key, debito, credito)
            values (:new.loja_key, movimentoContabilRow.conta_contabil_key, :new.competencia_contabil_key, valorDebito * -1, valorCredito * -1);
          end if;
          /* ADICIONA O VALOR NA COMPETNCIA E CONTA CONTABIL ATUAL */
          UPDATE saldo_contabil_por_competencia
            set debito = coalesce(debito, 0) + valorDebito,
                credito = coalesce(credito, 0) + valorCredito
          where loja_key = :new.loja_key
          AND CONTA_CONTABIL_KEY = movimentoContabilRow.CONTA_CONTABIL_KEY
          and competencia_contabil_key = :new.competencia_contabil_key;
          /* CASO NO EXISTA UM REGISTRO PARA A COMPETENCIA ATUAL, CRIA UM */
          if (SQL%ROWCOUNT = 0) then
            insert into saldo_contabil_por_competencia (loja_key, conta_contabil_key, competencia_contabil_key, debito, credito)
            values (:new.loja_key, movimentoContabilRow.conta_contabil_key, :new.competencia_contabil_key, valorDebito, valorCredito);
          end if;
        end loop;      
      close cursor_movimentos;    
    END IF;
end "AFTER_PARTIDA_DOBRADA";
/

create or replace trigger "BEFORE_DIAS_RECEBIMENTO"
	BEFORE INSERT ON DIAS_RECEBIMENTO
	FOR EACH ROW
		WHEN (NEW.DIAS_RECEBIMENTO_KEY IS NULL) DECLARE
		NEXT_KEY NUMBER;
	BEGIN
		SELECT SEQ_DIAS_RECEBIMENTO.NEXTVAL INTO NEXT_KEY FROM DUAL;
		:NEW.DIAS_RECEBIMENTO_KEY := NEXT_KEY;
end "BEFORE_DIAS_RECEBIMENTO";
/

create or replace trigger "TMP_DELETE_LOJA_TP_TERM_CONS"
	BEFORE DELETE ON LOJA_TIPO_TERMINAL_CONSULTA
	BEGIN
		RAISE_APPLICATION_ERROR(-20001,'Nao foi possivel completar a operacao. Entre em contato com o suporte. (LOJA_TIPO_TERMINAL_CONSULTA)');
END "TMP_DELETE_LOJA_TP_TERM_CONS";
/

create or replace trigger "TMP_DELETE_CONV_CONTA_BANCARIA"
	BEFORE DELETE ON CONVENIO_CONTA_BANCARIA
	BEGIN
		RAISE_APPLICATION_ERROR(-20001,'Nao foi possivel completar a operacao. Entre em contato com o suporte. (CONVENIO_CONTA_BANCARIA)');
END "TMP_DELETE_CONV_CONTA_BANCARIA";
/

create or replace trigger "BEFORE_FORNECEDOR_DIVISAO"
	before insert on fornecedor_divisao
	for each row
		WHEN (NEW.FORNECEDOR_DIVISAO_KEY IS NULL) declare
		NEXT_KEY number;
	begin
		SELECT SEQ_FORNECEDOR_DIVISAO.NEXTVAL INTO NEXT_KEY FROM DUAL;
		:NEW.FORNECEDOR_DIVISAO_KEY := NEXT_KEY;
end "BEFORE_FORNECEDOR_DIVISAO";
/

create or replace trigger "TMP_DELETE_COF_TIPO_PEDIDO"
	BEFORE DELETE ON COF_TIPO_PEDIDO
	BEGIN
		RAISE_APPLICATION_ERROR(-20001,'Nao foi possivel completar a operacao. Entre em contato com o suporte. (COF_TIPO_PEDIDO)');
END "TMP_DELETE_COF_TIPO_PEDIDO";
/

create or replace trigger "AFTER_MOVIMENTO_CONTABIL"
	AFTER INSERT ON MOVIMENTO_CONTABIL
	FOR EACH ROW
	DECLARE
		CURSOR partida(partidaDobradaKey NUMBER) IS
			SELECT *
			FROM partida_dobrada
			WHERE partida_dobrada_key = partidaDobradaKey;
		partidaRow partida%ROWTYPE;
		valorCredito NUMBER(15,2);
		valorDebito NUMBER(15,2);
	BEGIN
		open partida(:new.partida_dobrada_key);
			FETCH partida INTO partidaRow;
		close partida;
		if (:new.sinal > 0) then
			valorCredito := :new.valor;
			valorDebito := 0;
		else
			valorDebito := :new.valor;
			valorCredito := 0;
		end if;
    UPDATE saldo_contabil_por_competencia
      set debito = coalesce(debito, 0) + valorDebito,
        credito = coalesce(credito, 0) + valorCredito
      where loja_key = partidaRow.loja_key
      and conta_contabil_key = :new.conta_contabil_key
      and competencia_contabil_key = partidaRow.competencia_contabil_key;
    if (SQL%ROWCOUNT = 0) then
      insert into saldo_contabil_por_competencia (loja_key, conta_contabil_key, competencia_contabil_key, debito, credito)
      values (partidaRow.loja_key, :new.conta_contabil_key, partidaRow.competencia_contabil_key, valorDebito, valorCredito);
    end if;		
end "AFTER_MOVIMENTO_CONTABIL";
/

create or replace trigger "TMP_DELETE_REDE_LOJA"
	BEFORE DELETE ON REDE_LOJA
	BEGIN
		RAISE_APPLICATION_ERROR(-20001,'Nao foi possivel completar a operacao. Entre em contato com o suporte. (REDE_LOJA)');
END "TMP_DELETE_REDE_LOJA";
/

create or replace trigger "TMP_DELETE_LOJA_TIPO_ETIQUETA"
	BEFORE DELETE ON LOJA_TIPO_ETIQUETA
	BEGIN
		RAISE_APPLICATION_ERROR(-20001,'Nao foi possivel completar a operacao. Entre em contato com o suporte. (LOJA_TIPO_ETIQUETA)');
END "TMP_DELETE_LOJA_TIPO_ETIQUETA";
/

create or replace trigger "AFTER_MENU_ACESSO"
	AFTER INSERT ON MENU_ACESSO
	FOR EACH ROW
	DECLARE
	BEGIN
    	UPDATE RESUMO_MENU_ACESSO_POR_USUARIO
			SET QUANTIDADE_DE_ACESSOS = QUANTIDADE_DE_ACESSOS + 1
    	WHERE menu_key = :new.menu_key
    	AND usuario_key = :new.usuario_key;
		if sql%rowcount = 0 then
			insert into RESUMO_MENU_ACESSO_POR_USUARIO (menu_key, usuario_key, quantidade_de_acessos) values (:new.menu_key,:new.usuario_key, 1);
		end if;
END "AFTER_MENU_ACESSO";
/

create or replace trigger "AFTER_MOVIMENTO_ESTOQUE"
	after insert on MOVIMENTO_ESTOQUE
	for each row
		declare
			Cursor tipoMovimento(movimentoKey number) is select * from tipo_movimento tm where tm.tipo_movimento_key = movimentoKey;
			tipoMovimentoRow tipoMovimento%ROWTYPE;
			movimento estoque.MovimentoType;
		begin
			open tipoMovimento(:new.tipo_movimento_key);
			fetch tipoMovimento into tipoMovimentoRow;
			close tipoMovimento;
		movimento.key := :new.movimento_estoque_key;
		movimento.produto := :new.produto_key;
		movimento.origem := :new.produto_origem;
		movimento.loja := :new.loja_key;
		movimento.data := :new.data_movimento;
		movimento.qtd := :new.quantidade;
		movimento.valor := :new.valor;
		movimento.custo := :new.custo_venda;
		movimento.pis := :new.pis_valor;
		movimento.cofins := :new.cofins_valor;
		movimento.icm_key := :new.icm_key;
		movimento.icm := :new.icms_venda;
		movimento.saldo := :new.saldo_estoque;
		movimento.custo_estoque := :new.custo_estoque;
		movimento.custo_estoque_com_icm := :new.custo_estoque_com_icm;
		movimento.setor_compra := :new.setor_compra_key;
		movimento.fornecedor := :new.fornecedor_key;
		movimento.divisao := :new.divisao_key;
		estoque.update_balanco_mensal(movimento, tipoMovimentoRow);
		estoque.update_ultimo_movimento(movimento, tipoMovimentoRow);
end "AFTER_MOVIMENTO_ESTOQUE";
/

create or replace trigger "BEFORE_TIPO_PESSOA"
	before insert on tipo_pessoa
	for each row
		WHEN (NEW.TIPO_PESSOA_KEY IS NULL) declare NEXT_KEY number;
	begin
		SELECT SEQUENCIA_TIPO_PESSOA.NEXTVAL INTO NEXT_KEY FROM DUAL;
		:NEW.TIPO_PESSOA_KEY := NEXT_KEY;
end "BEFORE_TIPO_PESSOA";
/

create or replace TRIGGER "TMP_UPDATE_PRODUTO_CAIXA"
	BEFORE update ON produto
	FOR EACH ROW
	BEGIN
        if :new.controle_estoque is null and :old.controle_estoque is not null and :new.caixa = 1 then 
    		RAISE_APPLICATION_ERROR(-20001,'Nao eh possivel gravar null na coluna controle_estoque da caixa.');
  		end if;
        if :new.preco_equivalente is null and :old.preco_equivalente is not null and :new.caixa = 1 then 
    		RAISE_APPLICATION_ERROR(-20001,'Nao eh possivel gravar null na coluna preco_equivalente da caixa.');
  		end if;
end "TMP_UPDATE_PRODUTO_CAIXA";
/

create or replace trigger "TMP_DELETE_LOJA_TIPO_PDV"
	BEFORE DELETE ON LOJA_TIPO_PDV
	BEGIN
		RAISE_APPLICATION_ERROR(-20001,'Nao foi possivel completar a operacao. Entre em contato com o suporte. (LOJA_TIPO_PDV)');
END "TMP_DELETE_LOJA_TIPO_PDV";
/

create or replace trigger "BEFORE_MOVIMENTO_ESTOQUE"
	before insert on MOVIMENTO_ESTOQUE
	for each row
	declare
		Cursor tipoMovimento(movimentoKey number) is select * from tipo_movimento tm where tm.tipo_movimento_key = movimentoKey;
		tipoMovimentoRow tipoMovimento%ROWTYPE;
		Cursor produto(produtoKey integer) is
			select p.controle_estoque, p.fator_estoque, p.pis_key, p.cofins_key,
			       pis.aliquota pis_aliquota, cofins.aliquota cofins_aliquota
			from produto p
			left join pis on p.pis_key = pis.pis_key
			left join cofins on p.cofins_key = cofins.cofins_key
			where p.produto_key = produtoKey;
		produtoRow produto%ROWTYPE;
		saldo number;
		custo number;
		custoBruto number;
	begin
		open tipoMovimento(:new.tipo_movimento_key);
			fetch tipoMovimento into tipoMovimentoRow;
		close tipoMovimento;
		open produto(:new.produto_key);
			fetch produto into produtoRow;
		close produto;
		if(produtoRow.controle_estoque is not null) then
			:new.produto_origem := :new.produto_key;
			:new.produto_origem_qtd := :new.quantidade;
			:new.produto_key := produtoRow.controle_estoque;
			:new.quantidade := :new.quantidade * produtoRow.fator_estoque;
		end if;
		if(:new.pis_valor is null and produtoRow.pis_aliquota is not null) then
			:new.pis_key := produtoRow.pis_key;
			:new.pis_valor := :new.valor * produtoRow.pis_aliquota / 100;
		end if;
		if(:new.cofins_valor is null and produtoRow.cofins_aliquota is not null) then
			:new.cofins_key := produtoRow.cofins_key;
			:new.cofins_valor := :new.valor * produtoRow.cofins_aliquota / 100;
		end if;
		custo := :new.custo_estoque;
		custoBruto := :new.custo_estoque_com_icm;
		estoque.ficha_estoque(:new.produto_key, :new.loja_key, :new.data_movimento,
			:new.quantidade, :new.valor, :new.icms_venda,  :new.pis_valor,
			:new.cofins_valor, tipoMovimentoRow.sinal_estoque,
			tipoMovimentoRow.sinal_em_terceiros, tipoMovimentoRow.sinal_de_terceiros,
			tipoMovimentoRow.sinal_estoque_futuro, saldo, custo, custobruto);
		if(tipoMovimentoRow.sinal_estoque < 0) then
			:new.custo_venda := custo;
		end if;
		:new.saldo_estoque := saldo;
		:new.custo_estoque := custo;
		:new.custo_estoque_com_icm := custoBruto;
		if(tipoMovimentoRow.movimento = 'V' and custoBruto = 0 and :new.quantidade <> 0) then
			:new.custo_estoque := (:new.valor - :new.icms_venda - nvl(:new.pis_valor, 0) - nvl(:new.cofins_valor, 0)) / :new.quantidade;
			:new.custo_estoque_com_icm := :new.valor / :new.quantidade;
		end if;
		insert into keys(keyi1) values (:new.movimento_estoque_key);
end "BEFORE_MOVIMENTO_ESTOQUE";
/

create or replace TRIGGER "AFTER_MOVIMENTO_ESTOQUE_TERC"
	after insert on MOVIMENTO_ESTOQUE_TERCEIRO
	for each row
		declare
      indicador number;
      terceiro number;
		begin			
		if(:new.proprietario_key = :new.loja_movimento_key) then
        indicador := 1; --Item de propriedade da loja em posse de terceiros        
        terceiro := :new.portador_key;
    else
        indicador := 2; --Item de propriedade de terceiros em posse da loja
        terceiro := :new.proprietario_key;        
		end if;
    UPDATE ficha_estoque_terceiros
		SET quantidade = (quantidade + (:new.quantidade * :new.sinal))
    WHERE LOJA_KEY = :new.LOJA_MOVIMENTO_KEY
    AND   INDICADOR_DE_PROPRIEDADE_KEY = indicador
    AND   TERCEIRO_KEY = terceiro
    AND   PRODUTO_KEY = :new.PRODUTO_KEY;
    if sql%rowcount = 0 then
      insert into ficha_estoque_terceiros values (:new.loja_movimento_key,indicador,terceiro,:new.PRODUTO_KEY,:new.QUANTIDADE*:new.SINAL);
    end if;
end "AFTER_MOVIMENTO_ESTOQUE_TERC";
/

create or replace trigger "BEFORE_MOVIMENTO_CONTABIL"
	BEFORE INSERT ON MOVIMENTO_CONTABIL
	FOR EACH ROW
	DECLARE
		CURSOR partida(partidaDobradaKey NUMBER) IS
			SELECT *
			FROM partida_dobrada
			WHERE partida_dobrada_key = partidaDobradaKey;
		partidaRow partida%ROWTYPE;
		CURSOR saldoContabil(lojaKey NUMBER, contaContabilKey NUMBER ) IS
			SELECT *
			FROM saldo_contabil_atual
			WHERE loja_key = lojaKey
			AND conta_contabil_key = contaContabilKey;
		saldoContabilRow saldoContabil%ROWTYPE;
		saldoInicial NUMBER(15,2);
		saldoFinal NUMBER(15,2);
	BEGIN
		open partida(:new.partida_dobrada_key);
			FETCH partida INTO partidaRow;
		close partida;
		open saldoContabil(partidaRow.loja_key, :new.conta_contabil_key);
			FETCH saldoContabil INTO saldoContabilRow;
		close saldoContabil;
		saldoInicial := coalesce(saldoContabilRow.saldo, 0);
		saldoFinal  := saldoInicial + (:new.valor * :new.sinal);
		update saldo_contabil_atual
			set saldo = saldoFinal
			where loja_key = partidaRow.loja_key
			and conta_contabil_key = :new.conta_contabil_key;
		if (SQL%ROWCOUNT = 0) then
			insert into saldo_contabil_atual (loja_key, conta_contabil_key, saldo)
			values(partidaRow.loja_key, :new.conta_contabil_key, saldoFinal);
		end if;
end "BEFORE_MOVIMENTO_CONTABIL";
/

create or replace trigger "AFTER_MOVIMENTO_CONTA_FORN"
	AFTER INSERT ON MOVIMENTO_CONTA_FORNECEDOR
	FOR EACH ROW
	DECLARE
		saldoDebito number(15,2);
		saldoCredito number(15,2);
		saldoFinal number(15,2);
	BEGIN
		if(:new.sinal > 0) then
			saldoDebito := 0;
			saldoCredito := :new.valor;
			saldoFinal := :new.sinal * :new.valor;
		else
			saldoDebito := :new.valor;
			saldoCredito := 0;
			saldoFinal := :new.sinal * :new.valor;
		end if;
		UPDATE RESUMO_CONTA_COMERCIAL
			SET DEBITO = DEBITO + saldoDebito,
				CREDITO = CREDITO + saldoCredito,
				SALDO = SALDO + saldoFinal
		WHERE FORNECEDOR_DIVISAO_KEY = :new.fornecedor_divisao_key
		AND LOJA_KEY = :new.loja_key
		AND SETOR_COMPRA_KEY = :new.setor_compra_key
		AND TIPO_LANCAMENTO_KEY  = :new.tipo_lancamento_key;
		if(SQL%ROWCOUNT = 0) then
			INSERT INTO RESUMO_CONTA_COMERCIAL(FORNECEDOR_DIVISAO_KEY, LOJA_KEY, SETOR_COMPRA_KEY, TIPO_LANCAMENTO_KEY, DEBITO, CREDITO, SALDO)
			VALUES( :new.fornecedor_divisao_key, :new.loja_key, :new.setor_compra_key, :new.tipo_lancamento_key, saldoDebito, saldoCredito, saldoFinal);
		end if;
END "AFTER_MOVIMENTO_CONTA_FORN";
/

